{"ast":null,"code":"/* Copyright 2017 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n  if (typeof exports === 'object' && typeof module === 'object') module.exports = factory();else if (typeof define === 'function' && define.amd) define(\"pdfjs-dist/build/pdf\", [], factory);else if (typeof exports === 'object') exports[\"pdfjs-dist/build/pdf\"] = factory();else root[\"pdfjs-dist/build/pdf\"] = root.pdfjsDistBuildPdf = factory();\n})(this, function () {\n  return (\n    /******/\n    function (modules) {\n      // webpackBootstrap\n\n      /******/\n      // The module cache\n\n      /******/\n      var installedModules = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __w_pdfjs_require__(moduleId) {\n        /******/\n\n        /******/\n        // Check if module is in cache\n\n        /******/\n        if (installedModules[moduleId]) {\n          /******/\n          return installedModules[moduleId].exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = installedModules[moduleId] = {\n          /******/\n          i: moduleId,\n\n          /******/\n          l: false,\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        modules[moduleId].call(module.exports, module, module.exports, __w_pdfjs_require__);\n        /******/\n\n        /******/\n        // Flag the module as loaded\n\n        /******/\n\n        module.l = true;\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /******/\n\n      /******/\n      // expose the modules object (__webpack_modules__)\n\n      /******/\n\n\n      __w_pdfjs_require__.m = modules;\n      /******/\n\n      /******/\n      // expose the module cache\n\n      /******/\n\n      __w_pdfjs_require__.c = installedModules;\n      /******/\n\n      /******/\n      // identity function for calling harmony imports with the correct context\n\n      /******/\n\n      __w_pdfjs_require__.i = function (value) {\n        return value;\n      };\n      /******/\n\n      /******/\n      // define getter function for harmony exports\n\n      /******/\n\n\n      __w_pdfjs_require__.d = function (exports, name, getter) {\n        /******/\n        if (!__w_pdfjs_require__.o(exports, name)) {\n          /******/\n          Object.defineProperty(exports, name, {\n            /******/\n            configurable: false,\n\n            /******/\n            enumerable: true,\n\n            /******/\n            get: getter\n            /******/\n\n          });\n          /******/\n        }\n        /******/\n\n      };\n      /******/\n\n      /******/\n      // getDefaultExport function for compatibility with non-harmony modules\n\n      /******/\n\n\n      __w_pdfjs_require__.n = function (module) {\n        /******/\n        var getter = module && module.__esModule ?\n        /******/\n        function getDefault() {\n          return module['default'];\n        } :\n        /******/\n        function getModuleExports() {\n          return module;\n        };\n        /******/\n\n        __w_pdfjs_require__.d(getter, 'a', getter);\n        /******/\n\n\n        return getter;\n        /******/\n      };\n      /******/\n\n      /******/\n      // Object.prototype.hasOwnProperty.call\n\n      /******/\n\n\n      __w_pdfjs_require__.o = function (object, property) {\n        return Object.prototype.hasOwnProperty.call(object, property);\n      };\n      /******/\n\n      /******/\n      // __webpack_public_path__\n\n      /******/\n\n\n      __w_pdfjs_require__.p = \"\";\n      /******/\n\n      /******/\n      // Load entry module and return exports\n\n      /******/\n\n      return __w_pdfjs_require__(__w_pdfjs_require__.s = 13);\n      /******/\n    }\n    /************************************************************************/\n\n    /******/\n    ([\n    /* 0 */\n\n    /***/\n    function (module, exports, __w_pdfjs_require__) {\n      \"use strict\";\n      /* WEBPACK VAR INJECTION */\n\n      (function (global) {\n        Object.defineProperty(exports, \"__esModule\", {\n          value: true\n        });\n        exports.warn = exports.utf8StringToString = exports.stringToUTF8String = exports.stringToPDFString = exports.stringToBytes = exports.string32 = exports.shadow = exports.setVerbosityLevel = exports.removeNullCharacters = exports.readUint32 = exports.readUint16 = exports.readInt8 = exports.log2 = exports.loadJpegStream = exports.isEvalSupported = exports.isLittleEndian = exports.createValidAbsoluteUrl = exports.isSameOrigin = exports.isNodeJS = exports.isSpace = exports.isString = exports.isNum = exports.isInt = exports.isEmptyObj = exports.isBool = exports.isArrayBuffer = exports.isArray = exports.info = exports.globalScope = exports.getVerbosityLevel = exports.getLookupTableFactory = exports.error = exports.deprecated = exports.createObjectURL = exports.createPromiseCapability = exports.createBlob = exports.bytesToString = exports.assert = exports.arraysToBytes = exports.arrayByteLength = exports.XRefParseException = exports.Util = exports.UnknownErrorException = exports.UnexpectedResponseException = exports.TextRenderingMode = exports.StreamType = exports.StatTimer = exports.PasswordResponses = exports.PasswordException = exports.PageViewport = exports.NotImplementedException = exports.NativeImageDecoding = exports.MissingPDFException = exports.MissingDataException = exports.MessageHandler = exports.InvalidPDFException = exports.CMapCompressionType = exports.ImageKind = exports.FontType = exports.AnnotationType = exports.AnnotationFlag = exports.AnnotationFieldFlag = exports.AnnotationBorderStyleType = exports.UNSUPPORTED_FEATURES = exports.VERBOSITY_LEVELS = exports.OPS = exports.IDENTITY_MATRIX = exports.FONT_IDENTITY_MATRIX = undefined;\n\n        var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n          return typeof obj;\n        } : function (obj) {\n          return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n        };\n\n        __w_pdfjs_require__(14);\n\n        var globalScope = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : undefined;\n        var FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\n        var NativeImageDecoding = {\n          NONE: 'none',\n          DECODE: 'decode',\n          DISPLAY: 'display'\n        };\n        var TextRenderingMode = {\n          FILL: 0,\n          STROKE: 1,\n          FILL_STROKE: 2,\n          INVISIBLE: 3,\n          FILL_ADD_TO_PATH: 4,\n          STROKE_ADD_TO_PATH: 5,\n          FILL_STROKE_ADD_TO_PATH: 6,\n          ADD_TO_PATH: 7,\n          FILL_STROKE_MASK: 3,\n          ADD_TO_PATH_FLAG: 4\n        };\n        var ImageKind = {\n          GRAYSCALE_1BPP: 1,\n          RGB_24BPP: 2,\n          RGBA_32BPP: 3\n        };\n        var AnnotationType = {\n          TEXT: 1,\n          LINK: 2,\n          FREETEXT: 3,\n          LINE: 4,\n          SQUARE: 5,\n          CIRCLE: 6,\n          POLYGON: 7,\n          POLYLINE: 8,\n          HIGHLIGHT: 9,\n          UNDERLINE: 10,\n          SQUIGGLY: 11,\n          STRIKEOUT: 12,\n          STAMP: 13,\n          CARET: 14,\n          INK: 15,\n          POPUP: 16,\n          FILEATTACHMENT: 17,\n          SOUND: 18,\n          MOVIE: 19,\n          WIDGET: 20,\n          SCREEN: 21,\n          PRINTERMARK: 22,\n          TRAPNET: 23,\n          WATERMARK: 24,\n          THREED: 25,\n          REDACT: 26\n        };\n        var AnnotationFlag = {\n          INVISIBLE: 0x01,\n          HIDDEN: 0x02,\n          PRINT: 0x04,\n          NOZOOM: 0x08,\n          NOROTATE: 0x10,\n          NOVIEW: 0x20,\n          READONLY: 0x40,\n          LOCKED: 0x80,\n          TOGGLENOVIEW: 0x100,\n          LOCKEDCONTENTS: 0x200\n        };\n        var AnnotationFieldFlag = {\n          READONLY: 0x0000001,\n          REQUIRED: 0x0000002,\n          NOEXPORT: 0x0000004,\n          MULTILINE: 0x0001000,\n          PASSWORD: 0x0002000,\n          NOTOGGLETOOFF: 0x0004000,\n          RADIO: 0x0008000,\n          PUSHBUTTON: 0x0010000,\n          COMBO: 0x0020000,\n          EDIT: 0x0040000,\n          SORT: 0x0080000,\n          FILESELECT: 0x0100000,\n          MULTISELECT: 0x0200000,\n          DONOTSPELLCHECK: 0x0400000,\n          DONOTSCROLL: 0x0800000,\n          COMB: 0x1000000,\n          RICHTEXT: 0x2000000,\n          RADIOSINUNISON: 0x2000000,\n          COMMITONSELCHANGE: 0x4000000\n        };\n        var AnnotationBorderStyleType = {\n          SOLID: 1,\n          DASHED: 2,\n          BEVELED: 3,\n          INSET: 4,\n          UNDERLINE: 5\n        };\n        var StreamType = {\n          UNKNOWN: 0,\n          FLATE: 1,\n          LZW: 2,\n          DCT: 3,\n          JPX: 4,\n          JBIG: 5,\n          A85: 6,\n          AHX: 7,\n          CCF: 8,\n          RL: 9\n        };\n        var FontType = {\n          UNKNOWN: 0,\n          TYPE1: 1,\n          TYPE1C: 2,\n          CIDFONTTYPE0: 3,\n          CIDFONTTYPE0C: 4,\n          TRUETYPE: 5,\n          CIDFONTTYPE2: 6,\n          TYPE3: 7,\n          OPENTYPE: 8,\n          TYPE0: 9,\n          MMTYPE1: 10\n        };\n        var VERBOSITY_LEVELS = {\n          errors: 0,\n          warnings: 1,\n          infos: 5\n        };\n        var CMapCompressionType = {\n          NONE: 0,\n          BINARY: 1,\n          STREAM: 2\n        };\n        var OPS = {\n          dependency: 1,\n          setLineWidth: 2,\n          setLineCap: 3,\n          setLineJoin: 4,\n          setMiterLimit: 5,\n          setDash: 6,\n          setRenderingIntent: 7,\n          setFlatness: 8,\n          setGState: 9,\n          save: 10,\n          restore: 11,\n          transform: 12,\n          moveTo: 13,\n          lineTo: 14,\n          curveTo: 15,\n          curveTo2: 16,\n          curveTo3: 17,\n          closePath: 18,\n          rectangle: 19,\n          stroke: 20,\n          closeStroke: 21,\n          fill: 22,\n          eoFill: 23,\n          fillStroke: 24,\n          eoFillStroke: 25,\n          closeFillStroke: 26,\n          closeEOFillStroke: 27,\n          endPath: 28,\n          clip: 29,\n          eoClip: 30,\n          beginText: 31,\n          endText: 32,\n          setCharSpacing: 33,\n          setWordSpacing: 34,\n          setHScale: 35,\n          setLeading: 36,\n          setFont: 37,\n          setTextRenderingMode: 38,\n          setTextRise: 39,\n          moveText: 40,\n          setLeadingMoveText: 41,\n          setTextMatrix: 42,\n          nextLine: 43,\n          showText: 44,\n          showSpacedText: 45,\n          nextLineShowText: 46,\n          nextLineSetSpacingShowText: 47,\n          setCharWidth: 48,\n          setCharWidthAndBounds: 49,\n          setStrokeColorSpace: 50,\n          setFillColorSpace: 51,\n          setStrokeColor: 52,\n          setStrokeColorN: 53,\n          setFillColor: 54,\n          setFillColorN: 55,\n          setStrokeGray: 56,\n          setFillGray: 57,\n          setStrokeRGBColor: 58,\n          setFillRGBColor: 59,\n          setStrokeCMYKColor: 60,\n          setFillCMYKColor: 61,\n          shadingFill: 62,\n          beginInlineImage: 63,\n          beginImageData: 64,\n          endInlineImage: 65,\n          paintXObject: 66,\n          markPoint: 67,\n          markPointProps: 68,\n          beginMarkedContent: 69,\n          beginMarkedContentProps: 70,\n          endMarkedContent: 71,\n          beginCompat: 72,\n          endCompat: 73,\n          paintFormXObjectBegin: 74,\n          paintFormXObjectEnd: 75,\n          beginGroup: 76,\n          endGroup: 77,\n          beginAnnotations: 78,\n          endAnnotations: 79,\n          beginAnnotation: 80,\n          endAnnotation: 81,\n          paintJpegXObject: 82,\n          paintImageMaskXObject: 83,\n          paintImageMaskXObjectGroup: 84,\n          paintImageXObject: 85,\n          paintInlineImageXObject: 86,\n          paintInlineImageXObjectGroup: 87,\n          paintImageXObjectRepeat: 88,\n          paintImageMaskXObjectRepeat: 89,\n          paintSolidColorImageMask: 90,\n          constructPath: 91\n        };\n        var verbosity = VERBOSITY_LEVELS.warnings;\n\n        function setVerbosityLevel(level) {\n          verbosity = level;\n        }\n\n        function getVerbosityLevel() {\n          return verbosity;\n        }\n\n        function info(msg) {\n          if (verbosity >= VERBOSITY_LEVELS.infos) {\n            console.log('Info: ' + msg);\n          }\n        }\n\n        function warn(msg) {\n          if (verbosity >= VERBOSITY_LEVELS.warnings) {\n            console.log('Warning: ' + msg);\n          }\n        }\n\n        function deprecated(details) {\n          console.log('Deprecated API usage: ' + details);\n        }\n\n        function error(msg) {\n          if (verbosity >= VERBOSITY_LEVELS.errors) {\n            console.log('Error: ' + msg);\n            console.log(backtrace());\n          }\n\n          throw new Error(msg);\n        }\n\n        function backtrace() {\n          try {\n            throw new Error();\n          } catch (e) {\n            return e.stack ? e.stack.split('\\n').slice(2).join('\\n') : '';\n          }\n        }\n\n        function assert(cond, msg) {\n          if (!cond) {\n            error(msg);\n          }\n        }\n\n        var UNSUPPORTED_FEATURES = {\n          unknown: 'unknown',\n          forms: 'forms',\n          javaScript: 'javaScript',\n          smask: 'smask',\n          shadingPattern: 'shadingPattern',\n          font: 'font'\n        };\n\n        function isSameOrigin(baseUrl, otherUrl) {\n          try {\n            var base = new URL(baseUrl);\n\n            if (!base.origin || base.origin === 'null') {\n              return false;\n            }\n          } catch (e) {\n            return false;\n          }\n\n          var other = new URL(otherUrl, base);\n          return base.origin === other.origin;\n        }\n\n        function isValidProtocol(url) {\n          if (!url) {\n            return false;\n          }\n\n          switch (url.protocol) {\n            case 'http:':\n            case 'https:':\n            case 'ftp:':\n            case 'mailto:':\n            case 'tel:':\n              return true;\n\n            default:\n              return false;\n          }\n        }\n\n        function createValidAbsoluteUrl(url, baseUrl) {\n          if (!url) {\n            return null;\n          }\n\n          try {\n            var absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);\n\n            if (isValidProtocol(absoluteUrl)) {\n              return absoluteUrl;\n            }\n          } catch (ex) {}\n\n          return null;\n        }\n\n        function shadow(obj, prop, value) {\n          Object.defineProperty(obj, prop, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: false\n          });\n          return value;\n        }\n\n        function getLookupTableFactory(initializer) {\n          var lookup;\n          return function () {\n            if (initializer) {\n              lookup = Object.create(null);\n              initializer(lookup);\n              initializer = null;\n            }\n\n            return lookup;\n          };\n        }\n\n        var PasswordResponses = {\n          NEED_PASSWORD: 1,\n          INCORRECT_PASSWORD: 2\n        };\n\n        var PasswordException = function PasswordExceptionClosure() {\n          function PasswordException(msg, code) {\n            this.name = 'PasswordException';\n            this.message = msg;\n            this.code = code;\n          }\n\n          PasswordException.prototype = new Error();\n          PasswordException.constructor = PasswordException;\n          return PasswordException;\n        }();\n\n        var UnknownErrorException = function UnknownErrorExceptionClosure() {\n          function UnknownErrorException(msg, details) {\n            this.name = 'UnknownErrorException';\n            this.message = msg;\n            this.details = details;\n          }\n\n          UnknownErrorException.prototype = new Error();\n          UnknownErrorException.constructor = UnknownErrorException;\n          return UnknownErrorException;\n        }();\n\n        var InvalidPDFException = function InvalidPDFExceptionClosure() {\n          function InvalidPDFException(msg) {\n            this.name = 'InvalidPDFException';\n            this.message = msg;\n          }\n\n          InvalidPDFException.prototype = new Error();\n          InvalidPDFException.constructor = InvalidPDFException;\n          return InvalidPDFException;\n        }();\n\n        var MissingPDFException = function MissingPDFExceptionClosure() {\n          function MissingPDFException(msg) {\n            this.name = 'MissingPDFException';\n            this.message = msg;\n          }\n\n          MissingPDFException.prototype = new Error();\n          MissingPDFException.constructor = MissingPDFException;\n          return MissingPDFException;\n        }();\n\n        var UnexpectedResponseException = function UnexpectedResponseExceptionClosure() {\n          function UnexpectedResponseException(msg, status) {\n            this.name = 'UnexpectedResponseException';\n            this.message = msg;\n            this.status = status;\n          }\n\n          UnexpectedResponseException.prototype = new Error();\n          UnexpectedResponseException.constructor = UnexpectedResponseException;\n          return UnexpectedResponseException;\n        }();\n\n        var NotImplementedException = function NotImplementedExceptionClosure() {\n          function NotImplementedException(msg) {\n            this.message = msg;\n          }\n\n          NotImplementedException.prototype = new Error();\n          NotImplementedException.prototype.name = 'NotImplementedException';\n          NotImplementedException.constructor = NotImplementedException;\n          return NotImplementedException;\n        }();\n\n        var MissingDataException = function MissingDataExceptionClosure() {\n          function MissingDataException(begin, end) {\n            this.begin = begin;\n            this.end = end;\n            this.message = 'Missing data [' + begin + ', ' + end + ')';\n          }\n\n          MissingDataException.prototype = new Error();\n          MissingDataException.prototype.name = 'MissingDataException';\n          MissingDataException.constructor = MissingDataException;\n          return MissingDataException;\n        }();\n\n        var XRefParseException = function XRefParseExceptionClosure() {\n          function XRefParseException(msg) {\n            this.message = msg;\n          }\n\n          XRefParseException.prototype = new Error();\n          XRefParseException.prototype.name = 'XRefParseException';\n          XRefParseException.constructor = XRefParseException;\n          return XRefParseException;\n        }();\n\n        var NullCharactersRegExp = /\\x00/g;\n\n        function removeNullCharacters(str) {\n          if (typeof str !== 'string') {\n            warn('The argument for removeNullCharacters must be a string.');\n            return str;\n          }\n\n          return str.replace(NullCharactersRegExp, '');\n        }\n\n        function bytesToString(bytes) {\n          assert(bytes !== null && (typeof bytes === 'undefined' ? 'undefined' : _typeof(bytes)) === 'object' && bytes.length !== undefined, 'Invalid argument for bytesToString');\n          var length = bytes.length;\n          var MAX_ARGUMENT_COUNT = 8192;\n\n          if (length < MAX_ARGUMENT_COUNT) {\n            return String.fromCharCode.apply(null, bytes);\n          }\n\n          var strBuf = [];\n\n          for (var i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n            var chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n            var chunk = bytes.subarray(i, chunkEnd);\n            strBuf.push(String.fromCharCode.apply(null, chunk));\n          }\n\n          return strBuf.join('');\n        }\n\n        function stringToBytes(str) {\n          assert(typeof str === 'string', 'Invalid argument for stringToBytes');\n          var length = str.length;\n          var bytes = new Uint8Array(length);\n\n          for (var i = 0; i < length; ++i) {\n            bytes[i] = str.charCodeAt(i) & 0xFF;\n          }\n\n          return bytes;\n        }\n\n        function arrayByteLength(arr) {\n          if (arr.length !== undefined) {\n            return arr.length;\n          }\n\n          assert(arr.byteLength !== undefined);\n          return arr.byteLength;\n        }\n\n        function arraysToBytes(arr) {\n          if (arr.length === 1 && arr[0] instanceof Uint8Array) {\n            return arr[0];\n          }\n\n          var resultLength = 0;\n          var i,\n              ii = arr.length;\n          var item, itemLength;\n\n          for (i = 0; i < ii; i++) {\n            item = arr[i];\n            itemLength = arrayByteLength(item);\n            resultLength += itemLength;\n          }\n\n          var pos = 0;\n          var data = new Uint8Array(resultLength);\n\n          for (i = 0; i < ii; i++) {\n            item = arr[i];\n\n            if (!(item instanceof Uint8Array)) {\n              if (typeof item === 'string') {\n                item = stringToBytes(item);\n              } else {\n                item = new Uint8Array(item);\n              }\n            }\n\n            itemLength = item.byteLength;\n            data.set(item, pos);\n            pos += itemLength;\n          }\n\n          return data;\n        }\n\n        function string32(value) {\n          return String.fromCharCode(value >> 24 & 0xff, value >> 16 & 0xff, value >> 8 & 0xff, value & 0xff);\n        }\n\n        function log2(x) {\n          var n = 1,\n              i = 0;\n\n          while (x > n) {\n            n <<= 1;\n            i++;\n          }\n\n          return i;\n        }\n\n        function readInt8(data, start) {\n          return data[start] << 24 >> 24;\n        }\n\n        function readUint16(data, offset) {\n          return data[offset] << 8 | data[offset + 1];\n        }\n\n        function readUint32(data, offset) {\n          return (data[offset] << 24 | data[offset + 1] << 16 | data[offset + 2] << 8 | data[offset + 3]) >>> 0;\n        }\n\n        function isLittleEndian() {\n          var buffer8 = new Uint8Array(4);\n          buffer8[0] = 1;\n          var view32 = new Uint32Array(buffer8.buffer, 0, 1);\n          return view32[0] === 1;\n        }\n\n        function isEvalSupported() {\n          try {\n            new Function('');\n            return true;\n          } catch (e) {\n            return false;\n          }\n        }\n\n        var IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\n\n        var Util = function UtilClosure() {\n          function Util() {}\n\n          var rgbBuf = ['rgb(', 0, ',', 0, ',', 0, ')'];\n\n          Util.makeCssRgb = function Util_makeCssRgb(r, g, b) {\n            rgbBuf[1] = r;\n            rgbBuf[3] = g;\n            rgbBuf[5] = b;\n            return rgbBuf.join('');\n          };\n\n          Util.transform = function Util_transform(m1, m2) {\n            return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];\n          };\n\n          Util.applyTransform = function Util_applyTransform(p, m) {\n            var xt = p[0] * m[0] + p[1] * m[2] + m[4];\n            var yt = p[0] * m[1] + p[1] * m[3] + m[5];\n            return [xt, yt];\n          };\n\n          Util.applyInverseTransform = function Util_applyInverseTransform(p, m) {\n            var d = m[0] * m[3] - m[1] * m[2];\n            var xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n            var yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n            return [xt, yt];\n          };\n\n          Util.getAxialAlignedBoundingBox = function Util_getAxialAlignedBoundingBox(r, m) {\n            var p1 = Util.applyTransform(r, m);\n            var p2 = Util.applyTransform(r.slice(2, 4), m);\n            var p3 = Util.applyTransform([r[0], r[3]], m);\n            var p4 = Util.applyTransform([r[2], r[1]], m);\n            return [Math.min(p1[0], p2[0], p3[0], p4[0]), Math.min(p1[1], p2[1], p3[1], p4[1]), Math.max(p1[0], p2[0], p3[0], p4[0]), Math.max(p1[1], p2[1], p3[1], p4[1])];\n          };\n\n          Util.inverseTransform = function Util_inverseTransform(m) {\n            var d = m[0] * m[3] - m[1] * m[2];\n            return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n          };\n\n          Util.apply3dTransform = function Util_apply3dTransform(m, v) {\n            return [m[0] * v[0] + m[1] * v[1] + m[2] * v[2], m[3] * v[0] + m[4] * v[1] + m[5] * v[2], m[6] * v[0] + m[7] * v[1] + m[8] * v[2]];\n          };\n\n          Util.singularValueDecompose2dScale = function Util_singularValueDecompose2dScale(m) {\n            var transpose = [m[0], m[2], m[1], m[3]];\n            var a = m[0] * transpose[0] + m[1] * transpose[2];\n            var b = m[0] * transpose[1] + m[1] * transpose[3];\n            var c = m[2] * transpose[0] + m[3] * transpose[2];\n            var d = m[2] * transpose[1] + m[3] * transpose[3];\n            var first = (a + d) / 2;\n            var second = Math.sqrt((a + d) * (a + d) - 4 * (a * d - c * b)) / 2;\n            var sx = first + second || 1;\n            var sy = first - second || 1;\n            return [Math.sqrt(sx), Math.sqrt(sy)];\n          };\n\n          Util.normalizeRect = function Util_normalizeRect(rect) {\n            var r = rect.slice(0);\n\n            if (rect[0] > rect[2]) {\n              r[0] = rect[2];\n              r[2] = rect[0];\n            }\n\n            if (rect[1] > rect[3]) {\n              r[1] = rect[3];\n              r[3] = rect[1];\n            }\n\n            return r;\n          };\n\n          Util.intersect = function Util_intersect(rect1, rect2) {\n            function compare(a, b) {\n              return a - b;\n            }\n\n            var orderedX = [rect1[0], rect1[2], rect2[0], rect2[2]].sort(compare),\n                orderedY = [rect1[1], rect1[3], rect2[1], rect2[3]].sort(compare),\n                result = [];\n            rect1 = Util.normalizeRect(rect1);\n            rect2 = Util.normalizeRect(rect2);\n\n            if (orderedX[0] === rect1[0] && orderedX[1] === rect2[0] || orderedX[0] === rect2[0] && orderedX[1] === rect1[0]) {\n              result[0] = orderedX[1];\n              result[2] = orderedX[2];\n            } else {\n              return false;\n            }\n\n            if (orderedY[0] === rect1[1] && orderedY[1] === rect2[1] || orderedY[0] === rect2[1] && orderedY[1] === rect1[1]) {\n              result[1] = orderedY[1];\n              result[3] = orderedY[2];\n            } else {\n              return false;\n            }\n\n            return result;\n          };\n\n          Util.sign = function Util_sign(num) {\n            return num < 0 ? -1 : 1;\n          };\n\n          var ROMAN_NUMBER_MAP = ['', 'C', 'CC', 'CCC', 'CD', 'D', 'DC', 'DCC', 'DCCC', 'CM', '', 'X', 'XX', 'XXX', 'XL', 'L', 'LX', 'LXX', 'LXXX', 'XC', '', 'I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX'];\n\n          Util.toRoman = function Util_toRoman(number, lowerCase) {\n            assert(isInt(number) && number > 0, 'The number should be a positive integer.');\n            var pos,\n                romanBuf = [];\n\n            while (number >= 1000) {\n              number -= 1000;\n              romanBuf.push('M');\n            }\n\n            pos = number / 100 | 0;\n            number %= 100;\n            romanBuf.push(ROMAN_NUMBER_MAP[pos]);\n            pos = number / 10 | 0;\n            number %= 10;\n            romanBuf.push(ROMAN_NUMBER_MAP[10 + pos]);\n            romanBuf.push(ROMAN_NUMBER_MAP[20 + number]);\n            var romanStr = romanBuf.join('');\n            return lowerCase ? romanStr.toLowerCase() : romanStr;\n          };\n\n          Util.appendToArray = function Util_appendToArray(arr1, arr2) {\n            Array.prototype.push.apply(arr1, arr2);\n          };\n\n          Util.prependToArray = function Util_prependToArray(arr1, arr2) {\n            Array.prototype.unshift.apply(arr1, arr2);\n          };\n\n          Util.extendObj = function extendObj(obj1, obj2) {\n            for (var key in obj2) {\n              obj1[key] = obj2[key];\n            }\n          };\n\n          Util.getInheritableProperty = function Util_getInheritableProperty(dict, name, getArray) {\n            while (dict && !dict.has(name)) {\n              dict = dict.get('Parent');\n            }\n\n            if (!dict) {\n              return null;\n            }\n\n            return getArray ? dict.getArray(name) : dict.get(name);\n          };\n\n          Util.inherit = function Util_inherit(sub, base, prototype) {\n            sub.prototype = Object.create(base.prototype);\n            sub.prototype.constructor = sub;\n\n            for (var prop in prototype) {\n              sub.prototype[prop] = prototype[prop];\n            }\n          };\n\n          Util.loadScript = function Util_loadScript(src, callback) {\n            var script = document.createElement('script');\n            var loaded = false;\n            script.setAttribute('src', src);\n\n            if (callback) {\n              script.onload = function () {\n                if (!loaded) {\n                  callback();\n                }\n\n                loaded = true;\n              };\n            }\n\n            document.getElementsByTagName('head')[0].appendChild(script);\n          };\n\n          return Util;\n        }();\n\n        var PageViewport = function PageViewportClosure() {\n          function PageViewport(viewBox, scale, rotation, offsetX, offsetY, dontFlip) {\n            this.viewBox = viewBox;\n            this.scale = scale;\n            this.rotation = rotation;\n            this.offsetX = offsetX;\n            this.offsetY = offsetY;\n            var centerX = (viewBox[2] + viewBox[0]) / 2;\n            var centerY = (viewBox[3] + viewBox[1]) / 2;\n            var rotateA, rotateB, rotateC, rotateD;\n            rotation = rotation % 360;\n            rotation = rotation < 0 ? rotation + 360 : rotation;\n\n            switch (rotation) {\n              case 180:\n                rotateA = -1;\n                rotateB = 0;\n                rotateC = 0;\n                rotateD = 1;\n                break;\n\n              case 90:\n                rotateA = 0;\n                rotateB = 1;\n                rotateC = 1;\n                rotateD = 0;\n                break;\n\n              case 270:\n                rotateA = 0;\n                rotateB = -1;\n                rotateC = -1;\n                rotateD = 0;\n                break;\n\n              default:\n                rotateA = 1;\n                rotateB = 0;\n                rotateC = 0;\n                rotateD = -1;\n                break;\n            }\n\n            if (dontFlip) {\n              rotateC = -rotateC;\n              rotateD = -rotateD;\n            }\n\n            var offsetCanvasX, offsetCanvasY;\n            var width, height;\n\n            if (rotateA === 0) {\n              offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n              offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n              width = Math.abs(viewBox[3] - viewBox[1]) * scale;\n              height = Math.abs(viewBox[2] - viewBox[0]) * scale;\n            } else {\n              offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n              offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n              width = Math.abs(viewBox[2] - viewBox[0]) * scale;\n              height = Math.abs(viewBox[3] - viewBox[1]) * scale;\n            }\n\n            this.transform = [rotateA * scale, rotateB * scale, rotateC * scale, rotateD * scale, offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY, offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY];\n            this.width = width;\n            this.height = height;\n            this.fontScale = scale;\n          }\n\n          PageViewport.prototype = {\n            clone: function PageViewPort_clone(args) {\n              args = args || {};\n              var scale = 'scale' in args ? args.scale : this.scale;\n              var rotation = 'rotation' in args ? args.rotation : this.rotation;\n              return new PageViewport(this.viewBox.slice(), scale, rotation, this.offsetX, this.offsetY, args.dontFlip);\n            },\n            convertToViewportPoint: function PageViewport_convertToViewportPoint(x, y) {\n              return Util.applyTransform([x, y], this.transform);\n            },\n            convertToViewportRectangle: function PageViewport_convertToViewportRectangle(rect) {\n              var tl = Util.applyTransform([rect[0], rect[1]], this.transform);\n              var br = Util.applyTransform([rect[2], rect[3]], this.transform);\n              return [tl[0], tl[1], br[0], br[1]];\n            },\n            convertToPdfPoint: function PageViewport_convertToPdfPoint(x, y) {\n              return Util.applyInverseTransform([x, y], this.transform);\n            }\n          };\n          return PageViewport;\n        }();\n\n        var PDFStringTranslateTable = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2D8, 0x2C7, 0x2C6, 0x2D9, 0x2DD, 0x2DB, 0x2DA, 0x2DC, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192, 0x2044, 0x2039, 0x203A, 0x2212, 0x2030, 0x201E, 0x201C, 0x201D, 0x2018, 0x2019, 0x201A, 0x2122, 0xFB01, 0xFB02, 0x141, 0x152, 0x160, 0x178, 0x17D, 0x131, 0x142, 0x153, 0x161, 0x17E, 0, 0x20AC];\n\n        function stringToPDFString(str) {\n          var i,\n              n = str.length,\n              strBuf = [];\n\n          if (str[0] === '\\xFE' && str[1] === '\\xFF') {\n            for (i = 2; i < n; i += 2) {\n              strBuf.push(String.fromCharCode(str.charCodeAt(i) << 8 | str.charCodeAt(i + 1)));\n            }\n          } else {\n            for (i = 0; i < n; ++i) {\n              var code = PDFStringTranslateTable[str.charCodeAt(i)];\n              strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n            }\n          }\n\n          return strBuf.join('');\n        }\n\n        function stringToUTF8String(str) {\n          return decodeURIComponent(escape(str));\n        }\n\n        function utf8StringToString(str) {\n          return unescape(encodeURIComponent(str));\n        }\n\n        function isEmptyObj(obj) {\n          for (var key in obj) {\n            return false;\n          }\n\n          return true;\n        }\n\n        function isBool(v) {\n          return typeof v === 'boolean';\n        }\n\n        function isInt(v) {\n          return typeof v === 'number' && (v | 0) === v;\n        }\n\n        function isNum(v) {\n          return typeof v === 'number';\n        }\n\n        function isString(v) {\n          return typeof v === 'string';\n        }\n\n        function isArray(v) {\n          return v instanceof Array;\n        }\n\n        function isArrayBuffer(v) {\n          return (typeof v === 'undefined' ? 'undefined' : _typeof(v)) === 'object' && v !== null && v.byteLength !== undefined;\n        }\n\n        function isSpace(ch) {\n          return ch === 0x20 || ch === 0x09 || ch === 0x0D || ch === 0x0A;\n        }\n\n        function isNodeJS() {\n          if (typeof __pdfjsdev_webpack__ === 'undefined') {\n            return (typeof process === 'undefined' ? 'undefined' : _typeof(process)) === 'object' && process + '' === '[object process]';\n          }\n\n          return false;\n        }\n\n        function createPromiseCapability() {\n          var capability = {};\n          capability.promise = new Promise(function (resolve, reject) {\n            capability.resolve = resolve;\n            capability.reject = reject;\n          });\n          return capability;\n        }\n\n        var StatTimer = function StatTimerClosure() {\n          function rpad(str, pad, length) {\n            while (str.length < length) {\n              str += pad;\n            }\n\n            return str;\n          }\n\n          function StatTimer() {\n            this.started = Object.create(null);\n            this.times = [];\n            this.enabled = true;\n          }\n\n          StatTimer.prototype = {\n            time: function StatTimer_time(name) {\n              if (!this.enabled) {\n                return;\n              }\n\n              if (name in this.started) {\n                warn('Timer is already running for ' + name);\n              }\n\n              this.started[name] = Date.now();\n            },\n            timeEnd: function StatTimer_timeEnd(name) {\n              if (!this.enabled) {\n                return;\n              }\n\n              if (!(name in this.started)) {\n                warn('Timer has not been started for ' + name);\n              }\n\n              this.times.push({\n                'name': name,\n                'start': this.started[name],\n                'end': Date.now()\n              });\n              delete this.started[name];\n            },\n            toString: function StatTimer_toString() {\n              var i, ii;\n              var times = this.times;\n              var out = '';\n              var longest = 0;\n\n              for (i = 0, ii = times.length; i < ii; ++i) {\n                var name = times[i]['name'];\n\n                if (name.length > longest) {\n                  longest = name.length;\n                }\n              }\n\n              for (i = 0, ii = times.length; i < ii; ++i) {\n                var span = times[i];\n                var duration = span.end - span.start;\n                out += rpad(span['name'], ' ', longest) + ' ' + duration + 'ms\\n';\n              }\n\n              return out;\n            }\n          };\n          return StatTimer;\n        }();\n\n        var createBlob = function createBlob(data, contentType) {\n          if (typeof Blob !== 'undefined') {\n            return new Blob([data], {\n              type: contentType\n            });\n          }\n\n          throw new Error('The \"Blob\" constructor is not supported.');\n        };\n\n        var createObjectURL = function createObjectURLClosure() {\n          var digits = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n          return function createObjectURL(data, contentType) {\n            var forceDataSchema = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n            if (!forceDataSchema && URL.createObjectURL) {\n              var blob = createBlob(data, contentType);\n              return URL.createObjectURL(blob);\n            }\n\n            var buffer = 'data:' + contentType + ';base64,';\n\n            for (var i = 0, ii = data.length; i < ii; i += 3) {\n              var b1 = data[i] & 0xFF;\n              var b2 = data[i + 1] & 0xFF;\n              var b3 = data[i + 2] & 0xFF;\n              var d1 = b1 >> 2,\n                  d2 = (b1 & 3) << 4 | b2 >> 4;\n              var d3 = i + 1 < ii ? (b2 & 0xF) << 2 | b3 >> 6 : 64;\n              var d4 = i + 2 < ii ? b3 & 0x3F : 64;\n              buffer += digits[d1] + digits[d2] + digits[d3] + digits[d4];\n            }\n\n            return buffer;\n          };\n        }();\n\n        function MessageHandler(sourceName, targetName, comObj) {\n          var _this = this;\n\n          this.sourceName = sourceName;\n          this.targetName = targetName;\n          this.comObj = comObj;\n          this.callbackIndex = 1;\n          this.postMessageTransfers = true;\n          var callbacksCapabilities = this.callbacksCapabilities = Object.create(null);\n          var ah = this.actionHandler = Object.create(null);\n\n          this._onComObjOnMessage = function (event) {\n            var data = event.data;\n\n            if (data.targetName !== _this.sourceName) {\n              return;\n            }\n\n            if (data.isReply) {\n              var callbackId = data.callbackId;\n\n              if (data.callbackId in callbacksCapabilities) {\n                var callback = callbacksCapabilities[callbackId];\n                delete callbacksCapabilities[callbackId];\n\n                if ('error' in data) {\n                  callback.reject(data.error);\n                } else {\n                  callback.resolve(data.data);\n                }\n              } else {\n                error('Cannot resolve callback ' + callbackId);\n              }\n            } else if (data.action in ah) {\n              var action = ah[data.action];\n\n              if (data.callbackId) {\n                var sourceName = _this.sourceName;\n                var targetName = data.sourceName;\n                Promise.resolve().then(function () {\n                  return action[0].call(action[1], data.data);\n                }).then(function (result) {\n                  comObj.postMessage({\n                    sourceName: sourceName,\n                    targetName: targetName,\n                    isReply: true,\n                    callbackId: data.callbackId,\n                    data: result\n                  });\n                }, function (reason) {\n                  if (reason instanceof Error) {\n                    reason = reason + '';\n                  }\n\n                  comObj.postMessage({\n                    sourceName: sourceName,\n                    targetName: targetName,\n                    isReply: true,\n                    callbackId: data.callbackId,\n                    error: reason\n                  });\n                });\n              } else {\n                action[0].call(action[1], data.data);\n              }\n            } else {\n              error('Unknown action from worker: ' + data.action);\n            }\n          };\n\n          comObj.addEventListener('message', this._onComObjOnMessage);\n        }\n\n        MessageHandler.prototype = {\n          on: function on(actionName, handler, scope) {\n            var ah = this.actionHandler;\n\n            if (ah[actionName]) {\n              error('There is already an actionName called \"' + actionName + '\"');\n            }\n\n            ah[actionName] = [handler, scope];\n          },\n          send: function send(actionName, data, transfers) {\n            var message = {\n              sourceName: this.sourceName,\n              targetName: this.targetName,\n              action: actionName,\n              data: data\n            };\n            this.postMessage(message, transfers);\n          },\n          sendWithPromise: function sendWithPromise(actionName, data, transfers) {\n            var callbackId = this.callbackIndex++;\n            var message = {\n              sourceName: this.sourceName,\n              targetName: this.targetName,\n              action: actionName,\n              data: data,\n              callbackId: callbackId\n            };\n            var capability = createPromiseCapability();\n            this.callbacksCapabilities[callbackId] = capability;\n\n            try {\n              this.postMessage(message, transfers);\n            } catch (e) {\n              capability.reject(e);\n            }\n\n            return capability.promise;\n          },\n          postMessage: function postMessage(message, transfers) {\n            if (transfers && this.postMessageTransfers) {\n              this.comObj.postMessage(message, transfers);\n            } else {\n              this.comObj.postMessage(message);\n            }\n          },\n          destroy: function destroy() {\n            this.comObj.removeEventListener('message', this._onComObjOnMessage);\n          }\n        };\n\n        function loadJpegStream(id, imageUrl, objs) {\n          var img = new Image();\n\n          img.onload = function loadJpegStream_onloadClosure() {\n            objs.resolve(id, img);\n          };\n\n          img.onerror = function loadJpegStream_onerrorClosure() {\n            objs.resolve(id, null);\n            warn('Error during JPEG image loading');\n          };\n\n          img.src = imageUrl;\n        }\n\n        exports.FONT_IDENTITY_MATRIX = FONT_IDENTITY_MATRIX;\n        exports.IDENTITY_MATRIX = IDENTITY_MATRIX;\n        exports.OPS = OPS;\n        exports.VERBOSITY_LEVELS = VERBOSITY_LEVELS;\n        exports.UNSUPPORTED_FEATURES = UNSUPPORTED_FEATURES;\n        exports.AnnotationBorderStyleType = AnnotationBorderStyleType;\n        exports.AnnotationFieldFlag = AnnotationFieldFlag;\n        exports.AnnotationFlag = AnnotationFlag;\n        exports.AnnotationType = AnnotationType;\n        exports.FontType = FontType;\n        exports.ImageKind = ImageKind;\n        exports.CMapCompressionType = CMapCompressionType;\n        exports.InvalidPDFException = InvalidPDFException;\n        exports.MessageHandler = MessageHandler;\n        exports.MissingDataException = MissingDataException;\n        exports.MissingPDFException = MissingPDFException;\n        exports.NativeImageDecoding = NativeImageDecoding;\n        exports.NotImplementedException = NotImplementedException;\n        exports.PageViewport = PageViewport;\n        exports.PasswordException = PasswordException;\n        exports.PasswordResponses = PasswordResponses;\n        exports.StatTimer = StatTimer;\n        exports.StreamType = StreamType;\n        exports.TextRenderingMode = TextRenderingMode;\n        exports.UnexpectedResponseException = UnexpectedResponseException;\n        exports.UnknownErrorException = UnknownErrorException;\n        exports.Util = Util;\n        exports.XRefParseException = XRefParseException;\n        exports.arrayByteLength = arrayByteLength;\n        exports.arraysToBytes = arraysToBytes;\n        exports.assert = assert;\n        exports.bytesToString = bytesToString;\n        exports.createBlob = createBlob;\n        exports.createPromiseCapability = createPromiseCapability;\n        exports.createObjectURL = createObjectURL;\n        exports.deprecated = deprecated;\n        exports.error = error;\n        exports.getLookupTableFactory = getLookupTableFactory;\n        exports.getVerbosityLevel = getVerbosityLevel;\n        exports.globalScope = globalScope;\n        exports.info = info;\n        exports.isArray = isArray;\n        exports.isArrayBuffer = isArrayBuffer;\n        exports.isBool = isBool;\n        exports.isEmptyObj = isEmptyObj;\n        exports.isInt = isInt;\n        exports.isNum = isNum;\n        exports.isString = isString;\n        exports.isSpace = isSpace;\n        exports.isNodeJS = isNodeJS;\n        exports.isSameOrigin = isSameOrigin;\n        exports.createValidAbsoluteUrl = createValidAbsoluteUrl;\n        exports.isLittleEndian = isLittleEndian;\n        exports.isEvalSupported = isEvalSupported;\n        exports.loadJpegStream = loadJpegStream;\n        exports.log2 = log2;\n        exports.readInt8 = readInt8;\n        exports.readUint16 = readUint16;\n        exports.readUint32 = readUint32;\n        exports.removeNullCharacters = removeNullCharacters;\n        exports.setVerbosityLevel = setVerbosityLevel;\n        exports.shadow = shadow;\n        exports.string32 = string32;\n        exports.stringToBytes = stringToBytes;\n        exports.stringToPDFString = stringToPDFString;\n        exports.stringToUTF8String = stringToUTF8String;\n        exports.utf8StringToString = utf8StringToString;\n        exports.warn = warn;\n        /* WEBPACK VAR INJECTION */\n      }).call(exports, __w_pdfjs_require__(6));\n      /***/\n    },\n    /* 1 */\n\n    /***/\n    function (module, exports, __w_pdfjs_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DOMCMapReaderFactory = exports.DOMCanvasFactory = exports.DEFAULT_LINK_REL = exports.getDefaultSetting = exports.LinkTarget = exports.getFilenameFromUrl = exports.isValidUrl = exports.isExternalLinkTargetSet = exports.addLinkAttributes = exports.RenderingCancelledException = exports.CustomStyle = undefined;\n\n      var _createClass = function () {\n        function defineProperties(target, props) {\n          for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if (\"value\" in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n          }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n          if (protoProps) defineProperties(Constructor.prototype, protoProps);\n          if (staticProps) defineProperties(Constructor, staticProps);\n          return Constructor;\n        };\n      }();\n\n      var _util = __w_pdfjs_require__(0);\n\n      function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n          throw new TypeError(\"Cannot call a class as a function\");\n        }\n      }\n\n      var DEFAULT_LINK_REL = 'noopener noreferrer nofollow';\n\n      var DOMCanvasFactory = function () {\n        function DOMCanvasFactory() {\n          _classCallCheck(this, DOMCanvasFactory);\n        }\n\n        _createClass(DOMCanvasFactory, [{\n          key: 'create',\n          value: function create(width, height) {\n            (0, _util.assert)(width > 0 && height > 0, 'invalid canvas size');\n            var canvas = document.createElement('canvas');\n            var context = canvas.getContext('2d');\n            canvas.width = width;\n            canvas.height = height;\n            return {\n              canvas: canvas,\n              context: context\n            };\n          }\n        }, {\n          key: 'reset',\n          value: function reset(canvasAndContext, width, height) {\n            (0, _util.assert)(canvasAndContext.canvas, 'canvas is not specified');\n            (0, _util.assert)(width > 0 && height > 0, 'invalid canvas size');\n            canvasAndContext.canvas.width = width;\n            canvasAndContext.canvas.height = height;\n          }\n        }, {\n          key: 'destroy',\n          value: function destroy(canvasAndContext) {\n            (0, _util.assert)(canvasAndContext.canvas, 'canvas is not specified');\n            canvasAndContext.canvas.width = 0;\n            canvasAndContext.canvas.height = 0;\n            canvasAndContext.canvas = null;\n            canvasAndContext.context = null;\n          }\n        }]);\n\n        return DOMCanvasFactory;\n      }();\n\n      var DOMCMapReaderFactory = function () {\n        function DOMCMapReaderFactory(_ref) {\n          var _ref$baseUrl = _ref.baseUrl,\n              baseUrl = _ref$baseUrl === undefined ? null : _ref$baseUrl,\n              _ref$isCompressed = _ref.isCompressed,\n              isCompressed = _ref$isCompressed === undefined ? false : _ref$isCompressed;\n\n          _classCallCheck(this, DOMCMapReaderFactory);\n\n          this.baseUrl = baseUrl;\n          this.isCompressed = isCompressed;\n        }\n\n        _createClass(DOMCMapReaderFactory, [{\n          key: 'fetch',\n          value: function fetch(_ref2) {\n            var _this = this;\n\n            var name = _ref2.name;\n\n            if (!name) {\n              return Promise.reject(new Error('CMap name must be specified.'));\n            }\n\n            return new Promise(function (resolve, reject) {\n              var url = _this.baseUrl + name + (_this.isCompressed ? '.bcmap' : '');\n              var request = new XMLHttpRequest();\n              request.open('GET', url, true);\n\n              if (_this.isCompressed) {\n                request.responseType = 'arraybuffer';\n              }\n\n              request.onreadystatechange = function () {\n                if (request.readyState !== XMLHttpRequest.DONE) {\n                  return;\n                }\n\n                if (request.status === 200 || request.status === 0) {\n                  var data = void 0;\n\n                  if (_this.isCompressed && request.response) {\n                    data = new Uint8Array(request.response);\n                  } else if (!_this.isCompressed && request.responseText) {\n                    data = (0, _util.stringToBytes)(request.responseText);\n                  }\n\n                  if (data) {\n                    resolve({\n                      cMapData: data,\n                      compressionType: _this.isCompressed ? _util.CMapCompressionType.BINARY : _util.CMapCompressionType.NONE\n                    });\n                    return;\n                  }\n                }\n\n                reject(new Error('Unable to load ' + (_this.isCompressed ? 'binary ' : '') + 'CMap at: ' + url));\n              };\n\n              request.send(null);\n            });\n          }\n        }]);\n\n        return DOMCMapReaderFactory;\n      }();\n\n      var CustomStyle = function CustomStyleClosure() {\n        var prefixes = ['ms', 'Moz', 'Webkit', 'O'];\n\n        var _cache = Object.create(null);\n\n        function CustomStyle() {}\n\n        CustomStyle.getProp = function get(propName, element) {\n          if (arguments.length === 1 && typeof _cache[propName] === 'string') {\n            return _cache[propName];\n          }\n\n          element = element || document.documentElement;\n          var style = element.style,\n              prefixed,\n              uPropName;\n\n          if (typeof style[propName] === 'string') {\n            return _cache[propName] = propName;\n          }\n\n          uPropName = propName.charAt(0).toUpperCase() + propName.slice(1);\n\n          for (var i = 0, l = prefixes.length; i < l; i++) {\n            prefixed = prefixes[i] + uPropName;\n\n            if (typeof style[prefixed] === 'string') {\n              return _cache[propName] = prefixed;\n            }\n          }\n\n          return _cache[propName] = 'undefined';\n        };\n\n        CustomStyle.setProp = function set(propName, element, str) {\n          var prop = this.getProp(propName);\n\n          if (prop !== 'undefined') {\n            element.style[prop] = str;\n          }\n        };\n\n        return CustomStyle;\n      }();\n\n      var RenderingCancelledException = function RenderingCancelledException() {\n        function RenderingCancelledException(msg, type) {\n          this.message = msg;\n          this.type = type;\n        }\n\n        RenderingCancelledException.prototype = new Error();\n        RenderingCancelledException.prototype.name = 'RenderingCancelledException';\n        RenderingCancelledException.constructor = RenderingCancelledException;\n        return RenderingCancelledException;\n      }();\n\n      var LinkTarget = {\n        NONE: 0,\n        SELF: 1,\n        BLANK: 2,\n        PARENT: 3,\n        TOP: 4\n      };\n      var LinkTargetStringMap = ['', '_self', '_blank', '_parent', '_top'];\n\n      function addLinkAttributes(link, params) {\n        var url = params && params.url;\n        link.href = link.title = url ? (0, _util.removeNullCharacters)(url) : '';\n\n        if (url) {\n          var target = params.target;\n\n          if (typeof target === 'undefined') {\n            target = getDefaultSetting('externalLinkTarget');\n          }\n\n          link.target = LinkTargetStringMap[target];\n          var rel = params.rel;\n\n          if (typeof rel === 'undefined') {\n            rel = getDefaultSetting('externalLinkRel');\n          }\n\n          link.rel = rel;\n        }\n      }\n\n      function getFilenameFromUrl(url) {\n        var anchor = url.indexOf('#');\n        var query = url.indexOf('?');\n        var end = Math.min(anchor > 0 ? anchor : url.length, query > 0 ? query : url.length);\n        return url.substring(url.lastIndexOf('/', end) + 1, end);\n      }\n\n      function getDefaultSetting(id) {\n        var globalSettings = _util.globalScope.PDFJS;\n\n        switch (id) {\n          case 'pdfBug':\n            return globalSettings ? globalSettings.pdfBug : false;\n\n          case 'disableAutoFetch':\n            return globalSettings ? globalSettings.disableAutoFetch : false;\n\n          case 'disableStream':\n            return globalSettings ? globalSettings.disableStream : false;\n\n          case 'disableRange':\n            return globalSettings ? globalSettings.disableRange : false;\n\n          case 'disableFontFace':\n            return globalSettings ? globalSettings.disableFontFace : false;\n\n          case 'disableCreateObjectURL':\n            return globalSettings ? globalSettings.disableCreateObjectURL : false;\n\n          case 'disableWebGL':\n            return globalSettings ? globalSettings.disableWebGL : true;\n\n          case 'cMapUrl':\n            return globalSettings ? globalSettings.cMapUrl : null;\n\n          case 'cMapPacked':\n            return globalSettings ? globalSettings.cMapPacked : false;\n\n          case 'postMessageTransfers':\n            return globalSettings ? globalSettings.postMessageTransfers : true;\n\n          case 'workerPort':\n            return globalSettings ? globalSettings.workerPort : null;\n\n          case 'workerSrc':\n            return globalSettings ? globalSettings.workerSrc : null;\n\n          case 'disableWorker':\n            return globalSettings ? globalSettings.disableWorker : false;\n\n          case 'maxImageSize':\n            return globalSettings ? globalSettings.maxImageSize : -1;\n\n          case 'imageResourcesPath':\n            return globalSettings ? globalSettings.imageResourcesPath : '';\n\n          case 'isEvalSupported':\n            return globalSettings ? globalSettings.isEvalSupported : true;\n\n          case 'externalLinkTarget':\n            if (!globalSettings) {\n              return LinkTarget.NONE;\n            }\n\n            switch (globalSettings.externalLinkTarget) {\n              case LinkTarget.NONE:\n              case LinkTarget.SELF:\n              case LinkTarget.BLANK:\n              case LinkTarget.PARENT:\n              case LinkTarget.TOP:\n                return globalSettings.externalLinkTarget;\n            }\n\n            (0, _util.warn)('PDFJS.externalLinkTarget is invalid: ' + globalSettings.externalLinkTarget);\n            globalSettings.externalLinkTarget = LinkTarget.NONE;\n            return LinkTarget.NONE;\n\n          case 'externalLinkRel':\n            return globalSettings ? globalSettings.externalLinkRel : DEFAULT_LINK_REL;\n\n          case 'enableStats':\n            return !!(globalSettings && globalSettings.enableStats);\n\n          case 'pdfjsNext':\n            return !!(globalSettings && globalSettings.pdfjsNext);\n\n          default:\n            throw new Error('Unknown default setting: ' + id);\n        }\n      }\n\n      function isExternalLinkTargetSet() {\n        var externalLinkTarget = getDefaultSetting('externalLinkTarget');\n\n        switch (externalLinkTarget) {\n          case LinkTarget.NONE:\n            return false;\n\n          case LinkTarget.SELF:\n          case LinkTarget.BLANK:\n          case LinkTarget.PARENT:\n          case LinkTarget.TOP:\n            return true;\n        }\n      }\n\n      function isValidUrl(url, allowRelative) {\n        (0, _util.deprecated)('isValidUrl(), please use createValidAbsoluteUrl() instead.');\n        var baseUrl = allowRelative ? 'http://example.com' : null;\n        return (0, _util.createValidAbsoluteUrl)(url, baseUrl) !== null;\n      }\n\n      exports.CustomStyle = CustomStyle;\n      exports.RenderingCancelledException = RenderingCancelledException;\n      exports.addLinkAttributes = addLinkAttributes;\n      exports.isExternalLinkTargetSet = isExternalLinkTargetSet;\n      exports.isValidUrl = isValidUrl;\n      exports.getFilenameFromUrl = getFilenameFromUrl;\n      exports.LinkTarget = LinkTarget;\n      exports.getDefaultSetting = getDefaultSetting;\n      exports.DEFAULT_LINK_REL = DEFAULT_LINK_REL;\n      exports.DOMCanvasFactory = DOMCanvasFactory;\n      exports.DOMCMapReaderFactory = DOMCMapReaderFactory;\n      /***/\n    },\n    /* 2 */\n\n    /***/\n    function (module, exports, __w_pdfjs_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AnnotationLayer = undefined;\n\n      var _dom_utils = __w_pdfjs_require__(1);\n\n      var _util = __w_pdfjs_require__(0);\n\n      function AnnotationElementFactory() {}\n\n      AnnotationElementFactory.prototype = {\n        create: function AnnotationElementFactory_create(parameters) {\n          var subtype = parameters.data.annotationType;\n\n          switch (subtype) {\n            case _util.AnnotationType.LINK:\n              return new LinkAnnotationElement(parameters);\n\n            case _util.AnnotationType.TEXT:\n              return new TextAnnotationElement(parameters);\n\n            case _util.AnnotationType.WIDGET:\n              var fieldType = parameters.data.fieldType;\n\n              switch (fieldType) {\n                case 'Tx':\n                  return new TextWidgetAnnotationElement(parameters);\n\n                case 'Btn':\n                  if (parameters.data.radioButton) {\n                    return new RadioButtonWidgetAnnotationElement(parameters);\n                  } else if (parameters.data.checkBox) {\n                    return new CheckboxWidgetAnnotationElement(parameters);\n                  }\n\n                  (0, _util.warn)('Unimplemented button widget annotation: pushbutton');\n                  break;\n\n                case 'Ch':\n                  return new ChoiceWidgetAnnotationElement(parameters);\n              }\n\n              return new WidgetAnnotationElement(parameters);\n\n            case _util.AnnotationType.POPUP:\n              return new PopupAnnotationElement(parameters);\n\n            case _util.AnnotationType.LINE:\n              return new LineAnnotationElement(parameters);\n\n            case _util.AnnotationType.HIGHLIGHT:\n              return new HighlightAnnotationElement(parameters);\n\n            case _util.AnnotationType.UNDERLINE:\n              return new UnderlineAnnotationElement(parameters);\n\n            case _util.AnnotationType.SQUIGGLY:\n              return new SquigglyAnnotationElement(parameters);\n\n            case _util.AnnotationType.STRIKEOUT:\n              return new StrikeOutAnnotationElement(parameters);\n\n            case _util.AnnotationType.FILEATTACHMENT:\n              return new FileAttachmentAnnotationElement(parameters);\n\n            default:\n              return new AnnotationElement(parameters);\n          }\n        }\n      };\n\n      var AnnotationElement = function AnnotationElementClosure() {\n        function AnnotationElement(parameters, isRenderable, ignoreBorder) {\n          this.isRenderable = isRenderable || false;\n          this.data = parameters.data;\n          this.layer = parameters.layer;\n          this.page = parameters.page;\n          this.viewport = parameters.viewport;\n          this.linkService = parameters.linkService;\n          this.downloadManager = parameters.downloadManager;\n          this.imageResourcesPath = parameters.imageResourcesPath;\n          this.renderInteractiveForms = parameters.renderInteractiveForms;\n\n          if (isRenderable) {\n            this.container = this._createContainer(ignoreBorder);\n          }\n        }\n\n        AnnotationElement.prototype = {\n          _createContainer: function AnnotationElement_createContainer(ignoreBorder) {\n            var data = this.data,\n                page = this.page,\n                viewport = this.viewport;\n            var container = document.createElement('section');\n            var width = data.rect[2] - data.rect[0];\n            var height = data.rect[3] - data.rect[1];\n            container.setAttribute('data-annotation-id', data.id);\n\n            var rect = _util.Util.normalizeRect([data.rect[0], page.view[3] - data.rect[1] + page.view[1], data.rect[2], page.view[3] - data.rect[3] + page.view[1]]);\n\n            _dom_utils.CustomStyle.setProp('transform', container, 'matrix(' + viewport.transform.join(',') + ')');\n\n            _dom_utils.CustomStyle.setProp('transformOrigin', container, -rect[0] + 'px ' + -rect[1] + 'px');\n\n            if (!ignoreBorder && data.borderStyle.width > 0) {\n              container.style.borderWidth = data.borderStyle.width + 'px';\n\n              if (data.borderStyle.style !== _util.AnnotationBorderStyleType.UNDERLINE) {\n                width = width - 2 * data.borderStyle.width;\n                height = height - 2 * data.borderStyle.width;\n              }\n\n              var horizontalRadius = data.borderStyle.horizontalCornerRadius;\n              var verticalRadius = data.borderStyle.verticalCornerRadius;\n\n              if (horizontalRadius > 0 || verticalRadius > 0) {\n                var radius = horizontalRadius + 'px / ' + verticalRadius + 'px';\n\n                _dom_utils.CustomStyle.setProp('borderRadius', container, radius);\n              }\n\n              switch (data.borderStyle.style) {\n                case _util.AnnotationBorderStyleType.SOLID:\n                  container.style.borderStyle = 'solid';\n                  break;\n\n                case _util.AnnotationBorderStyleType.DASHED:\n                  container.style.borderStyle = 'dashed';\n                  break;\n\n                case _util.AnnotationBorderStyleType.BEVELED:\n                  (0, _util.warn)('Unimplemented border style: beveled');\n                  break;\n\n                case _util.AnnotationBorderStyleType.INSET:\n                  (0, _util.warn)('Unimplemented border style: inset');\n                  break;\n\n                case _util.AnnotationBorderStyleType.UNDERLINE:\n                  container.style.borderBottomStyle = 'solid';\n                  break;\n\n                default:\n                  break;\n              }\n\n              if (data.color) {\n                container.style.borderColor = _util.Util.makeCssRgb(data.color[0] | 0, data.color[1] | 0, data.color[2] | 0);\n              } else {\n                container.style.borderWidth = 0;\n              }\n            }\n\n            container.style.left = rect[0] + 'px';\n            container.style.top = rect[1] + 'px';\n            container.style.width = width + 'px';\n            container.style.height = height + 'px';\n            return container;\n          },\n          _createPopup: function AnnotationElement_createPopup(container, trigger, data) {\n            if (!trigger) {\n              trigger = document.createElement('div');\n              trigger.style.height = container.style.height;\n              trigger.style.width = container.style.width;\n              container.appendChild(trigger);\n            }\n\n            var popupElement = new PopupElement({\n              container: container,\n              trigger: trigger,\n              color: data.color,\n              title: data.title,\n              contents: data.contents,\n              hideWrapper: true\n            });\n            var popup = popupElement.render();\n            popup.style.left = container.style.width;\n            container.appendChild(popup);\n          },\n          render: function AnnotationElement_render() {\n            throw new Error('Abstract method AnnotationElement.render called');\n          }\n        };\n        return AnnotationElement;\n      }();\n\n      var LinkAnnotationElement = function LinkAnnotationElementClosure() {\n        function LinkAnnotationElement(parameters) {\n          AnnotationElement.call(this, parameters, true);\n        }\n\n        _util.Util.inherit(LinkAnnotationElement, AnnotationElement, {\n          render: function LinkAnnotationElement_render() {\n            this.container.className = 'linkAnnotation';\n            var link = document.createElement('a');\n            (0, _dom_utils.addLinkAttributes)(link, {\n              url: this.data.url,\n              target: this.data.newWindow ? _dom_utils.LinkTarget.BLANK : undefined\n            });\n\n            if (!this.data.url) {\n              if (this.data.action) {\n                this._bindNamedAction(link, this.data.action);\n              } else {\n                this._bindLink(link, this.data.dest);\n              }\n            }\n\n            this.container.appendChild(link);\n            return this.container;\n          },\n          _bindLink: function _bindLink(link, destination) {\n            var _this = this;\n\n            link.href = this.linkService.getDestinationHash(destination);\n\n            link.onclick = function () {\n              if (destination) {\n                _this.linkService.navigateTo(destination);\n              }\n\n              return false;\n            };\n\n            if (destination) {\n              link.className = 'internalLink';\n            }\n          },\n          _bindNamedAction: function _bindNamedAction(link, action) {\n            var _this2 = this;\n\n            link.href = this.linkService.getAnchorUrl('');\n\n            link.onclick = function () {\n              _this2.linkService.executeNamedAction(action);\n\n              return false;\n            };\n\n            link.className = 'internalLink';\n          }\n        });\n\n        return LinkAnnotationElement;\n      }();\n\n      var TextAnnotationElement = function TextAnnotationElementClosure() {\n        function TextAnnotationElement(parameters) {\n          var isRenderable = !!(parameters.data.hasPopup || parameters.data.title || parameters.data.contents);\n          AnnotationElement.call(this, parameters, isRenderable);\n        }\n\n        _util.Util.inherit(TextAnnotationElement, AnnotationElement, {\n          render: function TextAnnotationElement_render() {\n            this.container.className = 'textAnnotation';\n            var image = document.createElement('img');\n            image.style.height = this.container.style.height;\n            image.style.width = this.container.style.width;\n            image.src = this.imageResourcesPath + 'annotation-' + this.data.name.toLowerCase() + '.svg';\n            image.alt = '[{{type}} Annotation]';\n            image.dataset.l10nId = 'text_annotation_type';\n            image.dataset.l10nArgs = JSON.stringify({\n              type: this.data.name\n            });\n\n            if (!this.data.hasPopup) {\n              this._createPopup(this.container, image, this.data);\n            }\n\n            this.container.appendChild(image);\n            return this.container;\n          }\n        });\n\n        return TextAnnotationElement;\n      }();\n\n      var WidgetAnnotationElement = function WidgetAnnotationElementClosure() {\n        function WidgetAnnotationElement(parameters, isRenderable) {\n          AnnotationElement.call(this, parameters, isRenderable);\n        }\n\n        _util.Util.inherit(WidgetAnnotationElement, AnnotationElement, {\n          render: function WidgetAnnotationElement_render() {\n            return this.container;\n          }\n        });\n\n        return WidgetAnnotationElement;\n      }();\n\n      var TextWidgetAnnotationElement = function TextWidgetAnnotationElementClosure() {\n        var TEXT_ALIGNMENT = ['left', 'center', 'right'];\n\n        function TextWidgetAnnotationElement(parameters) {\n          var isRenderable = parameters.renderInteractiveForms || !parameters.data.hasAppearance && !!parameters.data.fieldValue;\n          WidgetAnnotationElement.call(this, parameters, isRenderable);\n        }\n\n        _util.Util.inherit(TextWidgetAnnotationElement, WidgetAnnotationElement, {\n          render: function TextWidgetAnnotationElement_render() {\n            this.container.className = 'textWidgetAnnotation';\n            var element = null;\n\n            if (this.renderInteractiveForms) {\n              if (this.data.multiLine) {\n                element = document.createElement('textarea');\n                element.textContent = this.data.fieldValue;\n              } else {\n                element = document.createElement('input');\n                element.type = 'text';\n                element.setAttribute('value', this.data.fieldValue);\n              }\n\n              element.disabled = this.data.readOnly;\n\n              if (this.data.maxLen !== null) {\n                element.maxLength = this.data.maxLen;\n              }\n\n              if (this.data.comb) {\n                var fieldWidth = this.data.rect[2] - this.data.rect[0];\n                var combWidth = fieldWidth / this.data.maxLen;\n                element.classList.add('comb');\n                element.style.letterSpacing = 'calc(' + combWidth + 'px - 1ch)';\n              }\n            } else {\n              element = document.createElement('div');\n              element.textContent = this.data.fieldValue;\n              element.style.verticalAlign = 'middle';\n              element.style.display = 'table-cell';\n              var font = null;\n\n              if (this.data.fontRefName) {\n                font = this.page.commonObjs.getData(this.data.fontRefName);\n              }\n\n              this._setTextStyle(element, font);\n            }\n\n            if (this.data.textAlignment !== null) {\n              element.style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n            }\n\n            this.container.appendChild(element);\n            return this.container;\n          },\n          _setTextStyle: function TextWidgetAnnotationElement_setTextStyle(element, font) {\n            var style = element.style;\n            style.fontSize = this.data.fontSize + 'px';\n            style.direction = this.data.fontDirection < 0 ? 'rtl' : 'ltr';\n\n            if (!font) {\n              return;\n            }\n\n            style.fontWeight = font.black ? font.bold ? '900' : 'bold' : font.bold ? 'bold' : 'normal';\n            style.fontStyle = font.italic ? 'italic' : 'normal';\n            var fontFamily = font.loadedName ? '\"' + font.loadedName + '\", ' : '';\n            var fallbackName = font.fallbackName || 'Helvetica, sans-serif';\n            style.fontFamily = fontFamily + fallbackName;\n          }\n        });\n\n        return TextWidgetAnnotationElement;\n      }();\n\n      var CheckboxWidgetAnnotationElement = function CheckboxWidgetAnnotationElementClosure() {\n        function CheckboxWidgetAnnotationElement(parameters) {\n          WidgetAnnotationElement.call(this, parameters, parameters.renderInteractiveForms);\n        }\n\n        _util.Util.inherit(CheckboxWidgetAnnotationElement, WidgetAnnotationElement, {\n          render: function CheckboxWidgetAnnotationElement_render() {\n            this.container.className = 'buttonWidgetAnnotation checkBox';\n            var element = document.createElement('input');\n            element.disabled = this.data.readOnly;\n            element.type = 'checkbox';\n\n            if (this.data.fieldValue && this.data.fieldValue !== 'Off') {\n              element.setAttribute('checked', true);\n            }\n\n            this.container.appendChild(element);\n            return this.container;\n          }\n        });\n\n        return CheckboxWidgetAnnotationElement;\n      }();\n\n      var RadioButtonWidgetAnnotationElement = function RadioButtonWidgetAnnotationElementClosure() {\n        function RadioButtonWidgetAnnotationElement(parameters) {\n          WidgetAnnotationElement.call(this, parameters, parameters.renderInteractiveForms);\n        }\n\n        _util.Util.inherit(RadioButtonWidgetAnnotationElement, WidgetAnnotationElement, {\n          render: function RadioButtonWidgetAnnotationElement_render() {\n            this.container.className = 'buttonWidgetAnnotation radioButton';\n            var element = document.createElement('input');\n            element.disabled = this.data.readOnly;\n            element.type = 'radio';\n            element.name = this.data.fieldName;\n\n            if (this.data.fieldValue === this.data.buttonValue) {\n              element.setAttribute('checked', true);\n            }\n\n            this.container.appendChild(element);\n            return this.container;\n          }\n        });\n\n        return RadioButtonWidgetAnnotationElement;\n      }();\n\n      var ChoiceWidgetAnnotationElement = function ChoiceWidgetAnnotationElementClosure() {\n        function ChoiceWidgetAnnotationElement(parameters) {\n          WidgetAnnotationElement.call(this, parameters, parameters.renderInteractiveForms);\n        }\n\n        _util.Util.inherit(ChoiceWidgetAnnotationElement, WidgetAnnotationElement, {\n          render: function ChoiceWidgetAnnotationElement_render() {\n            this.container.className = 'choiceWidgetAnnotation';\n            var selectElement = document.createElement('select');\n            selectElement.disabled = this.data.readOnly;\n\n            if (!this.data.combo) {\n              selectElement.size = this.data.options.length;\n\n              if (this.data.multiSelect) {\n                selectElement.multiple = true;\n              }\n            }\n\n            for (var i = 0, ii = this.data.options.length; i < ii; i++) {\n              var option = this.data.options[i];\n              var optionElement = document.createElement('option');\n              optionElement.textContent = option.displayValue;\n              optionElement.value = option.exportValue;\n\n              if (this.data.fieldValue.indexOf(option.displayValue) >= 0) {\n                optionElement.setAttribute('selected', true);\n              }\n\n              selectElement.appendChild(optionElement);\n            }\n\n            this.container.appendChild(selectElement);\n            return this.container;\n          }\n        });\n\n        return ChoiceWidgetAnnotationElement;\n      }();\n\n      var PopupAnnotationElement = function PopupAnnotationElementClosure() {\n        var IGNORE_TYPES = ['Line'];\n\n        function PopupAnnotationElement(parameters) {\n          var isRenderable = !!(parameters.data.title || parameters.data.contents);\n          AnnotationElement.call(this, parameters, isRenderable);\n        }\n\n        _util.Util.inherit(PopupAnnotationElement, AnnotationElement, {\n          render: function PopupAnnotationElement_render() {\n            this.container.className = 'popupAnnotation';\n\n            if (IGNORE_TYPES.indexOf(this.data.parentType) >= 0) {\n              return this.container;\n            }\n\n            var selector = '[data-annotation-id=\"' + this.data.parentId + '\"]';\n            var parentElement = this.layer.querySelector(selector);\n\n            if (!parentElement) {\n              return this.container;\n            }\n\n            var popup = new PopupElement({\n              container: this.container,\n              trigger: parentElement,\n              color: this.data.color,\n              title: this.data.title,\n              contents: this.data.contents\n            });\n            var parentLeft = parseFloat(parentElement.style.left);\n            var parentWidth = parseFloat(parentElement.style.width);\n\n            _dom_utils.CustomStyle.setProp('transformOrigin', this.container, -(parentLeft + parentWidth) + 'px -' + parentElement.style.top);\n\n            this.container.style.left = parentLeft + parentWidth + 'px';\n            this.container.appendChild(popup.render());\n            return this.container;\n          }\n        });\n\n        return PopupAnnotationElement;\n      }();\n\n      var PopupElement = function PopupElementClosure() {\n        var BACKGROUND_ENLIGHT = 0.7;\n\n        function PopupElement(parameters) {\n          this.container = parameters.container;\n          this.trigger = parameters.trigger;\n          this.color = parameters.color;\n          this.title = parameters.title;\n          this.contents = parameters.contents;\n          this.hideWrapper = parameters.hideWrapper || false;\n          this.pinned = false;\n        }\n\n        PopupElement.prototype = {\n          render: function PopupElement_render() {\n            var wrapper = document.createElement('div');\n            wrapper.className = 'popupWrapper';\n            this.hideElement = this.hideWrapper ? wrapper : this.container;\n            this.hideElement.setAttribute('hidden', true);\n            var popup = document.createElement('div');\n            popup.className = 'popup';\n            var color = this.color;\n\n            if (color) {\n              var r = BACKGROUND_ENLIGHT * (255 - color[0]) + color[0];\n              var g = BACKGROUND_ENLIGHT * (255 - color[1]) + color[1];\n              var b = BACKGROUND_ENLIGHT * (255 - color[2]) + color[2];\n              popup.style.backgroundColor = _util.Util.makeCssRgb(r | 0, g | 0, b | 0);\n            }\n\n            var contents = this._formatContents(this.contents);\n\n            var title = document.createElement('h1');\n            title.textContent = this.title;\n            this.trigger.addEventListener('click', this._toggle.bind(this));\n            this.trigger.addEventListener('mouseover', this._show.bind(this, false));\n            this.trigger.addEventListener('mouseout', this._hide.bind(this, false));\n            popup.addEventListener('click', this._hide.bind(this, true));\n            popup.appendChild(title);\n            popup.appendChild(contents);\n            wrapper.appendChild(popup);\n            return wrapper;\n          },\n          _formatContents: function PopupElement_formatContents(contents) {\n            var p = document.createElement('p');\n            var lines = contents.split(/(?:\\r\\n?|\\n)/);\n\n            for (var i = 0, ii = lines.length; i < ii; ++i) {\n              var line = lines[i];\n              p.appendChild(document.createTextNode(line));\n\n              if (i < ii - 1) {\n                p.appendChild(document.createElement('br'));\n              }\n            }\n\n            return p;\n          },\n          _toggle: function PopupElement_toggle() {\n            if (this.pinned) {\n              this._hide(true);\n            } else {\n              this._show(true);\n            }\n          },\n          _show: function PopupElement_show(pin) {\n            if (pin) {\n              this.pinned = true;\n            }\n\n            if (this.hideElement.hasAttribute('hidden')) {\n              this.hideElement.removeAttribute('hidden');\n              this.container.style.zIndex += 1;\n            }\n          },\n          _hide: function PopupElement_hide(unpin) {\n            if (unpin) {\n              this.pinned = false;\n            }\n\n            if (!this.hideElement.hasAttribute('hidden') && !this.pinned) {\n              this.hideElement.setAttribute('hidden', true);\n              this.container.style.zIndex -= 1;\n            }\n          }\n        };\n        return PopupElement;\n      }();\n\n      var LineAnnotationElement = function LineAnnotationElementClosure() {\n        var SVG_NS = 'http://www.w3.org/2000/svg';\n\n        function LineAnnotationElement(parameters) {\n          var isRenderable = !!(parameters.data.hasPopup || parameters.data.title || parameters.data.contents);\n          AnnotationElement.call(this, parameters, isRenderable, true);\n        }\n\n        _util.Util.inherit(LineAnnotationElement, AnnotationElement, {\n          render: function LineAnnotationElement_render() {\n            this.container.className = 'lineAnnotation';\n            var data = this.data;\n            var width = data.rect[2] - data.rect[0];\n            var height = data.rect[3] - data.rect[1];\n            var svg = document.createElementNS(SVG_NS, 'svg:svg');\n            svg.setAttributeNS(null, 'version', '1.1');\n            svg.setAttributeNS(null, 'width', width + 'px');\n            svg.setAttributeNS(null, 'height', height + 'px');\n            svg.setAttributeNS(null, 'preserveAspectRatio', 'none');\n            svg.setAttributeNS(null, 'viewBox', '0 0 ' + width + ' ' + height);\n            var line = document.createElementNS(SVG_NS, 'svg:line');\n            line.setAttributeNS(null, 'x1', data.rect[2] - data.lineCoordinates[0]);\n            line.setAttributeNS(null, 'y1', data.rect[3] - data.lineCoordinates[1]);\n            line.setAttributeNS(null, 'x2', data.rect[2] - data.lineCoordinates[2]);\n            line.setAttributeNS(null, 'y2', data.rect[3] - data.lineCoordinates[3]);\n            line.setAttributeNS(null, 'stroke-width', data.borderStyle.width);\n            line.setAttributeNS(null, 'stroke', 'transparent');\n            svg.appendChild(line);\n            this.container.append(svg);\n\n            this._createPopup(this.container, line, this.data);\n\n            return this.container;\n          }\n        });\n\n        return LineAnnotationElement;\n      }();\n\n      var HighlightAnnotationElement = function HighlightAnnotationElementClosure() {\n        function HighlightAnnotationElement(parameters) {\n          var isRenderable = !!(parameters.data.hasPopup || parameters.data.title || parameters.data.contents);\n          AnnotationElement.call(this, parameters, isRenderable, true);\n        }\n\n        _util.Util.inherit(HighlightAnnotationElement, AnnotationElement, {\n          render: function HighlightAnnotationElement_render() {\n            this.container.className = 'highlightAnnotation';\n\n            if (!this.data.hasPopup) {\n              this._createPopup(this.container, null, this.data);\n            }\n\n            return this.container;\n          }\n        });\n\n        return HighlightAnnotationElement;\n      }();\n\n      var UnderlineAnnotationElement = function UnderlineAnnotationElementClosure() {\n        function UnderlineAnnotationElement(parameters) {\n          var isRenderable = !!(parameters.data.hasPopup || parameters.data.title || parameters.data.contents);\n          AnnotationElement.call(this, parameters, isRenderable, true);\n        }\n\n        _util.Util.inherit(UnderlineAnnotationElement, AnnotationElement, {\n          render: function UnderlineAnnotationElement_render() {\n            this.container.className = 'underlineAnnotation';\n\n            if (!this.data.hasPopup) {\n              this._createPopup(this.container, null, this.data);\n            }\n\n            return this.container;\n          }\n        });\n\n        return UnderlineAnnotationElement;\n      }();\n\n      var SquigglyAnnotationElement = function SquigglyAnnotationElementClosure() {\n        function SquigglyAnnotationElement(parameters) {\n          var isRenderable = !!(parameters.data.hasPopup || parameters.data.title || parameters.data.contents);\n          AnnotationElement.call(this, parameters, isRenderable, true);\n        }\n\n        _util.Util.inherit(SquigglyAnnotationElement, AnnotationElement, {\n          render: function SquigglyAnnotationElement_render() {\n            this.container.className = 'squigglyAnnotation';\n\n            if (!this.data.hasPopup) {\n              this._createPopup(this.container, null, this.data);\n            }\n\n            return this.container;\n          }\n        });\n\n        return SquigglyAnnotationElement;\n      }();\n\n      var StrikeOutAnnotationElement = function StrikeOutAnnotationElementClosure() {\n        function StrikeOutAnnotationElement(parameters) {\n          var isRenderable = !!(parameters.data.hasPopup || parameters.data.title || parameters.data.contents);\n          AnnotationElement.call(this, parameters, isRenderable, true);\n        }\n\n        _util.Util.inherit(StrikeOutAnnotationElement, AnnotationElement, {\n          render: function StrikeOutAnnotationElement_render() {\n            this.container.className = 'strikeoutAnnotation';\n\n            if (!this.data.hasPopup) {\n              this._createPopup(this.container, null, this.data);\n            }\n\n            return this.container;\n          }\n        });\n\n        return StrikeOutAnnotationElement;\n      }();\n\n      var FileAttachmentAnnotationElement = function FileAttachmentAnnotationElementClosure() {\n        function FileAttachmentAnnotationElement(parameters) {\n          AnnotationElement.call(this, parameters, true);\n          var file = this.data.file;\n          this.filename = (0, _dom_utils.getFilenameFromUrl)(file.filename);\n          this.content = file.content;\n          this.linkService.onFileAttachmentAnnotation({\n            id: (0, _util.stringToPDFString)(file.filename),\n            filename: file.filename,\n            content: file.content\n          });\n        }\n\n        _util.Util.inherit(FileAttachmentAnnotationElement, AnnotationElement, {\n          render: function FileAttachmentAnnotationElement_render() {\n            this.container.className = 'fileAttachmentAnnotation';\n            var trigger = document.createElement('div');\n            trigger.style.height = this.container.style.height;\n            trigger.style.width = this.container.style.width;\n            trigger.addEventListener('dblclick', this._download.bind(this));\n\n            if (!this.data.hasPopup && (this.data.title || this.data.contents)) {\n              this._createPopup(this.container, trigger, this.data);\n            }\n\n            this.container.appendChild(trigger);\n            return this.container;\n          },\n          _download: function FileAttachmentAnnotationElement_download() {\n            if (!this.downloadManager) {\n              (0, _util.warn)('Download cannot be started due to unavailable download manager');\n              return;\n            }\n\n            this.downloadManager.downloadData(this.content, this.filename, '');\n          }\n        });\n\n        return FileAttachmentAnnotationElement;\n      }();\n\n      var AnnotationLayer = function AnnotationLayerClosure() {\n        return {\n          render: function AnnotationLayer_render(parameters) {\n            var annotationElementFactory = new AnnotationElementFactory();\n\n            for (var i = 0, ii = parameters.annotations.length; i < ii; i++) {\n              var data = parameters.annotations[i];\n\n              if (!data) {\n                continue;\n              }\n\n              var element = annotationElementFactory.create({\n                data: data,\n                layer: parameters.div,\n                page: parameters.page,\n                viewport: parameters.viewport,\n                linkService: parameters.linkService,\n                downloadManager: parameters.downloadManager,\n                imageResourcesPath: parameters.imageResourcesPath || (0, _dom_utils.getDefaultSetting)('imageResourcesPath'),\n                renderInteractiveForms: parameters.renderInteractiveForms || false\n              });\n\n              if (element.isRenderable) {\n                parameters.div.appendChild(element.render());\n              }\n            }\n          },\n          update: function AnnotationLayer_update(parameters) {\n            for (var i = 0, ii = parameters.annotations.length; i < ii; i++) {\n              var data = parameters.annotations[i];\n              var element = parameters.div.querySelector('[data-annotation-id=\"' + data.id + '\"]');\n\n              if (element) {\n                _dom_utils.CustomStyle.setProp('transform', element, 'matrix(' + parameters.viewport.transform.join(',') + ')');\n              }\n            }\n\n            parameters.div.removeAttribute('hidden');\n          }\n        };\n      }();\n\n      exports.AnnotationLayer = AnnotationLayer;\n      /***/\n    },\n    /* 3 */\n\n    /***/\n    function (module, exports, __w_pdfjs_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.build = exports.version = exports._UnsupportedManager = exports.PDFPageProxy = exports.PDFDocumentProxy = exports.PDFWorker = exports.PDFDataRangeTransport = exports.LoopbackPort = exports.getDocument = undefined;\n\n      var _createClass = function () {\n        function defineProperties(target, props) {\n          for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if (\"value\" in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n          }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n          if (protoProps) defineProperties(Constructor.prototype, protoProps);\n          if (staticProps) defineProperties(Constructor, staticProps);\n          return Constructor;\n        };\n      }();\n\n      var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n      } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n\n      var _util = __w_pdfjs_require__(0);\n\n      var _dom_utils = __w_pdfjs_require__(1);\n\n      var _font_loader = __w_pdfjs_require__(11);\n\n      var _canvas = __w_pdfjs_require__(10);\n\n      var _metadata = __w_pdfjs_require__(7);\n\n      function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n          throw new TypeError(\"Cannot call a class as a function\");\n        }\n      }\n\n      var DEFAULT_RANGE_CHUNK_SIZE = 65536;\n      var isWorkerDisabled = false;\n      var workerSrc;\n      var isPostMessageTransfersDisabled = false;\n      var pdfjsFilePath = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : null;\n      var fakeWorkerFilesLoader = null;\n      var useRequireEnsure = false;\n\n      if (typeof __pdfjsdev_webpack__ === 'undefined') {\n        if (typeof window === 'undefined') {\n          isWorkerDisabled = true;\n\n          if (typeof require.ensure === 'undefined') {\n            require.ensure = require('node-ensure');\n          }\n\n          useRequireEnsure = true;\n        } else if (typeof require !== 'undefined' && typeof require.ensure === 'function') {\n          useRequireEnsure = true;\n        }\n\n        if (typeof requirejs !== 'undefined' && requirejs.toUrl) {\n          workerSrc = requirejs.toUrl('pdfjs-dist/build/pdf.worker.js');\n        }\n\n        var dynamicLoaderSupported = typeof requirejs !== 'undefined' && requirejs.load;\n        fakeWorkerFilesLoader = useRequireEnsure ? function (callback) {\n          require.ensure([], function () {\n            var worker;\n            worker = require('./pdf.worker.js');\n            callback(worker.WorkerMessageHandler);\n          });\n        } : dynamicLoaderSupported ? function (callback) {\n          requirejs(['pdfjs-dist/build/pdf.worker'], function (worker) {\n            callback(worker.WorkerMessageHandler);\n          });\n        } : null;\n      }\n\n      function getDocument(src, pdfDataRangeTransport, passwordCallback, progressCallback) {\n        var task = new PDFDocumentLoadingTask();\n\n        if (arguments.length > 1) {\n          (0, _util.deprecated)('getDocument is called with pdfDataRangeTransport, ' + 'passwordCallback or progressCallback argument');\n        }\n\n        if (pdfDataRangeTransport) {\n          if (!(pdfDataRangeTransport instanceof PDFDataRangeTransport)) {\n            pdfDataRangeTransport = Object.create(pdfDataRangeTransport);\n            pdfDataRangeTransport.length = src.length;\n            pdfDataRangeTransport.initialData = src.initialData;\n\n            if (!pdfDataRangeTransport.abort) {\n              pdfDataRangeTransport.abort = function () {};\n            }\n          }\n\n          src = Object.create(src);\n          src.range = pdfDataRangeTransport;\n        }\n\n        task.onPassword = passwordCallback || null;\n        task.onProgress = progressCallback || null;\n        var source;\n\n        if (typeof src === 'string') {\n          source = {\n            url: src\n          };\n        } else if ((0, _util.isArrayBuffer)(src)) {\n          source = {\n            data: src\n          };\n        } else if (src instanceof PDFDataRangeTransport) {\n          source = {\n            range: src\n          };\n        } else {\n          if ((typeof src === 'undefined' ? 'undefined' : _typeof(src)) !== 'object') {\n            (0, _util.error)('Invalid parameter in getDocument, need either Uint8Array, ' + 'string or a parameter object');\n          }\n\n          if (!src.url && !src.data && !src.range) {\n            (0, _util.error)('Invalid parameter object: need either .data, .range or .url');\n          }\n\n          source = src;\n        }\n\n        var params = {};\n        var rangeTransport = null;\n        var worker = null;\n\n        for (var key in source) {\n          if (key === 'url' && typeof window !== 'undefined') {\n            params[key] = new URL(source[key], window.location).href;\n            continue;\n          } else if (key === 'range') {\n            rangeTransport = source[key];\n            continue;\n          } else if (key === 'worker') {\n            worker = source[key];\n            continue;\n          } else if (key === 'data' && !(source[key] instanceof Uint8Array)) {\n            var pdfBytes = source[key];\n\n            if (typeof pdfBytes === 'string') {\n              params[key] = (0, _util.stringToBytes)(pdfBytes);\n            } else if ((typeof pdfBytes === 'undefined' ? 'undefined' : _typeof(pdfBytes)) === 'object' && pdfBytes !== null && !isNaN(pdfBytes.length)) {\n              params[key] = new Uint8Array(pdfBytes);\n            } else if ((0, _util.isArrayBuffer)(pdfBytes)) {\n              params[key] = new Uint8Array(pdfBytes);\n            } else {\n              (0, _util.error)('Invalid PDF binary data: either typed array, string or ' + 'array-like object is expected in the data property.');\n            }\n\n            continue;\n          }\n\n          params[key] = source[key];\n        }\n\n        params.rangeChunkSize = params.rangeChunkSize || DEFAULT_RANGE_CHUNK_SIZE;\n        params.ignoreErrors = params.stopAtErrors !== true;\n        var CMapReaderFactory = params.CMapReaderFactory || _dom_utils.DOMCMapReaderFactory;\n\n        if (params.disableNativeImageDecoder !== undefined) {\n          (0, _util.deprecated)('parameter disableNativeImageDecoder, ' + 'use nativeImageDecoderSupport instead');\n        }\n\n        params.nativeImageDecoderSupport = params.nativeImageDecoderSupport || (params.disableNativeImageDecoder === true ? _util.NativeImageDecoding.NONE : _util.NativeImageDecoding.DECODE);\n\n        if (params.nativeImageDecoderSupport !== _util.NativeImageDecoding.DECODE && params.nativeImageDecoderSupport !== _util.NativeImageDecoding.NONE && params.nativeImageDecoderSupport !== _util.NativeImageDecoding.DISPLAY) {\n          (0, _util.warn)('Invalid parameter nativeImageDecoderSupport: ' + 'need a state of enum {NativeImageDecoding}');\n          params.nativeImageDecoderSupport = _util.NativeImageDecoding.DECODE;\n        }\n\n        if (!worker) {\n          var workerPort = (0, _dom_utils.getDefaultSetting)('workerPort');\n          worker = workerPort ? new PDFWorker(null, workerPort) : new PDFWorker();\n          task._worker = worker;\n        }\n\n        var docId = task.docId;\n        worker.promise.then(function () {\n          if (task.destroyed) {\n            throw new Error('Loading aborted');\n          }\n\n          return _fetchDocument(worker, params, rangeTransport, docId).then(function (workerId) {\n            if (task.destroyed) {\n              throw new Error('Loading aborted');\n            }\n\n            var messageHandler = new _util.MessageHandler(docId, workerId, worker.port);\n            var transport = new WorkerTransport(messageHandler, task, rangeTransport, CMapReaderFactory);\n            task._transport = transport;\n            messageHandler.send('Ready', null);\n          });\n        }).catch(task._capability.reject);\n        return task;\n      }\n\n      function _fetchDocument(worker, source, pdfDataRangeTransport, docId) {\n        if (worker.destroyed) {\n          return Promise.reject(new Error('Worker was destroyed'));\n        }\n\n        source.disableAutoFetch = (0, _dom_utils.getDefaultSetting)('disableAutoFetch');\n        source.disableStream = (0, _dom_utils.getDefaultSetting)('disableStream');\n        source.chunkedViewerLoading = !!pdfDataRangeTransport;\n\n        if (pdfDataRangeTransport) {\n          source.length = pdfDataRangeTransport.length;\n          source.initialData = pdfDataRangeTransport.initialData;\n        }\n\n        return worker.messageHandler.sendWithPromise('GetDocRequest', {\n          docId: docId,\n          source: source,\n          disableRange: (0, _dom_utils.getDefaultSetting)('disableRange'),\n          maxImageSize: (0, _dom_utils.getDefaultSetting)('maxImageSize'),\n          disableFontFace: (0, _dom_utils.getDefaultSetting)('disableFontFace'),\n          disableCreateObjectURL: (0, _dom_utils.getDefaultSetting)('disableCreateObjectURL'),\n          postMessageTransfers: (0, _dom_utils.getDefaultSetting)('postMessageTransfers') && !isPostMessageTransfersDisabled,\n          docBaseUrl: source.docBaseUrl,\n          nativeImageDecoderSupport: source.nativeImageDecoderSupport,\n          ignoreErrors: source.ignoreErrors\n        }).then(function (workerId) {\n          if (worker.destroyed) {\n            throw new Error('Worker was destroyed');\n          }\n\n          return workerId;\n        });\n      }\n\n      var PDFDocumentLoadingTask = function PDFDocumentLoadingTaskClosure() {\n        var nextDocumentId = 0;\n\n        function PDFDocumentLoadingTask() {\n          this._capability = (0, _util.createPromiseCapability)();\n          this._transport = null;\n          this._worker = null;\n          this.docId = 'd' + nextDocumentId++;\n          this.destroyed = false;\n          this.onPassword = null;\n          this.onProgress = null;\n          this.onUnsupportedFeature = null;\n        }\n\n        PDFDocumentLoadingTask.prototype = {\n          get promise() {\n            return this._capability.promise;\n          },\n\n          destroy: function destroy() {\n            var _this = this;\n\n            this.destroyed = true;\n            var transportDestroyed = !this._transport ? Promise.resolve() : this._transport.destroy();\n            return transportDestroyed.then(function () {\n              _this._transport = null;\n\n              if (_this._worker) {\n                _this._worker.destroy();\n\n                _this._worker = null;\n              }\n            });\n          },\n          then: function PDFDocumentLoadingTask_then(onFulfilled, onRejected) {\n            return this.promise.then.apply(this.promise, arguments);\n          }\n        };\n        return PDFDocumentLoadingTask;\n      }();\n\n      var PDFDataRangeTransport = function pdfDataRangeTransportClosure() {\n        function PDFDataRangeTransport(length, initialData) {\n          this.length = length;\n          this.initialData = initialData;\n          this._rangeListeners = [];\n          this._progressListeners = [];\n          this._progressiveReadListeners = [];\n          this._readyCapability = (0, _util.createPromiseCapability)();\n        }\n\n        PDFDataRangeTransport.prototype = {\n          addRangeListener: function PDFDataRangeTransport_addRangeListener(listener) {\n            this._rangeListeners.push(listener);\n          },\n          addProgressListener: function PDFDataRangeTransport_addProgressListener(listener) {\n            this._progressListeners.push(listener);\n          },\n          addProgressiveReadListener: function PDFDataRangeTransport_addProgressiveReadListener(listener) {\n            this._progressiveReadListeners.push(listener);\n          },\n          onDataRange: function PDFDataRangeTransport_onDataRange(begin, chunk) {\n            var listeners = this._rangeListeners;\n\n            for (var i = 0, n = listeners.length; i < n; ++i) {\n              listeners[i](begin, chunk);\n            }\n          },\n          onDataProgress: function PDFDataRangeTransport_onDataProgress(loaded) {\n            var _this2 = this;\n\n            this._readyCapability.promise.then(function () {\n              var listeners = _this2._progressListeners;\n\n              for (var i = 0, n = listeners.length; i < n; ++i) {\n                listeners[i](loaded);\n              }\n            });\n          },\n          onDataProgressiveRead: function PDFDataRangeTransport_onDataProgress(chunk) {\n            var _this3 = this;\n\n            this._readyCapability.promise.then(function () {\n              var listeners = _this3._progressiveReadListeners;\n\n              for (var i = 0, n = listeners.length; i < n; ++i) {\n                listeners[i](chunk);\n              }\n            });\n          },\n          transportReady: function PDFDataRangeTransport_transportReady() {\n            this._readyCapability.resolve();\n          },\n          requestDataRange: function PDFDataRangeTransport_requestDataRange(begin, end) {\n            throw new Error('Abstract method PDFDataRangeTransport.requestDataRange');\n          },\n          abort: function PDFDataRangeTransport_abort() {}\n        };\n        return PDFDataRangeTransport;\n      }();\n\n      var PDFDocumentProxy = function PDFDocumentProxyClosure() {\n        function PDFDocumentProxy(pdfInfo, transport, loadingTask) {\n          this.pdfInfo = pdfInfo;\n          this.transport = transport;\n          this.loadingTask = loadingTask;\n        }\n\n        PDFDocumentProxy.prototype = {\n          get numPages() {\n            return this.pdfInfo.numPages;\n          },\n\n          get fingerprint() {\n            return this.pdfInfo.fingerprint;\n          },\n\n          getPage: function PDFDocumentProxy_getPage(pageNumber) {\n            return this.transport.getPage(pageNumber);\n          },\n          getPageIndex: function PDFDocumentProxy_getPageIndex(ref) {\n            return this.transport.getPageIndex(ref);\n          },\n          getDestinations: function PDFDocumentProxy_getDestinations() {\n            return this.transport.getDestinations();\n          },\n          getDestination: function PDFDocumentProxy_getDestination(id) {\n            return this.transport.getDestination(id);\n          },\n          getPageLabels: function PDFDocumentProxy_getPageLabels() {\n            return this.transport.getPageLabels();\n          },\n          getAttachments: function PDFDocumentProxy_getAttachments() {\n            return this.transport.getAttachments();\n          },\n          getJavaScript: function PDFDocumentProxy_getJavaScript() {\n            return this.transport.getJavaScript();\n          },\n          getOutline: function PDFDocumentProxy_getOutline() {\n            return this.transport.getOutline();\n          },\n          getMetadata: function PDFDocumentProxy_getMetadata() {\n            return this.transport.getMetadata();\n          },\n          getData: function PDFDocumentProxy_getData() {\n            return this.transport.getData();\n          },\n          getDownloadInfo: function PDFDocumentProxy_getDownloadInfo() {\n            return this.transport.downloadInfoCapability.promise;\n          },\n          getStats: function PDFDocumentProxy_getStats() {\n            return this.transport.getStats();\n          },\n          cleanup: function PDFDocumentProxy_cleanup() {\n            this.transport.startCleanup();\n          },\n          destroy: function PDFDocumentProxy_destroy() {\n            return this.loadingTask.destroy();\n          }\n        };\n        return PDFDocumentProxy;\n      }();\n\n      var PDFPageProxy = function PDFPageProxyClosure() {\n        function PDFPageProxy(pageIndex, pageInfo, transport) {\n          this.pageIndex = pageIndex;\n          this.pageInfo = pageInfo;\n          this.transport = transport;\n          this.stats = new _util.StatTimer();\n          this.stats.enabled = (0, _dom_utils.getDefaultSetting)('enableStats');\n          this.commonObjs = transport.commonObjs;\n          this.objs = new PDFObjects();\n          this.cleanupAfterRender = false;\n          this.pendingCleanup = false;\n          this.intentStates = Object.create(null);\n          this.destroyed = false;\n        }\n\n        PDFPageProxy.prototype = {\n          get pageNumber() {\n            return this.pageIndex + 1;\n          },\n\n          get rotate() {\n            return this.pageInfo.rotate;\n          },\n\n          get ref() {\n            return this.pageInfo.ref;\n          },\n\n          get userUnit() {\n            return this.pageInfo.userUnit;\n          },\n\n          get view() {\n            return this.pageInfo.view;\n          },\n\n          getViewport: function PDFPageProxy_getViewport(scale, rotate) {\n            if (arguments.length < 2) {\n              rotate = this.rotate;\n            }\n\n            return new _util.PageViewport(this.view, scale, rotate, 0, 0);\n          },\n          getAnnotations: function PDFPageProxy_getAnnotations(params) {\n            var intent = params && params.intent || null;\n\n            if (!this.annotationsPromise || this.annotationsIntent !== intent) {\n              this.annotationsPromise = this.transport.getAnnotations(this.pageIndex, intent);\n              this.annotationsIntent = intent;\n            }\n\n            return this.annotationsPromise;\n          },\n          render: function PDFPageProxy_render(params) {\n            var _this4 = this;\n\n            var stats = this.stats;\n            stats.time('Overall');\n            this.pendingCleanup = false;\n            var renderingIntent = params.intent === 'print' ? 'print' : 'display';\n            var canvasFactory = params.canvasFactory || new _dom_utils.DOMCanvasFactory();\n\n            if (!this.intentStates[renderingIntent]) {\n              this.intentStates[renderingIntent] = Object.create(null);\n            }\n\n            var intentState = this.intentStates[renderingIntent];\n\n            if (!intentState.displayReadyCapability) {\n              intentState.receivingOperatorList = true;\n              intentState.displayReadyCapability = (0, _util.createPromiseCapability)();\n              intentState.operatorList = {\n                fnArray: [],\n                argsArray: [],\n                lastChunk: false\n              };\n              this.stats.time('Page Request');\n              this.transport.messageHandler.send('RenderPageRequest', {\n                pageIndex: this.pageNumber - 1,\n                intent: renderingIntent,\n                renderInteractiveForms: params.renderInteractiveForms === true\n              });\n            }\n\n            var complete = function complete(error) {\n              var i = intentState.renderTasks.indexOf(internalRenderTask);\n\n              if (i >= 0) {\n                intentState.renderTasks.splice(i, 1);\n              }\n\n              if (_this4.cleanupAfterRender) {\n                _this4.pendingCleanup = true;\n              }\n\n              _this4._tryCleanup();\n\n              if (error) {\n                internalRenderTask.capability.reject(error);\n              } else {\n                internalRenderTask.capability.resolve();\n              }\n\n              stats.timeEnd('Rendering');\n              stats.timeEnd('Overall');\n            };\n\n            var internalRenderTask = new InternalRenderTask(complete, params, this.objs, this.commonObjs, intentState.operatorList, this.pageNumber, canvasFactory);\n            internalRenderTask.useRequestAnimationFrame = renderingIntent !== 'print';\n\n            if (!intentState.renderTasks) {\n              intentState.renderTasks = [];\n            }\n\n            intentState.renderTasks.push(internalRenderTask);\n            var renderTask = internalRenderTask.task;\n\n            if (params.continueCallback) {\n              (0, _util.deprecated)('render is used with continueCallback parameter');\n              renderTask.onContinue = params.continueCallback;\n            }\n\n            intentState.displayReadyCapability.promise.then(function (transparency) {\n              if (_this4.pendingCleanup) {\n                complete();\n                return;\n              }\n\n              stats.time('Rendering');\n              internalRenderTask.initializeGraphics(transparency);\n              internalRenderTask.operatorListChanged();\n            }, complete);\n            return renderTask;\n          },\n          getOperatorList: function PDFPageProxy_getOperatorList() {\n            function operatorListChanged() {\n              if (intentState.operatorList.lastChunk) {\n                intentState.opListReadCapability.resolve(intentState.operatorList);\n                var i = intentState.renderTasks.indexOf(opListTask);\n\n                if (i >= 0) {\n                  intentState.renderTasks.splice(i, 1);\n                }\n              }\n            }\n\n            var renderingIntent = 'oplist';\n\n            if (!this.intentStates[renderingIntent]) {\n              this.intentStates[renderingIntent] = Object.create(null);\n            }\n\n            var intentState = this.intentStates[renderingIntent];\n            var opListTask;\n\n            if (!intentState.opListReadCapability) {\n              opListTask = {};\n              opListTask.operatorListChanged = operatorListChanged;\n              intentState.receivingOperatorList = true;\n              intentState.opListReadCapability = (0, _util.createPromiseCapability)();\n              intentState.renderTasks = [];\n              intentState.renderTasks.push(opListTask);\n              intentState.operatorList = {\n                fnArray: [],\n                argsArray: [],\n                lastChunk: false\n              };\n              this.transport.messageHandler.send('RenderPageRequest', {\n                pageIndex: this.pageIndex,\n                intent: renderingIntent\n              });\n            }\n\n            return intentState.opListReadCapability.promise;\n          },\n          getTextContent: function PDFPageProxy_getTextContent(params) {\n            params = params || {};\n            return this.transport.messageHandler.sendWithPromise('GetTextContent', {\n              pageIndex: this.pageNumber - 1,\n              normalizeWhitespace: params.normalizeWhitespace === true,\n              combineTextItems: params.disableCombineTextItems !== true\n            });\n          },\n          _destroy: function PDFPageProxy_destroy() {\n            this.destroyed = true;\n            this.transport.pageCache[this.pageIndex] = null;\n            var waitOn = [];\n            Object.keys(this.intentStates).forEach(function (intent) {\n              if (intent === 'oplist') {\n                return;\n              }\n\n              var intentState = this.intentStates[intent];\n              intentState.renderTasks.forEach(function (renderTask) {\n                var renderCompleted = renderTask.capability.promise.catch(function () {});\n                waitOn.push(renderCompleted);\n                renderTask.cancel();\n              });\n            }, this);\n            this.objs.clear();\n            this.annotationsPromise = null;\n            this.pendingCleanup = false;\n            return Promise.all(waitOn);\n          },\n          destroy: function destroy() {\n            (0, _util.deprecated)('page destroy method, use cleanup() instead');\n            this.cleanup();\n          },\n          cleanup: function PDFPageProxy_cleanup() {\n            this.pendingCleanup = true;\n\n            this._tryCleanup();\n          },\n          _tryCleanup: function PDFPageProxy_tryCleanup() {\n            if (!this.pendingCleanup || Object.keys(this.intentStates).some(function (intent) {\n              var intentState = this.intentStates[intent];\n              return intentState.renderTasks.length !== 0 || intentState.receivingOperatorList;\n            }, this)) {\n              return;\n            }\n\n            Object.keys(this.intentStates).forEach(function (intent) {\n              delete this.intentStates[intent];\n            }, this);\n            this.objs.clear();\n            this.annotationsPromise = null;\n            this.pendingCleanup = false;\n          },\n          _startRenderPage: function PDFPageProxy_startRenderPage(transparency, intent) {\n            var intentState = this.intentStates[intent];\n\n            if (intentState.displayReadyCapability) {\n              intentState.displayReadyCapability.resolve(transparency);\n            }\n          },\n          _renderPageChunk: function PDFPageProxy_renderPageChunk(operatorListChunk, intent) {\n            var intentState = this.intentStates[intent];\n            var i, ii;\n\n            for (i = 0, ii = operatorListChunk.length; i < ii; i++) {\n              intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n              intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n            }\n\n            intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n\n            for (i = 0; i < intentState.renderTasks.length; i++) {\n              intentState.renderTasks[i].operatorListChanged();\n            }\n\n            if (operatorListChunk.lastChunk) {\n              intentState.receivingOperatorList = false;\n\n              this._tryCleanup();\n            }\n          }\n        };\n        return PDFPageProxy;\n      }();\n\n      var LoopbackPort = function () {\n        function LoopbackPort(defer) {\n          _classCallCheck(this, LoopbackPort);\n\n          this._listeners = [];\n          this._defer = defer;\n          this._deferred = Promise.resolve(undefined);\n        }\n\n        _createClass(LoopbackPort, [{\n          key: 'postMessage',\n          value: function postMessage(obj, transfers) {\n            var _this5 = this;\n\n            function cloneValue(value) {\n              if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) !== 'object' || value === null) {\n                return value;\n              }\n\n              if (cloned.has(value)) {\n                return cloned.get(value);\n              }\n\n              var result;\n              var buffer;\n\n              if ((buffer = value.buffer) && (0, _util.isArrayBuffer)(buffer)) {\n                var transferable = transfers && transfers.indexOf(buffer) >= 0;\n\n                if (value === buffer) {\n                  result = value;\n                } else if (transferable) {\n                  result = new value.constructor(buffer, value.byteOffset, value.byteLength);\n                } else {\n                  result = new value.constructor(value);\n                }\n\n                cloned.set(value, result);\n                return result;\n              }\n\n              result = (0, _util.isArray)(value) ? [] : {};\n              cloned.set(value, result);\n\n              for (var i in value) {\n                var desc,\n                    p = value;\n\n                while (!(desc = Object.getOwnPropertyDescriptor(p, i))) {\n                  p = Object.getPrototypeOf(p);\n                }\n\n                if (typeof desc.value === 'undefined' || typeof desc.value === 'function') {\n                  continue;\n                }\n\n                result[i] = cloneValue(desc.value);\n              }\n\n              return result;\n            }\n\n            if (!this._defer) {\n              this._listeners.forEach(function (listener) {\n                listener.call(this, {\n                  data: obj\n                });\n              }, this);\n\n              return;\n            }\n\n            var cloned = new WeakMap();\n            var e = {\n              data: cloneValue(obj)\n            };\n\n            this._deferred.then(function () {\n              _this5._listeners.forEach(function (listener) {\n                listener.call(this, e);\n              }, _this5);\n            });\n          }\n        }, {\n          key: 'addEventListener',\n          value: function addEventListener(name, listener) {\n            this._listeners.push(listener);\n          }\n        }, {\n          key: 'removeEventListener',\n          value: function removeEventListener(name, listener) {\n            var i = this._listeners.indexOf(listener);\n\n            this._listeners.splice(i, 1);\n          }\n        }, {\n          key: 'terminate',\n          value: function terminate() {\n            this._listeners = [];\n          }\n        }]);\n\n        return LoopbackPort;\n      }();\n\n      var PDFWorker = function PDFWorkerClosure() {\n        var nextFakeWorkerId = 0;\n\n        function getWorkerSrc() {\n          if (typeof workerSrc !== 'undefined') {\n            return workerSrc;\n          }\n\n          if ((0, _dom_utils.getDefaultSetting)('workerSrc')) {\n            return (0, _dom_utils.getDefaultSetting)('workerSrc');\n          }\n\n          if (pdfjsFilePath) {\n            return pdfjsFilePath.replace(/(\\.(?:min\\.)?js)(\\?.*)?$/i, '.worker$1$2');\n          }\n\n          (0, _util.error)('No PDFJS.workerSrc specified');\n        }\n\n        var fakeWorkerFilesLoadedCapability;\n\n        function setupFakeWorkerGlobal() {\n          var WorkerMessageHandler;\n\n          if (fakeWorkerFilesLoadedCapability) {\n            return fakeWorkerFilesLoadedCapability.promise;\n          }\n\n          fakeWorkerFilesLoadedCapability = (0, _util.createPromiseCapability)();\n\n          var loader = fakeWorkerFilesLoader || function (callback) {\n            _util.Util.loadScript(getWorkerSrc(), function () {\n              callback(window.pdfjsDistBuildPdfWorker.WorkerMessageHandler);\n            });\n          };\n\n          loader(fakeWorkerFilesLoadedCapability.resolve);\n          return fakeWorkerFilesLoadedCapability.promise;\n        }\n\n        function createCDNWrapper(url) {\n          var wrapper = 'importScripts(\\'' + url + '\\');';\n          return URL.createObjectURL(new Blob([wrapper]));\n        }\n\n        function PDFWorker(name, port) {\n          this.name = name;\n          this.destroyed = false;\n          this._readyCapability = (0, _util.createPromiseCapability)();\n          this._port = null;\n          this._webWorker = null;\n          this._messageHandler = null;\n\n          if (port) {\n            this._initializeFromPort(port);\n\n            return;\n          }\n\n          this._initialize();\n        }\n\n        PDFWorker.prototype = {\n          get promise() {\n            return this._readyCapability.promise;\n          },\n\n          get port() {\n            return this._port;\n          },\n\n          get messageHandler() {\n            return this._messageHandler;\n          },\n\n          _initializeFromPort: function PDFWorker_initializeFromPort(port) {\n            this._port = port;\n            this._messageHandler = new _util.MessageHandler('main', 'worker', port);\n\n            this._messageHandler.on('ready', function () {});\n\n            this._readyCapability.resolve();\n          },\n          _initialize: function PDFWorker_initialize() {\n            var _this6 = this;\n\n            if (!isWorkerDisabled && !(0, _dom_utils.getDefaultSetting)('disableWorker') && typeof Worker !== 'undefined') {\n              var workerSrc = getWorkerSrc();\n\n              try {\n                if (!(0, _util.isSameOrigin)(window.location.href, workerSrc)) {\n                  workerSrc = createCDNWrapper(new URL(workerSrc, window.location).href);\n                }\n\n                var worker = new Worker(workerSrc);\n                var messageHandler = new _util.MessageHandler('main', 'worker', worker);\n\n                var terminateEarly = function terminateEarly() {\n                  worker.removeEventListener('error', onWorkerError);\n                  messageHandler.destroy();\n                  worker.terminate();\n\n                  if (_this6.destroyed) {\n                    _this6._readyCapability.reject(new Error('Worker was destroyed'));\n                  } else {\n                    _this6._setupFakeWorker();\n                  }\n                };\n\n                var onWorkerError = function onWorkerError() {\n                  if (!_this6._webWorker) {\n                    terminateEarly();\n                  }\n                };\n\n                worker.addEventListener('error', onWorkerError);\n                messageHandler.on('test', function (data) {\n                  worker.removeEventListener('error', onWorkerError);\n\n                  if (_this6.destroyed) {\n                    terminateEarly();\n                    return;\n                  }\n\n                  var supportTypedArray = data && data.supportTypedArray;\n\n                  if (supportTypedArray) {\n                    _this6._messageHandler = messageHandler;\n                    _this6._port = worker;\n                    _this6._webWorker = worker;\n\n                    if (!data.supportTransfers) {\n                      isPostMessageTransfersDisabled = true;\n                    }\n\n                    _this6._readyCapability.resolve();\n\n                    messageHandler.send('configure', {\n                      verbosity: (0, _util.getVerbosityLevel)()\n                    });\n                  } else {\n                    _this6._setupFakeWorker();\n\n                    messageHandler.destroy();\n                    worker.terminate();\n                  }\n                });\n                messageHandler.on('console_log', function (data) {\n                  console.log.apply(console, data);\n                });\n                messageHandler.on('console_error', function (data) {\n                  console.error.apply(console, data);\n                });\n                messageHandler.on('ready', function (data) {\n                  worker.removeEventListener('error', onWorkerError);\n\n                  if (_this6.destroyed) {\n                    terminateEarly();\n                    return;\n                  }\n\n                  try {\n                    sendTest();\n                  } catch (e) {\n                    _this6._setupFakeWorker();\n                  }\n                });\n\n                var sendTest = function sendTest() {\n                  var postMessageTransfers = (0, _dom_utils.getDefaultSetting)('postMessageTransfers') && !isPostMessageTransfersDisabled;\n                  var testObj = new Uint8Array([postMessageTransfers ? 255 : 0]);\n\n                  try {\n                    messageHandler.send('test', testObj, [testObj.buffer]);\n                  } catch (ex) {\n                    (0, _util.info)('Cannot use postMessage transfers');\n                    testObj[0] = 0;\n                    messageHandler.send('test', testObj);\n                  }\n                };\n\n                sendTest();\n                return;\n              } catch (e) {\n                (0, _util.info)('The worker has been disabled.');\n              }\n            }\n\n            this._setupFakeWorker();\n          },\n          _setupFakeWorker: function PDFWorker_setupFakeWorker() {\n            var _this7 = this;\n\n            if (!isWorkerDisabled && !(0, _dom_utils.getDefaultSetting)('disableWorker')) {\n              (0, _util.warn)('Setting up fake worker.');\n              isWorkerDisabled = true;\n            }\n\n            setupFakeWorkerGlobal().then(function (WorkerMessageHandler) {\n              if (_this7.destroyed) {\n                _this7._readyCapability.reject(new Error('Worker was destroyed'));\n\n                return;\n              }\n\n              var isTypedArraysPresent = Uint8Array !== Float32Array;\n              var port = new LoopbackPort(isTypedArraysPresent);\n              _this7._port = port;\n              var id = 'fake' + nextFakeWorkerId++;\n              var workerHandler = new _util.MessageHandler(id + '_worker', id, port);\n              WorkerMessageHandler.setup(workerHandler, port);\n              var messageHandler = new _util.MessageHandler(id, id + '_worker', port);\n              _this7._messageHandler = messageHandler;\n\n              _this7._readyCapability.resolve();\n            });\n          },\n          destroy: function PDFWorker_destroy() {\n            this.destroyed = true;\n\n            if (this._webWorker) {\n              this._webWorker.terminate();\n\n              this._webWorker = null;\n            }\n\n            this._port = null;\n\n            if (this._messageHandler) {\n              this._messageHandler.destroy();\n\n              this._messageHandler = null;\n            }\n          }\n        };\n        return PDFWorker;\n      }();\n\n      var WorkerTransport = function WorkerTransportClosure() {\n        function WorkerTransport(messageHandler, loadingTask, pdfDataRangeTransport, CMapReaderFactory) {\n          this.messageHandler = messageHandler;\n          this.loadingTask = loadingTask;\n          this.pdfDataRangeTransport = pdfDataRangeTransport;\n          this.commonObjs = new PDFObjects();\n          this.fontLoader = new _font_loader.FontLoader(loadingTask.docId);\n          this.CMapReaderFactory = new CMapReaderFactory({\n            baseUrl: (0, _dom_utils.getDefaultSetting)('cMapUrl'),\n            isCompressed: (0, _dom_utils.getDefaultSetting)('cMapPacked')\n          });\n          this.destroyed = false;\n          this.destroyCapability = null;\n          this._passwordCapability = null;\n          this.pageCache = [];\n          this.pagePromises = [];\n          this.downloadInfoCapability = (0, _util.createPromiseCapability)();\n          this.setupMessageHandler();\n        }\n\n        WorkerTransport.prototype = {\n          destroy: function WorkerTransport_destroy() {\n            var _this8 = this;\n\n            if (this.destroyCapability) {\n              return this.destroyCapability.promise;\n            }\n\n            this.destroyed = true;\n            this.destroyCapability = (0, _util.createPromiseCapability)();\n\n            if (this._passwordCapability) {\n              this._passwordCapability.reject(new Error('Worker was destroyed during onPassword callback'));\n            }\n\n            var waitOn = [];\n            this.pageCache.forEach(function (page) {\n              if (page) {\n                waitOn.push(page._destroy());\n              }\n            });\n            this.pageCache = [];\n            this.pagePromises = [];\n            var terminated = this.messageHandler.sendWithPromise('Terminate', null);\n            waitOn.push(terminated);\n            Promise.all(waitOn).then(function () {\n              _this8.fontLoader.clear();\n\n              if (_this8.pdfDataRangeTransport) {\n                _this8.pdfDataRangeTransport.abort();\n\n                _this8.pdfDataRangeTransport = null;\n              }\n\n              if (_this8.messageHandler) {\n                _this8.messageHandler.destroy();\n\n                _this8.messageHandler = null;\n              }\n\n              _this8.destroyCapability.resolve();\n            }, this.destroyCapability.reject);\n            return this.destroyCapability.promise;\n          },\n          setupMessageHandler: function WorkerTransport_setupMessageHandler() {\n            var messageHandler = this.messageHandler;\n            var loadingTask = this.loadingTask;\n            var pdfDataRangeTransport = this.pdfDataRangeTransport;\n\n            if (pdfDataRangeTransport) {\n              pdfDataRangeTransport.addRangeListener(function (begin, chunk) {\n                messageHandler.send('OnDataRange', {\n                  begin: begin,\n                  chunk: chunk\n                });\n              });\n              pdfDataRangeTransport.addProgressListener(function (loaded) {\n                messageHandler.send('OnDataProgress', {\n                  loaded: loaded\n                });\n              });\n              pdfDataRangeTransport.addProgressiveReadListener(function (chunk) {\n                messageHandler.send('OnDataRange', {\n                  chunk: chunk\n                });\n              });\n              messageHandler.on('RequestDataRange', function transportDataRange(data) {\n                pdfDataRangeTransport.requestDataRange(data.begin, data.end);\n              }, this);\n            }\n\n            messageHandler.on('GetDoc', function transportDoc(data) {\n              var pdfInfo = data.pdfInfo;\n              this.numPages = data.pdfInfo.numPages;\n              var loadingTask = this.loadingTask;\n              var pdfDocument = new PDFDocumentProxy(pdfInfo, this, loadingTask);\n              this.pdfDocument = pdfDocument;\n\n              loadingTask._capability.resolve(pdfDocument);\n            }, this);\n            messageHandler.on('PasswordRequest', function transportPasswordRequest(exception) {\n              var _this9 = this;\n\n              this._passwordCapability = (0, _util.createPromiseCapability)();\n\n              if (loadingTask.onPassword) {\n                var updatePassword = function updatePassword(password) {\n                  _this9._passwordCapability.resolve({\n                    password: password\n                  });\n                };\n\n                loadingTask.onPassword(updatePassword, exception.code);\n              } else {\n                this._passwordCapability.reject(new _util.PasswordException(exception.message, exception.code));\n              }\n\n              return this._passwordCapability.promise;\n            }, this);\n            messageHandler.on('PasswordException', function transportPasswordException(exception) {\n              loadingTask._capability.reject(new _util.PasswordException(exception.message, exception.code));\n            }, this);\n            messageHandler.on('InvalidPDF', function transportInvalidPDF(exception) {\n              this.loadingTask._capability.reject(new _util.InvalidPDFException(exception.message));\n            }, this);\n            messageHandler.on('MissingPDF', function transportMissingPDF(exception) {\n              this.loadingTask._capability.reject(new _util.MissingPDFException(exception.message));\n            }, this);\n            messageHandler.on('UnexpectedResponse', function transportUnexpectedResponse(exception) {\n              this.loadingTask._capability.reject(new _util.UnexpectedResponseException(exception.message, exception.status));\n            }, this);\n            messageHandler.on('UnknownError', function transportUnknownError(exception) {\n              this.loadingTask._capability.reject(new _util.UnknownErrorException(exception.message, exception.details));\n            }, this);\n            messageHandler.on('DataLoaded', function transportPage(data) {\n              this.downloadInfoCapability.resolve(data);\n            }, this);\n            messageHandler.on('PDFManagerReady', function transportPage(data) {\n              if (this.pdfDataRangeTransport) {\n                this.pdfDataRangeTransport.transportReady();\n              }\n            }, this);\n            messageHandler.on('StartRenderPage', function transportRender(data) {\n              if (this.destroyed) {\n                return;\n              }\n\n              var page = this.pageCache[data.pageIndex];\n              page.stats.timeEnd('Page Request');\n\n              page._startRenderPage(data.transparency, data.intent);\n            }, this);\n            messageHandler.on('RenderPageChunk', function transportRender(data) {\n              if (this.destroyed) {\n                return;\n              }\n\n              var page = this.pageCache[data.pageIndex];\n\n              page._renderPageChunk(data.operatorList, data.intent);\n            }, this);\n            messageHandler.on('commonobj', function transportObj(data) {\n              var _this10 = this;\n\n              if (this.destroyed) {\n                return;\n              }\n\n              var id = data[0];\n              var type = data[1];\n\n              if (this.commonObjs.hasData(id)) {\n                return;\n              }\n\n              switch (type) {\n                case 'Font':\n                  var exportedData = data[2];\n\n                  if ('error' in exportedData) {\n                    var exportedError = exportedData.error;\n                    (0, _util.warn)('Error during font loading: ' + exportedError);\n                    this.commonObjs.resolve(id, exportedError);\n                    break;\n                  }\n\n                  var fontRegistry = null;\n\n                  if ((0, _dom_utils.getDefaultSetting)('pdfBug') && _util.globalScope.FontInspector && _util.globalScope['FontInspector'].enabled) {\n                    fontRegistry = {\n                      registerFont: function registerFont(font, url) {\n                        _util.globalScope['FontInspector'].fontAdded(font, url);\n                      }\n                    };\n                  }\n\n                  var font = new _font_loader.FontFaceObject(exportedData, {\n                    isEvalSuported: (0, _dom_utils.getDefaultSetting)('isEvalSupported'),\n                    disableFontFace: (0, _dom_utils.getDefaultSetting)('disableFontFace'),\n                    fontRegistry: fontRegistry\n                  });\n\n                  var fontReady = function fontReady(fontObjs) {\n                    _this10.commonObjs.resolve(id, font);\n                  };\n\n                  this.fontLoader.bind([font], fontReady);\n                  break;\n\n                case 'FontPath':\n                  this.commonObjs.resolve(id, data[2]);\n                  break;\n\n                default:\n                  (0, _util.error)('Got unknown common object type ' + type);\n              }\n            }, this);\n            messageHandler.on('obj', function transportObj(data) {\n              if (this.destroyed) {\n                return;\n              }\n\n              var id = data[0];\n              var pageIndex = data[1];\n              var type = data[2];\n              var pageProxy = this.pageCache[pageIndex];\n              var imageData;\n\n              if (pageProxy.objs.hasData(id)) {\n                return;\n              }\n\n              switch (type) {\n                case 'JpegStream':\n                  imageData = data[3];\n                  (0, _util.loadJpegStream)(id, imageData, pageProxy.objs);\n                  break;\n\n                case 'Image':\n                  imageData = data[3];\n                  pageProxy.objs.resolve(id, imageData);\n                  var MAX_IMAGE_SIZE_TO_STORE = 8000000;\n\n                  if (imageData && 'data' in imageData && imageData.data.length > MAX_IMAGE_SIZE_TO_STORE) {\n                    pageProxy.cleanupAfterRender = true;\n                  }\n\n                  break;\n\n                default:\n                  (0, _util.error)('Got unknown object type ' + type);\n              }\n            }, this);\n            messageHandler.on('DocProgress', function transportDocProgress(data) {\n              if (this.destroyed) {\n                return;\n              }\n\n              var loadingTask = this.loadingTask;\n\n              if (loadingTask.onProgress) {\n                loadingTask.onProgress({\n                  loaded: data.loaded,\n                  total: data.total\n                });\n              }\n            }, this);\n            messageHandler.on('PageError', function transportError(data) {\n              if (this.destroyed) {\n                return;\n              }\n\n              var page = this.pageCache[data.pageNum - 1];\n              var intentState = page.intentStates[data.intent];\n\n              if (intentState.displayReadyCapability) {\n                intentState.displayReadyCapability.reject(data.error);\n              } else {\n                (0, _util.error)(data.error);\n              }\n\n              if (intentState.operatorList) {\n                intentState.operatorList.lastChunk = true;\n\n                for (var i = 0; i < intentState.renderTasks.length; i++) {\n                  intentState.renderTasks[i].operatorListChanged();\n                }\n              }\n            }, this);\n            messageHandler.on('UnsupportedFeature', function transportUnsupportedFeature(data) {\n              if (this.destroyed) {\n                return;\n              }\n\n              var featureId = data.featureId;\n              var loadingTask = this.loadingTask;\n\n              if (loadingTask.onUnsupportedFeature) {\n                loadingTask.onUnsupportedFeature(featureId);\n              }\n\n              _UnsupportedManager.notify(featureId);\n            }, this);\n            messageHandler.on('JpegDecode', function (data) {\n              if (this.destroyed) {\n                return Promise.reject(new Error('Worker was destroyed'));\n              }\n\n              if (typeof document === 'undefined') {\n                return Promise.reject(new Error('\"document\" is not defined.'));\n              }\n\n              var imageUrl = data[0];\n              var components = data[1];\n\n              if (components !== 3 && components !== 1) {\n                return Promise.reject(new Error('Only 3 components or 1 component can be returned'));\n              }\n\n              return new Promise(function (resolve, reject) {\n                var img = new Image();\n\n                img.onload = function () {\n                  var width = img.width;\n                  var height = img.height;\n                  var size = width * height;\n                  var rgbaLength = size * 4;\n                  var buf = new Uint8Array(size * components);\n                  var tmpCanvas = document.createElement('canvas');\n                  tmpCanvas.width = width;\n                  tmpCanvas.height = height;\n                  var tmpCtx = tmpCanvas.getContext('2d');\n                  tmpCtx.drawImage(img, 0, 0);\n                  var data = tmpCtx.getImageData(0, 0, width, height).data;\n                  var i, j;\n\n                  if (components === 3) {\n                    for (i = 0, j = 0; i < rgbaLength; i += 4, j += 3) {\n                      buf[j] = data[i];\n                      buf[j + 1] = data[i + 1];\n                      buf[j + 2] = data[i + 2];\n                    }\n                  } else if (components === 1) {\n                    for (i = 0, j = 0; i < rgbaLength; i += 4, j++) {\n                      buf[j] = data[i];\n                    }\n                  }\n\n                  resolve({\n                    data: buf,\n                    width: width,\n                    height: height\n                  });\n                };\n\n                img.onerror = function () {\n                  reject(new Error('JpegDecode failed to load image'));\n                };\n\n                img.src = imageUrl;\n              });\n            }, this);\n            messageHandler.on('FetchBuiltInCMap', function (data) {\n              if (this.destroyed) {\n                return Promise.reject(new Error('Worker was destroyed'));\n              }\n\n              return this.CMapReaderFactory.fetch({\n                name: data.name\n              });\n            }, this);\n          },\n          getData: function WorkerTransport_getData() {\n            return this.messageHandler.sendWithPromise('GetData', null);\n          },\n          getPage: function WorkerTransport_getPage(pageNumber, capability) {\n            var _this11 = this;\n\n            if (!(0, _util.isInt)(pageNumber) || pageNumber <= 0 || pageNumber > this.numPages) {\n              return Promise.reject(new Error('Invalid page request'));\n            }\n\n            var pageIndex = pageNumber - 1;\n\n            if (pageIndex in this.pagePromises) {\n              return this.pagePromises[pageIndex];\n            }\n\n            var promise = this.messageHandler.sendWithPromise('GetPage', {\n              pageIndex: pageIndex\n            }).then(function (pageInfo) {\n              if (_this11.destroyed) {\n                throw new Error('Transport destroyed');\n              }\n\n              var page = new PDFPageProxy(pageIndex, pageInfo, _this11);\n              _this11.pageCache[pageIndex] = page;\n              return page;\n            });\n            this.pagePromises[pageIndex] = promise;\n            return promise;\n          },\n          getPageIndex: function WorkerTransport_getPageIndexByRef(ref) {\n            return this.messageHandler.sendWithPromise('GetPageIndex', {\n              ref: ref\n            }).catch(function (reason) {\n              return Promise.reject(new Error(reason));\n            });\n          },\n          getAnnotations: function WorkerTransport_getAnnotations(pageIndex, intent) {\n            return this.messageHandler.sendWithPromise('GetAnnotations', {\n              pageIndex: pageIndex,\n              intent: intent\n            });\n          },\n          getDestinations: function WorkerTransport_getDestinations() {\n            return this.messageHandler.sendWithPromise('GetDestinations', null);\n          },\n          getDestination: function WorkerTransport_getDestination(id) {\n            return this.messageHandler.sendWithPromise('GetDestination', {\n              id: id\n            });\n          },\n          getPageLabels: function WorkerTransport_getPageLabels() {\n            return this.messageHandler.sendWithPromise('GetPageLabels', null);\n          },\n          getAttachments: function WorkerTransport_getAttachments() {\n            return this.messageHandler.sendWithPromise('GetAttachments', null);\n          },\n          getJavaScript: function WorkerTransport_getJavaScript() {\n            return this.messageHandler.sendWithPromise('GetJavaScript', null);\n          },\n          getOutline: function WorkerTransport_getOutline() {\n            return this.messageHandler.sendWithPromise('GetOutline', null);\n          },\n          getMetadata: function WorkerTransport_getMetadata() {\n            return this.messageHandler.sendWithPromise('GetMetadata', null).then(function transportMetadata(results) {\n              return {\n                info: results[0],\n                metadata: results[1] ? new _metadata.Metadata(results[1]) : null\n              };\n            });\n          },\n          getStats: function WorkerTransport_getStats() {\n            return this.messageHandler.sendWithPromise('GetStats', null);\n          },\n          startCleanup: function WorkerTransport_startCleanup() {\n            var _this12 = this;\n\n            this.messageHandler.sendWithPromise('Cleanup', null).then(function () {\n              for (var i = 0, ii = _this12.pageCache.length; i < ii; i++) {\n                var page = _this12.pageCache[i];\n\n                if (page) {\n                  page.cleanup();\n                }\n              }\n\n              _this12.commonObjs.clear();\n\n              _this12.fontLoader.clear();\n            });\n          }\n        };\n        return WorkerTransport;\n      }();\n\n      var PDFObjects = function PDFObjectsClosure() {\n        function PDFObjects() {\n          this.objs = Object.create(null);\n        }\n\n        PDFObjects.prototype = {\n          ensureObj: function PDFObjects_ensureObj(objId) {\n            if (this.objs[objId]) {\n              return this.objs[objId];\n            }\n\n            var obj = {\n              capability: (0, _util.createPromiseCapability)(),\n              data: null,\n              resolved: false\n            };\n            this.objs[objId] = obj;\n            return obj;\n          },\n          get: function PDFObjects_get(objId, callback) {\n            if (callback) {\n              this.ensureObj(objId).capability.promise.then(callback);\n              return null;\n            }\n\n            var obj = this.objs[objId];\n\n            if (!obj || !obj.resolved) {\n              (0, _util.error)('Requesting object that isn\\'t resolved yet ' + objId);\n            }\n\n            return obj.data;\n          },\n          resolve: function PDFObjects_resolve(objId, data) {\n            var obj = this.ensureObj(objId);\n            obj.resolved = true;\n            obj.data = data;\n            obj.capability.resolve(data);\n          },\n          isResolved: function PDFObjects_isResolved(objId) {\n            var objs = this.objs;\n\n            if (!objs[objId]) {\n              return false;\n            }\n\n            return objs[objId].resolved;\n          },\n          hasData: function PDFObjects_hasData(objId) {\n            return this.isResolved(objId);\n          },\n          getData: function PDFObjects_getData(objId) {\n            var objs = this.objs;\n\n            if (!objs[objId] || !objs[objId].resolved) {\n              return null;\n            }\n\n            return objs[objId].data;\n          },\n          clear: function PDFObjects_clear() {\n            this.objs = Object.create(null);\n          }\n        };\n        return PDFObjects;\n      }();\n\n      var RenderTask = function RenderTaskClosure() {\n        function RenderTask(internalRenderTask) {\n          this._internalRenderTask = internalRenderTask;\n          this.onContinue = null;\n        }\n\n        RenderTask.prototype = {\n          get promise() {\n            return this._internalRenderTask.capability.promise;\n          },\n\n          cancel: function RenderTask_cancel() {\n            this._internalRenderTask.cancel();\n          },\n          then: function RenderTask_then(onFulfilled, onRejected) {\n            return this.promise.then.apply(this.promise, arguments);\n          }\n        };\n        return RenderTask;\n      }();\n\n      var InternalRenderTask = function InternalRenderTaskClosure() {\n        function InternalRenderTask(callback, params, objs, commonObjs, operatorList, pageNumber, canvasFactory) {\n          this.callback = callback;\n          this.params = params;\n          this.objs = objs;\n          this.commonObjs = commonObjs;\n          this.operatorListIdx = null;\n          this.operatorList = operatorList;\n          this.pageNumber = pageNumber;\n          this.canvasFactory = canvasFactory;\n          this.running = false;\n          this.graphicsReadyCallback = null;\n          this.graphicsReady = false;\n          this.useRequestAnimationFrame = false;\n          this.cancelled = false;\n          this.capability = (0, _util.createPromiseCapability)();\n          this.task = new RenderTask(this);\n          this._continueBound = this._continue.bind(this);\n          this._scheduleNextBound = this._scheduleNext.bind(this);\n          this._nextBound = this._next.bind(this);\n        }\n\n        InternalRenderTask.prototype = {\n          initializeGraphics: function InternalRenderTask_initializeGraphics(transparency) {\n            if (this.cancelled) {\n              return;\n            }\n\n            if ((0, _dom_utils.getDefaultSetting)('pdfBug') && _util.globalScope.StepperManager && _util.globalScope.StepperManager.enabled) {\n              this.stepper = _util.globalScope.StepperManager.create(this.pageNumber - 1);\n              this.stepper.init(this.operatorList);\n              this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n            }\n\n            var params = this.params;\n            this.gfx = new _canvas.CanvasGraphics(params.canvasContext, this.commonObjs, this.objs, this.canvasFactory, params.imageLayer);\n            this.gfx.beginDrawing(params.transform, params.viewport, transparency);\n            this.operatorListIdx = 0;\n            this.graphicsReady = true;\n\n            if (this.graphicsReadyCallback) {\n              this.graphicsReadyCallback();\n            }\n          },\n          cancel: function InternalRenderTask_cancel() {\n            this.running = false;\n            this.cancelled = true;\n\n            if ((0, _dom_utils.getDefaultSetting)('pdfjsNext')) {\n              this.callback(new _dom_utils.RenderingCancelledException('Rendering cancelled, page ' + this.pageNumber, 'canvas'));\n            } else {\n              this.callback('cancelled');\n            }\n          },\n          operatorListChanged: function InternalRenderTask_operatorListChanged() {\n            if (!this.graphicsReady) {\n              if (!this.graphicsReadyCallback) {\n                this.graphicsReadyCallback = this._continueBound;\n              }\n\n              return;\n            }\n\n            if (this.stepper) {\n              this.stepper.updateOperatorList(this.operatorList);\n            }\n\n            if (this.running) {\n              return;\n            }\n\n            this._continue();\n          },\n          _continue: function InternalRenderTask__continue() {\n            this.running = true;\n\n            if (this.cancelled) {\n              return;\n            }\n\n            if (this.task.onContinue) {\n              this.task.onContinue(this._scheduleNextBound);\n            } else {\n              this._scheduleNext();\n            }\n          },\n          _scheduleNext: function InternalRenderTask__scheduleNext() {\n            if (this.useRequestAnimationFrame && typeof window !== 'undefined') {\n              window.requestAnimationFrame(this._nextBound);\n            } else {\n              Promise.resolve(undefined).then(this._nextBound);\n            }\n          },\n          _next: function InternalRenderTask__next() {\n            if (this.cancelled) {\n              return;\n            }\n\n            this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList, this.operatorListIdx, this._continueBound, this.stepper);\n\n            if (this.operatorListIdx === this.operatorList.argsArray.length) {\n              this.running = false;\n\n              if (this.operatorList.lastChunk) {\n                this.gfx.endDrawing();\n                this.callback();\n              }\n            }\n          }\n        };\n        return InternalRenderTask;\n      }();\n\n      var _UnsupportedManager = function UnsupportedManagerClosure() {\n        var listeners = [];\n        return {\n          listen: function listen(cb) {\n            (0, _util.deprecated)('Global UnsupportedManager.listen is used: ' + ' use PDFDocumentLoadingTask.onUnsupportedFeature instead');\n            listeners.push(cb);\n          },\n          notify: function notify(featureId) {\n            for (var i = 0, ii = listeners.length; i < ii; i++) {\n              listeners[i](featureId);\n            }\n          }\n        };\n      }();\n\n      var version, build;\n      {\n        exports.version = version = '1.8.357';\n        exports.build = build = 'ca3cf6e7';\n      }\n      exports.getDocument = getDocument;\n      exports.LoopbackPort = LoopbackPort;\n      exports.PDFDataRangeTransport = PDFDataRangeTransport;\n      exports.PDFWorker = PDFWorker;\n      exports.PDFDocumentProxy = PDFDocumentProxy;\n      exports.PDFPageProxy = PDFPageProxy;\n      exports._UnsupportedManager = _UnsupportedManager;\n      exports.version = version;\n      exports.build = build;\n      /***/\n    },\n    /* 4 */\n\n    /***/\n    function (module, exports, __w_pdfjs_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.SVGGraphics = undefined;\n\n      var _util = __w_pdfjs_require__(0);\n\n      var SVGGraphics = function SVGGraphics() {\n        throw new Error('Not implemented: SVGGraphics');\n      };\n\n      {\n        var SVG_DEFAULTS = {\n          fontStyle: 'normal',\n          fontWeight: 'normal',\n          fillColor: '#000000'\n        };\n\n        var convertImgDataToPng = function convertImgDataToPngClosure() {\n          var PNG_HEADER = new Uint8Array([0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a]);\n          var CHUNK_WRAPPER_SIZE = 12;\n          var crcTable = new Int32Array(256);\n\n          for (var i = 0; i < 256; i++) {\n            var c = i;\n\n            for (var h = 0; h < 8; h++) {\n              if (c & 1) {\n                c = 0xedB88320 ^ c >> 1 & 0x7fffffff;\n              } else {\n                c = c >> 1 & 0x7fffffff;\n              }\n            }\n\n            crcTable[i] = c;\n          }\n\n          function crc32(data, start, end) {\n            var crc = -1;\n\n            for (var i = start; i < end; i++) {\n              var a = (crc ^ data[i]) & 0xff;\n              var b = crcTable[a];\n              crc = crc >>> 8 ^ b;\n            }\n\n            return crc ^ -1;\n          }\n\n          function writePngChunk(type, body, data, offset) {\n            var p = offset;\n            var len = body.length;\n            data[p] = len >> 24 & 0xff;\n            data[p + 1] = len >> 16 & 0xff;\n            data[p + 2] = len >> 8 & 0xff;\n            data[p + 3] = len & 0xff;\n            p += 4;\n            data[p] = type.charCodeAt(0) & 0xff;\n            data[p + 1] = type.charCodeAt(1) & 0xff;\n            data[p + 2] = type.charCodeAt(2) & 0xff;\n            data[p + 3] = type.charCodeAt(3) & 0xff;\n            p += 4;\n            data.set(body, p);\n            p += body.length;\n            var crc = crc32(data, offset + 4, p);\n            data[p] = crc >> 24 & 0xff;\n            data[p + 1] = crc >> 16 & 0xff;\n            data[p + 2] = crc >> 8 & 0xff;\n            data[p + 3] = crc & 0xff;\n          }\n\n          function adler32(data, start, end) {\n            var a = 1;\n            var b = 0;\n\n            for (var i = start; i < end; ++i) {\n              a = (a + (data[i] & 0xff)) % 65521;\n              b = (b + a) % 65521;\n            }\n\n            return b << 16 | a;\n          }\n\n          function encode(imgData, kind, forceDataSchema) {\n            var width = imgData.width;\n            var height = imgData.height;\n            var bitDepth, colorType, lineSize;\n            var bytes = imgData.data;\n\n            switch (kind) {\n              case _util.ImageKind.GRAYSCALE_1BPP:\n                colorType = 0;\n                bitDepth = 1;\n                lineSize = width + 7 >> 3;\n                break;\n\n              case _util.ImageKind.RGB_24BPP:\n                colorType = 2;\n                bitDepth = 8;\n                lineSize = width * 3;\n                break;\n\n              case _util.ImageKind.RGBA_32BPP:\n                colorType = 6;\n                bitDepth = 8;\n                lineSize = width * 4;\n                break;\n\n              default:\n                throw new Error('invalid format');\n            }\n\n            var literals = new Uint8Array((1 + lineSize) * height);\n            var offsetLiterals = 0,\n                offsetBytes = 0;\n            var y, i;\n\n            for (y = 0; y < height; ++y) {\n              literals[offsetLiterals++] = 0;\n              literals.set(bytes.subarray(offsetBytes, offsetBytes + lineSize), offsetLiterals);\n              offsetBytes += lineSize;\n              offsetLiterals += lineSize;\n            }\n\n            if (kind === _util.ImageKind.GRAYSCALE_1BPP) {\n              offsetLiterals = 0;\n\n              for (y = 0; y < height; y++) {\n                offsetLiterals++;\n\n                for (i = 0; i < lineSize; i++) {\n                  literals[offsetLiterals++] ^= 0xFF;\n                }\n              }\n            }\n\n            var ihdr = new Uint8Array([width >> 24 & 0xff, width >> 16 & 0xff, width >> 8 & 0xff, width & 0xff, height >> 24 & 0xff, height >> 16 & 0xff, height >> 8 & 0xff, height & 0xff, bitDepth, colorType, 0x00, 0x00, 0x00]);\n            var len = literals.length;\n            var maxBlockLength = 0xFFFF;\n            var deflateBlocks = Math.ceil(len / maxBlockLength);\n            var idat = new Uint8Array(2 + len + deflateBlocks * 5 + 4);\n            var pi = 0;\n            idat[pi++] = 0x78;\n            idat[pi++] = 0x9c;\n            var pos = 0;\n\n            while (len > maxBlockLength) {\n              idat[pi++] = 0x00;\n              idat[pi++] = 0xff;\n              idat[pi++] = 0xff;\n              idat[pi++] = 0x00;\n              idat[pi++] = 0x00;\n              idat.set(literals.subarray(pos, pos + maxBlockLength), pi);\n              pi += maxBlockLength;\n              pos += maxBlockLength;\n              len -= maxBlockLength;\n            }\n\n            idat[pi++] = 0x01;\n            idat[pi++] = len & 0xff;\n            idat[pi++] = len >> 8 & 0xff;\n            idat[pi++] = ~len & 0xffff & 0xff;\n            idat[pi++] = (~len & 0xffff) >> 8 & 0xff;\n            idat.set(literals.subarray(pos), pi);\n            pi += literals.length - pos;\n            var adler = adler32(literals, 0, literals.length);\n            idat[pi++] = adler >> 24 & 0xff;\n            idat[pi++] = adler >> 16 & 0xff;\n            idat[pi++] = adler >> 8 & 0xff;\n            idat[pi++] = adler & 0xff;\n            var pngLength = PNG_HEADER.length + CHUNK_WRAPPER_SIZE * 3 + ihdr.length + idat.length;\n            var data = new Uint8Array(pngLength);\n            var offset = 0;\n            data.set(PNG_HEADER, offset);\n            offset += PNG_HEADER.length;\n            writePngChunk('IHDR', ihdr, data, offset);\n            offset += CHUNK_WRAPPER_SIZE + ihdr.length;\n            writePngChunk('IDATA', idat, data, offset);\n            offset += CHUNK_WRAPPER_SIZE + idat.length;\n            writePngChunk('IEND', new Uint8Array(0), data, offset);\n            return (0, _util.createObjectURL)(data, 'image/png', forceDataSchema);\n          }\n\n          return function convertImgDataToPng(imgData, forceDataSchema) {\n            var kind = imgData.kind === undefined ? _util.ImageKind.GRAYSCALE_1BPP : imgData.kind;\n            return encode(imgData, kind, forceDataSchema);\n          };\n        }();\n\n        var SVGExtraState = function SVGExtraStateClosure() {\n          function SVGExtraState() {\n            this.fontSizeScale = 1;\n            this.fontWeight = SVG_DEFAULTS.fontWeight;\n            this.fontSize = 0;\n            this.textMatrix = _util.IDENTITY_MATRIX;\n            this.fontMatrix = _util.FONT_IDENTITY_MATRIX;\n            this.leading = 0;\n            this.x = 0;\n            this.y = 0;\n            this.lineX = 0;\n            this.lineY = 0;\n            this.charSpacing = 0;\n            this.wordSpacing = 0;\n            this.textHScale = 1;\n            this.textRise = 0;\n            this.fillColor = SVG_DEFAULTS.fillColor;\n            this.strokeColor = '#000000';\n            this.fillAlpha = 1;\n            this.strokeAlpha = 1;\n            this.lineWidth = 1;\n            this.lineJoin = '';\n            this.lineCap = '';\n            this.miterLimit = 0;\n            this.dashArray = [];\n            this.dashPhase = 0;\n            this.dependencies = [];\n            this.activeClipUrl = null;\n            this.clipGroup = null;\n            this.maskId = '';\n          }\n\n          SVGExtraState.prototype = {\n            clone: function SVGExtraState_clone() {\n              return Object.create(this);\n            },\n            setCurrentPoint: function SVGExtraState_setCurrentPoint(x, y) {\n              this.x = x;\n              this.y = y;\n            }\n          };\n          return SVGExtraState;\n        }();\n\n        exports.SVGGraphics = SVGGraphics = function SVGGraphicsClosure() {\n          function opListToTree(opList) {\n            var opTree = [];\n            var tmp = [];\n            var opListLen = opList.length;\n\n            for (var x = 0; x < opListLen; x++) {\n              if (opList[x].fn === 'save') {\n                opTree.push({\n                  'fnId': 92,\n                  'fn': 'group',\n                  'items': []\n                });\n                tmp.push(opTree);\n                opTree = opTree[opTree.length - 1].items;\n                continue;\n              }\n\n              if (opList[x].fn === 'restore') {\n                opTree = tmp.pop();\n              } else {\n                opTree.push(opList[x]);\n              }\n            }\n\n            return opTree;\n          }\n\n          function pf(value) {\n            if (value === (value | 0)) {\n              return value.toString();\n            }\n\n            var s = value.toFixed(10);\n            var i = s.length - 1;\n\n            if (s[i] !== '0') {\n              return s;\n            }\n\n            do {\n              i--;\n            } while (s[i] === '0');\n\n            return s.substr(0, s[i] === '.' ? i : i + 1);\n          }\n\n          function pm(m) {\n            if (m[4] === 0 && m[5] === 0) {\n              if (m[1] === 0 && m[2] === 0) {\n                if (m[0] === 1 && m[3] === 1) {\n                  return '';\n                }\n\n                return 'scale(' + pf(m[0]) + ' ' + pf(m[3]) + ')';\n              }\n\n              if (m[0] === m[3] && m[1] === -m[2]) {\n                var a = Math.acos(m[0]) * 180 / Math.PI;\n                return 'rotate(' + pf(a) + ')';\n              }\n            } else {\n              if (m[0] === 1 && m[1] === 0 && m[2] === 0 && m[3] === 1) {\n                return 'translate(' + pf(m[4]) + ' ' + pf(m[5]) + ')';\n              }\n            }\n\n            return 'matrix(' + pf(m[0]) + ' ' + pf(m[1]) + ' ' + pf(m[2]) + ' ' + pf(m[3]) + ' ' + pf(m[4]) + ' ' + pf(m[5]) + ')';\n          }\n\n          function SVGGraphics(commonObjs, objs, forceDataSchema) {\n            this.current = new SVGExtraState();\n            this.transformMatrix = _util.IDENTITY_MATRIX;\n            this.transformStack = [];\n            this.extraStack = [];\n            this.commonObjs = commonObjs;\n            this.objs = objs;\n            this.pendingEOFill = false;\n            this.embedFonts = false;\n            this.embeddedFonts = Object.create(null);\n            this.cssStyle = null;\n            this.forceDataSchema = !!forceDataSchema;\n          }\n\n          var NS = 'http://www.w3.org/2000/svg';\n          var XML_NS = 'http://www.w3.org/XML/1998/namespace';\n          var XLINK_NS = 'http://www.w3.org/1999/xlink';\n          var LINE_CAP_STYLES = ['butt', 'round', 'square'];\n          var LINE_JOIN_STYLES = ['miter', 'round', 'bevel'];\n          var clipCount = 0;\n          var maskCount = 0;\n          SVGGraphics.prototype = {\n            save: function SVGGraphics_save() {\n              this.transformStack.push(this.transformMatrix);\n              var old = this.current;\n              this.extraStack.push(old);\n              this.current = old.clone();\n            },\n            restore: function SVGGraphics_restore() {\n              this.transformMatrix = this.transformStack.pop();\n              this.current = this.extraStack.pop();\n              this.tgrp = null;\n            },\n            group: function SVGGraphics_group(items) {\n              this.save();\n              this.executeOpTree(items);\n              this.restore();\n            },\n            loadDependencies: function SVGGraphics_loadDependencies(operatorList) {\n              var _this = this;\n\n              var fnArray = operatorList.fnArray;\n              var fnArrayLen = fnArray.length;\n              var argsArray = operatorList.argsArray;\n\n              for (var i = 0; i < fnArrayLen; i++) {\n                if (_util.OPS.dependency === fnArray[i]) {\n                  var deps = argsArray[i];\n\n                  for (var n = 0, nn = deps.length; n < nn; n++) {\n                    var obj = deps[n];\n                    var common = obj.substring(0, 2) === 'g_';\n                    var promise;\n\n                    if (common) {\n                      promise = new Promise(function (resolve) {\n                        _this.commonObjs.get(obj, resolve);\n                      });\n                    } else {\n                      promise = new Promise(function (resolve) {\n                        _this.objs.get(obj, resolve);\n                      });\n                    }\n\n                    this.current.dependencies.push(promise);\n                  }\n                }\n              }\n\n              return Promise.all(this.current.dependencies);\n            },\n            transform: function SVGGraphics_transform(a, b, c, d, e, f) {\n              var transformMatrix = [a, b, c, d, e, f];\n              this.transformMatrix = _util.Util.transform(this.transformMatrix, transformMatrix);\n              this.tgrp = null;\n            },\n            getSVG: function SVGGraphics_getSVG(operatorList, viewport) {\n              var _this2 = this;\n\n              this.viewport = viewport;\n\n              var svgElement = this._initialize(viewport);\n\n              return this.loadDependencies(operatorList).then(function () {\n                _this2.transformMatrix = _util.IDENTITY_MATRIX;\n\n                var opTree = _this2.convertOpList(operatorList);\n\n                _this2.executeOpTree(opTree);\n\n                return svgElement;\n              });\n            },\n            convertOpList: function SVGGraphics_convertOpList(operatorList) {\n              var argsArray = operatorList.argsArray;\n              var fnArray = operatorList.fnArray;\n              var fnArrayLen = fnArray.length;\n              var REVOPS = [];\n              var opList = [];\n\n              for (var op in _util.OPS) {\n                REVOPS[_util.OPS[op]] = op;\n              }\n\n              for (var x = 0; x < fnArrayLen; x++) {\n                var fnId = fnArray[x];\n                opList.push({\n                  'fnId': fnId,\n                  'fn': REVOPS[fnId],\n                  'args': argsArray[x]\n                });\n              }\n\n              return opListToTree(opList);\n            },\n            executeOpTree: function SVGGraphics_executeOpTree(opTree) {\n              var opTreeLen = opTree.length;\n\n              for (var x = 0; x < opTreeLen; x++) {\n                var fn = opTree[x].fn;\n                var fnId = opTree[x].fnId;\n                var args = opTree[x].args;\n\n                switch (fnId | 0) {\n                  case _util.OPS.beginText:\n                    this.beginText();\n                    break;\n\n                  case _util.OPS.setLeading:\n                    this.setLeading(args);\n                    break;\n\n                  case _util.OPS.setLeadingMoveText:\n                    this.setLeadingMoveText(args[0], args[1]);\n                    break;\n\n                  case _util.OPS.setFont:\n                    this.setFont(args);\n                    break;\n\n                  case _util.OPS.showText:\n                    this.showText(args[0]);\n                    break;\n\n                  case _util.OPS.showSpacedText:\n                    this.showText(args[0]);\n                    break;\n\n                  case _util.OPS.endText:\n                    this.endText();\n                    break;\n\n                  case _util.OPS.moveText:\n                    this.moveText(args[0], args[1]);\n                    break;\n\n                  case _util.OPS.setCharSpacing:\n                    this.setCharSpacing(args[0]);\n                    break;\n\n                  case _util.OPS.setWordSpacing:\n                    this.setWordSpacing(args[0]);\n                    break;\n\n                  case _util.OPS.setHScale:\n                    this.setHScale(args[0]);\n                    break;\n\n                  case _util.OPS.setTextMatrix:\n                    this.setTextMatrix(args[0], args[1], args[2], args[3], args[4], args[5]);\n                    break;\n\n                  case _util.OPS.setLineWidth:\n                    this.setLineWidth(args[0]);\n                    break;\n\n                  case _util.OPS.setLineJoin:\n                    this.setLineJoin(args[0]);\n                    break;\n\n                  case _util.OPS.setLineCap:\n                    this.setLineCap(args[0]);\n                    break;\n\n                  case _util.OPS.setMiterLimit:\n                    this.setMiterLimit(args[0]);\n                    break;\n\n                  case _util.OPS.setFillRGBColor:\n                    this.setFillRGBColor(args[0], args[1], args[2]);\n                    break;\n\n                  case _util.OPS.setStrokeRGBColor:\n                    this.setStrokeRGBColor(args[0], args[1], args[2]);\n                    break;\n\n                  case _util.OPS.setDash:\n                    this.setDash(args[0], args[1]);\n                    break;\n\n                  case _util.OPS.setGState:\n                    this.setGState(args[0]);\n                    break;\n\n                  case _util.OPS.fill:\n                    this.fill();\n                    break;\n\n                  case _util.OPS.eoFill:\n                    this.eoFill();\n                    break;\n\n                  case _util.OPS.stroke:\n                    this.stroke();\n                    break;\n\n                  case _util.OPS.fillStroke:\n                    this.fillStroke();\n                    break;\n\n                  case _util.OPS.eoFillStroke:\n                    this.eoFillStroke();\n                    break;\n\n                  case _util.OPS.clip:\n                    this.clip('nonzero');\n                    break;\n\n                  case _util.OPS.eoClip:\n                    this.clip('evenodd');\n                    break;\n\n                  case _util.OPS.paintSolidColorImageMask:\n                    this.paintSolidColorImageMask();\n                    break;\n\n                  case _util.OPS.paintJpegXObject:\n                    this.paintJpegXObject(args[0], args[1], args[2]);\n                    break;\n\n                  case _util.OPS.paintImageXObject:\n                    this.paintImageXObject(args[0]);\n                    break;\n\n                  case _util.OPS.paintInlineImageXObject:\n                    this.paintInlineImageXObject(args[0]);\n                    break;\n\n                  case _util.OPS.paintImageMaskXObject:\n                    this.paintImageMaskXObject(args[0]);\n                    break;\n\n                  case _util.OPS.paintFormXObjectBegin:\n                    this.paintFormXObjectBegin(args[0], args[1]);\n                    break;\n\n                  case _util.OPS.paintFormXObjectEnd:\n                    this.paintFormXObjectEnd();\n                    break;\n\n                  case _util.OPS.closePath:\n                    this.closePath();\n                    break;\n\n                  case _util.OPS.closeStroke:\n                    this.closeStroke();\n                    break;\n\n                  case _util.OPS.closeFillStroke:\n                    this.closeFillStroke();\n                    break;\n\n                  case _util.OPS.nextLine:\n                    this.nextLine();\n                    break;\n\n                  case _util.OPS.transform:\n                    this.transform(args[0], args[1], args[2], args[3], args[4], args[5]);\n                    break;\n\n                  case _util.OPS.constructPath:\n                    this.constructPath(args[0], args[1]);\n                    break;\n\n                  case _util.OPS.endPath:\n                    this.endPath();\n                    break;\n\n                  case 92:\n                    this.group(opTree[x].items);\n                    break;\n\n                  default:\n                    (0, _util.warn)('Unimplemented operator ' + fn);\n                    break;\n                }\n              }\n            },\n            setWordSpacing: function SVGGraphics_setWordSpacing(wordSpacing) {\n              this.current.wordSpacing = wordSpacing;\n            },\n            setCharSpacing: function SVGGraphics_setCharSpacing(charSpacing) {\n              this.current.charSpacing = charSpacing;\n            },\n            nextLine: function SVGGraphics_nextLine() {\n              this.moveText(0, this.current.leading);\n            },\n            setTextMatrix: function SVGGraphics_setTextMatrix(a, b, c, d, e, f) {\n              var current = this.current;\n              this.current.textMatrix = this.current.lineMatrix = [a, b, c, d, e, f];\n              this.current.x = this.current.lineX = 0;\n              this.current.y = this.current.lineY = 0;\n              current.xcoords = [];\n              current.tspan = document.createElementNS(NS, 'svg:tspan');\n              current.tspan.setAttributeNS(null, 'font-family', current.fontFamily);\n              current.tspan.setAttributeNS(null, 'font-size', pf(current.fontSize) + 'px');\n              current.tspan.setAttributeNS(null, 'y', pf(-current.y));\n              current.txtElement = document.createElementNS(NS, 'svg:text');\n              current.txtElement.appendChild(current.tspan);\n            },\n            beginText: function SVGGraphics_beginText() {\n              this.current.x = this.current.lineX = 0;\n              this.current.y = this.current.lineY = 0;\n              this.current.textMatrix = _util.IDENTITY_MATRIX;\n              this.current.lineMatrix = _util.IDENTITY_MATRIX;\n              this.current.tspan = document.createElementNS(NS, 'svg:tspan');\n              this.current.txtElement = document.createElementNS(NS, 'svg:text');\n              this.current.txtgrp = document.createElementNS(NS, 'svg:g');\n              this.current.xcoords = [];\n            },\n            moveText: function SVGGraphics_moveText(x, y) {\n              var current = this.current;\n              this.current.x = this.current.lineX += x;\n              this.current.y = this.current.lineY += y;\n              current.xcoords = [];\n              current.tspan = document.createElementNS(NS, 'svg:tspan');\n              current.tspan.setAttributeNS(null, 'font-family', current.fontFamily);\n              current.tspan.setAttributeNS(null, 'font-size', pf(current.fontSize) + 'px');\n              current.tspan.setAttributeNS(null, 'y', pf(-current.y));\n            },\n            showText: function SVGGraphics_showText(glyphs) {\n              var current = this.current;\n              var font = current.font;\n              var fontSize = current.fontSize;\n\n              if (fontSize === 0) {\n                return;\n              }\n\n              var charSpacing = current.charSpacing;\n              var wordSpacing = current.wordSpacing;\n              var fontDirection = current.fontDirection;\n              var textHScale = current.textHScale * fontDirection;\n              var glyphsLength = glyphs.length;\n              var vertical = font.vertical;\n              var widthAdvanceScale = fontSize * current.fontMatrix[0];\n              var x = 0,\n                  i;\n\n              for (i = 0; i < glyphsLength; ++i) {\n                var glyph = glyphs[i];\n\n                if (glyph === null) {\n                  x += fontDirection * wordSpacing;\n                  continue;\n                } else if ((0, _util.isNum)(glyph)) {\n                  x += -glyph * fontSize * 0.001;\n                  continue;\n                }\n\n                current.xcoords.push(current.x + x * textHScale);\n                var width = glyph.width;\n                var character = glyph.fontChar;\n                var spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n                var charWidth = width * widthAdvanceScale + spacing * fontDirection;\n                x += charWidth;\n                current.tspan.textContent += character;\n              }\n\n              if (vertical) {\n                current.y -= x * textHScale;\n              } else {\n                current.x += x * textHScale;\n              }\n\n              current.tspan.setAttributeNS(null, 'x', current.xcoords.map(pf).join(' '));\n              current.tspan.setAttributeNS(null, 'y', pf(-current.y));\n              current.tspan.setAttributeNS(null, 'font-family', current.fontFamily);\n              current.tspan.setAttributeNS(null, 'font-size', pf(current.fontSize) + 'px');\n\n              if (current.fontStyle !== SVG_DEFAULTS.fontStyle) {\n                current.tspan.setAttributeNS(null, 'font-style', current.fontStyle);\n              }\n\n              if (current.fontWeight !== SVG_DEFAULTS.fontWeight) {\n                current.tspan.setAttributeNS(null, 'font-weight', current.fontWeight);\n              }\n\n              if (current.fillColor !== SVG_DEFAULTS.fillColor) {\n                current.tspan.setAttributeNS(null, 'fill', current.fillColor);\n              }\n\n              current.txtElement.setAttributeNS(null, 'transform', pm(current.textMatrix) + ' scale(1, -1)');\n              current.txtElement.setAttributeNS(XML_NS, 'xml:space', 'preserve');\n              current.txtElement.appendChild(current.tspan);\n              current.txtgrp.appendChild(current.txtElement);\n\n              this._ensureTransformGroup().appendChild(current.txtElement);\n            },\n            setLeadingMoveText: function SVGGraphics_setLeadingMoveText(x, y) {\n              this.setLeading(-y);\n              this.moveText(x, y);\n            },\n            addFontStyle: function SVGGraphics_addFontStyle(fontObj) {\n              if (!this.cssStyle) {\n                this.cssStyle = document.createElementNS(NS, 'svg:style');\n                this.cssStyle.setAttributeNS(null, 'type', 'text/css');\n                this.defs.appendChild(this.cssStyle);\n              }\n\n              var url = (0, _util.createObjectURL)(fontObj.data, fontObj.mimetype, this.forceDataSchema);\n              this.cssStyle.textContent += '@font-face { font-family: \"' + fontObj.loadedName + '\";' + ' src: url(' + url + '); }\\n';\n            },\n            setFont: function SVGGraphics_setFont(details) {\n              var current = this.current;\n              var fontObj = this.commonObjs.get(details[0]);\n              var size = details[1];\n              this.current.font = fontObj;\n\n              if (this.embedFonts && fontObj.data && !this.embeddedFonts[fontObj.loadedName]) {\n                this.addFontStyle(fontObj);\n                this.embeddedFonts[fontObj.loadedName] = fontObj;\n              }\n\n              current.fontMatrix = fontObj.fontMatrix ? fontObj.fontMatrix : _util.FONT_IDENTITY_MATRIX;\n              var bold = fontObj.black ? fontObj.bold ? 'bolder' : 'bold' : fontObj.bold ? 'bold' : 'normal';\n              var italic = fontObj.italic ? 'italic' : 'normal';\n\n              if (size < 0) {\n                size = -size;\n                current.fontDirection = -1;\n              } else {\n                current.fontDirection = 1;\n              }\n\n              current.fontSize = size;\n              current.fontFamily = fontObj.loadedName;\n              current.fontWeight = bold;\n              current.fontStyle = italic;\n              current.tspan = document.createElementNS(NS, 'svg:tspan');\n              current.tspan.setAttributeNS(null, 'y', pf(-current.y));\n              current.xcoords = [];\n            },\n            endText: function SVGGraphics_endText() {},\n            setLineWidth: function SVGGraphics_setLineWidth(width) {\n              this.current.lineWidth = width;\n            },\n            setLineCap: function SVGGraphics_setLineCap(style) {\n              this.current.lineCap = LINE_CAP_STYLES[style];\n            },\n            setLineJoin: function SVGGraphics_setLineJoin(style) {\n              this.current.lineJoin = LINE_JOIN_STYLES[style];\n            },\n            setMiterLimit: function SVGGraphics_setMiterLimit(limit) {\n              this.current.miterLimit = limit;\n            },\n            setStrokeRGBColor: function SVGGraphics_setStrokeRGBColor(r, g, b) {\n              var color = _util.Util.makeCssRgb(r, g, b);\n\n              this.current.strokeColor = color;\n            },\n            setFillRGBColor: function SVGGraphics_setFillRGBColor(r, g, b) {\n              var color = _util.Util.makeCssRgb(r, g, b);\n\n              this.current.fillColor = color;\n              this.current.tspan = document.createElementNS(NS, 'svg:tspan');\n              this.current.xcoords = [];\n            },\n            setDash: function SVGGraphics_setDash(dashArray, dashPhase) {\n              this.current.dashArray = dashArray;\n              this.current.dashPhase = dashPhase;\n            },\n            constructPath: function SVGGraphics_constructPath(ops, args) {\n              var current = this.current;\n              var x = current.x,\n                  y = current.y;\n              current.path = document.createElementNS(NS, 'svg:path');\n              var d = [];\n              var opLength = ops.length;\n\n              for (var i = 0, j = 0; i < opLength; i++) {\n                switch (ops[i] | 0) {\n                  case _util.OPS.rectangle:\n                    x = args[j++];\n                    y = args[j++];\n                    var width = args[j++];\n                    var height = args[j++];\n                    var xw = x + width;\n                    var yh = y + height;\n                    d.push('M', pf(x), pf(y), 'L', pf(xw), pf(y), 'L', pf(xw), pf(yh), 'L', pf(x), pf(yh), 'Z');\n                    break;\n\n                  case _util.OPS.moveTo:\n                    x = args[j++];\n                    y = args[j++];\n                    d.push('M', pf(x), pf(y));\n                    break;\n\n                  case _util.OPS.lineTo:\n                    x = args[j++];\n                    y = args[j++];\n                    d.push('L', pf(x), pf(y));\n                    break;\n\n                  case _util.OPS.curveTo:\n                    x = args[j + 4];\n                    y = args[j + 5];\n                    d.push('C', pf(args[j]), pf(args[j + 1]), pf(args[j + 2]), pf(args[j + 3]), pf(x), pf(y));\n                    j += 6;\n                    break;\n\n                  case _util.OPS.curveTo2:\n                    x = args[j + 2];\n                    y = args[j + 3];\n                    d.push('C', pf(x), pf(y), pf(args[j]), pf(args[j + 1]), pf(args[j + 2]), pf(args[j + 3]));\n                    j += 4;\n                    break;\n\n                  case _util.OPS.curveTo3:\n                    x = args[j + 2];\n                    y = args[j + 3];\n                    d.push('C', pf(args[j]), pf(args[j + 1]), pf(x), pf(y), pf(x), pf(y));\n                    j += 4;\n                    break;\n\n                  case _util.OPS.closePath:\n                    d.push('Z');\n                    break;\n                }\n              }\n\n              current.path.setAttributeNS(null, 'd', d.join(' '));\n              current.path.setAttributeNS(null, 'stroke-miterlimit', pf(current.miterLimit));\n              current.path.setAttributeNS(null, 'stroke-linecap', current.lineCap);\n              current.path.setAttributeNS(null, 'stroke-linejoin', current.lineJoin);\n              current.path.setAttributeNS(null, 'stroke-width', pf(current.lineWidth) + 'px');\n              current.path.setAttributeNS(null, 'stroke-dasharray', current.dashArray.map(pf).join(' '));\n              current.path.setAttributeNS(null, 'stroke-dashoffset', pf(current.dashPhase) + 'px');\n              current.path.setAttributeNS(null, 'fill', 'none');\n\n              this._ensureTransformGroup().appendChild(current.path);\n\n              current.element = current.path;\n              current.setCurrentPoint(x, y);\n            },\n            endPath: function SVGGraphics_endPath() {},\n            clip: function SVGGraphics_clip(type) {\n              var current = this.current;\n              var clipId = 'clippath' + clipCount;\n              clipCount++;\n              var clipPath = document.createElementNS(NS, 'svg:clipPath');\n              clipPath.setAttributeNS(null, 'id', clipId);\n              clipPath.setAttributeNS(null, 'transform', pm(this.transformMatrix));\n              var clipElement = current.element.cloneNode();\n\n              if (type === 'evenodd') {\n                clipElement.setAttributeNS(null, 'clip-rule', 'evenodd');\n              } else {\n                clipElement.setAttributeNS(null, 'clip-rule', 'nonzero');\n              }\n\n              clipPath.appendChild(clipElement);\n              this.defs.appendChild(clipPath);\n\n              if (current.activeClipUrl) {\n                current.clipGroup = null;\n                this.extraStack.forEach(function (prev) {\n                  prev.clipGroup = null;\n                });\n              }\n\n              current.activeClipUrl = 'url(#' + clipId + ')';\n              this.tgrp = null;\n            },\n            closePath: function SVGGraphics_closePath() {\n              var current = this.current;\n              var d = current.path.getAttributeNS(null, 'd');\n              d += 'Z';\n              current.path.setAttributeNS(null, 'd', d);\n            },\n            setLeading: function SVGGraphics_setLeading(leading) {\n              this.current.leading = -leading;\n            },\n            setTextRise: function SVGGraphics_setTextRise(textRise) {\n              this.current.textRise = textRise;\n            },\n            setHScale: function SVGGraphics_setHScale(scale) {\n              this.current.textHScale = scale / 100;\n            },\n            setGState: function SVGGraphics_setGState(states) {\n              for (var i = 0, ii = states.length; i < ii; i++) {\n                var state = states[i];\n                var key = state[0];\n                var value = state[1];\n\n                switch (key) {\n                  case 'LW':\n                    this.setLineWidth(value);\n                    break;\n\n                  case 'LC':\n                    this.setLineCap(value);\n                    break;\n\n                  case 'LJ':\n                    this.setLineJoin(value);\n                    break;\n\n                  case 'ML':\n                    this.setMiterLimit(value);\n                    break;\n\n                  case 'D':\n                    this.setDash(value[0], value[1]);\n                    break;\n\n                  case 'Font':\n                    this.setFont(value);\n                    break;\n\n                  default:\n                    (0, _util.warn)('Unimplemented graphic state ' + key);\n                    break;\n                }\n              }\n            },\n            fill: function SVGGraphics_fill() {\n              var current = this.current;\n              current.element.setAttributeNS(null, 'fill', current.fillColor);\n            },\n            stroke: function SVGGraphics_stroke() {\n              var current = this.current;\n              current.element.setAttributeNS(null, 'stroke', current.strokeColor);\n              current.element.setAttributeNS(null, 'fill', 'none');\n            },\n            eoFill: function SVGGraphics_eoFill() {\n              var current = this.current;\n              current.element.setAttributeNS(null, 'fill', current.fillColor);\n              current.element.setAttributeNS(null, 'fill-rule', 'evenodd');\n            },\n            fillStroke: function SVGGraphics_fillStroke() {\n              this.stroke();\n              this.fill();\n            },\n            eoFillStroke: function SVGGraphics_eoFillStroke() {\n              this.current.element.setAttributeNS(null, 'fill-rule', 'evenodd');\n              this.fillStroke();\n            },\n            closeStroke: function SVGGraphics_closeStroke() {\n              this.closePath();\n              this.stroke();\n            },\n            closeFillStroke: function SVGGraphics_closeFillStroke() {\n              this.closePath();\n              this.fillStroke();\n            },\n            paintSolidColorImageMask: function SVGGraphics_paintSolidColorImageMask() {\n              var current = this.current;\n              var rect = document.createElementNS(NS, 'svg:rect');\n              rect.setAttributeNS(null, 'x', '0');\n              rect.setAttributeNS(null, 'y', '0');\n              rect.setAttributeNS(null, 'width', '1px');\n              rect.setAttributeNS(null, 'height', '1px');\n              rect.setAttributeNS(null, 'fill', current.fillColor);\n\n              this._ensureTransformGroup().appendChild(rect);\n            },\n            paintJpegXObject: function SVGGraphics_paintJpegXObject(objId, w, h) {\n              var imgObj = this.objs.get(objId);\n              var imgEl = document.createElementNS(NS, 'svg:image');\n              imgEl.setAttributeNS(XLINK_NS, 'xlink:href', imgObj.src);\n              imgEl.setAttributeNS(null, 'width', pf(w));\n              imgEl.setAttributeNS(null, 'height', pf(h));\n              imgEl.setAttributeNS(null, 'x', '0');\n              imgEl.setAttributeNS(null, 'y', pf(-h));\n              imgEl.setAttributeNS(null, 'transform', 'scale(' + pf(1 / w) + ' ' + pf(-1 / h) + ')');\n\n              this._ensureTransformGroup().appendChild(imgEl);\n            },\n            paintImageXObject: function SVGGraphics_paintImageXObject(objId) {\n              var imgData = this.objs.get(objId);\n\n              if (!imgData) {\n                (0, _util.warn)('Dependent image isn\\'t ready yet');\n                return;\n              }\n\n              this.paintInlineImageXObject(imgData);\n            },\n            paintInlineImageXObject: function SVGGraphics_paintInlineImageXObject(imgData, mask) {\n              var width = imgData.width;\n              var height = imgData.height;\n              var imgSrc = convertImgDataToPng(imgData, this.forceDataSchema);\n              var cliprect = document.createElementNS(NS, 'svg:rect');\n              cliprect.setAttributeNS(null, 'x', '0');\n              cliprect.setAttributeNS(null, 'y', '0');\n              cliprect.setAttributeNS(null, 'width', pf(width));\n              cliprect.setAttributeNS(null, 'height', pf(height));\n              this.current.element = cliprect;\n              this.clip('nonzero');\n              var imgEl = document.createElementNS(NS, 'svg:image');\n              imgEl.setAttributeNS(XLINK_NS, 'xlink:href', imgSrc);\n              imgEl.setAttributeNS(null, 'x', '0');\n              imgEl.setAttributeNS(null, 'y', pf(-height));\n              imgEl.setAttributeNS(null, 'width', pf(width) + 'px');\n              imgEl.setAttributeNS(null, 'height', pf(height) + 'px');\n              imgEl.setAttributeNS(null, 'transform', 'scale(' + pf(1 / width) + ' ' + pf(-1 / height) + ')');\n\n              if (mask) {\n                mask.appendChild(imgEl);\n              } else {\n                this._ensureTransformGroup().appendChild(imgEl);\n              }\n            },\n            paintImageMaskXObject: function SVGGraphics_paintImageMaskXObject(imgData) {\n              var current = this.current;\n              var width = imgData.width;\n              var height = imgData.height;\n              var fillColor = current.fillColor;\n              current.maskId = 'mask' + maskCount++;\n              var mask = document.createElementNS(NS, 'svg:mask');\n              mask.setAttributeNS(null, 'id', current.maskId);\n              var rect = document.createElementNS(NS, 'svg:rect');\n              rect.setAttributeNS(null, 'x', '0');\n              rect.setAttributeNS(null, 'y', '0');\n              rect.setAttributeNS(null, 'width', pf(width));\n              rect.setAttributeNS(null, 'height', pf(height));\n              rect.setAttributeNS(null, 'fill', fillColor);\n              rect.setAttributeNS(null, 'mask', 'url(#' + current.maskId + ')');\n              this.defs.appendChild(mask);\n\n              this._ensureTransformGroup().appendChild(rect);\n\n              this.paintInlineImageXObject(imgData, mask);\n            },\n            paintFormXObjectBegin: function SVGGraphics_paintFormXObjectBegin(matrix, bbox) {\n              if ((0, _util.isArray)(matrix) && matrix.length === 6) {\n                this.transform(matrix[0], matrix[1], matrix[2], matrix[3], matrix[4], matrix[5]);\n              }\n\n              if ((0, _util.isArray)(bbox) && bbox.length === 4) {\n                var width = bbox[2] - bbox[0];\n                var height = bbox[3] - bbox[1];\n                var cliprect = document.createElementNS(NS, 'svg:rect');\n                cliprect.setAttributeNS(null, 'x', bbox[0]);\n                cliprect.setAttributeNS(null, 'y', bbox[1]);\n                cliprect.setAttributeNS(null, 'width', pf(width));\n                cliprect.setAttributeNS(null, 'height', pf(height));\n                this.current.element = cliprect;\n                this.clip('nonzero');\n                this.endPath();\n              }\n            },\n            paintFormXObjectEnd: function SVGGraphics_paintFormXObjectEnd() {},\n            _initialize: function SVGGraphics_initialize(viewport) {\n              var svg = document.createElementNS(NS, 'svg:svg');\n              svg.setAttributeNS(null, 'version', '1.1');\n              svg.setAttributeNS(null, 'width', viewport.width + 'px');\n              svg.setAttributeNS(null, 'height', viewport.height + 'px');\n              svg.setAttributeNS(null, 'preserveAspectRatio', 'none');\n              svg.setAttributeNS(null, 'viewBox', '0 0 ' + viewport.width + ' ' + viewport.height);\n              var definitions = document.createElementNS(NS, 'svg:defs');\n              svg.appendChild(definitions);\n              this.defs = definitions;\n              var rootGroup = document.createElementNS(NS, 'svg:g');\n              rootGroup.setAttributeNS(null, 'transform', pm(viewport.transform));\n              svg.appendChild(rootGroup);\n              this.svg = rootGroup;\n              return svg;\n            },\n            _ensureClipGroup: function SVGGraphics_ensureClipGroup() {\n              if (!this.current.clipGroup) {\n                var clipGroup = document.createElementNS(NS, 'svg:g');\n                clipGroup.setAttributeNS(null, 'clip-path', this.current.activeClipUrl);\n                this.svg.appendChild(clipGroup);\n                this.current.clipGroup = clipGroup;\n              }\n\n              return this.current.clipGroup;\n            },\n            _ensureTransformGroup: function SVGGraphics_ensureTransformGroup() {\n              if (!this.tgrp) {\n                this.tgrp = document.createElementNS(NS, 'svg:g');\n                this.tgrp.setAttributeNS(null, 'transform', pm(this.transformMatrix));\n\n                if (this.current.activeClipUrl) {\n                  this._ensureClipGroup().appendChild(this.tgrp);\n                } else {\n                  this.svg.appendChild(this.tgrp);\n                }\n              }\n\n              return this.tgrp;\n            }\n          };\n          return SVGGraphics;\n        }();\n      }\n      exports.SVGGraphics = SVGGraphics;\n      /***/\n    },\n    /* 5 */\n\n    /***/\n    function (module, exports, __w_pdfjs_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.renderTextLayer = undefined;\n\n      var _util = __w_pdfjs_require__(0);\n\n      var _dom_utils = __w_pdfjs_require__(1);\n\n      var renderTextLayer = function renderTextLayerClosure() {\n        var MAX_TEXT_DIVS_TO_RENDER = 100000;\n        var NonWhitespaceRegexp = /\\S/;\n\n        function isAllWhitespace(str) {\n          return !NonWhitespaceRegexp.test(str);\n        }\n\n        var styleBuf = ['left: ', 0, 'px; top: ', 0, 'px; font-size: ', 0, 'px; font-family: ', '', ';'];\n\n        function appendText(task, geom, styles) {\n          var textDiv = document.createElement('div');\n          var textDivProperties = {\n            style: null,\n            angle: 0,\n            canvasWidth: 0,\n            isWhitespace: false,\n            originalTransform: null,\n            paddingBottom: 0,\n            paddingLeft: 0,\n            paddingRight: 0,\n            paddingTop: 0,\n            scale: 1\n          };\n\n          task._textDivs.push(textDiv);\n\n          if (isAllWhitespace(geom.str)) {\n            textDivProperties.isWhitespace = true;\n\n            task._textDivProperties.set(textDiv, textDivProperties);\n\n            return;\n          }\n\n          var tx = _util.Util.transform(task._viewport.transform, geom.transform);\n\n          var angle = Math.atan2(tx[1], tx[0]);\n          var style = styles[geom.fontName];\n\n          if (style.vertical) {\n            angle += Math.PI / 2;\n          }\n\n          var fontHeight = Math.sqrt(tx[2] * tx[2] + tx[3] * tx[3]);\n          var fontAscent = fontHeight;\n\n          if (style.ascent) {\n            fontAscent = style.ascent * fontAscent;\n          } else if (style.descent) {\n            fontAscent = (1 + style.descent) * fontAscent;\n          }\n\n          var left;\n          var top;\n\n          if (angle === 0) {\n            left = tx[4];\n            top = tx[5] - fontAscent;\n          } else {\n            left = tx[4] + fontAscent * Math.sin(angle);\n            top = tx[5] - fontAscent * Math.cos(angle);\n          }\n\n          styleBuf[1] = left;\n          styleBuf[3] = top;\n          styleBuf[5] = fontHeight;\n          styleBuf[7] = style.fontFamily;\n          textDivProperties.style = styleBuf.join('');\n          textDiv.setAttribute('style', textDivProperties.style);\n          textDiv.textContent = geom.str;\n\n          if ((0, _dom_utils.getDefaultSetting)('pdfBug')) {\n            textDiv.dataset.fontName = geom.fontName;\n          }\n\n          if (angle !== 0) {\n            textDivProperties.angle = angle * (180 / Math.PI);\n          }\n\n          if (geom.str.length > 1) {\n            if (style.vertical) {\n              textDivProperties.canvasWidth = geom.height * task._viewport.scale;\n            } else {\n              textDivProperties.canvasWidth = geom.width * task._viewport.scale;\n            }\n          }\n\n          task._textDivProperties.set(textDiv, textDivProperties);\n\n          if (task._enhanceTextSelection) {\n            var angleCos = 1,\n                angleSin = 0;\n\n            if (angle !== 0) {\n              angleCos = Math.cos(angle);\n              angleSin = Math.sin(angle);\n            }\n\n            var divWidth = (style.vertical ? geom.height : geom.width) * task._viewport.scale;\n            var divHeight = fontHeight;\n            var m, b;\n\n            if (angle !== 0) {\n              m = [angleCos, angleSin, -angleSin, angleCos, left, top];\n              b = _util.Util.getAxialAlignedBoundingBox([0, 0, divWidth, divHeight], m);\n            } else {\n              b = [left, top, left + divWidth, top + divHeight];\n            }\n\n            task._bounds.push({\n              left: b[0],\n              top: b[1],\n              right: b[2],\n              bottom: b[3],\n              div: textDiv,\n              size: [divWidth, divHeight],\n              m: m\n            });\n          }\n        }\n\n        function render(task) {\n          if (task._canceled) {\n            return;\n          }\n\n          var textLayerFrag = task._container;\n          var textDivs = task._textDivs;\n          var capability = task._capability;\n          var textDivsLength = textDivs.length;\n\n          if (textDivsLength > MAX_TEXT_DIVS_TO_RENDER) {\n            task._renderingDone = true;\n            capability.resolve();\n            return;\n          }\n\n          var canvas = document.createElement('canvas');\n          canvas.mozOpaque = true;\n          var ctx = canvas.getContext('2d', {\n            alpha: false\n          });\n          var lastFontSize;\n          var lastFontFamily;\n\n          for (var i = 0; i < textDivsLength; i++) {\n            var textDiv = textDivs[i];\n\n            var textDivProperties = task._textDivProperties.get(textDiv);\n\n            if (textDivProperties.isWhitespace) {\n              continue;\n            }\n\n            var fontSize = textDiv.style.fontSize;\n            var fontFamily = textDiv.style.fontFamily;\n\n            if (fontSize !== lastFontSize || fontFamily !== lastFontFamily) {\n              ctx.font = fontSize + ' ' + fontFamily;\n              lastFontSize = fontSize;\n              lastFontFamily = fontFamily;\n            }\n\n            var width = ctx.measureText(textDiv.textContent).width;\n            textLayerFrag.appendChild(textDiv);\n            var transform = '';\n\n            if (textDivProperties.canvasWidth !== 0 && width > 0) {\n              textDivProperties.scale = textDivProperties.canvasWidth / width;\n              transform = 'scaleX(' + textDivProperties.scale + ')';\n            }\n\n            if (textDivProperties.angle !== 0) {\n              transform = 'rotate(' + textDivProperties.angle + 'deg) ' + transform;\n            }\n\n            if (transform !== '') {\n              textDivProperties.originalTransform = transform;\n\n              _dom_utils.CustomStyle.setProp('transform', textDiv, transform);\n            }\n\n            task._textDivProperties.set(textDiv, textDivProperties);\n          }\n\n          task._renderingDone = true;\n          capability.resolve();\n        }\n\n        function expand(task) {\n          var bounds = task._bounds;\n          var viewport = task._viewport;\n          var expanded = expandBounds(viewport.width, viewport.height, bounds);\n\n          for (var i = 0; i < expanded.length; i++) {\n            var div = bounds[i].div;\n\n            var divProperties = task._textDivProperties.get(div);\n\n            if (divProperties.angle === 0) {\n              divProperties.paddingLeft = bounds[i].left - expanded[i].left;\n              divProperties.paddingTop = bounds[i].top - expanded[i].top;\n              divProperties.paddingRight = expanded[i].right - bounds[i].right;\n              divProperties.paddingBottom = expanded[i].bottom - bounds[i].bottom;\n\n              task._textDivProperties.set(div, divProperties);\n\n              continue;\n            }\n\n            var e = expanded[i],\n                b = bounds[i];\n            var m = b.m,\n                c = m[0],\n                s = m[1];\n            var points = [[0, 0], [0, b.size[1]], [b.size[0], 0], b.size];\n            var ts = new Float64Array(64);\n            points.forEach(function (p, i) {\n              var t = _util.Util.applyTransform(p, m);\n\n              ts[i + 0] = c && (e.left - t[0]) / c;\n              ts[i + 4] = s && (e.top - t[1]) / s;\n              ts[i + 8] = c && (e.right - t[0]) / c;\n              ts[i + 12] = s && (e.bottom - t[1]) / s;\n              ts[i + 16] = s && (e.left - t[0]) / -s;\n              ts[i + 20] = c && (e.top - t[1]) / c;\n              ts[i + 24] = s && (e.right - t[0]) / -s;\n              ts[i + 28] = c && (e.bottom - t[1]) / c;\n              ts[i + 32] = c && (e.left - t[0]) / -c;\n              ts[i + 36] = s && (e.top - t[1]) / -s;\n              ts[i + 40] = c && (e.right - t[0]) / -c;\n              ts[i + 44] = s && (e.bottom - t[1]) / -s;\n              ts[i + 48] = s && (e.left - t[0]) / s;\n              ts[i + 52] = c && (e.top - t[1]) / -c;\n              ts[i + 56] = s && (e.right - t[0]) / s;\n              ts[i + 60] = c && (e.bottom - t[1]) / -c;\n            });\n\n            var findPositiveMin = function findPositiveMin(ts, offset, count) {\n              var result = 0;\n\n              for (var i = 0; i < count; i++) {\n                var t = ts[offset++];\n\n                if (t > 0) {\n                  result = result ? Math.min(t, result) : t;\n                }\n              }\n\n              return result;\n            };\n\n            var boxScale = 1 + Math.min(Math.abs(c), Math.abs(s));\n            divProperties.paddingLeft = findPositiveMin(ts, 32, 16) / boxScale;\n            divProperties.paddingTop = findPositiveMin(ts, 48, 16) / boxScale;\n            divProperties.paddingRight = findPositiveMin(ts, 0, 16) / boxScale;\n            divProperties.paddingBottom = findPositiveMin(ts, 16, 16) / boxScale;\n\n            task._textDivProperties.set(div, divProperties);\n          }\n        }\n\n        function expandBounds(width, height, boxes) {\n          var bounds = boxes.map(function (box, i) {\n            return {\n              x1: box.left,\n              y1: box.top,\n              x2: box.right,\n              y2: box.bottom,\n              index: i,\n              x1New: undefined,\n              x2New: undefined\n            };\n          });\n          expandBoundsLTR(width, bounds);\n          var expanded = new Array(boxes.length);\n          bounds.forEach(function (b) {\n            var i = b.index;\n            expanded[i] = {\n              left: b.x1New,\n              top: 0,\n              right: b.x2New,\n              bottom: 0\n            };\n          });\n          boxes.map(function (box, i) {\n            var e = expanded[i],\n                b = bounds[i];\n            b.x1 = box.top;\n            b.y1 = width - e.right;\n            b.x2 = box.bottom;\n            b.y2 = width - e.left;\n            b.index = i;\n            b.x1New = undefined;\n            b.x2New = undefined;\n          });\n          expandBoundsLTR(height, bounds);\n          bounds.forEach(function (b) {\n            var i = b.index;\n            expanded[i].top = b.x1New;\n            expanded[i].bottom = b.x2New;\n          });\n          return expanded;\n        }\n\n        function expandBoundsLTR(width, bounds) {\n          bounds.sort(function (a, b) {\n            return a.x1 - b.x1 || a.index - b.index;\n          });\n          var fakeBoundary = {\n            x1: -Infinity,\n            y1: -Infinity,\n            x2: 0,\n            y2: Infinity,\n            index: -1,\n            x1New: 0,\n            x2New: 0\n          };\n          var horizon = [{\n            start: -Infinity,\n            end: Infinity,\n            boundary: fakeBoundary\n          }];\n          bounds.forEach(function (boundary) {\n            var i = 0;\n\n            while (i < horizon.length && horizon[i].end <= boundary.y1) {\n              i++;\n            }\n\n            var j = horizon.length - 1;\n\n            while (j >= 0 && horizon[j].start >= boundary.y2) {\n              j--;\n            }\n\n            var horizonPart, affectedBoundary;\n            var q,\n                k,\n                maxXNew = -Infinity;\n\n            for (q = i; q <= j; q++) {\n              horizonPart = horizon[q];\n              affectedBoundary = horizonPart.boundary;\n              var xNew;\n\n              if (affectedBoundary.x2 > boundary.x1) {\n                xNew = affectedBoundary.index > boundary.index ? affectedBoundary.x1New : boundary.x1;\n              } else if (affectedBoundary.x2New === undefined) {\n                xNew = (affectedBoundary.x2 + boundary.x1) / 2;\n              } else {\n                xNew = affectedBoundary.x2New;\n              }\n\n              if (xNew > maxXNew) {\n                maxXNew = xNew;\n              }\n            }\n\n            boundary.x1New = maxXNew;\n\n            for (q = i; q <= j; q++) {\n              horizonPart = horizon[q];\n              affectedBoundary = horizonPart.boundary;\n\n              if (affectedBoundary.x2New === undefined) {\n                if (affectedBoundary.x2 > boundary.x1) {\n                  if (affectedBoundary.index > boundary.index) {\n                    affectedBoundary.x2New = affectedBoundary.x2;\n                  }\n                } else {\n                  affectedBoundary.x2New = maxXNew;\n                }\n              } else if (affectedBoundary.x2New > maxXNew) {\n                affectedBoundary.x2New = Math.max(maxXNew, affectedBoundary.x2);\n              }\n            }\n\n            var changedHorizon = [],\n                lastBoundary = null;\n\n            for (q = i; q <= j; q++) {\n              horizonPart = horizon[q];\n              affectedBoundary = horizonPart.boundary;\n              var useBoundary = affectedBoundary.x2 > boundary.x2 ? affectedBoundary : boundary;\n\n              if (lastBoundary === useBoundary) {\n                changedHorizon[changedHorizon.length - 1].end = horizonPart.end;\n              } else {\n                changedHorizon.push({\n                  start: horizonPart.start,\n                  end: horizonPart.end,\n                  boundary: useBoundary\n                });\n                lastBoundary = useBoundary;\n              }\n            }\n\n            if (horizon[i].start < boundary.y1) {\n              changedHorizon[0].start = boundary.y1;\n              changedHorizon.unshift({\n                start: horizon[i].start,\n                end: boundary.y1,\n                boundary: horizon[i].boundary\n              });\n            }\n\n            if (boundary.y2 < horizon[j].end) {\n              changedHorizon[changedHorizon.length - 1].end = boundary.y2;\n              changedHorizon.push({\n                start: boundary.y2,\n                end: horizon[j].end,\n                boundary: horizon[j].boundary\n              });\n            }\n\n            for (q = i; q <= j; q++) {\n              horizonPart = horizon[q];\n              affectedBoundary = horizonPart.boundary;\n\n              if (affectedBoundary.x2New !== undefined) {\n                continue;\n              }\n\n              var used = false;\n\n              for (k = i - 1; !used && k >= 0 && horizon[k].start >= affectedBoundary.y1; k--) {\n                used = horizon[k].boundary === affectedBoundary;\n              }\n\n              for (k = j + 1; !used && k < horizon.length && horizon[k].end <= affectedBoundary.y2; k++) {\n                used = horizon[k].boundary === affectedBoundary;\n              }\n\n              for (k = 0; !used && k < changedHorizon.length; k++) {\n                used = changedHorizon[k].boundary === affectedBoundary;\n              }\n\n              if (!used) {\n                affectedBoundary.x2New = maxXNew;\n              }\n            }\n\n            Array.prototype.splice.apply(horizon, [i, j - i + 1].concat(changedHorizon));\n          });\n          horizon.forEach(function (horizonPart) {\n            var affectedBoundary = horizonPart.boundary;\n\n            if (affectedBoundary.x2New === undefined) {\n              affectedBoundary.x2New = Math.max(width, affectedBoundary.x2);\n            }\n          });\n        }\n\n        function TextLayerRenderTask(textContent, container, viewport, textDivs, enhanceTextSelection) {\n          this._textContent = textContent;\n          this._container = container;\n          this._viewport = viewport;\n          this._textDivs = textDivs || [];\n          this._textDivProperties = new WeakMap();\n          this._renderingDone = false;\n          this._canceled = false;\n          this._capability = (0, _util.createPromiseCapability)();\n          this._renderTimer = null;\n          this._bounds = [];\n          this._enhanceTextSelection = !!enhanceTextSelection;\n        }\n\n        TextLayerRenderTask.prototype = {\n          get promise() {\n            return this._capability.promise;\n          },\n\n          cancel: function TextLayer_cancel() {\n            this._canceled = true;\n\n            if (this._renderTimer !== null) {\n              clearTimeout(this._renderTimer);\n              this._renderTimer = null;\n            }\n\n            this._capability.reject('canceled');\n          },\n          _render: function TextLayer_render(timeout) {\n            var _this = this;\n\n            var textItems = this._textContent.items;\n            var textStyles = this._textContent.styles;\n\n            for (var i = 0, len = textItems.length; i < len; i++) {\n              appendText(this, textItems[i], textStyles);\n            }\n\n            if (!timeout) {\n              render(this);\n            } else {\n              this._renderTimer = setTimeout(function () {\n                render(_this);\n                _this._renderTimer = null;\n              }, timeout);\n            }\n          },\n          expandTextDivs: function TextLayer_expandTextDivs(expandDivs) {\n            if (!this._enhanceTextSelection || !this._renderingDone) {\n              return;\n            }\n\n            if (this._bounds !== null) {\n              expand(this);\n              this._bounds = null;\n            }\n\n            for (var i = 0, ii = this._textDivs.length; i < ii; i++) {\n              var div = this._textDivs[i];\n\n              var divProperties = this._textDivProperties.get(div);\n\n              if (divProperties.isWhitespace) {\n                continue;\n              }\n\n              if (expandDivs) {\n                var transform = '',\n                    padding = '';\n\n                if (divProperties.scale !== 1) {\n                  transform = 'scaleX(' + divProperties.scale + ')';\n                }\n\n                if (divProperties.angle !== 0) {\n                  transform = 'rotate(' + divProperties.angle + 'deg) ' + transform;\n                }\n\n                if (divProperties.paddingLeft !== 0) {\n                  padding += ' padding-left: ' + divProperties.paddingLeft / divProperties.scale + 'px;';\n                  transform += ' translateX(' + -divProperties.paddingLeft / divProperties.scale + 'px)';\n                }\n\n                if (divProperties.paddingTop !== 0) {\n                  padding += ' padding-top: ' + divProperties.paddingTop + 'px;';\n                  transform += ' translateY(' + -divProperties.paddingTop + 'px)';\n                }\n\n                if (divProperties.paddingRight !== 0) {\n                  padding += ' padding-right: ' + divProperties.paddingRight / divProperties.scale + 'px;';\n                }\n\n                if (divProperties.paddingBottom !== 0) {\n                  padding += ' padding-bottom: ' + divProperties.paddingBottom + 'px;';\n                }\n\n                if (padding !== '') {\n                  div.setAttribute('style', divProperties.style + padding);\n                }\n\n                if (transform !== '') {\n                  _dom_utils.CustomStyle.setProp('transform', div, transform);\n                }\n              } else {\n                div.style.padding = 0;\n\n                _dom_utils.CustomStyle.setProp('transform', div, divProperties.originalTransform || '');\n              }\n            }\n          }\n        };\n\n        function renderTextLayer(renderParameters) {\n          var task = new TextLayerRenderTask(renderParameters.textContent, renderParameters.container, renderParameters.viewport, renderParameters.textDivs, renderParameters.enhanceTextSelection);\n\n          task._render(renderParameters.timeout);\n\n          return task;\n        }\n\n        return renderTextLayer;\n      }();\n\n      exports.renderTextLayer = renderTextLayer;\n      /***/\n    },\n    /* 6 */\n\n    /***/\n    function (module, exports, __w_pdfjs_require__) {\n      \"use strict\";\n\n      var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n      } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n\n      var g;\n\n      g = function () {\n        return this;\n      }();\n\n      try {\n        g = g || Function(\"return this\")() || (1, eval)(\"this\");\n      } catch (e) {\n        if ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\") g = window;\n      }\n\n      module.exports = g;\n      /***/\n    },\n    /* 7 */\n\n    /***/\n    function (module, exports, __w_pdfjs_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Metadata = undefined;\n\n      var _util = __w_pdfjs_require__(0);\n\n      function fixMetadata(meta) {\n        return meta.replace(/>\\\\376\\\\377([^<]+)/g, function (all, codes) {\n          var bytes = codes.replace(/\\\\([0-3])([0-7])([0-7])/g, function (code, d1, d2, d3) {\n            return String.fromCharCode(d1 * 64 + d2 * 8 + d3 * 1);\n          });\n          var chars = '';\n\n          for (var i = 0; i < bytes.length; i += 2) {\n            var code = bytes.charCodeAt(i) * 256 + bytes.charCodeAt(i + 1);\n            chars += code >= 32 && code < 127 && code !== 60 && code !== 62 && code !== 38 ? String.fromCharCode(code) : '&#x' + (0x10000 + code).toString(16).substring(1) + ';';\n          }\n\n          return '>' + chars;\n        });\n      }\n\n      function Metadata(meta) {\n        if (typeof meta === 'string') {\n          meta = fixMetadata(meta);\n          var parser = new DOMParser();\n          meta = parser.parseFromString(meta, 'application/xml');\n        } else if (!(meta instanceof Document)) {\n          (0, _util.error)('Metadata: Invalid metadata object');\n        }\n\n        this.metaDocument = meta;\n        this.metadata = Object.create(null);\n        this.parse();\n      }\n\n      Metadata.prototype = {\n        parse: function Metadata_parse() {\n          var doc = this.metaDocument;\n          var rdf = doc.documentElement;\n\n          if (rdf.nodeName.toLowerCase() !== 'rdf:rdf') {\n            rdf = rdf.firstChild;\n\n            while (rdf && rdf.nodeName.toLowerCase() !== 'rdf:rdf') {\n              rdf = rdf.nextSibling;\n            }\n          }\n\n          var nodeName = rdf ? rdf.nodeName.toLowerCase() : null;\n\n          if (!rdf || nodeName !== 'rdf:rdf' || !rdf.hasChildNodes()) {\n            return;\n          }\n\n          var children = rdf.childNodes,\n              desc,\n              entry,\n              name,\n              i,\n              ii,\n              length,\n              iLength;\n\n          for (i = 0, length = children.length; i < length; i++) {\n            desc = children[i];\n\n            if (desc.nodeName.toLowerCase() !== 'rdf:description') {\n              continue;\n            }\n\n            for (ii = 0, iLength = desc.childNodes.length; ii < iLength; ii++) {\n              if (desc.childNodes[ii].nodeName.toLowerCase() !== '#text') {\n                entry = desc.childNodes[ii];\n                name = entry.nodeName.toLowerCase();\n                this.metadata[name] = entry.textContent.trim();\n              }\n            }\n          }\n        },\n        get: function Metadata_get(name) {\n          return this.metadata[name] || null;\n        },\n        has: function Metadata_has(name) {\n          return typeof this.metadata[name] !== 'undefined';\n        }\n      };\n      exports.Metadata = Metadata;\n      /***/\n    },\n    /* 8 */\n\n    /***/\n    function (module, exports, __w_pdfjs_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.WebGLUtils = undefined;\n\n      var _dom_utils = __w_pdfjs_require__(1);\n\n      var _util = __w_pdfjs_require__(0);\n\n      var WebGLUtils = function WebGLUtilsClosure() {\n        function loadShader(gl, code, shaderType) {\n          var shader = gl.createShader(shaderType);\n          gl.shaderSource(shader, code);\n          gl.compileShader(shader);\n          var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n          if (!compiled) {\n            var errorMsg = gl.getShaderInfoLog(shader);\n            throw new Error('Error during shader compilation: ' + errorMsg);\n          }\n\n          return shader;\n        }\n\n        function createVertexShader(gl, code) {\n          return loadShader(gl, code, gl.VERTEX_SHADER);\n        }\n\n        function createFragmentShader(gl, code) {\n          return loadShader(gl, code, gl.FRAGMENT_SHADER);\n        }\n\n        function createProgram(gl, shaders) {\n          var program = gl.createProgram();\n\n          for (var i = 0, ii = shaders.length; i < ii; ++i) {\n            gl.attachShader(program, shaders[i]);\n          }\n\n          gl.linkProgram(program);\n          var linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n\n          if (!linked) {\n            var errorMsg = gl.getProgramInfoLog(program);\n            throw new Error('Error during program linking: ' + errorMsg);\n          }\n\n          return program;\n        }\n\n        function createTexture(gl, image, textureId) {\n          gl.activeTexture(textureId);\n          var texture = gl.createTexture();\n          gl.bindTexture(gl.TEXTURE_2D, texture);\n          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n          gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n          return texture;\n        }\n\n        var currentGL, currentCanvas;\n\n        function generateGL() {\n          if (currentGL) {\n            return;\n          }\n\n          currentCanvas = document.createElement('canvas');\n          currentGL = currentCanvas.getContext('webgl', {\n            premultipliedalpha: false\n          });\n        }\n\n        var smaskVertexShaderCode = '\\\n  attribute vec2 a_position;                                    \\\n  attribute vec2 a_texCoord;                                    \\\n                                                                \\\n  uniform vec2 u_resolution;                                    \\\n                                                                \\\n  varying vec2 v_texCoord;                                      \\\n                                                                \\\n  void main() {                                                 \\\n    vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;   \\\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);          \\\n                                                                \\\n    v_texCoord = a_texCoord;                                    \\\n  }                                                             ';\n        var smaskFragmentShaderCode = '\\\n  precision mediump float;                                      \\\n                                                                \\\n  uniform vec4 u_backdrop;                                      \\\n  uniform int u_subtype;                                        \\\n  uniform sampler2D u_image;                                    \\\n  uniform sampler2D u_mask;                                     \\\n                                                                \\\n  varying vec2 v_texCoord;                                      \\\n                                                                \\\n  void main() {                                                 \\\n    vec4 imageColor = texture2D(u_image, v_texCoord);           \\\n    vec4 maskColor = texture2D(u_mask, v_texCoord);             \\\n    if (u_backdrop.a > 0.0) {                                   \\\n      maskColor.rgb = maskColor.rgb * maskColor.a +             \\\n                      u_backdrop.rgb * (1.0 - maskColor.a);     \\\n    }                                                           \\\n    float lum;                                                  \\\n    if (u_subtype == 0) {                                       \\\n      lum = maskColor.a;                                        \\\n    } else {                                                    \\\n      lum = maskColor.r * 0.3 + maskColor.g * 0.59 +            \\\n            maskColor.b * 0.11;                                 \\\n    }                                                           \\\n    imageColor.a *= lum;                                        \\\n    imageColor.rgb *= imageColor.a;                             \\\n    gl_FragColor = imageColor;                                  \\\n  }                                                             ';\n        var smaskCache = null;\n\n        function initSmaskGL() {\n          var canvas, gl;\n          generateGL();\n          canvas = currentCanvas;\n          currentCanvas = null;\n          gl = currentGL;\n          currentGL = null;\n          var vertexShader = createVertexShader(gl, smaskVertexShaderCode);\n          var fragmentShader = createFragmentShader(gl, smaskFragmentShaderCode);\n          var program = createProgram(gl, [vertexShader, fragmentShader]);\n          gl.useProgram(program);\n          var cache = {};\n          cache.gl = gl;\n          cache.canvas = canvas;\n          cache.resolutionLocation = gl.getUniformLocation(program, 'u_resolution');\n          cache.positionLocation = gl.getAttribLocation(program, 'a_position');\n          cache.backdropLocation = gl.getUniformLocation(program, 'u_backdrop');\n          cache.subtypeLocation = gl.getUniformLocation(program, 'u_subtype');\n          var texCoordLocation = gl.getAttribLocation(program, 'a_texCoord');\n          var texLayerLocation = gl.getUniformLocation(program, 'u_image');\n          var texMaskLocation = gl.getUniformLocation(program, 'u_mask');\n          var texCoordBuffer = gl.createBuffer();\n          gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\n          gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0]), gl.STATIC_DRAW);\n          gl.enableVertexAttribArray(texCoordLocation);\n          gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);\n          gl.uniform1i(texLayerLocation, 0);\n          gl.uniform1i(texMaskLocation, 1);\n          smaskCache = cache;\n        }\n\n        function composeSMask(layer, mask, properties) {\n          var width = layer.width,\n              height = layer.height;\n\n          if (!smaskCache) {\n            initSmaskGL();\n          }\n\n          var cache = smaskCache,\n              canvas = cache.canvas,\n              gl = cache.gl;\n          canvas.width = width;\n          canvas.height = height;\n          gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n          gl.uniform2f(cache.resolutionLocation, width, height);\n\n          if (properties.backdrop) {\n            gl.uniform4f(cache.resolutionLocation, properties.backdrop[0], properties.backdrop[1], properties.backdrop[2], 1);\n          } else {\n            gl.uniform4f(cache.resolutionLocation, 0, 0, 0, 0);\n          }\n\n          gl.uniform1i(cache.subtypeLocation, properties.subtype === 'Luminosity' ? 1 : 0);\n          var texture = createTexture(gl, layer, gl.TEXTURE0);\n          var maskTexture = createTexture(gl, mask, gl.TEXTURE1);\n          var buffer = gl.createBuffer();\n          gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n          gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0, width, 0, 0, height, 0, height, width, 0, width, height]), gl.STATIC_DRAW);\n          gl.enableVertexAttribArray(cache.positionLocation);\n          gl.vertexAttribPointer(cache.positionLocation, 2, gl.FLOAT, false, 0, 0);\n          gl.clearColor(0, 0, 0, 0);\n          gl.enable(gl.BLEND);\n          gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n          gl.clear(gl.COLOR_BUFFER_BIT);\n          gl.drawArrays(gl.TRIANGLES, 0, 6);\n          gl.flush();\n          gl.deleteTexture(texture);\n          gl.deleteTexture(maskTexture);\n          gl.deleteBuffer(buffer);\n          return canvas;\n        }\n\n        var figuresVertexShaderCode = '\\\n  attribute vec2 a_position;                                    \\\n  attribute vec3 a_color;                                       \\\n                                                                \\\n  uniform vec2 u_resolution;                                    \\\n  uniform vec2 u_scale;                                         \\\n  uniform vec2 u_offset;                                        \\\n                                                                \\\n  varying vec4 v_color;                                         \\\n                                                                \\\n  void main() {                                                 \\\n    vec2 position = (a_position + u_offset) * u_scale;          \\\n    vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;     \\\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);          \\\n                                                                \\\n    v_color = vec4(a_color / 255.0, 1.0);                       \\\n  }                                                             ';\n        var figuresFragmentShaderCode = '\\\n  precision mediump float;                                      \\\n                                                                \\\n  varying vec4 v_color;                                         \\\n                                                                \\\n  void main() {                                                 \\\n    gl_FragColor = v_color;                                     \\\n  }                                                             ';\n        var figuresCache = null;\n\n        function initFiguresGL() {\n          var canvas, gl;\n          generateGL();\n          canvas = currentCanvas;\n          currentCanvas = null;\n          gl = currentGL;\n          currentGL = null;\n          var vertexShader = createVertexShader(gl, figuresVertexShaderCode);\n          var fragmentShader = createFragmentShader(gl, figuresFragmentShaderCode);\n          var program = createProgram(gl, [vertexShader, fragmentShader]);\n          gl.useProgram(program);\n          var cache = {};\n          cache.gl = gl;\n          cache.canvas = canvas;\n          cache.resolutionLocation = gl.getUniformLocation(program, 'u_resolution');\n          cache.scaleLocation = gl.getUniformLocation(program, 'u_scale');\n          cache.offsetLocation = gl.getUniformLocation(program, 'u_offset');\n          cache.positionLocation = gl.getAttribLocation(program, 'a_position');\n          cache.colorLocation = gl.getAttribLocation(program, 'a_color');\n          figuresCache = cache;\n        }\n\n        function drawFigures(width, height, backgroundColor, figures, context) {\n          if (!figuresCache) {\n            initFiguresGL();\n          }\n\n          var cache = figuresCache,\n              canvas = cache.canvas,\n              gl = cache.gl;\n          canvas.width = width;\n          canvas.height = height;\n          gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n          gl.uniform2f(cache.resolutionLocation, width, height);\n          var count = 0;\n          var i, ii, rows;\n\n          for (i = 0, ii = figures.length; i < ii; i++) {\n            switch (figures[i].type) {\n              case 'lattice':\n                rows = figures[i].coords.length / figures[i].verticesPerRow | 0;\n                count += (rows - 1) * (figures[i].verticesPerRow - 1) * 6;\n                break;\n\n              case 'triangles':\n                count += figures[i].coords.length;\n                break;\n            }\n          }\n\n          var coords = new Float32Array(count * 2);\n          var colors = new Uint8Array(count * 3);\n          var coordsMap = context.coords,\n              colorsMap = context.colors;\n          var pIndex = 0,\n              cIndex = 0;\n\n          for (i = 0, ii = figures.length; i < ii; i++) {\n            var figure = figures[i],\n                ps = figure.coords,\n                cs = figure.colors;\n\n            switch (figure.type) {\n              case 'lattice':\n                var cols = figure.verticesPerRow;\n                rows = ps.length / cols | 0;\n\n                for (var row = 1; row < rows; row++) {\n                  var offset = row * cols + 1;\n\n                  for (var col = 1; col < cols; col++, offset++) {\n                    coords[pIndex] = coordsMap[ps[offset - cols - 1]];\n                    coords[pIndex + 1] = coordsMap[ps[offset - cols - 1] + 1];\n                    coords[pIndex + 2] = coordsMap[ps[offset - cols]];\n                    coords[pIndex + 3] = coordsMap[ps[offset - cols] + 1];\n                    coords[pIndex + 4] = coordsMap[ps[offset - 1]];\n                    coords[pIndex + 5] = coordsMap[ps[offset - 1] + 1];\n                    colors[cIndex] = colorsMap[cs[offset - cols - 1]];\n                    colors[cIndex + 1] = colorsMap[cs[offset - cols - 1] + 1];\n                    colors[cIndex + 2] = colorsMap[cs[offset - cols - 1] + 2];\n                    colors[cIndex + 3] = colorsMap[cs[offset - cols]];\n                    colors[cIndex + 4] = colorsMap[cs[offset - cols] + 1];\n                    colors[cIndex + 5] = colorsMap[cs[offset - cols] + 2];\n                    colors[cIndex + 6] = colorsMap[cs[offset - 1]];\n                    colors[cIndex + 7] = colorsMap[cs[offset - 1] + 1];\n                    colors[cIndex + 8] = colorsMap[cs[offset - 1] + 2];\n                    coords[pIndex + 6] = coords[pIndex + 2];\n                    coords[pIndex + 7] = coords[pIndex + 3];\n                    coords[pIndex + 8] = coords[pIndex + 4];\n                    coords[pIndex + 9] = coords[pIndex + 5];\n                    coords[pIndex + 10] = coordsMap[ps[offset]];\n                    coords[pIndex + 11] = coordsMap[ps[offset] + 1];\n                    colors[cIndex + 9] = colors[cIndex + 3];\n                    colors[cIndex + 10] = colors[cIndex + 4];\n                    colors[cIndex + 11] = colors[cIndex + 5];\n                    colors[cIndex + 12] = colors[cIndex + 6];\n                    colors[cIndex + 13] = colors[cIndex + 7];\n                    colors[cIndex + 14] = colors[cIndex + 8];\n                    colors[cIndex + 15] = colorsMap[cs[offset]];\n                    colors[cIndex + 16] = colorsMap[cs[offset] + 1];\n                    colors[cIndex + 17] = colorsMap[cs[offset] + 2];\n                    pIndex += 12;\n                    cIndex += 18;\n                  }\n                }\n\n                break;\n\n              case 'triangles':\n                for (var j = 0, jj = ps.length; j < jj; j++) {\n                  coords[pIndex] = coordsMap[ps[j]];\n                  coords[pIndex + 1] = coordsMap[ps[j] + 1];\n                  colors[cIndex] = colorsMap[cs[j]];\n                  colors[cIndex + 1] = colorsMap[cs[j] + 1];\n                  colors[cIndex + 2] = colorsMap[cs[j] + 2];\n                  pIndex += 2;\n                  cIndex += 3;\n                }\n\n                break;\n            }\n          }\n\n          if (backgroundColor) {\n            gl.clearColor(backgroundColor[0] / 255, backgroundColor[1] / 255, backgroundColor[2] / 255, 1.0);\n          } else {\n            gl.clearColor(0, 0, 0, 0);\n          }\n\n          gl.clear(gl.COLOR_BUFFER_BIT);\n          var coordsBuffer = gl.createBuffer();\n          gl.bindBuffer(gl.ARRAY_BUFFER, coordsBuffer);\n          gl.bufferData(gl.ARRAY_BUFFER, coords, gl.STATIC_DRAW);\n          gl.enableVertexAttribArray(cache.positionLocation);\n          gl.vertexAttribPointer(cache.positionLocation, 2, gl.FLOAT, false, 0, 0);\n          var colorsBuffer = gl.createBuffer();\n          gl.bindBuffer(gl.ARRAY_BUFFER, colorsBuffer);\n          gl.bufferData(gl.ARRAY_BUFFER, colors, gl.STATIC_DRAW);\n          gl.enableVertexAttribArray(cache.colorLocation);\n          gl.vertexAttribPointer(cache.colorLocation, 3, gl.UNSIGNED_BYTE, false, 0, 0);\n          gl.uniform2f(cache.scaleLocation, context.scaleX, context.scaleY);\n          gl.uniform2f(cache.offsetLocation, context.offsetX, context.offsetY);\n          gl.drawArrays(gl.TRIANGLES, 0, count);\n          gl.flush();\n          gl.deleteBuffer(coordsBuffer);\n          gl.deleteBuffer(colorsBuffer);\n          return canvas;\n        }\n\n        function cleanup() {\n          if (smaskCache && smaskCache.canvas) {\n            smaskCache.canvas.width = 0;\n            smaskCache.canvas.height = 0;\n          }\n\n          if (figuresCache && figuresCache.canvas) {\n            figuresCache.canvas.width = 0;\n            figuresCache.canvas.height = 0;\n          }\n\n          smaskCache = null;\n          figuresCache = null;\n        }\n\n        return {\n          get isEnabled() {\n            if ((0, _dom_utils.getDefaultSetting)('disableWebGL')) {\n              return false;\n            }\n\n            var enabled = false;\n\n            try {\n              generateGL();\n              enabled = !!currentGL;\n            } catch (e) {}\n\n            return (0, _util.shadow)(this, 'isEnabled', enabled);\n          },\n\n          composeSMask: composeSMask,\n          drawFigures: drawFigures,\n          clear: cleanup\n        };\n      }();\n\n      exports.WebGLUtils = WebGLUtils;\n      /***/\n    },\n    /* 9 */\n\n    /***/\n    function (module, exports, __w_pdfjs_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.PDFJS = exports.isWorker = exports.globalScope = undefined;\n\n      var _api = __w_pdfjs_require__(3);\n\n      var _dom_utils = __w_pdfjs_require__(1);\n\n      var _util = __w_pdfjs_require__(0);\n\n      var _annotation_layer = __w_pdfjs_require__(2);\n\n      var _metadata = __w_pdfjs_require__(7);\n\n      var _text_layer = __w_pdfjs_require__(5);\n\n      var _svg = __w_pdfjs_require__(4);\n\n      var isWorker = typeof window === 'undefined';\n\n      if (!_util.globalScope.PDFJS) {\n        _util.globalScope.PDFJS = {};\n      }\n\n      var PDFJS = _util.globalScope.PDFJS;\n      {\n        PDFJS.version = '1.8.357';\n        PDFJS.build = 'ca3cf6e7';\n      }\n      PDFJS.pdfBug = false;\n\n      if (PDFJS.verbosity !== undefined) {\n        (0, _util.setVerbosityLevel)(PDFJS.verbosity);\n      }\n\n      delete PDFJS.verbosity;\n      Object.defineProperty(PDFJS, 'verbosity', {\n        get: function get() {\n          return (0, _util.getVerbosityLevel)();\n        },\n        set: function set(level) {\n          (0, _util.setVerbosityLevel)(level);\n        },\n        enumerable: true,\n        configurable: true\n      });\n      PDFJS.VERBOSITY_LEVELS = _util.VERBOSITY_LEVELS;\n      PDFJS.OPS = _util.OPS;\n      PDFJS.UNSUPPORTED_FEATURES = _util.UNSUPPORTED_FEATURES;\n      PDFJS.isValidUrl = _dom_utils.isValidUrl;\n      PDFJS.shadow = _util.shadow;\n      PDFJS.createBlob = _util.createBlob;\n\n      PDFJS.createObjectURL = function PDFJS_createObjectURL(data, contentType) {\n        return (0, _util.createObjectURL)(data, contentType, PDFJS.disableCreateObjectURL);\n      };\n\n      Object.defineProperty(PDFJS, 'isLittleEndian', {\n        configurable: true,\n        get: function PDFJS_isLittleEndian() {\n          return (0, _util.shadow)(PDFJS, 'isLittleEndian', (0, _util.isLittleEndian)());\n        }\n      });\n      PDFJS.removeNullCharacters = _util.removeNullCharacters;\n      PDFJS.PasswordResponses = _util.PasswordResponses;\n      PDFJS.PasswordException = _util.PasswordException;\n      PDFJS.UnknownErrorException = _util.UnknownErrorException;\n      PDFJS.InvalidPDFException = _util.InvalidPDFException;\n      PDFJS.MissingPDFException = _util.MissingPDFException;\n      PDFJS.UnexpectedResponseException = _util.UnexpectedResponseException;\n      PDFJS.Util = _util.Util;\n      PDFJS.PageViewport = _util.PageViewport;\n      PDFJS.createPromiseCapability = _util.createPromiseCapability;\n      PDFJS.maxImageSize = PDFJS.maxImageSize === undefined ? -1 : PDFJS.maxImageSize;\n      PDFJS.cMapUrl = PDFJS.cMapUrl === undefined ? null : PDFJS.cMapUrl;\n      PDFJS.cMapPacked = PDFJS.cMapPacked === undefined ? false : PDFJS.cMapPacked;\n      PDFJS.disableFontFace = PDFJS.disableFontFace === undefined ? false : PDFJS.disableFontFace;\n      PDFJS.imageResourcesPath = PDFJS.imageResourcesPath === undefined ? '' : PDFJS.imageResourcesPath;\n      PDFJS.disableWorker = PDFJS.disableWorker === undefined ? false : PDFJS.disableWorker;\n      PDFJS.workerSrc = PDFJS.workerSrc === undefined ? null : PDFJS.workerSrc;\n      PDFJS.workerPort = PDFJS.workerPort === undefined ? null : PDFJS.workerPort;\n      PDFJS.disableRange = PDFJS.disableRange === undefined ? false : PDFJS.disableRange;\n      PDFJS.disableStream = PDFJS.disableStream === undefined ? false : PDFJS.disableStream;\n      PDFJS.disableAutoFetch = PDFJS.disableAutoFetch === undefined ? false : PDFJS.disableAutoFetch;\n      PDFJS.pdfBug = PDFJS.pdfBug === undefined ? false : PDFJS.pdfBug;\n      PDFJS.postMessageTransfers = PDFJS.postMessageTransfers === undefined ? true : PDFJS.postMessageTransfers;\n      PDFJS.disableCreateObjectURL = PDFJS.disableCreateObjectURL === undefined ? false : PDFJS.disableCreateObjectURL;\n      PDFJS.disableWebGL = PDFJS.disableWebGL === undefined ? true : PDFJS.disableWebGL;\n      PDFJS.externalLinkTarget = PDFJS.externalLinkTarget === undefined ? _dom_utils.LinkTarget.NONE : PDFJS.externalLinkTarget;\n      PDFJS.externalLinkRel = PDFJS.externalLinkRel === undefined ? _dom_utils.DEFAULT_LINK_REL : PDFJS.externalLinkRel;\n      PDFJS.isEvalSupported = PDFJS.isEvalSupported === undefined ? true : PDFJS.isEvalSupported;\n      PDFJS.pdfjsNext = PDFJS.pdfjsNext === undefined ? false : PDFJS.pdfjsNext;\n      {\n        var savedOpenExternalLinksInNewWindow = PDFJS.openExternalLinksInNewWindow;\n        delete PDFJS.openExternalLinksInNewWindow;\n        Object.defineProperty(PDFJS, 'openExternalLinksInNewWindow', {\n          get: function get() {\n            return PDFJS.externalLinkTarget === _dom_utils.LinkTarget.BLANK;\n          },\n          set: function set(value) {\n            if (value) {\n              (0, _util.deprecated)('PDFJS.openExternalLinksInNewWindow, please use ' + '\"PDFJS.externalLinkTarget = PDFJS.LinkTarget.BLANK\" instead.');\n            }\n\n            if (PDFJS.externalLinkTarget !== _dom_utils.LinkTarget.NONE) {\n              (0, _util.warn)('PDFJS.externalLinkTarget is already initialized');\n              return;\n            }\n\n            PDFJS.externalLinkTarget = value ? _dom_utils.LinkTarget.BLANK : _dom_utils.LinkTarget.NONE;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        if (savedOpenExternalLinksInNewWindow) {\n          PDFJS.openExternalLinksInNewWindow = savedOpenExternalLinksInNewWindow;\n        }\n      }\n      PDFJS.getDocument = _api.getDocument;\n      PDFJS.LoopbackPort = _api.LoopbackPort;\n      PDFJS.PDFDataRangeTransport = _api.PDFDataRangeTransport;\n      PDFJS.PDFWorker = _api.PDFWorker;\n      PDFJS.hasCanvasTypedArrays = true;\n      PDFJS.CustomStyle = _dom_utils.CustomStyle;\n      PDFJS.LinkTarget = _dom_utils.LinkTarget;\n      PDFJS.addLinkAttributes = _dom_utils.addLinkAttributes;\n      PDFJS.getFilenameFromUrl = _dom_utils.getFilenameFromUrl;\n      PDFJS.isExternalLinkTargetSet = _dom_utils.isExternalLinkTargetSet;\n      PDFJS.AnnotationLayer = _annotation_layer.AnnotationLayer;\n      PDFJS.renderTextLayer = _text_layer.renderTextLayer;\n      PDFJS.Metadata = _metadata.Metadata;\n      PDFJS.SVGGraphics = _svg.SVGGraphics;\n      PDFJS.UnsupportedManager = _api._UnsupportedManager;\n      exports.globalScope = _util.globalScope;\n      exports.isWorker = isWorker;\n      exports.PDFJS = PDFJS;\n      /***/\n    },\n    /* 10 */\n\n    /***/\n    function (module, exports, __w_pdfjs_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CanvasGraphics = undefined;\n\n      var _util = __w_pdfjs_require__(0);\n\n      var _pattern_helper = __w_pdfjs_require__(12);\n\n      var _webgl = __w_pdfjs_require__(8);\n\n      var MIN_FONT_SIZE = 16;\n      var MAX_FONT_SIZE = 100;\n      var MAX_GROUP_SIZE = 4096;\n      var MIN_WIDTH_FACTOR = 0.65;\n      var COMPILE_TYPE3_GLYPHS = true;\n      var MAX_SIZE_TO_COMPILE = 1000;\n      var FULL_CHUNK_HEIGHT = 16;\n      var IsLittleEndianCached = {\n        get value() {\n          return (0, _util.shadow)(IsLittleEndianCached, 'value', (0, _util.isLittleEndian)());\n        }\n\n      };\n\n      function addContextCurrentTransform(ctx) {\n        if (!ctx.mozCurrentTransform) {\n          ctx._originalSave = ctx.save;\n          ctx._originalRestore = ctx.restore;\n          ctx._originalRotate = ctx.rotate;\n          ctx._originalScale = ctx.scale;\n          ctx._originalTranslate = ctx.translate;\n          ctx._originalTransform = ctx.transform;\n          ctx._originalSetTransform = ctx.setTransform;\n          ctx._transformMatrix = ctx._transformMatrix || [1, 0, 0, 1, 0, 0];\n          ctx._transformStack = [];\n          Object.defineProperty(ctx, 'mozCurrentTransform', {\n            get: function getCurrentTransform() {\n              return this._transformMatrix;\n            }\n          });\n          Object.defineProperty(ctx, 'mozCurrentTransformInverse', {\n            get: function getCurrentTransformInverse() {\n              var m = this._transformMatrix;\n              var a = m[0],\n                  b = m[1],\n                  c = m[2],\n                  d = m[3],\n                  e = m[4],\n                  f = m[5];\n              var ad_bc = a * d - b * c;\n              var bc_ad = b * c - a * d;\n              return [d / ad_bc, b / bc_ad, c / bc_ad, a / ad_bc, (d * e - c * f) / bc_ad, (b * e - a * f) / ad_bc];\n            }\n          });\n\n          ctx.save = function ctxSave() {\n            var old = this._transformMatrix;\n\n            this._transformStack.push(old);\n\n            this._transformMatrix = old.slice(0, 6);\n\n            this._originalSave();\n          };\n\n          ctx.restore = function ctxRestore() {\n            var prev = this._transformStack.pop();\n\n            if (prev) {\n              this._transformMatrix = prev;\n\n              this._originalRestore();\n            }\n          };\n\n          ctx.translate = function ctxTranslate(x, y) {\n            var m = this._transformMatrix;\n            m[4] = m[0] * x + m[2] * y + m[4];\n            m[5] = m[1] * x + m[3] * y + m[5];\n\n            this._originalTranslate(x, y);\n          };\n\n          ctx.scale = function ctxScale(x, y) {\n            var m = this._transformMatrix;\n            m[0] = m[0] * x;\n            m[1] = m[1] * x;\n            m[2] = m[2] * y;\n            m[3] = m[3] * y;\n\n            this._originalScale(x, y);\n          };\n\n          ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n            var m = this._transformMatrix;\n            this._transformMatrix = [m[0] * a + m[2] * b, m[1] * a + m[3] * b, m[0] * c + m[2] * d, m[1] * c + m[3] * d, m[0] * e + m[2] * f + m[4], m[1] * e + m[3] * f + m[5]];\n\n            ctx._originalTransform(a, b, c, d, e, f);\n          };\n\n          ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n            this._transformMatrix = [a, b, c, d, e, f];\n\n            ctx._originalSetTransform(a, b, c, d, e, f);\n          };\n\n          ctx.rotate = function ctxRotate(angle) {\n            var cosValue = Math.cos(angle);\n            var sinValue = Math.sin(angle);\n            var m = this._transformMatrix;\n            this._transformMatrix = [m[0] * cosValue + m[2] * sinValue, m[1] * cosValue + m[3] * sinValue, m[0] * -sinValue + m[2] * cosValue, m[1] * -sinValue + m[3] * cosValue, m[4], m[5]];\n\n            this._originalRotate(angle);\n          };\n        }\n      }\n\n      var CachedCanvases = function CachedCanvasesClosure() {\n        function CachedCanvases(canvasFactory) {\n          this.canvasFactory = canvasFactory;\n          this.cache = Object.create(null);\n        }\n\n        CachedCanvases.prototype = {\n          getCanvas: function CachedCanvases_getCanvas(id, width, height, trackTransform) {\n            var canvasEntry;\n\n            if (this.cache[id] !== undefined) {\n              canvasEntry = this.cache[id];\n              this.canvasFactory.reset(canvasEntry, width, height);\n              canvasEntry.context.setTransform(1, 0, 0, 1, 0, 0);\n            } else {\n              canvasEntry = this.canvasFactory.create(width, height);\n              this.cache[id] = canvasEntry;\n            }\n\n            if (trackTransform) {\n              addContextCurrentTransform(canvasEntry.context);\n            }\n\n            return canvasEntry;\n          },\n          clear: function clear() {\n            for (var id in this.cache) {\n              var canvasEntry = this.cache[id];\n              this.canvasFactory.destroy(canvasEntry);\n              delete this.cache[id];\n            }\n          }\n        };\n        return CachedCanvases;\n      }();\n\n      function compileType3Glyph(imgData) {\n        var POINT_TO_PROCESS_LIMIT = 1000;\n        var width = imgData.width,\n            height = imgData.height;\n        var i,\n            j,\n            j0,\n            width1 = width + 1;\n        var points = new Uint8Array(width1 * (height + 1));\n        var POINT_TYPES = new Uint8Array([0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0]);\n        var lineSize = width + 7 & ~7,\n            data0 = imgData.data;\n        var data = new Uint8Array(lineSize * height),\n            pos = 0,\n            ii;\n\n        for (i = 0, ii = data0.length; i < ii; i++) {\n          var mask = 128,\n              elem = data0[i];\n\n          while (mask > 0) {\n            data[pos++] = elem & mask ? 0 : 255;\n            mask >>= 1;\n          }\n        }\n\n        var count = 0;\n        pos = 0;\n\n        if (data[pos] !== 0) {\n          points[0] = 1;\n          ++count;\n        }\n\n        for (j = 1; j < width; j++) {\n          if (data[pos] !== data[pos + 1]) {\n            points[j] = data[pos] ? 2 : 1;\n            ++count;\n          }\n\n          pos++;\n        }\n\n        if (data[pos] !== 0) {\n          points[j] = 2;\n          ++count;\n        }\n\n        for (i = 1; i < height; i++) {\n          pos = i * lineSize;\n          j0 = i * width1;\n\n          if (data[pos - lineSize] !== data[pos]) {\n            points[j0] = data[pos] ? 1 : 8;\n            ++count;\n          }\n\n          var sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);\n\n          for (j = 1; j < width; j++) {\n            sum = (sum >> 2) + (data[pos + 1] ? 4 : 0) + (data[pos - lineSize + 1] ? 8 : 0);\n\n            if (POINT_TYPES[sum]) {\n              points[j0 + j] = POINT_TYPES[sum];\n              ++count;\n            }\n\n            pos++;\n          }\n\n          if (data[pos - lineSize] !== data[pos]) {\n            points[j0 + j] = data[pos] ? 2 : 4;\n            ++count;\n          }\n\n          if (count > POINT_TO_PROCESS_LIMIT) {\n            return null;\n          }\n        }\n\n        pos = lineSize * (height - 1);\n        j0 = i * width1;\n\n        if (data[pos] !== 0) {\n          points[j0] = 8;\n          ++count;\n        }\n\n        for (j = 1; j < width; j++) {\n          if (data[pos] !== data[pos + 1]) {\n            points[j0 + j] = data[pos] ? 4 : 8;\n            ++count;\n          }\n\n          pos++;\n        }\n\n        if (data[pos] !== 0) {\n          points[j0 + j] = 4;\n          ++count;\n        }\n\n        if (count > POINT_TO_PROCESS_LIMIT) {\n          return null;\n        }\n\n        var steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);\n        var outlines = [];\n\n        for (i = 0; count && i <= height; i++) {\n          var p = i * width1;\n          var end = p + width;\n\n          while (p < end && !points[p]) {\n            p++;\n          }\n\n          if (p === end) {\n            continue;\n          }\n\n          var coords = [p % width1, i];\n          var type = points[p],\n              p0 = p,\n              pp;\n\n          do {\n            var step = steps[type];\n\n            do {\n              p += step;\n            } while (!points[p]);\n\n            pp = points[p];\n\n            if (pp !== 5 && pp !== 10) {\n              type = pp;\n              points[p] = 0;\n            } else {\n              type = pp & 0x33 * type >> 4;\n              points[p] &= type >> 2 | type << 2;\n            }\n\n            coords.push(p % width1);\n            coords.push(p / width1 | 0);\n            --count;\n          } while (p0 !== p);\n\n          outlines.push(coords);\n          --i;\n        }\n\n        var drawOutline = function drawOutline(c) {\n          c.save();\n          c.scale(1 / width, -1 / height);\n          c.translate(0, -height);\n          c.beginPath();\n\n          for (var i = 0, ii = outlines.length; i < ii; i++) {\n            var o = outlines[i];\n            c.moveTo(o[0], o[1]);\n\n            for (var j = 2, jj = o.length; j < jj; j += 2) {\n              c.lineTo(o[j], o[j + 1]);\n            }\n          }\n\n          c.fill();\n          c.beginPath();\n          c.restore();\n        };\n\n        return drawOutline;\n      }\n\n      var CanvasExtraState = function CanvasExtraStateClosure() {\n        function CanvasExtraState(old) {\n          this.alphaIsShape = false;\n          this.fontSize = 0;\n          this.fontSizeScale = 1;\n          this.textMatrix = _util.IDENTITY_MATRIX;\n          this.textMatrixScale = 1;\n          this.fontMatrix = _util.FONT_IDENTITY_MATRIX;\n          this.leading = 0;\n          this.x = 0;\n          this.y = 0;\n          this.lineX = 0;\n          this.lineY = 0;\n          this.charSpacing = 0;\n          this.wordSpacing = 0;\n          this.textHScale = 1;\n          this.textRenderingMode = _util.TextRenderingMode.FILL;\n          this.textRise = 0;\n          this.fillColor = '#000000';\n          this.strokeColor = '#000000';\n          this.patternFill = false;\n          this.fillAlpha = 1;\n          this.strokeAlpha = 1;\n          this.lineWidth = 1;\n          this.activeSMask = null;\n          this.resumeSMaskCtx = null;\n          this.old = old;\n        }\n\n        CanvasExtraState.prototype = {\n          clone: function CanvasExtraState_clone() {\n            return Object.create(this);\n          },\n          setCurrentPoint: function CanvasExtraState_setCurrentPoint(x, y) {\n            this.x = x;\n            this.y = y;\n          }\n        };\n        return CanvasExtraState;\n      }();\n\n      var CanvasGraphics = function CanvasGraphicsClosure() {\n        var EXECUTION_TIME = 15;\n        var EXECUTION_STEPS = 10;\n\n        function CanvasGraphics(canvasCtx, commonObjs, objs, canvasFactory, imageLayer) {\n          this.ctx = canvasCtx;\n          this.current = new CanvasExtraState();\n          this.stateStack = [];\n          this.pendingClip = null;\n          this.pendingEOFill = false;\n          this.res = null;\n          this.xobjs = null;\n          this.commonObjs = commonObjs;\n          this.objs = objs;\n          this.canvasFactory = canvasFactory;\n          this.imageLayer = imageLayer;\n          this.groupStack = [];\n          this.processingType3 = null;\n          this.baseTransform = null;\n          this.baseTransformStack = [];\n          this.groupLevel = 0;\n          this.smaskStack = [];\n          this.smaskCounter = 0;\n          this.tempSMask = null;\n          this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n\n          if (canvasCtx) {\n            addContextCurrentTransform(canvasCtx);\n          }\n\n          this.cachedGetSinglePixelWidth = null;\n        }\n\n        function putBinaryImageData(ctx, imgData) {\n          if (typeof ImageData !== 'undefined' && imgData instanceof ImageData) {\n            ctx.putImageData(imgData, 0, 0);\n            return;\n          }\n\n          var height = imgData.height,\n              width = imgData.width;\n          var partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n          var fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n          var totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n          var chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n          var srcPos = 0,\n              destPos;\n          var src = imgData.data;\n          var dest = chunkImgData.data;\n          var i, j, thisChunkHeight, elemsInThisChunk;\n\n          if (imgData.kind === _util.ImageKind.GRAYSCALE_1BPP) {\n            var srcLength = src.byteLength;\n            var dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n            var dest32DataLength = dest32.length;\n            var fullSrcDiff = width + 7 >> 3;\n            var white = 0xFFFFFFFF;\n            var black = IsLittleEndianCached.value ? 0xFF000000 : 0x000000FF;\n\n            for (i = 0; i < totalChunks; i++) {\n              thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n              destPos = 0;\n\n              for (j = 0; j < thisChunkHeight; j++) {\n                var srcDiff = srcLength - srcPos;\n                var k = 0;\n                var kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n                var kEndUnrolled = kEnd & ~7;\n                var mask = 0;\n                var srcByte = 0;\n\n                for (; k < kEndUnrolled; k += 8) {\n                  srcByte = src[srcPos++];\n                  dest32[destPos++] = srcByte & 128 ? white : black;\n                  dest32[destPos++] = srcByte & 64 ? white : black;\n                  dest32[destPos++] = srcByte & 32 ? white : black;\n                  dest32[destPos++] = srcByte & 16 ? white : black;\n                  dest32[destPos++] = srcByte & 8 ? white : black;\n                  dest32[destPos++] = srcByte & 4 ? white : black;\n                  dest32[destPos++] = srcByte & 2 ? white : black;\n                  dest32[destPos++] = srcByte & 1 ? white : black;\n                }\n\n                for (; k < kEnd; k++) {\n                  if (mask === 0) {\n                    srcByte = src[srcPos++];\n                    mask = 128;\n                  }\n\n                  dest32[destPos++] = srcByte & mask ? white : black;\n                  mask >>= 1;\n                }\n              }\n\n              while (destPos < dest32DataLength) {\n                dest32[destPos++] = 0;\n              }\n\n              ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n            }\n          } else if (imgData.kind === _util.ImageKind.RGBA_32BPP) {\n            j = 0;\n            elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n\n            for (i = 0; i < fullChunks; i++) {\n              dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n              srcPos += elemsInThisChunk;\n              ctx.putImageData(chunkImgData, 0, j);\n              j += FULL_CHUNK_HEIGHT;\n            }\n\n            if (i < totalChunks) {\n              elemsInThisChunk = width * partialChunkHeight * 4;\n              dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n              ctx.putImageData(chunkImgData, 0, j);\n            }\n          } else if (imgData.kind === _util.ImageKind.RGB_24BPP) {\n            thisChunkHeight = FULL_CHUNK_HEIGHT;\n            elemsInThisChunk = width * thisChunkHeight;\n\n            for (i = 0; i < totalChunks; i++) {\n              if (i >= fullChunks) {\n                thisChunkHeight = partialChunkHeight;\n                elemsInThisChunk = width * thisChunkHeight;\n              }\n\n              destPos = 0;\n\n              for (j = elemsInThisChunk; j--;) {\n                dest[destPos++] = src[srcPos++];\n                dest[destPos++] = src[srcPos++];\n                dest[destPos++] = src[srcPos++];\n                dest[destPos++] = 255;\n              }\n\n              ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n            }\n          } else {\n            (0, _util.error)('bad image kind: ' + imgData.kind);\n          }\n        }\n\n        function putBinaryImageMask(ctx, imgData) {\n          var height = imgData.height,\n              width = imgData.width;\n          var partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n          var fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n          var totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n          var chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n          var srcPos = 0;\n          var src = imgData.data;\n          var dest = chunkImgData.data;\n\n          for (var i = 0; i < totalChunks; i++) {\n            var thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n            var destPos = 3;\n\n            for (var j = 0; j < thisChunkHeight; j++) {\n              var mask = 0;\n\n              for (var k = 0; k < width; k++) {\n                if (!mask) {\n                  var elem = src[srcPos++];\n                  mask = 128;\n                }\n\n                dest[destPos] = elem & mask ? 0 : 255;\n                destPos += 4;\n                mask >>= 1;\n              }\n            }\n\n            ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n          }\n        }\n\n        function copyCtxState(sourceCtx, destCtx) {\n          var properties = ['strokeStyle', 'fillStyle', 'fillRule', 'globalAlpha', 'lineWidth', 'lineCap', 'lineJoin', 'miterLimit', 'globalCompositeOperation', 'font'];\n\n          for (var i = 0, ii = properties.length; i < ii; i++) {\n            var property = properties[i];\n\n            if (sourceCtx[property] !== undefined) {\n              destCtx[property] = sourceCtx[property];\n            }\n          }\n\n          if (sourceCtx.setLineDash !== undefined) {\n            destCtx.setLineDash(sourceCtx.getLineDash());\n            destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n          }\n        }\n\n        function composeSMaskBackdrop(bytes, r0, g0, b0) {\n          var length = bytes.length;\n\n          for (var i = 3; i < length; i += 4) {\n            var alpha = bytes[i];\n\n            if (alpha === 0) {\n              bytes[i - 3] = r0;\n              bytes[i - 2] = g0;\n              bytes[i - 1] = b0;\n            } else if (alpha < 255) {\n              var alpha_ = 255 - alpha;\n              bytes[i - 3] = bytes[i - 3] * alpha + r0 * alpha_ >> 8;\n              bytes[i - 2] = bytes[i - 2] * alpha + g0 * alpha_ >> 8;\n              bytes[i - 1] = bytes[i - 1] * alpha + b0 * alpha_ >> 8;\n            }\n          }\n        }\n\n        function composeSMaskAlpha(maskData, layerData, transferMap) {\n          var length = maskData.length;\n          var scale = 1 / 255;\n\n          for (var i = 3; i < length; i += 4) {\n            var alpha = transferMap ? transferMap[maskData[i]] : maskData[i];\n            layerData[i] = layerData[i] * alpha * scale | 0;\n          }\n        }\n\n        function composeSMaskLuminosity(maskData, layerData, transferMap) {\n          var length = maskData.length;\n\n          for (var i = 3; i < length; i += 4) {\n            var y = maskData[i - 3] * 77 + maskData[i - 2] * 152 + maskData[i - 1] * 28;\n            layerData[i] = transferMap ? layerData[i] * transferMap[y >> 8] >> 8 : layerData[i] * y >> 16;\n          }\n        }\n\n        function genericComposeSMask(maskCtx, layerCtx, width, height, subtype, backdrop, transferMap) {\n          var hasBackdrop = !!backdrop;\n          var r0 = hasBackdrop ? backdrop[0] : 0;\n          var g0 = hasBackdrop ? backdrop[1] : 0;\n          var b0 = hasBackdrop ? backdrop[2] : 0;\n          var composeFn;\n\n          if (subtype === 'Luminosity') {\n            composeFn = composeSMaskLuminosity;\n          } else {\n            composeFn = composeSMaskAlpha;\n          }\n\n          var PIXELS_TO_PROCESS = 1048576;\n          var chunkSize = Math.min(height, Math.ceil(PIXELS_TO_PROCESS / width));\n\n          for (var row = 0; row < height; row += chunkSize) {\n            var chunkHeight = Math.min(chunkSize, height - row);\n            var maskData = maskCtx.getImageData(0, row, width, chunkHeight);\n            var layerData = layerCtx.getImageData(0, row, width, chunkHeight);\n\n            if (hasBackdrop) {\n              composeSMaskBackdrop(maskData.data, r0, g0, b0);\n            }\n\n            composeFn(maskData.data, layerData.data, transferMap);\n            maskCtx.putImageData(layerData, 0, row);\n          }\n        }\n\n        function composeSMask(ctx, smask, layerCtx) {\n          var mask = smask.canvas;\n          var maskCtx = smask.context;\n          ctx.setTransform(smask.scaleX, 0, 0, smask.scaleY, smask.offsetX, smask.offsetY);\n          var backdrop = smask.backdrop || null;\n\n          if (!smask.transferMap && _webgl.WebGLUtils.isEnabled) {\n            var composed = _webgl.WebGLUtils.composeSMask(layerCtx.canvas, mask, {\n              subtype: smask.subtype,\n              backdrop: backdrop\n            });\n\n            ctx.setTransform(1, 0, 0, 1, 0, 0);\n            ctx.drawImage(composed, smask.offsetX, smask.offsetY);\n            return;\n          }\n\n          genericComposeSMask(maskCtx, layerCtx, mask.width, mask.height, smask.subtype, backdrop, smask.transferMap);\n          ctx.drawImage(mask, 0, 0);\n        }\n\n        var LINE_CAP_STYLES = ['butt', 'round', 'square'];\n        var LINE_JOIN_STYLES = ['miter', 'round', 'bevel'];\n        var NORMAL_CLIP = {};\n        var EO_CLIP = {};\n        CanvasGraphics.prototype = {\n          beginDrawing: function CanvasGraphics_beginDrawing(transform, viewport, transparency) {\n            var width = this.ctx.canvas.width;\n            var height = this.ctx.canvas.height;\n            this.ctx.save();\n            this.ctx.fillStyle = 'rgb(255, 255, 255)';\n            this.ctx.fillRect(0, 0, width, height);\n            this.ctx.restore();\n\n            if (transparency) {\n              var transparentCanvas = this.cachedCanvases.getCanvas('transparent', width, height, true);\n              this.compositeCtx = this.ctx;\n              this.transparentCanvas = transparentCanvas.canvas;\n              this.ctx = transparentCanvas.context;\n              this.ctx.save();\n              this.ctx.transform.apply(this.ctx, this.compositeCtx.mozCurrentTransform);\n            }\n\n            this.ctx.save();\n\n            if (transform) {\n              this.ctx.transform.apply(this.ctx, transform);\n            }\n\n            this.ctx.transform.apply(this.ctx, viewport.transform);\n            this.baseTransform = this.ctx.mozCurrentTransform.slice();\n\n            if (this.imageLayer) {\n              this.imageLayer.beginLayout();\n            }\n          },\n          executeOperatorList: function CanvasGraphics_executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper) {\n            var argsArray = operatorList.argsArray;\n            var fnArray = operatorList.fnArray;\n            var i = executionStartIdx || 0;\n            var argsArrayLen = argsArray.length;\n\n            if (argsArrayLen === i) {\n              return i;\n            }\n\n            var chunkOperations = argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === 'function';\n            var endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n            var steps = 0;\n            var commonObjs = this.commonObjs;\n            var objs = this.objs;\n            var fnId;\n\n            while (true) {\n              if (stepper !== undefined && i === stepper.nextBreakPoint) {\n                stepper.breakIt(i, continueCallback);\n                return i;\n              }\n\n              fnId = fnArray[i];\n\n              if (fnId !== _util.OPS.dependency) {\n                this[fnId].apply(this, argsArray[i]);\n              } else {\n                var deps = argsArray[i];\n\n                for (var n = 0, nn = deps.length; n < nn; n++) {\n                  var depObjId = deps[n];\n                  var common = depObjId[0] === 'g' && depObjId[1] === '_';\n                  var objsPool = common ? commonObjs : objs;\n\n                  if (!objsPool.isResolved(depObjId)) {\n                    objsPool.get(depObjId, continueCallback);\n                    return i;\n                  }\n                }\n              }\n\n              i++;\n\n              if (i === argsArrayLen) {\n                return i;\n              }\n\n              if (chunkOperations && ++steps > EXECUTION_STEPS) {\n                if (Date.now() > endTime) {\n                  continueCallback();\n                  return i;\n                }\n\n                steps = 0;\n              }\n            }\n          },\n          endDrawing: function CanvasGraphics_endDrawing() {\n            if (this.current.activeSMask !== null) {\n              this.endSMaskGroup();\n            }\n\n            this.ctx.restore();\n\n            if (this.transparentCanvas) {\n              this.ctx = this.compositeCtx;\n              this.ctx.save();\n              this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n              this.ctx.drawImage(this.transparentCanvas, 0, 0);\n              this.ctx.restore();\n              this.transparentCanvas = null;\n            }\n\n            this.cachedCanvases.clear();\n\n            _webgl.WebGLUtils.clear();\n\n            if (this.imageLayer) {\n              this.imageLayer.endLayout();\n            }\n          },\n          setLineWidth: function CanvasGraphics_setLineWidth(width) {\n            this.current.lineWidth = width;\n            this.ctx.lineWidth = width;\n          },\n          setLineCap: function CanvasGraphics_setLineCap(style) {\n            this.ctx.lineCap = LINE_CAP_STYLES[style];\n          },\n          setLineJoin: function CanvasGraphics_setLineJoin(style) {\n            this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n          },\n          setMiterLimit: function CanvasGraphics_setMiterLimit(limit) {\n            this.ctx.miterLimit = limit;\n          },\n          setDash: function CanvasGraphics_setDash(dashArray, dashPhase) {\n            var ctx = this.ctx;\n\n            if (ctx.setLineDash !== undefined) {\n              ctx.setLineDash(dashArray);\n              ctx.lineDashOffset = dashPhase;\n            }\n          },\n          setRenderingIntent: function CanvasGraphics_setRenderingIntent(intent) {},\n          setFlatness: function CanvasGraphics_setFlatness(flatness) {},\n          setGState: function CanvasGraphics_setGState(states) {\n            for (var i = 0, ii = states.length; i < ii; i++) {\n              var state = states[i];\n              var key = state[0];\n              var value = state[1];\n\n              switch (key) {\n                case 'LW':\n                  this.setLineWidth(value);\n                  break;\n\n                case 'LC':\n                  this.setLineCap(value);\n                  break;\n\n                case 'LJ':\n                  this.setLineJoin(value);\n                  break;\n\n                case 'ML':\n                  this.setMiterLimit(value);\n                  break;\n\n                case 'D':\n                  this.setDash(value[0], value[1]);\n                  break;\n\n                case 'RI':\n                  this.setRenderingIntent(value);\n                  break;\n\n                case 'FL':\n                  this.setFlatness(value);\n                  break;\n\n                case 'Font':\n                  this.setFont(value[0], value[1]);\n                  break;\n\n                case 'CA':\n                  this.current.strokeAlpha = state[1];\n                  break;\n\n                case 'ca':\n                  this.current.fillAlpha = state[1];\n                  this.ctx.globalAlpha = state[1];\n                  break;\n\n                case 'BM':\n                  this.ctx.globalCompositeOperation = value;\n                  break;\n\n                case 'SMask':\n                  if (this.current.activeSMask) {\n                    if (this.stateStack.length > 0 && this.stateStack[this.stateStack.length - 1].activeSMask === this.current.activeSMask) {\n                      this.suspendSMaskGroup();\n                    } else {\n                      this.endSMaskGroup();\n                    }\n                  }\n\n                  this.current.activeSMask = value ? this.tempSMask : null;\n\n                  if (this.current.activeSMask) {\n                    this.beginSMaskGroup();\n                  }\n\n                  this.tempSMask = null;\n                  break;\n              }\n            }\n          },\n          beginSMaskGroup: function CanvasGraphics_beginSMaskGroup() {\n            var activeSMask = this.current.activeSMask;\n            var drawnWidth = activeSMask.canvas.width;\n            var drawnHeight = activeSMask.canvas.height;\n            var cacheId = 'smaskGroupAt' + this.groupLevel;\n            var scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight, true);\n            var currentCtx = this.ctx;\n            var currentTransform = currentCtx.mozCurrentTransform;\n            this.ctx.save();\n            var groupCtx = scratchCanvas.context;\n            groupCtx.scale(1 / activeSMask.scaleX, 1 / activeSMask.scaleY);\n            groupCtx.translate(-activeSMask.offsetX, -activeSMask.offsetY);\n            groupCtx.transform.apply(groupCtx, currentTransform);\n            activeSMask.startTransformInverse = groupCtx.mozCurrentTransformInverse;\n            copyCtxState(currentCtx, groupCtx);\n            this.ctx = groupCtx;\n            this.setGState([['BM', 'source-over'], ['ca', 1], ['CA', 1]]);\n            this.groupStack.push(currentCtx);\n            this.groupLevel++;\n          },\n          suspendSMaskGroup: function CanvasGraphics_endSMaskGroup() {\n            var groupCtx = this.ctx;\n            this.groupLevel--;\n            this.ctx = this.groupStack.pop();\n            composeSMask(this.ctx, this.current.activeSMask, groupCtx);\n            this.ctx.restore();\n            this.ctx.save();\n            copyCtxState(groupCtx, this.ctx);\n            this.current.resumeSMaskCtx = groupCtx;\n\n            var deltaTransform = _util.Util.transform(this.current.activeSMask.startTransformInverse, groupCtx.mozCurrentTransform);\n\n            this.ctx.transform.apply(this.ctx, deltaTransform);\n            groupCtx.save();\n            groupCtx.setTransform(1, 0, 0, 1, 0, 0);\n            groupCtx.clearRect(0, 0, groupCtx.canvas.width, groupCtx.canvas.height);\n            groupCtx.restore();\n          },\n          resumeSMaskGroup: function CanvasGraphics_endSMaskGroup() {\n            var groupCtx = this.current.resumeSMaskCtx;\n            var currentCtx = this.ctx;\n            this.ctx = groupCtx;\n            this.groupStack.push(currentCtx);\n            this.groupLevel++;\n          },\n          endSMaskGroup: function CanvasGraphics_endSMaskGroup() {\n            var groupCtx = this.ctx;\n            this.groupLevel--;\n            this.ctx = this.groupStack.pop();\n            composeSMask(this.ctx, this.current.activeSMask, groupCtx);\n            this.ctx.restore();\n            copyCtxState(groupCtx, this.ctx);\n\n            var deltaTransform = _util.Util.transform(this.current.activeSMask.startTransformInverse, groupCtx.mozCurrentTransform);\n\n            this.ctx.transform.apply(this.ctx, deltaTransform);\n          },\n          save: function CanvasGraphics_save() {\n            this.ctx.save();\n            var old = this.current;\n            this.stateStack.push(old);\n            this.current = old.clone();\n            this.current.resumeSMaskCtx = null;\n          },\n          restore: function CanvasGraphics_restore() {\n            if (this.current.resumeSMaskCtx) {\n              this.resumeSMaskGroup();\n            }\n\n            if (this.current.activeSMask !== null && (this.stateStack.length === 0 || this.stateStack[this.stateStack.length - 1].activeSMask !== this.current.activeSMask)) {\n              this.endSMaskGroup();\n            }\n\n            if (this.stateStack.length !== 0) {\n              this.current = this.stateStack.pop();\n              this.ctx.restore();\n              this.pendingClip = null;\n              this.cachedGetSinglePixelWidth = null;\n            }\n          },\n          transform: function CanvasGraphics_transform(a, b, c, d, e, f) {\n            this.ctx.transform(a, b, c, d, e, f);\n            this.cachedGetSinglePixelWidth = null;\n          },\n          constructPath: function CanvasGraphics_constructPath(ops, args) {\n            var ctx = this.ctx;\n            var current = this.current;\n            var x = current.x,\n                y = current.y;\n\n            for (var i = 0, j = 0, ii = ops.length; i < ii; i++) {\n              switch (ops[i] | 0) {\n                case _util.OPS.rectangle:\n                  x = args[j++];\n                  y = args[j++];\n                  var width = args[j++];\n                  var height = args[j++];\n\n                  if (width === 0) {\n                    width = this.getSinglePixelWidth();\n                  }\n\n                  if (height === 0) {\n                    height = this.getSinglePixelWidth();\n                  }\n\n                  var xw = x + width;\n                  var yh = y + height;\n                  this.ctx.moveTo(x, y);\n                  this.ctx.lineTo(xw, y);\n                  this.ctx.lineTo(xw, yh);\n                  this.ctx.lineTo(x, yh);\n                  this.ctx.lineTo(x, y);\n                  this.ctx.closePath();\n                  break;\n\n                case _util.OPS.moveTo:\n                  x = args[j++];\n                  y = args[j++];\n                  ctx.moveTo(x, y);\n                  break;\n\n                case _util.OPS.lineTo:\n                  x = args[j++];\n                  y = args[j++];\n                  ctx.lineTo(x, y);\n                  break;\n\n                case _util.OPS.curveTo:\n                  x = args[j + 4];\n                  y = args[j + 5];\n                  ctx.bezierCurveTo(args[j], args[j + 1], args[j + 2], args[j + 3], x, y);\n                  j += 6;\n                  break;\n\n                case _util.OPS.curveTo2:\n                  ctx.bezierCurveTo(x, y, args[j], args[j + 1], args[j + 2], args[j + 3]);\n                  x = args[j + 2];\n                  y = args[j + 3];\n                  j += 4;\n                  break;\n\n                case _util.OPS.curveTo3:\n                  x = args[j + 2];\n                  y = args[j + 3];\n                  ctx.bezierCurveTo(args[j], args[j + 1], x, y, x, y);\n                  j += 4;\n                  break;\n\n                case _util.OPS.closePath:\n                  ctx.closePath();\n                  break;\n              }\n            }\n\n            current.setCurrentPoint(x, y);\n          },\n          closePath: function CanvasGraphics_closePath() {\n            this.ctx.closePath();\n          },\n          stroke: function CanvasGraphics_stroke(consumePath) {\n            consumePath = typeof consumePath !== 'undefined' ? consumePath : true;\n            var ctx = this.ctx;\n            var strokeColor = this.current.strokeColor;\n            ctx.lineWidth = Math.max(this.getSinglePixelWidth() * MIN_WIDTH_FACTOR, this.current.lineWidth);\n            ctx.globalAlpha = this.current.strokeAlpha;\n\n            if (strokeColor && strokeColor.hasOwnProperty('type') && strokeColor.type === 'Pattern') {\n              ctx.save();\n              ctx.strokeStyle = strokeColor.getPattern(ctx, this);\n              ctx.stroke();\n              ctx.restore();\n            } else {\n              ctx.stroke();\n            }\n\n            if (consumePath) {\n              this.consumePath();\n            }\n\n            ctx.globalAlpha = this.current.fillAlpha;\n          },\n          closeStroke: function CanvasGraphics_closeStroke() {\n            this.closePath();\n            this.stroke();\n          },\n          fill: function CanvasGraphics_fill(consumePath) {\n            consumePath = typeof consumePath !== 'undefined' ? consumePath : true;\n            var ctx = this.ctx;\n            var fillColor = this.current.fillColor;\n            var isPatternFill = this.current.patternFill;\n            var needRestore = false;\n\n            if (isPatternFill) {\n              ctx.save();\n\n              if (this.baseTransform) {\n                ctx.setTransform.apply(ctx, this.baseTransform);\n              }\n\n              ctx.fillStyle = fillColor.getPattern(ctx, this);\n              needRestore = true;\n            }\n\n            if (this.pendingEOFill) {\n              ctx.fill('evenodd');\n              this.pendingEOFill = false;\n            } else {\n              ctx.fill();\n            }\n\n            if (needRestore) {\n              ctx.restore();\n            }\n\n            if (consumePath) {\n              this.consumePath();\n            }\n          },\n          eoFill: function CanvasGraphics_eoFill() {\n            this.pendingEOFill = true;\n            this.fill();\n          },\n          fillStroke: function CanvasGraphics_fillStroke() {\n            this.fill(false);\n            this.stroke(false);\n            this.consumePath();\n          },\n          eoFillStroke: function CanvasGraphics_eoFillStroke() {\n            this.pendingEOFill = true;\n            this.fillStroke();\n          },\n          closeFillStroke: function CanvasGraphics_closeFillStroke() {\n            this.closePath();\n            this.fillStroke();\n          },\n          closeEOFillStroke: function CanvasGraphics_closeEOFillStroke() {\n            this.pendingEOFill = true;\n            this.closePath();\n            this.fillStroke();\n          },\n          endPath: function CanvasGraphics_endPath() {\n            this.consumePath();\n          },\n          clip: function CanvasGraphics_clip() {\n            this.pendingClip = NORMAL_CLIP;\n          },\n          eoClip: function CanvasGraphics_eoClip() {\n            this.pendingClip = EO_CLIP;\n          },\n          beginText: function CanvasGraphics_beginText() {\n            this.current.textMatrix = _util.IDENTITY_MATRIX;\n            this.current.textMatrixScale = 1;\n            this.current.x = this.current.lineX = 0;\n            this.current.y = this.current.lineY = 0;\n          },\n          endText: function CanvasGraphics_endText() {\n            var paths = this.pendingTextPaths;\n            var ctx = this.ctx;\n\n            if (paths === undefined) {\n              ctx.beginPath();\n              return;\n            }\n\n            ctx.save();\n            ctx.beginPath();\n\n            for (var i = 0; i < paths.length; i++) {\n              var path = paths[i];\n              ctx.setTransform.apply(ctx, path.transform);\n              ctx.translate(path.x, path.y);\n              path.addToPath(ctx, path.fontSize);\n            }\n\n            ctx.restore();\n            ctx.clip();\n            ctx.beginPath();\n            delete this.pendingTextPaths;\n          },\n          setCharSpacing: function CanvasGraphics_setCharSpacing(spacing) {\n            this.current.charSpacing = spacing;\n          },\n          setWordSpacing: function CanvasGraphics_setWordSpacing(spacing) {\n            this.current.wordSpacing = spacing;\n          },\n          setHScale: function CanvasGraphics_setHScale(scale) {\n            this.current.textHScale = scale / 100;\n          },\n          setLeading: function CanvasGraphics_setLeading(leading) {\n            this.current.leading = -leading;\n          },\n          setFont: function CanvasGraphics_setFont(fontRefName, size) {\n            var fontObj = this.commonObjs.get(fontRefName);\n            var current = this.current;\n\n            if (!fontObj) {\n              (0, _util.error)('Can\\'t find font for ' + fontRefName);\n            }\n\n            current.fontMatrix = fontObj.fontMatrix ? fontObj.fontMatrix : _util.FONT_IDENTITY_MATRIX;\n\n            if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n              (0, _util.warn)('Invalid font matrix for font ' + fontRefName);\n            }\n\n            if (size < 0) {\n              size = -size;\n              current.fontDirection = -1;\n            } else {\n              current.fontDirection = 1;\n            }\n\n            this.current.font = fontObj;\n            this.current.fontSize = size;\n\n            if (fontObj.isType3Font) {\n              return;\n            }\n\n            var name = fontObj.loadedName || 'sans-serif';\n            var bold = fontObj.black ? '900' : fontObj.bold ? 'bold' : 'normal';\n            var italic = fontObj.italic ? 'italic' : 'normal';\n            var typeface = '\"' + name + '\", ' + fontObj.fallbackName;\n            var browserFontSize = size < MIN_FONT_SIZE ? MIN_FONT_SIZE : size > MAX_FONT_SIZE ? MAX_FONT_SIZE : size;\n            this.current.fontSizeScale = size / browserFontSize;\n            var rule = italic + ' ' + bold + ' ' + browserFontSize + 'px ' + typeface;\n            this.ctx.font = rule;\n          },\n          setTextRenderingMode: function CanvasGraphics_setTextRenderingMode(mode) {\n            this.current.textRenderingMode = mode;\n          },\n          setTextRise: function CanvasGraphics_setTextRise(rise) {\n            this.current.textRise = rise;\n          },\n          moveText: function CanvasGraphics_moveText(x, y) {\n            this.current.x = this.current.lineX += x;\n            this.current.y = this.current.lineY += y;\n          },\n          setLeadingMoveText: function CanvasGraphics_setLeadingMoveText(x, y) {\n            this.setLeading(-y);\n            this.moveText(x, y);\n          },\n          setTextMatrix: function CanvasGraphics_setTextMatrix(a, b, c, d, e, f) {\n            this.current.textMatrix = [a, b, c, d, e, f];\n            this.current.textMatrixScale = Math.sqrt(a * a + b * b);\n            this.current.x = this.current.lineX = 0;\n            this.current.y = this.current.lineY = 0;\n          },\n          nextLine: function CanvasGraphics_nextLine() {\n            this.moveText(0, this.current.leading);\n          },\n          paintChar: function CanvasGraphics_paintChar(character, x, y) {\n            var ctx = this.ctx;\n            var current = this.current;\n            var font = current.font;\n            var textRenderingMode = current.textRenderingMode;\n            var fontSize = current.fontSize / current.fontSizeScale;\n            var fillStrokeMode = textRenderingMode & _util.TextRenderingMode.FILL_STROKE_MASK;\n            var isAddToPathSet = !!(textRenderingMode & _util.TextRenderingMode.ADD_TO_PATH_FLAG);\n            var addToPath;\n\n            if (font.disableFontFace || isAddToPathSet) {\n              addToPath = font.getPathGenerator(this.commonObjs, character);\n            }\n\n            if (font.disableFontFace) {\n              ctx.save();\n              ctx.translate(x, y);\n              ctx.beginPath();\n              addToPath(ctx, fontSize);\n\n              if (fillStrokeMode === _util.TextRenderingMode.FILL || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {\n                ctx.fill();\n              }\n\n              if (fillStrokeMode === _util.TextRenderingMode.STROKE || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {\n                ctx.stroke();\n              }\n\n              ctx.restore();\n            } else {\n              if (fillStrokeMode === _util.TextRenderingMode.FILL || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {\n                ctx.fillText(character, x, y);\n              }\n\n              if (fillStrokeMode === _util.TextRenderingMode.STROKE || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {\n                ctx.strokeText(character, x, y);\n              }\n            }\n\n            if (isAddToPathSet) {\n              var paths = this.pendingTextPaths || (this.pendingTextPaths = []);\n              paths.push({\n                transform: ctx.mozCurrentTransform,\n                x: x,\n                y: y,\n                fontSize: fontSize,\n                addToPath: addToPath\n              });\n            }\n          },\n\n          get isFontSubpixelAAEnabled() {\n            var ctx = this.canvasFactory.create(10, 10).context;\n            ctx.scale(1.5, 1);\n            ctx.fillText('I', 0, 10);\n            var data = ctx.getImageData(0, 0, 10, 10).data;\n            var enabled = false;\n\n            for (var i = 3; i < data.length; i += 4) {\n              if (data[i] > 0 && data[i] < 255) {\n                enabled = true;\n                break;\n              }\n            }\n\n            return (0, _util.shadow)(this, 'isFontSubpixelAAEnabled', enabled);\n          },\n\n          showText: function CanvasGraphics_showText(glyphs) {\n            var current = this.current;\n            var font = current.font;\n\n            if (font.isType3Font) {\n              return this.showType3Text(glyphs);\n            }\n\n            var fontSize = current.fontSize;\n\n            if (fontSize === 0) {\n              return;\n            }\n\n            var ctx = this.ctx;\n            var fontSizeScale = current.fontSizeScale;\n            var charSpacing = current.charSpacing;\n            var wordSpacing = current.wordSpacing;\n            var fontDirection = current.fontDirection;\n            var textHScale = current.textHScale * fontDirection;\n            var glyphsLength = glyphs.length;\n            var vertical = font.vertical;\n            var spacingDir = vertical ? 1 : -1;\n            var defaultVMetrics = font.defaultVMetrics;\n            var widthAdvanceScale = fontSize * current.fontMatrix[0];\n            var simpleFillText = current.textRenderingMode === _util.TextRenderingMode.FILL && !font.disableFontFace;\n            ctx.save();\n            ctx.transform.apply(ctx, current.textMatrix);\n            ctx.translate(current.x, current.y + current.textRise);\n\n            if (current.patternFill) {\n              ctx.fillStyle = current.fillColor.getPattern(ctx, this);\n            }\n\n            if (fontDirection > 0) {\n              ctx.scale(textHScale, -1);\n            } else {\n              ctx.scale(textHScale, 1);\n            }\n\n            var lineWidth = current.lineWidth;\n            var scale = current.textMatrixScale;\n\n            if (scale === 0 || lineWidth === 0) {\n              var fillStrokeMode = current.textRenderingMode & _util.TextRenderingMode.FILL_STROKE_MASK;\n\n              if (fillStrokeMode === _util.TextRenderingMode.STROKE || fillStrokeMode === _util.TextRenderingMode.FILL_STROKE) {\n                this.cachedGetSinglePixelWidth = null;\n                lineWidth = this.getSinglePixelWidth() * MIN_WIDTH_FACTOR;\n              }\n            } else {\n              lineWidth /= scale;\n            }\n\n            if (fontSizeScale !== 1.0) {\n              ctx.scale(fontSizeScale, fontSizeScale);\n              lineWidth /= fontSizeScale;\n            }\n\n            ctx.lineWidth = lineWidth;\n            var x = 0,\n                i;\n\n            for (i = 0; i < glyphsLength; ++i) {\n              var glyph = glyphs[i];\n\n              if ((0, _util.isNum)(glyph)) {\n                x += spacingDir * glyph * fontSize / 1000;\n                continue;\n              }\n\n              var restoreNeeded = false;\n              var spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n              var character = glyph.fontChar;\n              var accent = glyph.accent;\n              var scaledX, scaledY, scaledAccentX, scaledAccentY;\n              var width = glyph.width;\n\n              if (vertical) {\n                var vmetric, vx, vy;\n                vmetric = glyph.vmetric || defaultVMetrics;\n                vx = glyph.vmetric ? vmetric[1] : width * 0.5;\n                vx = -vx * widthAdvanceScale;\n                vy = vmetric[2] * widthAdvanceScale;\n                width = vmetric ? -vmetric[0] : width;\n                scaledX = vx / fontSizeScale;\n                scaledY = (x + vy) / fontSizeScale;\n              } else {\n                scaledX = x / fontSizeScale;\n                scaledY = 0;\n              }\n\n              if (font.remeasure && width > 0) {\n                var measuredWidth = ctx.measureText(character).width * 1000 / fontSize * fontSizeScale;\n\n                if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n                  var characterScaleX = width / measuredWidth;\n                  restoreNeeded = true;\n                  ctx.save();\n                  ctx.scale(characterScaleX, 1);\n                  scaledX /= characterScaleX;\n                } else if (width !== measuredWidth) {\n                  scaledX += (width - measuredWidth) / 2000 * fontSize / fontSizeScale;\n                }\n              }\n\n              if (glyph.isInFont || font.missingFile) {\n                if (simpleFillText && !accent) {\n                  ctx.fillText(character, scaledX, scaledY);\n                } else {\n                  this.paintChar(character, scaledX, scaledY);\n\n                  if (accent) {\n                    scaledAccentX = scaledX + accent.offset.x / fontSizeScale;\n                    scaledAccentY = scaledY - accent.offset.y / fontSizeScale;\n                    this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY);\n                  }\n                }\n              }\n\n              var charWidth = width * widthAdvanceScale + spacing * fontDirection;\n              x += charWidth;\n\n              if (restoreNeeded) {\n                ctx.restore();\n              }\n            }\n\n            if (vertical) {\n              current.y -= x * textHScale;\n            } else {\n              current.x += x * textHScale;\n            }\n\n            ctx.restore();\n          },\n          showType3Text: function CanvasGraphics_showType3Text(glyphs) {\n            var ctx = this.ctx;\n            var current = this.current;\n            var font = current.font;\n            var fontSize = current.fontSize;\n            var fontDirection = current.fontDirection;\n            var spacingDir = font.vertical ? 1 : -1;\n            var charSpacing = current.charSpacing;\n            var wordSpacing = current.wordSpacing;\n            var textHScale = current.textHScale * fontDirection;\n            var fontMatrix = current.fontMatrix || _util.FONT_IDENTITY_MATRIX;\n            var glyphsLength = glyphs.length;\n            var isTextInvisible = current.textRenderingMode === _util.TextRenderingMode.INVISIBLE;\n            var i, glyph, width, spacingLength;\n\n            if (isTextInvisible || fontSize === 0) {\n              return;\n            }\n\n            this.cachedGetSinglePixelWidth = null;\n            ctx.save();\n            ctx.transform.apply(ctx, current.textMatrix);\n            ctx.translate(current.x, current.y);\n            ctx.scale(textHScale, fontDirection);\n\n            for (i = 0; i < glyphsLength; ++i) {\n              glyph = glyphs[i];\n\n              if ((0, _util.isNum)(glyph)) {\n                spacingLength = spacingDir * glyph * fontSize / 1000;\n                this.ctx.translate(spacingLength, 0);\n                current.x += spacingLength * textHScale;\n                continue;\n              }\n\n              var spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n              var operatorList = font.charProcOperatorList[glyph.operatorListId];\n\n              if (!operatorList) {\n                (0, _util.warn)('Type3 character \"' + glyph.operatorListId + '\" is not available.');\n                continue;\n              }\n\n              this.processingType3 = glyph;\n              this.save();\n              ctx.scale(fontSize, fontSize);\n              ctx.transform.apply(ctx, fontMatrix);\n              this.executeOperatorList(operatorList);\n              this.restore();\n\n              var transformed = _util.Util.applyTransform([glyph.width, 0], fontMatrix);\n\n              width = transformed[0] * fontSize + spacing;\n              ctx.translate(width, 0);\n              current.x += width * textHScale;\n            }\n\n            ctx.restore();\n            this.processingType3 = null;\n          },\n          setCharWidth: function CanvasGraphics_setCharWidth(xWidth, yWidth) {},\n          setCharWidthAndBounds: function CanvasGraphics_setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n            this.ctx.rect(llx, lly, urx - llx, ury - lly);\n            this.clip();\n            this.endPath();\n          },\n          getColorN_Pattern: function CanvasGraphics_getColorN_Pattern(IR) {\n            var _this = this;\n\n            var pattern;\n\n            if (IR[0] === 'TilingPattern') {\n              var color = IR[1];\n              var baseTransform = this.baseTransform || this.ctx.mozCurrentTransform.slice();\n              var canvasGraphicsFactory = {\n                createCanvasGraphics: function createCanvasGraphics(ctx) {\n                  return new CanvasGraphics(ctx, _this.commonObjs, _this.objs, _this.canvasFactory);\n                }\n              };\n              pattern = new _pattern_helper.TilingPattern(IR, color, this.ctx, canvasGraphicsFactory, baseTransform);\n            } else {\n              pattern = (0, _pattern_helper.getShadingPatternFromIR)(IR);\n            }\n\n            return pattern;\n          },\n          setStrokeColorN: function CanvasGraphics_setStrokeColorN() {\n            this.current.strokeColor = this.getColorN_Pattern(arguments);\n          },\n          setFillColorN: function CanvasGraphics_setFillColorN() {\n            this.current.fillColor = this.getColorN_Pattern(arguments);\n            this.current.patternFill = true;\n          },\n          setStrokeRGBColor: function CanvasGraphics_setStrokeRGBColor(r, g, b) {\n            var color = _util.Util.makeCssRgb(r, g, b);\n\n            this.ctx.strokeStyle = color;\n            this.current.strokeColor = color;\n          },\n          setFillRGBColor: function CanvasGraphics_setFillRGBColor(r, g, b) {\n            var color = _util.Util.makeCssRgb(r, g, b);\n\n            this.ctx.fillStyle = color;\n            this.current.fillColor = color;\n            this.current.patternFill = false;\n          },\n          shadingFill: function CanvasGraphics_shadingFill(patternIR) {\n            var ctx = this.ctx;\n            this.save();\n            var pattern = (0, _pattern_helper.getShadingPatternFromIR)(patternIR);\n            ctx.fillStyle = pattern.getPattern(ctx, this, true);\n            var inv = ctx.mozCurrentTransformInverse;\n\n            if (inv) {\n              var canvas = ctx.canvas;\n              var width = canvas.width;\n              var height = canvas.height;\n\n              var bl = _util.Util.applyTransform([0, 0], inv);\n\n              var br = _util.Util.applyTransform([0, height], inv);\n\n              var ul = _util.Util.applyTransform([width, 0], inv);\n\n              var ur = _util.Util.applyTransform([width, height], inv);\n\n              var x0 = Math.min(bl[0], br[0], ul[0], ur[0]);\n              var y0 = Math.min(bl[1], br[1], ul[1], ur[1]);\n              var x1 = Math.max(bl[0], br[0], ul[0], ur[0]);\n              var y1 = Math.max(bl[1], br[1], ul[1], ur[1]);\n              this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n            } else {\n              this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n            }\n\n            this.restore();\n          },\n          beginInlineImage: function CanvasGraphics_beginInlineImage() {\n            (0, _util.error)('Should not call beginInlineImage');\n          },\n          beginImageData: function CanvasGraphics_beginImageData() {\n            (0, _util.error)('Should not call beginImageData');\n          },\n          paintFormXObjectBegin: function CanvasGraphics_paintFormXObjectBegin(matrix, bbox) {\n            this.save();\n            this.baseTransformStack.push(this.baseTransform);\n\n            if ((0, _util.isArray)(matrix) && matrix.length === 6) {\n              this.transform.apply(this, matrix);\n            }\n\n            this.baseTransform = this.ctx.mozCurrentTransform;\n\n            if ((0, _util.isArray)(bbox) && bbox.length === 4) {\n              var width = bbox[2] - bbox[0];\n              var height = bbox[3] - bbox[1];\n              this.ctx.rect(bbox[0], bbox[1], width, height);\n              this.clip();\n              this.endPath();\n            }\n          },\n          paintFormXObjectEnd: function CanvasGraphics_paintFormXObjectEnd() {\n            this.restore();\n            this.baseTransform = this.baseTransformStack.pop();\n          },\n          beginGroup: function CanvasGraphics_beginGroup(group) {\n            this.save();\n            var currentCtx = this.ctx;\n\n            if (!group.isolated) {\n              (0, _util.info)('TODO: Support non-isolated groups.');\n            }\n\n            if (group.knockout) {\n              (0, _util.warn)('Knockout groups not supported.');\n            }\n\n            var currentTransform = currentCtx.mozCurrentTransform;\n\n            if (group.matrix) {\n              currentCtx.transform.apply(currentCtx, group.matrix);\n            }\n\n            (0, _util.assert)(group.bbox, 'Bounding box is required.');\n\n            var bounds = _util.Util.getAxialAlignedBoundingBox(group.bbox, currentCtx.mozCurrentTransform);\n\n            var canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];\n            bounds = _util.Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n            var offsetX = Math.floor(bounds[0]);\n            var offsetY = Math.floor(bounds[1]);\n            var drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n            var drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n            var scaleX = 1,\n                scaleY = 1;\n\n            if (drawnWidth > MAX_GROUP_SIZE) {\n              scaleX = drawnWidth / MAX_GROUP_SIZE;\n              drawnWidth = MAX_GROUP_SIZE;\n            }\n\n            if (drawnHeight > MAX_GROUP_SIZE) {\n              scaleY = drawnHeight / MAX_GROUP_SIZE;\n              drawnHeight = MAX_GROUP_SIZE;\n            }\n\n            var cacheId = 'groupAt' + this.groupLevel;\n\n            if (group.smask) {\n              cacheId += '_smask_' + this.smaskCounter++ % 2;\n            }\n\n            var scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight, true);\n            var groupCtx = scratchCanvas.context;\n            groupCtx.scale(1 / scaleX, 1 / scaleY);\n            groupCtx.translate(-offsetX, -offsetY);\n            groupCtx.transform.apply(groupCtx, currentTransform);\n\n            if (group.smask) {\n              this.smaskStack.push({\n                canvas: scratchCanvas.canvas,\n                context: groupCtx,\n                offsetX: offsetX,\n                offsetY: offsetY,\n                scaleX: scaleX,\n                scaleY: scaleY,\n                subtype: group.smask.subtype,\n                backdrop: group.smask.backdrop,\n                transferMap: group.smask.transferMap || null,\n                startTransformInverse: null\n              });\n            } else {\n              currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n              currentCtx.translate(offsetX, offsetY);\n              currentCtx.scale(scaleX, scaleY);\n            }\n\n            copyCtxState(currentCtx, groupCtx);\n            this.ctx = groupCtx;\n            this.setGState([['BM', 'source-over'], ['ca', 1], ['CA', 1]]);\n            this.groupStack.push(currentCtx);\n            this.groupLevel++;\n            this.current.activeSMask = null;\n          },\n          endGroup: function CanvasGraphics_endGroup(group) {\n            this.groupLevel--;\n            var groupCtx = this.ctx;\n            this.ctx = this.groupStack.pop();\n\n            if (this.ctx.imageSmoothingEnabled !== undefined) {\n              this.ctx.imageSmoothingEnabled = false;\n            } else {\n              this.ctx.mozImageSmoothingEnabled = false;\n            }\n\n            if (group.smask) {\n              this.tempSMask = this.smaskStack.pop();\n            } else {\n              this.ctx.drawImage(groupCtx.canvas, 0, 0);\n            }\n\n            this.restore();\n          },\n          beginAnnotations: function CanvasGraphics_beginAnnotations() {\n            this.save();\n            this.current = new CanvasExtraState();\n\n            if (this.baseTransform) {\n              this.ctx.setTransform.apply(this.ctx, this.baseTransform);\n            }\n          },\n          endAnnotations: function CanvasGraphics_endAnnotations() {\n            this.restore();\n          },\n          beginAnnotation: function CanvasGraphics_beginAnnotation(rect, transform, matrix) {\n            this.save();\n\n            if ((0, _util.isArray)(rect) && rect.length === 4) {\n              var width = rect[2] - rect[0];\n              var height = rect[3] - rect[1];\n              this.ctx.rect(rect[0], rect[1], width, height);\n              this.clip();\n              this.endPath();\n            }\n\n            this.transform.apply(this, transform);\n            this.transform.apply(this, matrix);\n          },\n          endAnnotation: function CanvasGraphics_endAnnotation() {\n            this.restore();\n          },\n          paintJpegXObject: function CanvasGraphics_paintJpegXObject(objId, w, h) {\n            var domImage = this.objs.get(objId);\n\n            if (!domImage) {\n              (0, _util.warn)('Dependent image isn\\'t ready yet');\n              return;\n            }\n\n            this.save();\n            var ctx = this.ctx;\n            ctx.scale(1 / w, -1 / h);\n            ctx.drawImage(domImage, 0, 0, domImage.width, domImage.height, 0, -h, w, h);\n\n            if (this.imageLayer) {\n              var currentTransform = ctx.mozCurrentTransformInverse;\n              var position = this.getCanvasPosition(0, 0);\n              this.imageLayer.appendImage({\n                objId: objId,\n                left: position[0],\n                top: position[1],\n                width: w / currentTransform[0],\n                height: h / currentTransform[3]\n              });\n            }\n\n            this.restore();\n          },\n          paintImageMaskXObject: function CanvasGraphics_paintImageMaskXObject(img) {\n            var ctx = this.ctx;\n            var width = img.width,\n                height = img.height;\n            var fillColor = this.current.fillColor;\n            var isPatternFill = this.current.patternFill;\n            var glyph = this.processingType3;\n\n            if (COMPILE_TYPE3_GLYPHS && glyph && glyph.compiled === undefined) {\n              if (width <= MAX_SIZE_TO_COMPILE && height <= MAX_SIZE_TO_COMPILE) {\n                glyph.compiled = compileType3Glyph({\n                  data: img.data,\n                  width: width,\n                  height: height\n                });\n              } else {\n                glyph.compiled = null;\n              }\n            }\n\n            if (glyph && glyph.compiled) {\n              glyph.compiled(ctx);\n              return;\n            }\n\n            var maskCanvas = this.cachedCanvases.getCanvas('maskCanvas', width, height);\n            var maskCtx = maskCanvas.context;\n            maskCtx.save();\n            putBinaryImageMask(maskCtx, img);\n            maskCtx.globalCompositeOperation = 'source-in';\n            maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this) : fillColor;\n            maskCtx.fillRect(0, 0, width, height);\n            maskCtx.restore();\n            this.paintInlineImageXObject(maskCanvas.canvas);\n          },\n          paintImageMaskXObjectRepeat: function CanvasGraphics_paintImageMaskXObjectRepeat(imgData, scaleX, scaleY, positions) {\n            var width = imgData.width;\n            var height = imgData.height;\n            var fillColor = this.current.fillColor;\n            var isPatternFill = this.current.patternFill;\n            var maskCanvas = this.cachedCanvases.getCanvas('maskCanvas', width, height);\n            var maskCtx = maskCanvas.context;\n            maskCtx.save();\n            putBinaryImageMask(maskCtx, imgData);\n            maskCtx.globalCompositeOperation = 'source-in';\n            maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this) : fillColor;\n            maskCtx.fillRect(0, 0, width, height);\n            maskCtx.restore();\n            var ctx = this.ctx;\n\n            for (var i = 0, ii = positions.length; i < ii; i += 2) {\n              ctx.save();\n              ctx.transform(scaleX, 0, 0, scaleY, positions[i], positions[i + 1]);\n              ctx.scale(1, -1);\n              ctx.drawImage(maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n              ctx.restore();\n            }\n          },\n          paintImageMaskXObjectGroup: function CanvasGraphics_paintImageMaskXObjectGroup(images) {\n            var ctx = this.ctx;\n            var fillColor = this.current.fillColor;\n            var isPatternFill = this.current.patternFill;\n\n            for (var i = 0, ii = images.length; i < ii; i++) {\n              var image = images[i];\n              var width = image.width,\n                  height = image.height;\n              var maskCanvas = this.cachedCanvases.getCanvas('maskCanvas', width, height);\n              var maskCtx = maskCanvas.context;\n              maskCtx.save();\n              putBinaryImageMask(maskCtx, image);\n              maskCtx.globalCompositeOperation = 'source-in';\n              maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this) : fillColor;\n              maskCtx.fillRect(0, 0, width, height);\n              maskCtx.restore();\n              ctx.save();\n              ctx.transform.apply(ctx, image.transform);\n              ctx.scale(1, -1);\n              ctx.drawImage(maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n              ctx.restore();\n            }\n          },\n          paintImageXObject: function CanvasGraphics_paintImageXObject(objId) {\n            var imgData = this.objs.get(objId);\n\n            if (!imgData) {\n              (0, _util.warn)('Dependent image isn\\'t ready yet');\n              return;\n            }\n\n            this.paintInlineImageXObject(imgData);\n          },\n          paintImageXObjectRepeat: function CanvasGraphics_paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n            var imgData = this.objs.get(objId);\n\n            if (!imgData) {\n              (0, _util.warn)('Dependent image isn\\'t ready yet');\n              return;\n            }\n\n            var width = imgData.width;\n            var height = imgData.height;\n            var map = [];\n\n            for (var i = 0, ii = positions.length; i < ii; i += 2) {\n              map.push({\n                transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n                x: 0,\n                y: 0,\n                w: width,\n                h: height\n              });\n            }\n\n            this.paintInlineImageXObjectGroup(imgData, map);\n          },\n          paintInlineImageXObject: function CanvasGraphics_paintInlineImageXObject(imgData) {\n            var width = imgData.width;\n            var height = imgData.height;\n            var ctx = this.ctx;\n            this.save();\n            ctx.scale(1 / width, -1 / height);\n            var currentTransform = ctx.mozCurrentTransformInverse;\n            var a = currentTransform[0],\n                b = currentTransform[1];\n            var widthScale = Math.max(Math.sqrt(a * a + b * b), 1);\n            var c = currentTransform[2],\n                d = currentTransform[3];\n            var heightScale = Math.max(Math.sqrt(c * c + d * d), 1);\n            var imgToPaint, tmpCanvas;\n\n            if (imgData instanceof HTMLElement || !imgData.data) {\n              imgToPaint = imgData;\n            } else {\n              tmpCanvas = this.cachedCanvases.getCanvas('inlineImage', width, height);\n              var tmpCtx = tmpCanvas.context;\n              putBinaryImageData(tmpCtx, imgData);\n              imgToPaint = tmpCanvas.canvas;\n            }\n\n            var paintWidth = width,\n                paintHeight = height;\n            var tmpCanvasId = 'prescale1';\n\n            while (widthScale > 2 && paintWidth > 1 || heightScale > 2 && paintHeight > 1) {\n              var newWidth = paintWidth,\n                  newHeight = paintHeight;\n\n              if (widthScale > 2 && paintWidth > 1) {\n                newWidth = Math.ceil(paintWidth / 2);\n                widthScale /= paintWidth / newWidth;\n              }\n\n              if (heightScale > 2 && paintHeight > 1) {\n                newHeight = Math.ceil(paintHeight / 2);\n                heightScale /= paintHeight / newHeight;\n              }\n\n              tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight);\n              tmpCtx = tmpCanvas.context;\n              tmpCtx.clearRect(0, 0, newWidth, newHeight);\n              tmpCtx.drawImage(imgToPaint, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);\n              imgToPaint = tmpCanvas.canvas;\n              paintWidth = newWidth;\n              paintHeight = newHeight;\n              tmpCanvasId = tmpCanvasId === 'prescale1' ? 'prescale2' : 'prescale1';\n            }\n\n            ctx.drawImage(imgToPaint, 0, 0, paintWidth, paintHeight, 0, -height, width, height);\n\n            if (this.imageLayer) {\n              var position = this.getCanvasPosition(0, -height);\n              this.imageLayer.appendImage({\n                imgData: imgData,\n                left: position[0],\n                top: position[1],\n                width: width / currentTransform[0],\n                height: height / currentTransform[3]\n              });\n            }\n\n            this.restore();\n          },\n          paintInlineImageXObjectGroup: function CanvasGraphics_paintInlineImageXObjectGroup(imgData, map) {\n            var ctx = this.ctx;\n            var w = imgData.width;\n            var h = imgData.height;\n            var tmpCanvas = this.cachedCanvases.getCanvas('inlineImage', w, h);\n            var tmpCtx = tmpCanvas.context;\n            putBinaryImageData(tmpCtx, imgData);\n\n            for (var i = 0, ii = map.length; i < ii; i++) {\n              var entry = map[i];\n              ctx.save();\n              ctx.transform.apply(ctx, entry.transform);\n              ctx.scale(1, -1);\n              ctx.drawImage(tmpCanvas.canvas, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);\n\n              if (this.imageLayer) {\n                var position = this.getCanvasPosition(entry.x, entry.y);\n                this.imageLayer.appendImage({\n                  imgData: imgData,\n                  left: position[0],\n                  top: position[1],\n                  width: w,\n                  height: h\n                });\n              }\n\n              ctx.restore();\n            }\n          },\n          paintSolidColorImageMask: function CanvasGraphics_paintSolidColorImageMask() {\n            this.ctx.fillRect(0, 0, 1, 1);\n          },\n          paintXObject: function CanvasGraphics_paintXObject() {\n            (0, _util.warn)('Unsupported \\'paintXObject\\' command.');\n          },\n          markPoint: function CanvasGraphics_markPoint(tag) {},\n          markPointProps: function CanvasGraphics_markPointProps(tag, properties) {},\n          beginMarkedContent: function CanvasGraphics_beginMarkedContent(tag) {},\n          beginMarkedContentProps: function CanvasGraphics_beginMarkedContentProps(tag, properties) {},\n          endMarkedContent: function CanvasGraphics_endMarkedContent() {},\n          beginCompat: function CanvasGraphics_beginCompat() {},\n          endCompat: function CanvasGraphics_endCompat() {},\n          consumePath: function CanvasGraphics_consumePath() {\n            var ctx = this.ctx;\n\n            if (this.pendingClip) {\n              if (this.pendingClip === EO_CLIP) {\n                ctx.clip('evenodd');\n              } else {\n                ctx.clip();\n              }\n\n              this.pendingClip = null;\n            }\n\n            ctx.beginPath();\n          },\n          getSinglePixelWidth: function CanvasGraphics_getSinglePixelWidth(scale) {\n            if (this.cachedGetSinglePixelWidth === null) {\n              this.ctx.save();\n              var inverse = this.ctx.mozCurrentTransformInverse;\n              this.ctx.restore();\n              this.cachedGetSinglePixelWidth = Math.sqrt(Math.max(inverse[0] * inverse[0] + inverse[1] * inverse[1], inverse[2] * inverse[2] + inverse[3] * inverse[3]));\n            }\n\n            return this.cachedGetSinglePixelWidth;\n          },\n          getCanvasPosition: function CanvasGraphics_getCanvasPosition(x, y) {\n            var transform = this.ctx.mozCurrentTransform;\n            return [transform[0] * x + transform[2] * y + transform[4], transform[1] * x + transform[3] * y + transform[5]];\n          }\n        };\n\n        for (var op in _util.OPS) {\n          CanvasGraphics.prototype[_util.OPS[op]] = CanvasGraphics.prototype[op];\n        }\n\n        return CanvasGraphics;\n      }();\n\n      exports.CanvasGraphics = CanvasGraphics;\n      /***/\n    },\n    /* 11 */\n\n    /***/\n    function (module, exports, __w_pdfjs_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.FontLoader = exports.FontFaceObject = undefined;\n\n      var _util = __w_pdfjs_require__(0);\n\n      function FontLoader(docId) {\n        this.docId = docId;\n        this.styleElement = null;\n        this.nativeFontFaces = [];\n        this.loadTestFontId = 0;\n        this.loadingContext = {\n          requests: [],\n          nextRequestId: 0\n        };\n      }\n\n      FontLoader.prototype = {\n        insertRule: function fontLoaderInsertRule(rule) {\n          var styleElement = this.styleElement;\n\n          if (!styleElement) {\n            styleElement = this.styleElement = document.createElement('style');\n            styleElement.id = 'PDFJS_FONT_STYLE_TAG_' + this.docId;\n            document.documentElement.getElementsByTagName('head')[0].appendChild(styleElement);\n          }\n\n          var styleSheet = styleElement.sheet;\n          styleSheet.insertRule(rule, styleSheet.cssRules.length);\n        },\n        clear: function fontLoaderClear() {\n          if (this.styleElement) {\n            this.styleElement.remove();\n            this.styleElement = null;\n          }\n\n          this.nativeFontFaces.forEach(function (nativeFontFace) {\n            document.fonts.delete(nativeFontFace);\n          });\n          this.nativeFontFaces.length = 0;\n        }\n      };\n      {\n        var getLoadTestFont = function getLoadTestFont() {\n          return atob('T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQ' + 'AABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwA' + 'AAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbm' + 'FtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAA' + 'AADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6A' + 'ABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAA' + 'MQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAA' + 'AAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAA' + 'AAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQ' + 'AAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMA' + 'AQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAA' + 'EAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAA' + 'AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAA' + 'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' + 'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' + 'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' + 'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAA' + 'AAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgc' + 'A/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWF' + 'hYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQA' + 'AAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAg' + 'ABAAAAAAAAAAAD6AAAAAAAAA==');\n        };\n\n        Object.defineProperty(FontLoader.prototype, 'loadTestFont', {\n          get: function get() {\n            return (0, _util.shadow)(this, 'loadTestFont', getLoadTestFont());\n          },\n          configurable: true\n        });\n\n        FontLoader.prototype.addNativeFontFace = function fontLoader_addNativeFontFace(nativeFontFace) {\n          this.nativeFontFaces.push(nativeFontFace);\n          document.fonts.add(nativeFontFace);\n        };\n\n        FontLoader.prototype.bind = function fontLoaderBind(fonts, callback) {\n          var rules = [];\n          var fontsToLoad = [];\n          var fontLoadPromises = [];\n\n          var getNativeFontPromise = function getNativeFontPromise(nativeFontFace) {\n            return nativeFontFace.loaded.catch(function (e) {\n              (0, _util.warn)('Failed to load font \"' + nativeFontFace.family + '\": ' + e);\n            });\n          };\n\n          var isFontLoadingAPISupported = FontLoader.isFontLoadingAPISupported && !FontLoader.isSyncFontLoadingSupported;\n\n          for (var i = 0, ii = fonts.length; i < ii; i++) {\n            var font = fonts[i];\n\n            if (font.attached || font.loading === false) {\n              continue;\n            }\n\n            font.attached = true;\n\n            if (isFontLoadingAPISupported) {\n              var nativeFontFace = font.createNativeFontFace();\n\n              if (nativeFontFace) {\n                this.addNativeFontFace(nativeFontFace);\n                fontLoadPromises.push(getNativeFontPromise(nativeFontFace));\n              }\n            } else {\n              var rule = font.createFontFaceRule();\n\n              if (rule) {\n                this.insertRule(rule);\n                rules.push(rule);\n                fontsToLoad.push(font);\n              }\n            }\n          }\n\n          var request = this.queueLoadingCallback(callback);\n\n          if (isFontLoadingAPISupported) {\n            Promise.all(fontLoadPromises).then(function () {\n              request.complete();\n            });\n          } else if (rules.length > 0 && !FontLoader.isSyncFontLoadingSupported) {\n            this.prepareFontLoadEvent(rules, fontsToLoad, request);\n          } else {\n            request.complete();\n          }\n        };\n\n        FontLoader.prototype.queueLoadingCallback = function FontLoader_queueLoadingCallback(callback) {\n          function LoadLoader_completeRequest() {\n            (0, _util.assert)(!request.end, 'completeRequest() cannot be called twice');\n            request.end = Date.now();\n\n            while (context.requests.length > 0 && context.requests[0].end) {\n              var otherRequest = context.requests.shift();\n              setTimeout(otherRequest.callback, 0);\n            }\n          }\n\n          var context = this.loadingContext;\n          var requestId = 'pdfjs-font-loading-' + context.nextRequestId++;\n          var request = {\n            id: requestId,\n            complete: LoadLoader_completeRequest,\n            callback: callback,\n            started: Date.now()\n          };\n          context.requests.push(request);\n          return request;\n        };\n\n        FontLoader.prototype.prepareFontLoadEvent = function fontLoaderPrepareFontLoadEvent(rules, fonts, request) {\n          function int32(data, offset) {\n            return data.charCodeAt(offset) << 24 | data.charCodeAt(offset + 1) << 16 | data.charCodeAt(offset + 2) << 8 | data.charCodeAt(offset + 3) & 0xff;\n          }\n\n          function spliceString(s, offset, remove, insert) {\n            var chunk1 = s.substr(0, offset);\n            var chunk2 = s.substr(offset + remove);\n            return chunk1 + insert + chunk2;\n          }\n\n          var i, ii;\n          var canvas = document.createElement('canvas');\n          canvas.width = 1;\n          canvas.height = 1;\n          var ctx = canvas.getContext('2d');\n          var called = 0;\n\n          function isFontReady(name, callback) {\n            called++;\n\n            if (called > 30) {\n              (0, _util.warn)('Load test font never loaded.');\n              callback();\n              return;\n            }\n\n            ctx.font = '30px ' + name;\n            ctx.fillText('.', 0, 20);\n            var imageData = ctx.getImageData(0, 0, 1, 1);\n\n            if (imageData.data[3] > 0) {\n              callback();\n              return;\n            }\n\n            setTimeout(isFontReady.bind(null, name, callback));\n          }\n\n          var loadTestFontId = 'lt' + Date.now() + this.loadTestFontId++;\n          var data = this.loadTestFont;\n          var COMMENT_OFFSET = 976;\n          data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);\n          var CFF_CHECKSUM_OFFSET = 16;\n          var XXXX_VALUE = 0x58585858;\n          var checksum = int32(data, CFF_CHECKSUM_OFFSET);\n\n          for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n            checksum = checksum - XXXX_VALUE + int32(loadTestFontId, i) | 0;\n          }\n\n          if (i < loadTestFontId.length) {\n            checksum = checksum - XXXX_VALUE + int32(loadTestFontId + 'XXX', i) | 0;\n          }\n\n          data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, (0, _util.string32)(checksum));\n          var url = 'url(data:font/opentype;base64,' + btoa(data) + ');';\n          var rule = '@font-face { font-family:\"' + loadTestFontId + '\";src:' + url + '}';\n          this.insertRule(rule);\n          var names = [];\n\n          for (i = 0, ii = fonts.length; i < ii; i++) {\n            names.push(fonts[i].loadedName);\n          }\n\n          names.push(loadTestFontId);\n          var div = document.createElement('div');\n          div.setAttribute('style', 'visibility: hidden;' + 'width: 10px; height: 10px;' + 'position: absolute; top: 0px; left: 0px;');\n\n          for (i = 0, ii = names.length; i < ii; ++i) {\n            var span = document.createElement('span');\n            span.textContent = 'Hi';\n            span.style.fontFamily = names[i];\n            div.appendChild(span);\n          }\n\n          document.body.appendChild(div);\n          isFontReady(loadTestFontId, function () {\n            document.body.removeChild(div);\n            request.complete();\n          });\n        };\n      }\n      {\n        FontLoader.isFontLoadingAPISupported = typeof document !== 'undefined' && !!document.fonts;\n      }\n      {\n        var isSyncFontLoadingSupported = function isSyncFontLoadingSupported() {\n          if (typeof navigator === 'undefined') {\n            return true;\n          }\n\n          var supported = false;\n          var m = /Mozilla\\/5.0.*?rv:(\\d+).*? Gecko/.exec(navigator.userAgent);\n\n          if (m && m[1] >= 14) {\n            supported = true;\n          }\n\n          return supported;\n        };\n\n        Object.defineProperty(FontLoader, 'isSyncFontLoadingSupported', {\n          get: function get() {\n            return (0, _util.shadow)(FontLoader, 'isSyncFontLoadingSupported', isSyncFontLoadingSupported());\n          },\n          enumerable: true,\n          configurable: true\n        });\n      }\n      var IsEvalSupportedCached = {\n        get value() {\n          return (0, _util.shadow)(this, 'value', (0, _util.isEvalSupported)());\n        }\n\n      };\n\n      var FontFaceObject = function FontFaceObjectClosure() {\n        function FontFaceObject(translatedData, options) {\n          this.compiledGlyphs = Object.create(null);\n\n          for (var i in translatedData) {\n            this[i] = translatedData[i];\n          }\n\n          this.options = options;\n        }\n\n        FontFaceObject.prototype = {\n          createNativeFontFace: function FontFaceObject_createNativeFontFace() {\n            if (!this.data) {\n              return null;\n            }\n\n            if (this.options.disableFontFace) {\n              this.disableFontFace = true;\n              return null;\n            }\n\n            var nativeFontFace = new FontFace(this.loadedName, this.data, {});\n\n            if (this.options.fontRegistry) {\n              this.options.fontRegistry.registerFont(this);\n            }\n\n            return nativeFontFace;\n          },\n          createFontFaceRule: function FontFaceObject_createFontFaceRule() {\n            if (!this.data) {\n              return null;\n            }\n\n            if (this.options.disableFontFace) {\n              this.disableFontFace = true;\n              return null;\n            }\n\n            var data = (0, _util.bytesToString)(new Uint8Array(this.data));\n            var fontName = this.loadedName;\n            var url = 'url(data:' + this.mimetype + ';base64,' + btoa(data) + ');';\n            var rule = '@font-face { font-family:\"' + fontName + '\";src:' + url + '}';\n\n            if (this.options.fontRegistry) {\n              this.options.fontRegistry.registerFont(this, url);\n            }\n\n            return rule;\n          },\n          getPathGenerator: function FontFaceObject_getPathGenerator(objs, character) {\n            if (!(character in this.compiledGlyphs)) {\n              var cmds = objs.get(this.loadedName + '_path_' + character);\n              var current, i, len;\n\n              if (this.options.isEvalSupported && IsEvalSupportedCached.value) {\n                var args,\n                    js = '';\n\n                for (i = 0, len = cmds.length; i < len; i++) {\n                  current = cmds[i];\n\n                  if (current.args !== undefined) {\n                    args = current.args.join(',');\n                  } else {\n                    args = '';\n                  }\n\n                  js += 'c.' + current.cmd + '(' + args + ');\\n';\n                }\n\n                this.compiledGlyphs[character] = new Function('c', 'size', js);\n              } else {\n                this.compiledGlyphs[character] = function (c, size) {\n                  for (i = 0, len = cmds.length; i < len; i++) {\n                    current = cmds[i];\n\n                    if (current.cmd === 'scale') {\n                      current.args = [size, -size];\n                    }\n\n                    c[current.cmd].apply(c, current.args);\n                  }\n                };\n              }\n            }\n\n            return this.compiledGlyphs[character];\n          }\n        };\n        return FontFaceObject;\n      }();\n\n      exports.FontFaceObject = FontFaceObject;\n      exports.FontLoader = FontLoader;\n      /***/\n    },\n    /* 12 */\n\n    /***/\n    function (module, exports, __w_pdfjs_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.TilingPattern = exports.getShadingPatternFromIR = undefined;\n\n      var _util = __w_pdfjs_require__(0);\n\n      var _webgl = __w_pdfjs_require__(8);\n\n      var ShadingIRs = {};\n      ShadingIRs.RadialAxial = {\n        fromIR: function RadialAxial_fromIR(raw) {\n          var type = raw[1];\n          var colorStops = raw[2];\n          var p0 = raw[3];\n          var p1 = raw[4];\n          var r0 = raw[5];\n          var r1 = raw[6];\n          return {\n            type: 'Pattern',\n            getPattern: function RadialAxial_getPattern(ctx) {\n              var grad;\n\n              if (type === 'axial') {\n                grad = ctx.createLinearGradient(p0[0], p0[1], p1[0], p1[1]);\n              } else if (type === 'radial') {\n                grad = ctx.createRadialGradient(p0[0], p0[1], r0, p1[0], p1[1], r1);\n              }\n\n              for (var i = 0, ii = colorStops.length; i < ii; ++i) {\n                var c = colorStops[i];\n                grad.addColorStop(c[0], c[1]);\n              }\n\n              return grad;\n            }\n          };\n        }\n      };\n\n      var createMeshCanvas = function createMeshCanvasClosure() {\n        function drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n          var coords = context.coords,\n              colors = context.colors;\n          var bytes = data.data,\n              rowSize = data.width * 4;\n          var tmp;\n\n          if (coords[p1 + 1] > coords[p2 + 1]) {\n            tmp = p1;\n            p1 = p2;\n            p2 = tmp;\n            tmp = c1;\n            c1 = c2;\n            c2 = tmp;\n          }\n\n          if (coords[p2 + 1] > coords[p3 + 1]) {\n            tmp = p2;\n            p2 = p3;\n            p3 = tmp;\n            tmp = c2;\n            c2 = c3;\n            c3 = tmp;\n          }\n\n          if (coords[p1 + 1] > coords[p2 + 1]) {\n            tmp = p1;\n            p1 = p2;\n            p2 = tmp;\n            tmp = c1;\n            c1 = c2;\n            c2 = tmp;\n          }\n\n          var x1 = (coords[p1] + context.offsetX) * context.scaleX;\n          var y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n          var x2 = (coords[p2] + context.offsetX) * context.scaleX;\n          var y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n          var x3 = (coords[p3] + context.offsetX) * context.scaleX;\n          var y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n\n          if (y1 >= y3) {\n            return;\n          }\n\n          var c1r = colors[c1],\n              c1g = colors[c1 + 1],\n              c1b = colors[c1 + 2];\n          var c2r = colors[c2],\n              c2g = colors[c2 + 1],\n              c2b = colors[c2 + 2];\n          var c3r = colors[c3],\n              c3g = colors[c3 + 1],\n              c3b = colors[c3 + 2];\n          var minY = Math.round(y1),\n              maxY = Math.round(y3);\n          var xa, car, cag, cab;\n          var xb, cbr, cbg, cbb;\n          var k;\n\n          for (var y = minY; y <= maxY; y++) {\n            if (y < y2) {\n              k = y < y1 ? 0 : y1 === y2 ? 1 : (y1 - y) / (y1 - y2);\n              xa = x1 - (x1 - x2) * k;\n              car = c1r - (c1r - c2r) * k;\n              cag = c1g - (c1g - c2g) * k;\n              cab = c1b - (c1b - c2b) * k;\n            } else {\n              k = y > y3 ? 1 : y2 === y3 ? 0 : (y2 - y) / (y2 - y3);\n              xa = x2 - (x2 - x3) * k;\n              car = c2r - (c2r - c3r) * k;\n              cag = c2g - (c2g - c3g) * k;\n              cab = c2b - (c2b - c3b) * k;\n            }\n\n            k = y < y1 ? 0 : y > y3 ? 1 : (y1 - y) / (y1 - y3);\n            xb = x1 - (x1 - x3) * k;\n            cbr = c1r - (c1r - c3r) * k;\n            cbg = c1g - (c1g - c3g) * k;\n            cbb = c1b - (c1b - c3b) * k;\n            var x1_ = Math.round(Math.min(xa, xb));\n            var x2_ = Math.round(Math.max(xa, xb));\n            var j = rowSize * y + x1_ * 4;\n\n            for (var x = x1_; x <= x2_; x++) {\n              k = (xa - x) / (xa - xb);\n              k = k < 0 ? 0 : k > 1 ? 1 : k;\n              bytes[j++] = car - (car - cbr) * k | 0;\n              bytes[j++] = cag - (cag - cbg) * k | 0;\n              bytes[j++] = cab - (cab - cbb) * k | 0;\n              bytes[j++] = 255;\n            }\n          }\n        }\n\n        function drawFigure(data, figure, context) {\n          var ps = figure.coords;\n          var cs = figure.colors;\n          var i, ii;\n\n          switch (figure.type) {\n            case 'lattice':\n              var verticesPerRow = figure.verticesPerRow;\n              var rows = Math.floor(ps.length / verticesPerRow) - 1;\n              var cols = verticesPerRow - 1;\n\n              for (i = 0; i < rows; i++) {\n                var q = i * verticesPerRow;\n\n                for (var j = 0; j < cols; j++, q++) {\n                  drawTriangle(data, context, ps[q], ps[q + 1], ps[q + verticesPerRow], cs[q], cs[q + 1], cs[q + verticesPerRow]);\n                  drawTriangle(data, context, ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow], cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);\n                }\n              }\n\n              break;\n\n            case 'triangles':\n              for (i = 0, ii = ps.length; i < ii; i += 3) {\n                drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);\n              }\n\n              break;\n\n            default:\n              (0, _util.error)('illigal figure');\n              break;\n          }\n        }\n\n        function createMeshCanvas(bounds, combinesScale, coords, colors, figures, backgroundColor, cachedCanvases) {\n          var EXPECTED_SCALE = 1.1;\n          var MAX_PATTERN_SIZE = 3000;\n          var BORDER_SIZE = 2;\n          var offsetX = Math.floor(bounds[0]);\n          var offsetY = Math.floor(bounds[1]);\n          var boundsWidth = Math.ceil(bounds[2]) - offsetX;\n          var boundsHeight = Math.ceil(bounds[3]) - offsetY;\n          var width = Math.min(Math.ceil(Math.abs(boundsWidth * combinesScale[0] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n          var height = Math.min(Math.ceil(Math.abs(boundsHeight * combinesScale[1] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n          var scaleX = boundsWidth / width;\n          var scaleY = boundsHeight / height;\n          var context = {\n            coords: coords,\n            colors: colors,\n            offsetX: -offsetX,\n            offsetY: -offsetY,\n            scaleX: 1 / scaleX,\n            scaleY: 1 / scaleY\n          };\n          var paddedWidth = width + BORDER_SIZE * 2;\n          var paddedHeight = height + BORDER_SIZE * 2;\n          var canvas, tmpCanvas, i, ii;\n\n          if (_webgl.WebGLUtils.isEnabled) {\n            canvas = _webgl.WebGLUtils.drawFigures(width, height, backgroundColor, figures, context);\n            tmpCanvas = cachedCanvases.getCanvas('mesh', paddedWidth, paddedHeight, false);\n            tmpCanvas.context.drawImage(canvas, BORDER_SIZE, BORDER_SIZE);\n            canvas = tmpCanvas.canvas;\n          } else {\n            tmpCanvas = cachedCanvases.getCanvas('mesh', paddedWidth, paddedHeight, false);\n            var tmpCtx = tmpCanvas.context;\n            var data = tmpCtx.createImageData(width, height);\n\n            if (backgroundColor) {\n              var bytes = data.data;\n\n              for (i = 0, ii = bytes.length; i < ii; i += 4) {\n                bytes[i] = backgroundColor[0];\n                bytes[i + 1] = backgroundColor[1];\n                bytes[i + 2] = backgroundColor[2];\n                bytes[i + 3] = 255;\n              }\n            }\n\n            for (i = 0; i < figures.length; i++) {\n              drawFigure(data, figures[i], context);\n            }\n\n            tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n            canvas = tmpCanvas.canvas;\n          }\n\n          return {\n            canvas: canvas,\n            offsetX: offsetX - BORDER_SIZE * scaleX,\n            offsetY: offsetY - BORDER_SIZE * scaleY,\n            scaleX: scaleX,\n            scaleY: scaleY\n          };\n        }\n\n        return createMeshCanvas;\n      }();\n\n      ShadingIRs.Mesh = {\n        fromIR: function Mesh_fromIR(raw) {\n          var coords = raw[2];\n          var colors = raw[3];\n          var figures = raw[4];\n          var bounds = raw[5];\n          var matrix = raw[6];\n          var background = raw[8];\n          return {\n            type: 'Pattern',\n            getPattern: function Mesh_getPattern(ctx, owner, shadingFill) {\n              var scale;\n\n              if (shadingFill) {\n                scale = _util.Util.singularValueDecompose2dScale(ctx.mozCurrentTransform);\n              } else {\n                scale = _util.Util.singularValueDecompose2dScale(owner.baseTransform);\n\n                if (matrix) {\n                  var matrixScale = _util.Util.singularValueDecompose2dScale(matrix);\n\n                  scale = [scale[0] * matrixScale[0], scale[1] * matrixScale[1]];\n                }\n              }\n\n              var temporaryPatternCanvas = createMeshCanvas(bounds, scale, coords, colors, figures, shadingFill ? null : background, owner.cachedCanvases);\n\n              if (!shadingFill) {\n                ctx.setTransform.apply(ctx, owner.baseTransform);\n\n                if (matrix) {\n                  ctx.transform.apply(ctx, matrix);\n                }\n              }\n\n              ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n              ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n              return ctx.createPattern(temporaryPatternCanvas.canvas, 'no-repeat');\n            }\n          };\n        }\n      };\n      ShadingIRs.Dummy = {\n        fromIR: function Dummy_fromIR() {\n          return {\n            type: 'Pattern',\n            getPattern: function Dummy_fromIR_getPattern() {\n              return 'hotpink';\n            }\n          };\n        }\n      };\n\n      function getShadingPatternFromIR(raw) {\n        var shadingIR = ShadingIRs[raw[0]];\n\n        if (!shadingIR) {\n          (0, _util.error)('Unknown IR type: ' + raw[0]);\n        }\n\n        return shadingIR.fromIR(raw);\n      }\n\n      var TilingPattern = function TilingPatternClosure() {\n        var PaintType = {\n          COLORED: 1,\n          UNCOLORED: 2\n        };\n        var MAX_PATTERN_SIZE = 3000;\n\n        function TilingPattern(IR, color, ctx, canvasGraphicsFactory, baseTransform) {\n          this.operatorList = IR[2];\n          this.matrix = IR[3] || [1, 0, 0, 1, 0, 0];\n          this.bbox = _util.Util.normalizeRect(IR[4]);\n          this.xstep = IR[5];\n          this.ystep = IR[6];\n          this.paintType = IR[7];\n          this.tilingType = IR[8];\n          this.color = color;\n          this.canvasGraphicsFactory = canvasGraphicsFactory;\n          this.baseTransform = baseTransform;\n          this.type = 'Pattern';\n          this.ctx = ctx;\n        }\n\n        TilingPattern.prototype = {\n          createPatternCanvas: function TilinPattern_createPatternCanvas(owner) {\n            var operatorList = this.operatorList;\n            var bbox = this.bbox;\n            var xstep = this.xstep;\n            var ystep = this.ystep;\n            var paintType = this.paintType;\n            var tilingType = this.tilingType;\n            var color = this.color;\n            var canvasGraphicsFactory = this.canvasGraphicsFactory;\n            (0, _util.info)('TilingType: ' + tilingType);\n            var x0 = bbox[0],\n                y0 = bbox[1],\n                x1 = bbox[2],\n                y1 = bbox[3];\n            var topLeft = [x0, y0];\n            var botRight = [x0 + xstep, y0 + ystep];\n            var width = botRight[0] - topLeft[0];\n            var height = botRight[1] - topLeft[1];\n\n            var matrixScale = _util.Util.singularValueDecompose2dScale(this.matrix);\n\n            var curMatrixScale = _util.Util.singularValueDecompose2dScale(this.baseTransform);\n\n            var combinedScale = [matrixScale[0] * curMatrixScale[0], matrixScale[1] * curMatrixScale[1]];\n            width = Math.min(Math.ceil(Math.abs(width * combinedScale[0])), MAX_PATTERN_SIZE);\n            height = Math.min(Math.ceil(Math.abs(height * combinedScale[1])), MAX_PATTERN_SIZE);\n            var tmpCanvas = owner.cachedCanvases.getCanvas('pattern', width, height, true);\n            var tmpCtx = tmpCanvas.context;\n            var graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n            graphics.groupLevel = owner.groupLevel;\n            this.setFillAndStrokeStyleToContext(tmpCtx, paintType, color);\n            this.setScale(width, height, xstep, ystep);\n            this.transformToScale(graphics);\n            var tmpTranslate = [1, 0, 0, 1, -topLeft[0], -topLeft[1]];\n            graphics.transform.apply(graphics, tmpTranslate);\n            this.clipBbox(graphics, bbox, x0, y0, x1, y1);\n            graphics.executeOperatorList(operatorList);\n            return tmpCanvas.canvas;\n          },\n          setScale: function TilingPattern_setScale(width, height, xstep, ystep) {\n            this.scale = [width / xstep, height / ystep];\n          },\n          transformToScale: function TilingPattern_transformToScale(graphics) {\n            var scale = this.scale;\n            var tmpScale = [scale[0], 0, 0, scale[1], 0, 0];\n            graphics.transform.apply(graphics, tmpScale);\n          },\n          scaleToContext: function TilingPattern_scaleToContext() {\n            var scale = this.scale;\n            this.ctx.scale(1 / scale[0], 1 / scale[1]);\n          },\n          clipBbox: function clipBbox(graphics, bbox, x0, y0, x1, y1) {\n            if ((0, _util.isArray)(bbox) && bbox.length === 4) {\n              var bboxWidth = x1 - x0;\n              var bboxHeight = y1 - y0;\n              graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n              graphics.clip();\n              graphics.endPath();\n            }\n          },\n          setFillAndStrokeStyleToContext: function setFillAndStrokeStyleToContext(context, paintType, color) {\n            switch (paintType) {\n              case PaintType.COLORED:\n                var ctx = this.ctx;\n                context.fillStyle = ctx.fillStyle;\n                context.strokeStyle = ctx.strokeStyle;\n                break;\n\n              case PaintType.UNCOLORED:\n                var cssColor = _util.Util.makeCssRgb(color[0], color[1], color[2]);\n\n                context.fillStyle = cssColor;\n                context.strokeStyle = cssColor;\n                break;\n\n              default:\n                (0, _util.error)('Unsupported paint type: ' + paintType);\n            }\n          },\n          getPattern: function TilingPattern_getPattern(ctx, owner) {\n            var temporaryPatternCanvas = this.createPatternCanvas(owner);\n            ctx = this.ctx;\n            ctx.setTransform.apply(ctx, this.baseTransform);\n            ctx.transform.apply(ctx, this.matrix);\n            this.scaleToContext();\n            return ctx.createPattern(temporaryPatternCanvas, 'repeat');\n          }\n        };\n        return TilingPattern;\n      }();\n\n      exports.getShadingPatternFromIR = getShadingPatternFromIR;\n      exports.TilingPattern = TilingPattern;\n      /***/\n    },\n    /* 13 */\n\n    /***/\n    function (module, exports, __w_pdfjs_require__) {\n      \"use strict\";\n\n      var pdfjsVersion = '1.8.357';\n      var pdfjsBuild = 'ca3cf6e7';\n\n      var pdfjsSharedUtil = __w_pdfjs_require__(0);\n\n      var pdfjsDisplayGlobal = __w_pdfjs_require__(9);\n\n      var pdfjsDisplayAPI = __w_pdfjs_require__(3);\n\n      var pdfjsDisplayTextLayer = __w_pdfjs_require__(5);\n\n      var pdfjsDisplayAnnotationLayer = __w_pdfjs_require__(2);\n\n      var pdfjsDisplayDOMUtils = __w_pdfjs_require__(1);\n\n      var pdfjsDisplaySVG = __w_pdfjs_require__(4);\n\n      exports.PDFJS = pdfjsDisplayGlobal.PDFJS;\n      exports.build = pdfjsDisplayAPI.build;\n      exports.version = pdfjsDisplayAPI.version;\n      exports.getDocument = pdfjsDisplayAPI.getDocument;\n      exports.LoopbackPort = pdfjsDisplayAPI.LoopbackPort;\n      exports.PDFDataRangeTransport = pdfjsDisplayAPI.PDFDataRangeTransport;\n      exports.PDFWorker = pdfjsDisplayAPI.PDFWorker;\n      exports.renderTextLayer = pdfjsDisplayTextLayer.renderTextLayer;\n      exports.AnnotationLayer = pdfjsDisplayAnnotationLayer.AnnotationLayer;\n      exports.CustomStyle = pdfjsDisplayDOMUtils.CustomStyle;\n      exports.createPromiseCapability = pdfjsSharedUtil.createPromiseCapability;\n      exports.PasswordResponses = pdfjsSharedUtil.PasswordResponses;\n      exports.InvalidPDFException = pdfjsSharedUtil.InvalidPDFException;\n      exports.MissingPDFException = pdfjsSharedUtil.MissingPDFException;\n      exports.SVGGraphics = pdfjsDisplaySVG.SVGGraphics;\n      exports.NativeImageDecoding = pdfjsSharedUtil.NativeImageDecoding;\n      exports.UnexpectedResponseException = pdfjsSharedUtil.UnexpectedResponseException;\n      exports.OPS = pdfjsSharedUtil.OPS;\n      exports.UNSUPPORTED_FEATURES = pdfjsSharedUtil.UNSUPPORTED_FEATURES;\n      exports.isValidUrl = pdfjsDisplayDOMUtils.isValidUrl;\n      exports.createValidAbsoluteUrl = pdfjsSharedUtil.createValidAbsoluteUrl;\n      exports.createObjectURL = pdfjsSharedUtil.createObjectURL;\n      exports.removeNullCharacters = pdfjsSharedUtil.removeNullCharacters;\n      exports.shadow = pdfjsSharedUtil.shadow;\n      exports.createBlob = pdfjsSharedUtil.createBlob;\n      exports.RenderingCancelledException = pdfjsDisplayDOMUtils.RenderingCancelledException;\n      exports.getFilenameFromUrl = pdfjsDisplayDOMUtils.getFilenameFromUrl;\n      exports.addLinkAttributes = pdfjsDisplayDOMUtils.addLinkAttributes;\n      /***/\n    },\n    /* 14 */\n\n    /***/\n    function (module, exports, __w_pdfjs_require__) {\n      \"use strict\";\n      /* WEBPACK VAR INJECTION */\n\n      (function (global) {\n        var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n          return typeof obj;\n        } : function (obj) {\n          return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n        };\n\n        if (typeof PDFJS === 'undefined' || !PDFJS.compatibilityChecked) {\n          var globalScope = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : undefined;\n          var userAgent = typeof navigator !== 'undefined' && navigator.userAgent || '';\n          var isAndroid = /Android/.test(userAgent);\n          var isAndroidPre3 = /Android\\s[0-2][^\\d]/.test(userAgent);\n          var isAndroidPre5 = /Android\\s[0-4][^\\d]/.test(userAgent);\n          var isChrome = userAgent.indexOf('Chrom') >= 0;\n          var isChromeWithRangeBug = /Chrome\\/(39|40)\\./.test(userAgent);\n          var isIOSChrome = userAgent.indexOf('CriOS') >= 0;\n          var isIE = userAgent.indexOf('Trident') >= 0;\n          var isIOS = /\\b(iPad|iPhone|iPod)(?=;)/.test(userAgent);\n          var isOpera = userAgent.indexOf('Opera') >= 0;\n          var isSafari = /Safari\\//.test(userAgent) && !/(Chrome\\/|Android\\s)/.test(userAgent);\n          var hasDOM = (typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && (typeof document === 'undefined' ? 'undefined' : _typeof(document)) === 'object';\n\n          if (typeof PDFJS === 'undefined') {\n            globalScope.PDFJS = {};\n          }\n\n          PDFJS.compatibilityChecked = true;\n\n          (function checkTypedArrayCompatibility() {\n            if (typeof Uint8Array !== 'undefined') {\n              if (typeof Uint8Array.prototype.subarray === 'undefined') {\n                Uint8Array.prototype.subarray = function subarray(start, end) {\n                  return new Uint8Array(this.slice(start, end));\n                };\n\n                Float32Array.prototype.subarray = function subarray(start, end) {\n                  return new Float32Array(this.slice(start, end));\n                };\n              }\n\n              if (typeof Float64Array === 'undefined') {\n                globalScope.Float64Array = Float32Array;\n              }\n\n              return;\n            }\n\n            function subarray(start, end) {\n              return new TypedArray(this.slice(start, end));\n            }\n\n            function setArrayOffset(array, offset) {\n              if (arguments.length < 2) {\n                offset = 0;\n              }\n\n              for (var i = 0, n = array.length; i < n; ++i, ++offset) {\n                this[offset] = array[i] & 0xFF;\n              }\n            }\n\n            function Uint32ArrayView(buffer, length) {\n              this.buffer = buffer;\n              this.byteLength = buffer.length;\n              this.length = length;\n              ensureUint32ArrayViewProps(this.length);\n            }\n\n            Uint32ArrayView.prototype = Object.create(null);\n            var uint32ArrayViewSetters = 0;\n\n            function createUint32ArrayProp(index) {\n              return {\n                get: function get() {\n                  var buffer = this.buffer,\n                      offset = index << 2;\n                  return (buffer[offset] | buffer[offset + 1] << 8 | buffer[offset + 2] << 16 | buffer[offset + 3] << 24) >>> 0;\n                },\n                set: function set(value) {\n                  var buffer = this.buffer,\n                      offset = index << 2;\n                  buffer[offset] = value & 255;\n                  buffer[offset + 1] = value >> 8 & 255;\n                  buffer[offset + 2] = value >> 16 & 255;\n                  buffer[offset + 3] = value >>> 24 & 255;\n                }\n              };\n            }\n\n            function ensureUint32ArrayViewProps(length) {\n              while (uint32ArrayViewSetters < length) {\n                Object.defineProperty(Uint32ArrayView.prototype, uint32ArrayViewSetters, createUint32ArrayProp(uint32ArrayViewSetters));\n                uint32ArrayViewSetters++;\n              }\n            }\n\n            function TypedArray(arg1) {\n              var result, i, n;\n\n              if (typeof arg1 === 'number') {\n                result = [];\n\n                for (i = 0; i < arg1; ++i) {\n                  result[i] = 0;\n                }\n              } else if ('slice' in arg1) {\n                result = arg1.slice(0);\n              } else {\n                result = [];\n\n                for (i = 0, n = arg1.length; i < n; ++i) {\n                  result[i] = arg1[i];\n                }\n              }\n\n              result.subarray = subarray;\n              result.buffer = result;\n              result.byteLength = result.length;\n              result.set = setArrayOffset;\n\n              if ((typeof arg1 === 'undefined' ? 'undefined' : _typeof(arg1)) === 'object' && arg1.buffer) {\n                result.buffer = arg1.buffer;\n              }\n\n              return result;\n            }\n\n            globalScope.Uint8Array = TypedArray;\n            globalScope.Int8Array = TypedArray;\n            globalScope.Int32Array = TypedArray;\n            globalScope.Uint16Array = TypedArray;\n            globalScope.Float32Array = TypedArray;\n            globalScope.Float64Array = TypedArray;\n\n            globalScope.Uint32Array = function () {\n              if (arguments.length === 3) {\n                if (arguments[1] !== 0) {\n                  throw new Error('offset !== 0 is not supported');\n                }\n\n                return new Uint32ArrayView(arguments[0], arguments[2]);\n              }\n\n              return TypedArray.apply(this, arguments);\n            };\n          })();\n\n          (function canvasPixelArrayBuffer() {\n            if (!hasDOM || !window.CanvasPixelArray) {\n              return;\n            }\n\n            var cpaProto = window.CanvasPixelArray.prototype;\n\n            if ('buffer' in cpaProto) {\n              return;\n            }\n\n            Object.defineProperty(cpaProto, 'buffer', {\n              get: function get() {\n                return this;\n              },\n              enumerable: false,\n              configurable: true\n            });\n            Object.defineProperty(cpaProto, 'byteLength', {\n              get: function get() {\n                return this.length;\n              },\n              enumerable: false,\n              configurable: true\n            });\n          })();\n\n          (function normalizeURLObject() {\n            if (!globalScope.URL) {\n              globalScope.URL = globalScope.webkitURL;\n            }\n          })();\n\n          (function checkObjectDefinePropertyCompatibility() {\n            if (typeof Object.defineProperty !== 'undefined') {\n              var definePropertyPossible = true;\n\n              try {\n                if (hasDOM) {\n                  Object.defineProperty(new Image(), 'id', {\n                    value: 'test'\n                  });\n                }\n\n                var Test = function Test() {};\n\n                Test.prototype = {\n                  get id() {}\n\n                };\n                Object.defineProperty(new Test(), 'id', {\n                  value: '',\n                  configurable: true,\n                  enumerable: true,\n                  writable: false\n                });\n              } catch (e) {\n                definePropertyPossible = false;\n              }\n\n              if (definePropertyPossible) {\n                return;\n              }\n            }\n\n            Object.defineProperty = function objectDefineProperty(obj, name, def) {\n              delete obj[name];\n\n              if ('get' in def) {\n                obj.__defineGetter__(name, def['get']);\n              }\n\n              if ('set' in def) {\n                obj.__defineSetter__(name, def['set']);\n              }\n\n              if ('value' in def) {\n                obj.__defineSetter__(name, function objectDefinePropertySetter(value) {\n                  this.__defineGetter__(name, function objectDefinePropertyGetter() {\n                    return value;\n                  });\n\n                  return value;\n                });\n\n                obj[name] = def.value;\n              }\n            };\n          })();\n\n          (function checkXMLHttpRequestResponseCompatibility() {\n            if (typeof XMLHttpRequest === 'undefined') {\n              return;\n            }\n\n            var xhrPrototype = XMLHttpRequest.prototype;\n            var xhr = new XMLHttpRequest();\n\n            if (!('overrideMimeType' in xhr)) {\n              Object.defineProperty(xhrPrototype, 'overrideMimeType', {\n                value: function xmlHttpRequestOverrideMimeType(mimeType) {}\n              });\n            }\n\n            if ('responseType' in xhr) {\n              return;\n            }\n\n            Object.defineProperty(xhrPrototype, 'responseType', {\n              get: function xmlHttpRequestGetResponseType() {\n                return this._responseType || 'text';\n              },\n              set: function xmlHttpRequestSetResponseType(value) {\n                if (value === 'text' || value === 'arraybuffer') {\n                  this._responseType = value;\n\n                  if (value === 'arraybuffer' && typeof this.overrideMimeType === 'function') {\n                    this.overrideMimeType('text/plain; charset=x-user-defined');\n                  }\n                }\n              }\n            });\n\n            if (typeof VBArray !== 'undefined') {\n              Object.defineProperty(xhrPrototype, 'response', {\n                get: function xmlHttpRequestResponseGet() {\n                  if (this.responseType === 'arraybuffer') {\n                    return new Uint8Array(new VBArray(this.responseBody).toArray());\n                  }\n\n                  return this.responseText;\n                }\n              });\n              return;\n            }\n\n            Object.defineProperty(xhrPrototype, 'response', {\n              get: function xmlHttpRequestResponseGet() {\n                if (this.responseType !== 'arraybuffer') {\n                  return this.responseText;\n                }\n\n                var text = this.responseText;\n                var i,\n                    n = text.length;\n                var result = new Uint8Array(n);\n\n                for (i = 0; i < n; ++i) {\n                  result[i] = text.charCodeAt(i) & 0xFF;\n                }\n\n                return result.buffer;\n              }\n            });\n          })();\n\n          (function checkWindowBtoaCompatibility() {\n            if ('btoa' in globalScope) {\n              return;\n            }\n\n            var digits = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n            globalScope.btoa = function (chars) {\n              var buffer = '';\n              var i, n;\n\n              for (i = 0, n = chars.length; i < n; i += 3) {\n                var b1 = chars.charCodeAt(i) & 0xFF;\n                var b2 = chars.charCodeAt(i + 1) & 0xFF;\n                var b3 = chars.charCodeAt(i + 2) & 0xFF;\n                var d1 = b1 >> 2,\n                    d2 = (b1 & 3) << 4 | b2 >> 4;\n                var d3 = i + 1 < n ? (b2 & 0xF) << 2 | b3 >> 6 : 64;\n                var d4 = i + 2 < n ? b3 & 0x3F : 64;\n                buffer += digits.charAt(d1) + digits.charAt(d2) + digits.charAt(d3) + digits.charAt(d4);\n              }\n\n              return buffer;\n            };\n          })();\n\n          (function checkWindowAtobCompatibility() {\n            if ('atob' in globalScope) {\n              return;\n            }\n\n            var digits = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n            globalScope.atob = function (input) {\n              input = input.replace(/=+$/, '');\n\n              if (input.length % 4 === 1) {\n                throw new Error('bad atob input');\n              }\n\n              for (var bc = 0, bs, buffer, idx = 0, output = ''; buffer = input.charAt(idx++); ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer, bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0) {\n                buffer = digits.indexOf(buffer);\n              }\n\n              return output;\n            };\n          })();\n\n          (function checkFunctionPrototypeBindCompatibility() {\n            if (typeof Function.prototype.bind !== 'undefined') {\n              return;\n            }\n\n            Function.prototype.bind = function functionPrototypeBind(obj) {\n              var fn = this,\n                  headArgs = Array.prototype.slice.call(arguments, 1);\n\n              var bound = function functionPrototypeBindBound() {\n                var args = headArgs.concat(Array.prototype.slice.call(arguments));\n                return fn.apply(obj, args);\n              };\n\n              return bound;\n            };\n          })();\n\n          (function checkDatasetProperty() {\n            if (!hasDOM) {\n              return;\n            }\n\n            var div = document.createElement('div');\n\n            if ('dataset' in div) {\n              return;\n            }\n\n            Object.defineProperty(HTMLElement.prototype, 'dataset', {\n              get: function get() {\n                if (this._dataset) {\n                  return this._dataset;\n                }\n\n                var dataset = {};\n\n                for (var j = 0, jj = this.attributes.length; j < jj; j++) {\n                  var attribute = this.attributes[j];\n\n                  if (attribute.name.substring(0, 5) !== 'data-') {\n                    continue;\n                  }\n\n                  var key = attribute.name.substring(5).replace(/\\-([a-z])/g, function (all, ch) {\n                    return ch.toUpperCase();\n                  });\n                  dataset[key] = attribute.value;\n                }\n\n                Object.defineProperty(this, '_dataset', {\n                  value: dataset,\n                  writable: false,\n                  enumerable: false\n                });\n                return dataset;\n              },\n              enumerable: true\n            });\n          })();\n\n          (function checkClassListProperty() {\n            function changeList(element, itemName, add, remove) {\n              var s = element.className || '';\n              var list = s.split(/\\s+/g);\n\n              if (list[0] === '') {\n                list.shift();\n              }\n\n              var index = list.indexOf(itemName);\n\n              if (index < 0 && add) {\n                list.push(itemName);\n              }\n\n              if (index >= 0 && remove) {\n                list.splice(index, 1);\n              }\n\n              element.className = list.join(' ');\n              return index >= 0;\n            }\n\n            if (!hasDOM) {\n              return;\n            }\n\n            var div = document.createElement('div');\n\n            if ('classList' in div) {\n              return;\n            }\n\n            var classListPrototype = {\n              add: function add(name) {\n                changeList(this.element, name, true, false);\n              },\n              contains: function contains(name) {\n                return changeList(this.element, name, false, false);\n              },\n              remove: function remove(name) {\n                changeList(this.element, name, false, true);\n              },\n              toggle: function toggle(name) {\n                changeList(this.element, name, true, true);\n              }\n            };\n            Object.defineProperty(HTMLElement.prototype, 'classList', {\n              get: function get() {\n                if (this._classList) {\n                  return this._classList;\n                }\n\n                var classList = Object.create(classListPrototype, {\n                  element: {\n                    value: this,\n                    writable: false,\n                    enumerable: true\n                  }\n                });\n                Object.defineProperty(this, '_classList', {\n                  value: classList,\n                  writable: false,\n                  enumerable: false\n                });\n                return classList;\n              },\n              enumerable: true\n            });\n          })();\n\n          (function checkWorkerConsoleCompatibility() {\n            if (typeof importScripts === 'undefined' || 'console' in globalScope) {\n              return;\n            }\n\n            var consoleTimer = {};\n            var workerConsole = {\n              log: function log() {\n                var args = Array.prototype.slice.call(arguments);\n                globalScope.postMessage({\n                  targetName: 'main',\n                  action: 'console_log',\n                  data: args\n                });\n              },\n              error: function error() {\n                var args = Array.prototype.slice.call(arguments);\n                globalScope.postMessage({\n                  targetName: 'main',\n                  action: 'console_error',\n                  data: args\n                });\n              },\n              time: function time(name) {\n                consoleTimer[name] = Date.now();\n              },\n              timeEnd: function timeEnd(name) {\n                var time = consoleTimer[name];\n\n                if (!time) {\n                  throw new Error('Unknown timer name ' + name);\n                }\n\n                this.log('Timer:', name, Date.now() - time);\n              }\n            };\n            globalScope.console = workerConsole;\n          })();\n\n          (function checkConsoleCompatibility() {\n            if (!hasDOM) {\n              return;\n            }\n\n            if (!('console' in window)) {\n              window.console = {\n                log: function log() {},\n                error: function error() {},\n                warn: function warn() {}\n              };\n              return;\n            }\n\n            if (!('bind' in console.log)) {\n              console.log = function (fn) {\n                return function (msg) {\n                  return fn(msg);\n                };\n              }(console.log);\n\n              console.error = function (fn) {\n                return function (msg) {\n                  return fn(msg);\n                };\n              }(console.error);\n\n              console.warn = function (fn) {\n                return function (msg) {\n                  return fn(msg);\n                };\n              }(console.warn);\n\n              return;\n            }\n          })();\n\n          (function checkOnClickCompatibility() {\n            function ignoreIfTargetDisabled(event) {\n              if (isDisabled(event.target)) {\n                event.stopPropagation();\n              }\n            }\n\n            function isDisabled(node) {\n              return node.disabled || node.parentNode && isDisabled(node.parentNode);\n            }\n\n            if (isOpera) {\n              document.addEventListener('click', ignoreIfTargetDisabled, true);\n            }\n          })();\n\n          (function checkOnBlobSupport() {\n            if (isIE || isIOSChrome) {\n              PDFJS.disableCreateObjectURL = true;\n            }\n          })();\n\n          (function checkNavigatorLanguage() {\n            if (typeof navigator === 'undefined') {\n              return;\n            }\n\n            if ('language' in navigator) {\n              return;\n            }\n\n            PDFJS.locale = navigator.userLanguage || 'en-US';\n          })();\n\n          (function checkRangeRequests() {\n            if (isSafari || isAndroidPre3 || isChromeWithRangeBug || isIOS) {\n              PDFJS.disableRange = true;\n              PDFJS.disableStream = true;\n            }\n          })();\n\n          (function checkHistoryManipulation() {\n            if (!hasDOM) {\n              return;\n            }\n\n            if (!history.pushState || isAndroidPre3) {\n              PDFJS.disableHistory = true;\n            }\n          })();\n\n          (function checkSetPresenceInImageData() {\n            if (!hasDOM) {\n              return;\n            }\n\n            if (window.CanvasPixelArray) {\n              if (typeof window.CanvasPixelArray.prototype.set !== 'function') {\n                window.CanvasPixelArray.prototype.set = function (arr) {\n                  for (var i = 0, ii = this.length; i < ii; i++) {\n                    this[i] = arr[i];\n                  }\n                };\n              }\n            } else {\n              var polyfill = false,\n                  versionMatch;\n\n              if (isChrome) {\n                versionMatch = userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\n                polyfill = versionMatch && parseInt(versionMatch[2]) < 21;\n              } else if (isAndroid) {\n                polyfill = isAndroidPre5;\n              } else if (isSafari) {\n                versionMatch = userAgent.match(/Version\\/([0-9]+)\\.([0-9]+)\\.([0-9]+) Safari\\//);\n                polyfill = versionMatch && parseInt(versionMatch[1]) < 6;\n              }\n\n              if (polyfill) {\n                var contextPrototype = window.CanvasRenderingContext2D.prototype;\n                var createImageData = contextPrototype.createImageData;\n\n                contextPrototype.createImageData = function (w, h) {\n                  var imageData = createImageData.call(this, w, h);\n\n                  imageData.data.set = function (arr) {\n                    for (var i = 0, ii = this.length; i < ii; i++) {\n                      this[i] = arr[i];\n                    }\n                  };\n\n                  return imageData;\n                };\n\n                contextPrototype = null;\n              }\n            }\n          })();\n\n          (function checkRequestAnimationFrame() {\n            function installFakeAnimationFrameFunctions() {\n              window.requestAnimationFrame = function (callback) {\n                return window.setTimeout(callback, 20);\n              };\n\n              window.cancelAnimationFrame = function (timeoutID) {\n                window.clearTimeout(timeoutID);\n              };\n            }\n\n            if (!hasDOM) {\n              return;\n            }\n\n            if (isIOS) {\n              installFakeAnimationFrameFunctions();\n              return;\n            }\n\n            if ('requestAnimationFrame' in window) {\n              return;\n            }\n\n            window.requestAnimationFrame = window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame;\n\n            if (window.requestAnimationFrame) {\n              return;\n            }\n\n            installFakeAnimationFrameFunctions();\n          })();\n\n          (function checkCanvasSizeLimitation() {\n            if (isIOS || isAndroid) {\n              PDFJS.maxCanvasPixels = 5242880;\n            }\n          })();\n\n          (function checkFullscreenSupport() {\n            if (!hasDOM) {\n              return;\n            }\n\n            if (isIE && window.parent !== window) {\n              PDFJS.disableFullscreen = true;\n            }\n          })();\n\n          (function checkCurrentScript() {\n            if (!hasDOM) {\n              return;\n            }\n\n            if ('currentScript' in document) {\n              return;\n            }\n\n            Object.defineProperty(document, 'currentScript', {\n              get: function get() {\n                var scripts = document.getElementsByTagName('script');\n                return scripts[scripts.length - 1];\n              },\n              enumerable: true,\n              configurable: true\n            });\n          })();\n\n          (function checkInputTypeNumberAssign() {\n            if (!hasDOM) {\n              return;\n            }\n\n            var el = document.createElement('input');\n\n            try {\n              el.type = 'number';\n            } catch (ex) {\n              var inputProto = el.constructor.prototype;\n              var typeProperty = Object.getOwnPropertyDescriptor(inputProto, 'type');\n              Object.defineProperty(inputProto, 'type', {\n                get: function get() {\n                  return typeProperty.get.call(this);\n                },\n                set: function set(value) {\n                  typeProperty.set.call(this, value === 'number' ? 'text' : value);\n                },\n                enumerable: true,\n                configurable: true\n              });\n            }\n          })();\n\n          (function checkDocumentReadyState() {\n            if (!hasDOM) {\n              return;\n            }\n\n            if (!document.attachEvent) {\n              return;\n            }\n\n            var documentProto = document.constructor.prototype;\n            var readyStateProto = Object.getOwnPropertyDescriptor(documentProto, 'readyState');\n            Object.defineProperty(documentProto, 'readyState', {\n              get: function get() {\n                var value = readyStateProto.get.call(this);\n                return value === 'interactive' ? 'loading' : value;\n              },\n              set: function set(value) {\n                readyStateProto.set.call(this, value);\n              },\n              enumerable: true,\n              configurable: true\n            });\n          })();\n\n          (function checkChildNodeRemove() {\n            if (!hasDOM) {\n              return;\n            }\n\n            if (typeof Element.prototype.remove !== 'undefined') {\n              return;\n            }\n\n            Element.prototype.remove = function () {\n              if (this.parentNode) {\n                this.parentNode.removeChild(this);\n              }\n            };\n          })();\n\n          (function checkPromise() {\n            if (globalScope.Promise) {\n              if (typeof globalScope.Promise.all !== 'function') {\n                globalScope.Promise.all = function (iterable) {\n                  var count = 0,\n                      results = [],\n                      resolve,\n                      reject;\n                  var promise = new globalScope.Promise(function (resolve_, reject_) {\n                    resolve = resolve_;\n                    reject = reject_;\n                  });\n                  iterable.forEach(function (p, i) {\n                    count++;\n                    p.then(function (result) {\n                      results[i] = result;\n                      count--;\n\n                      if (count === 0) {\n                        resolve(results);\n                      }\n                    }, reject);\n                  });\n\n                  if (count === 0) {\n                    resolve(results);\n                  }\n\n                  return promise;\n                };\n              }\n\n              if (typeof globalScope.Promise.resolve !== 'function') {\n                globalScope.Promise.resolve = function (value) {\n                  return new globalScope.Promise(function (resolve) {\n                    resolve(value);\n                  });\n                };\n              }\n\n              if (typeof globalScope.Promise.reject !== 'function') {\n                globalScope.Promise.reject = function (reason) {\n                  return new globalScope.Promise(function (resolve, reject) {\n                    reject(reason);\n                  });\n                };\n              }\n\n              if (typeof globalScope.Promise.prototype.catch !== 'function') {\n                globalScope.Promise.prototype.catch = function (onReject) {\n                  return globalScope.Promise.prototype.then(undefined, onReject);\n                };\n              }\n\n              return;\n            }\n\n            var STATUS_PENDING = 0;\n            var STATUS_RESOLVED = 1;\n            var STATUS_REJECTED = 2;\n            var REJECTION_TIMEOUT = 500;\n            var HandlerManager = {\n              handlers: [],\n              running: false,\n              unhandledRejections: [],\n              pendingRejectionCheck: false,\n              scheduleHandlers: function scheduleHandlers(promise) {\n                if (promise._status === STATUS_PENDING) {\n                  return;\n                }\n\n                this.handlers = this.handlers.concat(promise._handlers);\n                promise._handlers = [];\n\n                if (this.running) {\n                  return;\n                }\n\n                this.running = true;\n                setTimeout(this.runHandlers.bind(this), 0);\n              },\n              runHandlers: function runHandlers() {\n                var RUN_TIMEOUT = 1;\n                var timeoutAt = Date.now() + RUN_TIMEOUT;\n\n                while (this.handlers.length > 0) {\n                  var handler = this.handlers.shift();\n                  var nextStatus = handler.thisPromise._status;\n                  var nextValue = handler.thisPromise._value;\n\n                  try {\n                    if (nextStatus === STATUS_RESOLVED) {\n                      if (typeof handler.onResolve === 'function') {\n                        nextValue = handler.onResolve(nextValue);\n                      }\n                    } else if (typeof handler.onReject === 'function') {\n                      nextValue = handler.onReject(nextValue);\n                      nextStatus = STATUS_RESOLVED;\n\n                      if (handler.thisPromise._unhandledRejection) {\n                        this.removeUnhandeledRejection(handler.thisPromise);\n                      }\n                    }\n                  } catch (ex) {\n                    nextStatus = STATUS_REJECTED;\n                    nextValue = ex;\n                  }\n\n                  handler.nextPromise._updateStatus(nextStatus, nextValue);\n\n                  if (Date.now() >= timeoutAt) {\n                    break;\n                  }\n                }\n\n                if (this.handlers.length > 0) {\n                  setTimeout(this.runHandlers.bind(this), 0);\n                  return;\n                }\n\n                this.running = false;\n              },\n              addUnhandledRejection: function addUnhandledRejection(promise) {\n                this.unhandledRejections.push({\n                  promise: promise,\n                  time: Date.now()\n                });\n                this.scheduleRejectionCheck();\n              },\n              removeUnhandeledRejection: function removeUnhandeledRejection(promise) {\n                promise._unhandledRejection = false;\n\n                for (var i = 0; i < this.unhandledRejections.length; i++) {\n                  if (this.unhandledRejections[i].promise === promise) {\n                    this.unhandledRejections.splice(i);\n                    i--;\n                  }\n                }\n              },\n              scheduleRejectionCheck: function scheduleRejectionCheck() {\n                var _this = this;\n\n                if (this.pendingRejectionCheck) {\n                  return;\n                }\n\n                this.pendingRejectionCheck = true;\n                setTimeout(function () {\n                  _this.pendingRejectionCheck = false;\n                  var now = Date.now();\n\n                  for (var i = 0; i < _this.unhandledRejections.length; i++) {\n                    if (now - _this.unhandledRejections[i].time > REJECTION_TIMEOUT) {\n                      var unhandled = _this.unhandledRejections[i].promise._value;\n                      var msg = 'Unhandled rejection: ' + unhandled;\n\n                      if (unhandled.stack) {\n                        msg += '\\n' + unhandled.stack;\n                      }\n\n                      try {\n                        throw new Error(msg);\n                      } catch (_) {\n                        console.warn(msg);\n                      }\n\n                      _this.unhandledRejections.splice(i);\n\n                      i--;\n                    }\n                  }\n\n                  if (_this.unhandledRejections.length) {\n                    _this.scheduleRejectionCheck();\n                  }\n                }, REJECTION_TIMEOUT);\n              }\n            };\n\n            var Promise = function Promise(resolver) {\n              this._status = STATUS_PENDING;\n              this._handlers = [];\n\n              try {\n                resolver.call(this, this._resolve.bind(this), this._reject.bind(this));\n              } catch (e) {\n                this._reject(e);\n              }\n            };\n\n            Promise.all = function Promise_all(promises) {\n              var resolveAll, rejectAll;\n              var deferred = new Promise(function (resolve, reject) {\n                resolveAll = resolve;\n                rejectAll = reject;\n              });\n              var unresolved = promises.length;\n              var results = [];\n\n              if (unresolved === 0) {\n                resolveAll(results);\n                return deferred;\n              }\n\n              function reject(reason) {\n                if (deferred._status === STATUS_REJECTED) {\n                  return;\n                }\n\n                results = [];\n                rejectAll(reason);\n              }\n\n              for (var i = 0, ii = promises.length; i < ii; ++i) {\n                var promise = promises[i];\n\n                var resolve = function (i) {\n                  return function (value) {\n                    if (deferred._status === STATUS_REJECTED) {\n                      return;\n                    }\n\n                    results[i] = value;\n                    unresolved--;\n\n                    if (unresolved === 0) {\n                      resolveAll(results);\n                    }\n                  };\n                }(i);\n\n                if (Promise.isPromise(promise)) {\n                  promise.then(resolve, reject);\n                } else {\n                  resolve(promise);\n                }\n              }\n\n              return deferred;\n            };\n\n            Promise.isPromise = function Promise_isPromise(value) {\n              return value && typeof value.then === 'function';\n            };\n\n            Promise.resolve = function Promise_resolve(value) {\n              return new Promise(function (resolve) {\n                resolve(value);\n              });\n            };\n\n            Promise.reject = function Promise_reject(reason) {\n              return new Promise(function (resolve, reject) {\n                reject(reason);\n              });\n            };\n\n            Promise.prototype = {\n              _status: null,\n              _value: null,\n              _handlers: null,\n              _unhandledRejection: null,\n              _updateStatus: function Promise__updateStatus(status, value) {\n                if (this._status === STATUS_RESOLVED || this._status === STATUS_REJECTED) {\n                  return;\n                }\n\n                if (status === STATUS_RESOLVED && Promise.isPromise(value)) {\n                  value.then(this._updateStatus.bind(this, STATUS_RESOLVED), this._updateStatus.bind(this, STATUS_REJECTED));\n                  return;\n                }\n\n                this._status = status;\n                this._value = value;\n\n                if (status === STATUS_REJECTED && this._handlers.length === 0) {\n                  this._unhandledRejection = true;\n                  HandlerManager.addUnhandledRejection(this);\n                }\n\n                HandlerManager.scheduleHandlers(this);\n              },\n              _resolve: function Promise_resolve(value) {\n                this._updateStatus(STATUS_RESOLVED, value);\n              },\n              _reject: function Promise_reject(reason) {\n                this._updateStatus(STATUS_REJECTED, reason);\n              },\n              then: function Promise_then(onResolve, onReject) {\n                var nextPromise = new Promise(function (resolve, reject) {\n                  this.resolve = resolve;\n                  this.reject = reject;\n                });\n\n                this._handlers.push({\n                  thisPromise: this,\n                  onResolve: onResolve,\n                  onReject: onReject,\n                  nextPromise: nextPromise\n                });\n\n                HandlerManager.scheduleHandlers(this);\n                return nextPromise;\n              },\n              catch: function Promise_catch(onReject) {\n                return this.then(undefined, onReject);\n              }\n            };\n            globalScope.Promise = Promise;\n          })();\n\n          (function checkWeakMap() {\n            if (globalScope.WeakMap) {\n              return;\n            }\n\n            var id = 0;\n\n            function WeakMap() {\n              this.id = '$weakmap' + id++;\n            }\n\n            WeakMap.prototype = {\n              has: function has(obj) {\n                return !!Object.getOwnPropertyDescriptor(obj, this.id);\n              },\n              get: function get(obj, defaultValue) {\n                return this.has(obj) ? obj[this.id] : defaultValue;\n              },\n              set: function set(obj, value) {\n                Object.defineProperty(obj, this.id, {\n                  value: value,\n                  enumerable: false,\n                  configurable: true\n                });\n              },\n              delete: function _delete(obj) {\n                delete obj[this.id];\n              }\n            };\n            globalScope.WeakMap = WeakMap;\n          })();\n\n          (function checkURLConstructor() {\n            var hasWorkingUrl = false;\n\n            try {\n              if (typeof URL === 'function' && _typeof(URL.prototype) === 'object' && 'origin' in URL.prototype) {\n                var u = new URL('b', 'http://a');\n                u.pathname = 'c%20d';\n                hasWorkingUrl = u.href === 'http://a/c%20d';\n              }\n            } catch (e) {}\n\n            if (hasWorkingUrl) {\n              return;\n            }\n\n            var relative = Object.create(null);\n            relative['ftp'] = 21;\n            relative['file'] = 0;\n            relative['gopher'] = 70;\n            relative['http'] = 80;\n            relative['https'] = 443;\n            relative['ws'] = 80;\n            relative['wss'] = 443;\n            var relativePathDotMapping = Object.create(null);\n            relativePathDotMapping['%2e'] = '.';\n            relativePathDotMapping['.%2e'] = '..';\n            relativePathDotMapping['%2e.'] = '..';\n            relativePathDotMapping['%2e%2e'] = '..';\n\n            function isRelativeScheme(scheme) {\n              return relative[scheme] !== undefined;\n            }\n\n            function invalid() {\n              clear.call(this);\n              this._isInvalid = true;\n            }\n\n            function IDNAToASCII(h) {\n              if (h === '') {\n                invalid.call(this);\n              }\n\n              return h.toLowerCase();\n            }\n\n            function percentEscape(c) {\n              var unicode = c.charCodeAt(0);\n\n              if (unicode > 0x20 && unicode < 0x7F && [0x22, 0x23, 0x3C, 0x3E, 0x3F, 0x60].indexOf(unicode) === -1) {\n                return c;\n              }\n\n              return encodeURIComponent(c);\n            }\n\n            function percentEscapeQuery(c) {\n              var unicode = c.charCodeAt(0);\n\n              if (unicode > 0x20 && unicode < 0x7F && [0x22, 0x23, 0x3C, 0x3E, 0x60].indexOf(unicode) === -1) {\n                return c;\n              }\n\n              return encodeURIComponent(c);\n            }\n\n            var EOF,\n                ALPHA = /[a-zA-Z]/,\n                ALPHANUMERIC = /[a-zA-Z0-9\\+\\-\\.]/;\n\n            function parse(input, stateOverride, base) {\n              function err(message) {\n                errors.push(message);\n              }\n\n              var state = stateOverride || 'scheme start',\n                  cursor = 0,\n                  buffer = '',\n                  seenAt = false,\n                  seenBracket = false,\n                  errors = [];\n\n              loop: while ((input[cursor - 1] !== EOF || cursor === 0) && !this._isInvalid) {\n                var c = input[cursor];\n\n                switch (state) {\n                  case 'scheme start':\n                    if (c && ALPHA.test(c)) {\n                      buffer += c.toLowerCase();\n                      state = 'scheme';\n                    } else if (!stateOverride) {\n                      buffer = '';\n                      state = 'no scheme';\n                      continue;\n                    } else {\n                      err('Invalid scheme.');\n                      break loop;\n                    }\n\n                    break;\n\n                  case 'scheme':\n                    if (c && ALPHANUMERIC.test(c)) {\n                      buffer += c.toLowerCase();\n                    } else if (c === ':') {\n                      this._scheme = buffer;\n                      buffer = '';\n\n                      if (stateOverride) {\n                        break loop;\n                      }\n\n                      if (isRelativeScheme(this._scheme)) {\n                        this._isRelative = true;\n                      }\n\n                      if (this._scheme === 'file') {\n                        state = 'relative';\n                      } else if (this._isRelative && base && base._scheme === this._scheme) {\n                        state = 'relative or authority';\n                      } else if (this._isRelative) {\n                        state = 'authority first slash';\n                      } else {\n                        state = 'scheme data';\n                      }\n                    } else if (!stateOverride) {\n                      buffer = '';\n                      cursor = 0;\n                      state = 'no scheme';\n                      continue;\n                    } else if (c === EOF) {\n                      break loop;\n                    } else {\n                      err('Code point not allowed in scheme: ' + c);\n                      break loop;\n                    }\n\n                    break;\n\n                  case 'scheme data':\n                    if (c === '?') {\n                      this._query = '?';\n                      state = 'query';\n                    } else if (c === '#') {\n                      this._fragment = '#';\n                      state = 'fragment';\n                    } else {\n                      if (c !== EOF && c !== '\\t' && c !== '\\n' && c !== '\\r') {\n                        this._schemeData += percentEscape(c);\n                      }\n                    }\n\n                    break;\n\n                  case 'no scheme':\n                    if (!base || !isRelativeScheme(base._scheme)) {\n                      err('Missing scheme.');\n                      invalid.call(this);\n                    } else {\n                      state = 'relative';\n                      continue;\n                    }\n\n                    break;\n\n                  case 'relative or authority':\n                    if (c === '/' && input[cursor + 1] === '/') {\n                      state = 'authority ignore slashes';\n                    } else {\n                      err('Expected /, got: ' + c);\n                      state = 'relative';\n                      continue;\n                    }\n\n                    break;\n\n                  case 'relative':\n                    this._isRelative = true;\n\n                    if (this._scheme !== 'file') {\n                      this._scheme = base._scheme;\n                    }\n\n                    if (c === EOF) {\n                      this._host = base._host;\n                      this._port = base._port;\n                      this._path = base._path.slice();\n                      this._query = base._query;\n                      this._username = base._username;\n                      this._password = base._password;\n                      break loop;\n                    } else if (c === '/' || c === '\\\\') {\n                      if (c === '\\\\') {\n                        err('\\\\ is an invalid code point.');\n                      }\n\n                      state = 'relative slash';\n                    } else if (c === '?') {\n                      this._host = base._host;\n                      this._port = base._port;\n                      this._path = base._path.slice();\n                      this._query = '?';\n                      this._username = base._username;\n                      this._password = base._password;\n                      state = 'query';\n                    } else if (c === '#') {\n                      this._host = base._host;\n                      this._port = base._port;\n                      this._path = base._path.slice();\n                      this._query = base._query;\n                      this._fragment = '#';\n                      this._username = base._username;\n                      this._password = base._password;\n                      state = 'fragment';\n                    } else {\n                      var nextC = input[cursor + 1];\n                      var nextNextC = input[cursor + 2];\n\n                      if (this._scheme !== 'file' || !ALPHA.test(c) || nextC !== ':' && nextC !== '|' || nextNextC !== EOF && nextNextC !== '/' && nextNextC !== '\\\\' && nextNextC !== '?' && nextNextC !== '#') {\n                        this._host = base._host;\n                        this._port = base._port;\n                        this._username = base._username;\n                        this._password = base._password;\n                        this._path = base._path.slice();\n\n                        this._path.pop();\n                      }\n\n                      state = 'relative path';\n                      continue;\n                    }\n\n                    break;\n\n                  case 'relative slash':\n                    if (c === '/' || c === '\\\\') {\n                      if (c === '\\\\') {\n                        err('\\\\ is an invalid code point.');\n                      }\n\n                      if (this._scheme === 'file') {\n                        state = 'file host';\n                      } else {\n                        state = 'authority ignore slashes';\n                      }\n                    } else {\n                      if (this._scheme !== 'file') {\n                        this._host = base._host;\n                        this._port = base._port;\n                        this._username = base._username;\n                        this._password = base._password;\n                      }\n\n                      state = 'relative path';\n                      continue;\n                    }\n\n                    break;\n\n                  case 'authority first slash':\n                    if (c === '/') {\n                      state = 'authority second slash';\n                    } else {\n                      err('Expected \\'/\\', got: ' + c);\n                      state = 'authority ignore slashes';\n                      continue;\n                    }\n\n                    break;\n\n                  case 'authority second slash':\n                    state = 'authority ignore slashes';\n\n                    if (c !== '/') {\n                      err('Expected \\'/\\', got: ' + c);\n                      continue;\n                    }\n\n                    break;\n\n                  case 'authority ignore slashes':\n                    if (c !== '/' && c !== '\\\\') {\n                      state = 'authority';\n                      continue;\n                    } else {\n                      err('Expected authority, got: ' + c);\n                    }\n\n                    break;\n\n                  case 'authority':\n                    if (c === '@') {\n                      if (seenAt) {\n                        err('@ already seen.');\n                        buffer += '%40';\n                      }\n\n                      seenAt = true;\n\n                      for (var i = 0; i < buffer.length; i++) {\n                        var cp = buffer[i];\n\n                        if (cp === '\\t' || cp === '\\n' || cp === '\\r') {\n                          err('Invalid whitespace in authority.');\n                          continue;\n                        }\n\n                        if (cp === ':' && this._password === null) {\n                          this._password = '';\n                          continue;\n                        }\n\n                        var tempC = percentEscape(cp);\n\n                        if (this._password !== null) {\n                          this._password += tempC;\n                        } else {\n                          this._username += tempC;\n                        }\n                      }\n\n                      buffer = '';\n                    } else if (c === EOF || c === '/' || c === '\\\\' || c === '?' || c === '#') {\n                      cursor -= buffer.length;\n                      buffer = '';\n                      state = 'host';\n                      continue;\n                    } else {\n                      buffer += c;\n                    }\n\n                    break;\n\n                  case 'file host':\n                    if (c === EOF || c === '/' || c === '\\\\' || c === '?' || c === '#') {\n                      if (buffer.length === 2 && ALPHA.test(buffer[0]) && (buffer[1] === ':' || buffer[1] === '|')) {\n                        state = 'relative path';\n                      } else if (buffer.length === 0) {\n                        state = 'relative path start';\n                      } else {\n                        this._host = IDNAToASCII.call(this, buffer);\n                        buffer = '';\n                        state = 'relative path start';\n                      }\n\n                      continue;\n                    } else if (c === '\\t' || c === '\\n' || c === '\\r') {\n                      err('Invalid whitespace in file host.');\n                    } else {\n                      buffer += c;\n                    }\n\n                    break;\n\n                  case 'host':\n                  case 'hostname':\n                    if (c === ':' && !seenBracket) {\n                      this._host = IDNAToASCII.call(this, buffer);\n                      buffer = '';\n                      state = 'port';\n\n                      if (stateOverride === 'hostname') {\n                        break loop;\n                      }\n                    } else if (c === EOF || c === '/' || c === '\\\\' || c === '?' || c === '#') {\n                      this._host = IDNAToASCII.call(this, buffer);\n                      buffer = '';\n                      state = 'relative path start';\n\n                      if (stateOverride) {\n                        break loop;\n                      }\n\n                      continue;\n                    } else if (c !== '\\t' && c !== '\\n' && c !== '\\r') {\n                      if (c === '[') {\n                        seenBracket = true;\n                      } else if (c === ']') {\n                        seenBracket = false;\n                      }\n\n                      buffer += c;\n                    } else {\n                      err('Invalid code point in host/hostname: ' + c);\n                    }\n\n                    break;\n\n                  case 'port':\n                    if (/[0-9]/.test(c)) {\n                      buffer += c;\n                    } else if (c === EOF || c === '/' || c === '\\\\' || c === '?' || c === '#' || stateOverride) {\n                      if (buffer !== '') {\n                        var temp = parseInt(buffer, 10);\n\n                        if (temp !== relative[this._scheme]) {\n                          this._port = temp + '';\n                        }\n\n                        buffer = '';\n                      }\n\n                      if (stateOverride) {\n                        break loop;\n                      }\n\n                      state = 'relative path start';\n                      continue;\n                    } else if (c === '\\t' || c === '\\n' || c === '\\r') {\n                      err('Invalid code point in port: ' + c);\n                    } else {\n                      invalid.call(this);\n                    }\n\n                    break;\n\n                  case 'relative path start':\n                    if (c === '\\\\') {\n                      err('\\'\\\\\\' not allowed in path.');\n                    }\n\n                    state = 'relative path';\n\n                    if (c !== '/' && c !== '\\\\') {\n                      continue;\n                    }\n\n                    break;\n\n                  case 'relative path':\n                    if (c === EOF || c === '/' || c === '\\\\' || !stateOverride && (c === '?' || c === '#')) {\n                      if (c === '\\\\') {\n                        err('\\\\ not allowed in relative path.');\n                      }\n\n                      var tmp;\n\n                      if (tmp = relativePathDotMapping[buffer.toLowerCase()]) {\n                        buffer = tmp;\n                      }\n\n                      if (buffer === '..') {\n                        this._path.pop();\n\n                        if (c !== '/' && c !== '\\\\') {\n                          this._path.push('');\n                        }\n                      } else if (buffer === '.' && c !== '/' && c !== '\\\\') {\n                        this._path.push('');\n                      } else if (buffer !== '.') {\n                        if (this._scheme === 'file' && this._path.length === 0 && buffer.length === 2 && ALPHA.test(buffer[0]) && buffer[1] === '|') {\n                          buffer = buffer[0] + ':';\n                        }\n\n                        this._path.push(buffer);\n                      }\n\n                      buffer = '';\n\n                      if (c === '?') {\n                        this._query = '?';\n                        state = 'query';\n                      } else if (c === '#') {\n                        this._fragment = '#';\n                        state = 'fragment';\n                      }\n                    } else if (c !== '\\t' && c !== '\\n' && c !== '\\r') {\n                      buffer += percentEscape(c);\n                    }\n\n                    break;\n\n                  case 'query':\n                    if (!stateOverride && c === '#') {\n                      this._fragment = '#';\n                      state = 'fragment';\n                    } else if (c !== EOF && c !== '\\t' && c !== '\\n' && c !== '\\r') {\n                      this._query += percentEscapeQuery(c);\n                    }\n\n                    break;\n\n                  case 'fragment':\n                    if (c !== EOF && c !== '\\t' && c !== '\\n' && c !== '\\r') {\n                      this._fragment += c;\n                    }\n\n                    break;\n                }\n\n                cursor++;\n              }\n            }\n\n            function clear() {\n              this._scheme = '';\n              this._schemeData = '';\n              this._username = '';\n              this._password = null;\n              this._host = '';\n              this._port = '';\n              this._path = [];\n              this._query = '';\n              this._fragment = '';\n              this._isInvalid = false;\n              this._isRelative = false;\n            }\n\n            function JURL(url, base) {\n              if (base !== undefined && !(base instanceof JURL)) {\n                base = new JURL(String(base));\n              }\n\n              this._url = url;\n              clear.call(this);\n              var input = url.replace(/^[ \\t\\r\\n\\f]+|[ \\t\\r\\n\\f]+$/g, '');\n              parse.call(this, input, null, base);\n            }\n\n            JURL.prototype = {\n              toString: function toString() {\n                return this.href;\n              },\n\n              get href() {\n                if (this._isInvalid) {\n                  return this._url;\n                }\n\n                var authority = '';\n\n                if (this._username !== '' || this._password !== null) {\n                  authority = this._username + (this._password !== null ? ':' + this._password : '') + '@';\n                }\n\n                return this.protocol + (this._isRelative ? '//' + authority + this.host : '') + this.pathname + this._query + this._fragment;\n              },\n\n              set href(href) {\n                clear.call(this);\n                parse.call(this, href);\n              },\n\n              get protocol() {\n                return this._scheme + ':';\n              },\n\n              set protocol(protocol) {\n                if (this._isInvalid) {\n                  return;\n                }\n\n                parse.call(this, protocol + ':', 'scheme start');\n              },\n\n              get host() {\n                return this._isInvalid ? '' : this._port ? this._host + ':' + this._port : this._host;\n              },\n\n              set host(host) {\n                if (this._isInvalid || !this._isRelative) {\n                  return;\n                }\n\n                parse.call(this, host, 'host');\n              },\n\n              get hostname() {\n                return this._host;\n              },\n\n              set hostname(hostname) {\n                if (this._isInvalid || !this._isRelative) {\n                  return;\n                }\n\n                parse.call(this, hostname, 'hostname');\n              },\n\n              get port() {\n                return this._port;\n              },\n\n              set port(port) {\n                if (this._isInvalid || !this._isRelative) {\n                  return;\n                }\n\n                parse.call(this, port, 'port');\n              },\n\n              get pathname() {\n                return this._isInvalid ? '' : this._isRelative ? '/' + this._path.join('/') : this._schemeData;\n              },\n\n              set pathname(pathname) {\n                if (this._isInvalid || !this._isRelative) {\n                  return;\n                }\n\n                this._path = [];\n                parse.call(this, pathname, 'relative path start');\n              },\n\n              get search() {\n                return this._isInvalid || !this._query || this._query === '?' ? '' : this._query;\n              },\n\n              set search(search) {\n                if (this._isInvalid || !this._isRelative) {\n                  return;\n                }\n\n                this._query = '?';\n\n                if (search[0] === '?') {\n                  search = search.slice(1);\n                }\n\n                parse.call(this, search, 'query');\n              },\n\n              get hash() {\n                return this._isInvalid || !this._fragment || this._fragment === '#' ? '' : this._fragment;\n              },\n\n              set hash(hash) {\n                if (this._isInvalid) {\n                  return;\n                }\n\n                this._fragment = '#';\n\n                if (hash[0] === '#') {\n                  hash = hash.slice(1);\n                }\n\n                parse.call(this, hash, 'fragment');\n              },\n\n              get origin() {\n                var host;\n\n                if (this._isInvalid || !this._scheme) {\n                  return '';\n                }\n\n                switch (this._scheme) {\n                  case 'data':\n                  case 'file':\n                  case 'javascript':\n                  case 'mailto':\n                    return 'null';\n                }\n\n                host = this.host;\n\n                if (!host) {\n                  return '';\n                }\n\n                return this._scheme + '://' + host;\n              }\n\n            };\n            var OriginalURL = globalScope.URL;\n\n            if (OriginalURL) {\n              JURL.createObjectURL = function (blob) {\n                return OriginalURL.createObjectURL.apply(OriginalURL, arguments);\n              };\n\n              JURL.revokeObjectURL = function (url) {\n                OriginalURL.revokeObjectURL(url);\n              };\n            }\n\n            globalScope.URL = JURL;\n          })();\n        }\n        /* WEBPACK VAR INJECTION */\n\n      }).call(exports, __w_pdfjs_require__(6));\n      /***/\n    }\n    /******/\n    ])\n  );\n});","map":{"version":3,"mappings":"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","names":["module","define","exports","root","i","l","modules","__w_pdfjs_require__","Object","configurable","enumerable","get","globalScope","window","global","self","undefined","FONT_IDENTITY_MATRIX","NativeImageDecoding","NONE","DECODE","DISPLAY","TextRenderingMode","FILL","STROKE","FILL_STROKE","INVISIBLE","FILL_ADD_TO_PATH","STROKE_ADD_TO_PATH","FILL_STROKE_ADD_TO_PATH","ADD_TO_PATH","FILL_STROKE_MASK","ADD_TO_PATH_FLAG","ImageKind","GRAYSCALE_1BPP","RGB_24BPP","RGBA_32BPP","AnnotationType","TEXT","LINK","FREETEXT","LINE","SQUARE","CIRCLE","POLYGON","POLYLINE","HIGHLIGHT","UNDERLINE","SQUIGGLY","STRIKEOUT","STAMP","CARET","INK","POPUP","FILEATTACHMENT","SOUND","MOVIE","WIDGET","SCREEN","PRINTERMARK","TRAPNET","WATERMARK","THREED","REDACT","AnnotationFlag","HIDDEN","PRINT","NOZOOM","NOROTATE","NOVIEW","READONLY","LOCKED","TOGGLENOVIEW","LOCKEDCONTENTS","AnnotationFieldFlag","REQUIRED","NOEXPORT","MULTILINE","PASSWORD","NOTOGGLETOOFF","RADIO","PUSHBUTTON","COMBO","EDIT","SORT","FILESELECT","MULTISELECT","DONOTSPELLCHECK","DONOTSCROLL","COMB","RICHTEXT","RADIOSINUNISON","COMMITONSELCHANGE","AnnotationBorderStyleType","SOLID","DASHED","BEVELED","INSET","StreamType","UNKNOWN","FLATE","LZW","DCT","JPX","JBIG","A85","AHX","CCF","RL","FontType","TYPE1","TYPE1C","CIDFONTTYPE0","CIDFONTTYPE0C","TRUETYPE","CIDFONTTYPE2","TYPE3","OPENTYPE","TYPE0","MMTYPE1","VERBOSITY_LEVELS","errors","warnings","infos","CMapCompressionType","BINARY","STREAM","OPS","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","save","restore","transform","moveTo","lineTo","curveTo","curveTo2","curveTo3","closePath","rectangle","stroke","closeStroke","fill","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotations","endAnnotations","beginAnnotation","endAnnotation","paintJpegXObject","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","verbosity","setVerbosityLevel","level","getVerbosityLevel","info","msg","console","log","warn","deprecated","details","error","backtrace","Error","e","stack","split","slice","join","assert","cond","UNSUPPORTED_FEATURES","unknown","forms","javaScript","smask","shadingPattern","font","isSameOrigin","baseUrl","otherUrl","base","URL","origin","other","isValidProtocol","url","protocol","createValidAbsoluteUrl","absoluteUrl","ex","shadow","obj","prop","value","defineProperty","writable","getLookupTableFactory","initializer","lookup","create","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","PasswordException","PasswordExceptionClosure","code","name","message","prototype","constructor","UnknownErrorException","UnknownErrorExceptionClosure","InvalidPDFException","InvalidPDFExceptionClosure","MissingPDFException","MissingPDFExceptionClosure","UnexpectedResponseException","UnexpectedResponseExceptionClosure","status","NotImplementedException","NotImplementedExceptionClosure","MissingDataException","MissingDataExceptionClosure","begin","end","XRefParseException","XRefParseExceptionClosure","NullCharactersRegExp","removeNullCharacters","str","replace","bytesToString","bytes","_typeof","length","MAX_ARGUMENT_COUNT","String","fromCharCode","apply","strBuf","chunkEnd","Math","min","chunk","subarray","push","stringToBytes","Uint8Array","charCodeAt","arrayByteLength","arr","byteLength","arraysToBytes","resultLength","ii","item","itemLength","pos","data","set","string32","log2","x","n","readInt8","start","readUint16","offset","readUint32","isLittleEndian","buffer8","view32","Uint32Array","buffer","isEvalSupported","Function","IDENTITY_MATRIX","Util","UtilClosure","rgbBuf","makeCssRgb","Util_makeCssRgb","r","g","b","Util_transform","m1","m2","applyTransform","Util_applyTransform","p","m","xt","yt","applyInverseTransform","Util_applyInverseTransform","d","getAxialAlignedBoundingBox","Util_getAxialAlignedBoundingBox","p1","p2","p3","p4","max","inverseTransform","Util_inverseTransform","apply3dTransform","Util_apply3dTransform","v","singularValueDecompose2dScale","Util_singularValueDecompose2dScale","transpose","a","c","first","second","sqrt","sx","sy","normalizeRect","Util_normalizeRect","rect","intersect","Util_intersect","rect1","rect2","compare","orderedX","sort","orderedY","result","sign","Util_sign","num","ROMAN_NUMBER_MAP","toRoman","Util_toRoman","number","lowerCase","isInt","romanBuf","romanStr","toLowerCase","appendToArray","Util_appendToArray","arr1","arr2","Array","prependToArray","Util_prependToArray","unshift","extendObj","obj1","obj2","key","getInheritableProperty","Util_getInheritableProperty","dict","getArray","has","inherit","Util_inherit","sub","loadScript","Util_loadScript","src","callback","script","document","createElement","loaded","setAttribute","onload","getElementsByTagName","appendChild","PageViewport","PageViewportClosure","viewBox","scale","rotation","offsetX","offsetY","dontFlip","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","width","height","abs","fontScale","clone","PageViewPort_clone","args","convertToViewportPoint","PageViewport_convertToViewportPoint","y","convertToViewportRectangle","PageViewport_convertToViewportRectangle","tl","br","convertToPdfPoint","PageViewport_convertToPdfPoint","PDFStringTranslateTable","stringToPDFString","charAt","stringToUTF8String","decodeURIComponent","escape","utf8StringToString","unescape","encodeURIComponent","isEmptyObj","isBool","isNum","isString","isArray","isArrayBuffer","isSpace","ch","isNodeJS","__pdfjsdev_webpack__","process","createPromiseCapability","capability","promise","Promise","resolve","reject","StatTimer","StatTimerClosure","rpad","pad","started","times","enabled","time","StatTimer_time","Date","now","timeEnd","StatTimer_timeEnd","toString","StatTimer_toString","out","longest","span","duration","createBlob","contentType","Blob","type","createObjectURL","createObjectURLClosure","digits","forceDataSchema","blob","b1","b2","b3","d1","d2","d3","d4","MessageHandler","sourceName","targetName","comObj","callbackIndex","postMessageTransfers","callbacksCapabilities","ah","actionHandler","_onComObjOnMessage","event","_this","isReply","callbackId","action","then","call","postMessage","reason","addEventListener","on","actionName","handler","scope","send","transfers","sendWithPromise","destroy","removeEventListener","loadJpegStream","id","imageUrl","objs","img","Image","loadJpegStream_onloadClosure","onerror","loadJpegStream_onerrorClosure","DEFAULT_LINK_REL","DOMCanvasFactory","canvas","context","getContext","canvasAndContext","DOMCMapReaderFactory","_ref$baseUrl","isCompressed","_ref$isCompressed","request","XMLHttpRequest","open","responseType","onreadystatechange","readyState","DONE","response","responseText","cMapData","compressionType","_util","CustomStyle","CustomStyleClosure","prefixes","_cache","getProp","propName","element","arguments","documentElement","style","prefixed","uPropName","toUpperCase","setProp","RenderingCancelledException","LinkTarget","SELF","BLANK","PARENT","TOP","LinkTargetStringMap","addLinkAttributes","link","params","href","title","target","getDefaultSetting","rel","getFilenameFromUrl","anchor","indexOf","query","substring","lastIndexOf","globalSettings","PDFJS","pdfBug","disableAutoFetch","disableStream","disableRange","disableFontFace","disableCreateObjectURL","disableWebGL","cMapUrl","cMapPacked","workerPort","workerSrc","disableWorker","maxImageSize","imageResourcesPath","externalLinkTarget","externalLinkRel","enableStats","pdfjsNext","isExternalLinkTargetSet","isValidUrl","allowRelative","AnnotationElementFactory","AnnotationElementFactory_create","parameters","subtype","annotationType","LinkAnnotationElement","TextAnnotationElement","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","ChoiceWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","LineAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","AnnotationElementClosure","isRenderable","ignoreBorder","layer","page","viewport","linkService","downloadManager","renderInteractiveForms","container","_createContainer","AnnotationElement_createContainer","view","_dom_utils","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderBottomStyle","color","borderColor","left","top","_createPopup","AnnotationElement_createPopup","trigger","popupElement","PopupElement","contents","hideWrapper","popup","render","AnnotationElement_render","LinkAnnotationElementClosure","LinkAnnotationElement_render","className","newWindow","_bindNamedAction","_bindLink","dest","destination","getDestinationHash","onclick","navigateTo","getAnchorUrl","_this2","executeNamedAction","TextAnnotationElementClosure","hasPopup","TextAnnotationElement_render","image","alt","dataset","l10nId","l10nArgs","JSON","stringify","WidgetAnnotationElementClosure","WidgetAnnotationElement_render","TextWidgetAnnotationElementClosure","TEXT_ALIGNMENT","hasAppearance","fieldValue","TextWidgetAnnotationElement_render","multiLine","textContent","disabled","readOnly","maxLen","maxLength","comb","fieldWidth","combWidth","classList","add","letterSpacing","verticalAlign","display","fontRefName","commonObjs","getData","_setTextStyle","textAlignment","textAlign","TextWidgetAnnotationElement_setTextStyle","fontSize","direction","fontDirection","fontWeight","black","bold","fontStyle","italic","fontFamily","loadedName","fallbackName","CheckboxWidgetAnnotationElementClosure","CheckboxWidgetAnnotationElement_render","RadioButtonWidgetAnnotationElementClosure","RadioButtonWidgetAnnotationElement_render","fieldName","buttonValue","ChoiceWidgetAnnotationElementClosure","ChoiceWidgetAnnotationElement_render","selectElement","combo","size","options","multiSelect","multiple","option","optionElement","displayValue","exportValue","PopupAnnotationElementClosure","IGNORE_TYPES","PopupAnnotationElement_render","parentType","selector","parentId","parentElement","querySelector","parentLeft","parseFloat","parentWidth","PopupElementClosure","BACKGROUND_ENLIGHT","pinned","PopupElement_render","wrapper","hideElement","backgroundColor","_formatContents","_toggle","bind","_show","_hide","PopupElement_formatContents","lines","line","createTextNode","PopupElement_toggle","PopupElement_show","pin","hasAttribute","removeAttribute","zIndex","PopupElement_hide","unpin","LineAnnotationElementClosure","SVG_NS","LineAnnotationElement_render","svg","createElementNS","setAttributeNS","lineCoordinates","append","HighlightAnnotationElementClosure","HighlightAnnotationElement_render","UnderlineAnnotationElementClosure","UnderlineAnnotationElement_render","SquigglyAnnotationElementClosure","SquigglyAnnotationElement_render","StrikeOutAnnotationElementClosure","StrikeOutAnnotationElement_render","FileAttachmentAnnotationElementClosure","file","filename","content","onFileAttachmentAnnotation","FileAttachmentAnnotationElement_render","_download","FileAttachmentAnnotationElement_download","downloadData","AnnotationLayer","AnnotationLayerClosure","AnnotationLayer_render","annotationElementFactory","annotations","div","update","AnnotationLayer_update","DEFAULT_RANGE_CHUNK_SIZE","isWorkerDisabled","isPostMessageTransfersDisabled","pdfjsFilePath","currentScript","fakeWorkerFilesLoader","useRequireEnsure","require","ensure","requirejs","toUrl","dynamicLoaderSupported","load","worker","WorkerMessageHandler","getDocument","pdfDataRangeTransport","passwordCallback","progressCallback","task","PDFDocumentLoadingTask","PDFDataRangeTransport","initialData","abort","range","onPassword","onProgress","source","rangeTransport","location","pdfBytes","isNaN","rangeChunkSize","ignoreErrors","stopAtErrors","CMapReaderFactory","disableNativeImageDecoder","nativeImageDecoderSupport","PDFWorker","_worker","docId","destroyed","workerId","messageHandler","port","transport","WorkerTransport","_transport","catch","_capability","_fetchDocument","chunkedViewerLoading","docBaseUrl","PDFDocumentLoadingTaskClosure","nextDocumentId","onUnsupportedFeature","transportDestroyed","PDFDocumentLoadingTask_then","onFulfilled","onRejected","pdfDataRangeTransportClosure","_rangeListeners","_progressListeners","_progressiveReadListeners","_readyCapability","addRangeListener","PDFDataRangeTransport_addRangeListener","listener","addProgressListener","PDFDataRangeTransport_addProgressListener","addProgressiveReadListener","PDFDataRangeTransport_addProgressiveReadListener","onDataRange","PDFDataRangeTransport_onDataRange","listeners","onDataProgress","PDFDataRangeTransport_onDataProgress","onDataProgressiveRead","_this3","transportReady","PDFDataRangeTransport_transportReady","requestDataRange","PDFDataRangeTransport_requestDataRange","PDFDataRangeTransport_abort","PDFDocumentProxy","PDFDocumentProxyClosure","pdfInfo","loadingTask","numPages","fingerprint","getPage","PDFDocumentProxy_getPage","pageNumber","getPageIndex","PDFDocumentProxy_getPageIndex","ref","getDestinations","PDFDocumentProxy_getDestinations","getDestination","PDFDocumentProxy_getDestination","getPageLabels","PDFDocumentProxy_getPageLabels","getAttachments","PDFDocumentProxy_getAttachments","getJavaScript","PDFDocumentProxy_getJavaScript","getOutline","PDFDocumentProxy_getOutline","getMetadata","PDFDocumentProxy_getMetadata","PDFDocumentProxy_getData","getDownloadInfo","PDFDocumentProxy_getDownloadInfo","downloadInfoCapability","getStats","PDFDocumentProxy_getStats","cleanup","PDFDocumentProxy_cleanup","startCleanup","PDFDocumentProxy_destroy","PDFPageProxy","PDFPageProxyClosure","pageIndex","pageInfo","stats","PDFObjects","cleanupAfterRender","pendingCleanup","intentStates","rotate","userUnit","getViewport","PDFPageProxy_getViewport","getAnnotations","PDFPageProxy_getAnnotations","intent","annotationsPromise","annotationsIntent","PDFPageProxy_render","renderingIntent","canvasFactory","intentState","displayReadyCapability","receivingOperatorList","operatorList","fnArray","argsArray","lastChunk","complete","renderTasks","internalRenderTask","splice","_this4","_tryCleanup","InternalRenderTask","useRequestAnimationFrame","renderTask","continueCallback","onContinue","initializeGraphics","transparency","operatorListChanged","getOperatorList","PDFPageProxy_getOperatorList","opListReadCapability","opListTask","getTextContent","PDFPageProxy_getTextContent","normalizeWhitespace","combineTextItems","disableCombineTextItems","_destroy","PDFPageProxy_destroy","pageCache","waitOn","keys","forEach","renderCompleted","cancel","clear","all","PDFPageProxy_cleanup","PDFPageProxy_tryCleanup","some","_startRenderPage","PDFPageProxy_startRenderPage","_renderPageChunk","PDFPageProxy_renderPageChunk","operatorListChunk","LoopbackPort","defer","_classCallCheck","_listeners","_defer","_deferred","cloneValue","cloned","transferable","byteOffset","desc","getOwnPropertyDescriptor","getPrototypeOf","WeakMap","_this5","PDFWorkerClosure","nextFakeWorkerId","getWorkerSrc","fakeWorkerFilesLoadedCapability","setupFakeWorkerGlobal","loader","pdfjsDistBuildPdfWorker","createCDNWrapper","_port","_webWorker","_messageHandler","_initializeFromPort","_initialize","PDFWorker_initializeFromPort","PDFWorker_initialize","Worker","terminateEarly","onWorkerError","terminate","_this6","_setupFakeWorker","supportTypedArray","supportTransfers","sendTest","testObj","PDFWorker_setupFakeWorker","_this7","isTypedArraysPresent","Float32Array","workerHandler","setup","PDFWorker_destroy","WorkerTransportClosure","fontLoader","destroyCapability","_passwordCapability","pagePromises","setupMessageHandler","WorkerTransport_destroy","terminated","_this8","WorkerTransport_setupMessageHandler","transportDataRange","transportDoc","pdfDocument","transportPasswordRequest","exception","updatePassword","_this9","password","transportPasswordException","transportInvalidPDF","transportMissingPDF","transportUnexpectedResponse","transportUnknownError","transportPage","transportRender","transportObj","hasData","exportedData","exportedError","fontRegistry","FontInspector","registerFont","fontAdded","isEvalSuported","fontReady","_this10","pageProxy","imageData","MAX_IMAGE_SIZE_TO_STORE","transportDocProgress","total","transportError","pageNum","transportUnsupportedFeature","featureId","_UnsupportedManager","notify","components","rgbaLength","buf","tmpCanvas","tmpCtx","drawImage","getImageData","j","fetch","WorkerTransport_getData","WorkerTransport_getPage","_this11","WorkerTransport_getPageIndexByRef","WorkerTransport_getAnnotations","WorkerTransport_getDestinations","WorkerTransport_getDestination","WorkerTransport_getPageLabels","WorkerTransport_getAttachments","WorkerTransport_getJavaScript","WorkerTransport_getOutline","WorkerTransport_getMetadata","transportMetadata","results","metadata","WorkerTransport_getStats","WorkerTransport_startCleanup","_this12","PDFObjectsClosure","ensureObj","PDFObjects_ensureObj","objId","resolved","PDFObjects_get","PDFObjects_resolve","isResolved","PDFObjects_isResolved","PDFObjects_hasData","PDFObjects_getData","PDFObjects_clear","RenderTask","RenderTaskClosure","_internalRenderTask","RenderTask_cancel","RenderTask_then","InternalRenderTaskClosure","operatorListIdx","running","graphicsReadyCallback","graphicsReady","cancelled","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_next","InternalRenderTask_initializeGraphics","StepperManager","stepper","init","nextBreakPoint","getNextBreakPoint","gfx","canvasContext","imageLayer","beginDrawing","InternalRenderTask_cancel","InternalRenderTask_operatorListChanged","updateOperatorList","InternalRenderTask__continue","InternalRenderTask__scheduleNext","requestAnimationFrame","InternalRenderTask__next","executeOperatorList","endDrawing","UnsupportedManagerClosure","listen","cb","version","build","SVGGraphics","SVG_DEFAULTS","fillColor","convertImgDataToPng","convertImgDataToPngClosure","PNG_HEADER","CHUNK_WRAPPER_SIZE","crcTable","Int32Array","h","crc32","crc","writePngChunk","body","len","adler32","encode","imgData","kind","bitDepth","colorType","lineSize","literals","offsetLiterals","offsetBytes","ihdr","maxBlockLength","deflateBlocks","ceil","idat","pi","adler","pngLength","SVGExtraState","SVGExtraStateClosure","fontSizeScale","textMatrix","fontMatrix","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRise","strokeColor","fillAlpha","strokeAlpha","lineWidth","lineJoin","lineCap","miterLimit","dashArray","dashPhase","dependencies","activeClipUrl","clipGroup","maskId","SVGExtraState_clone","setCurrentPoint","SVGExtraState_setCurrentPoint","SVGGraphicsClosure","opListToTree","opList","opTree","tmp","opListLen","fn","items","pop","pf","s","toFixed","substr","pm","acos","PI","current","transformMatrix","transformStack","extraStack","pendingEOFill","embedFonts","embeddedFonts","cssStyle","NS","XML_NS","XLINK_NS","LINE_CAP_STYLES","LINE_JOIN_STYLES","clipCount","maskCount","SVGGraphics_save","old","SVGGraphics_restore","tgrp","group","SVGGraphics_group","executeOpTree","loadDependencies","SVGGraphics_loadDependencies","fnArrayLen","deps","nn","common","SVGGraphics_transform","f","getSVG","SVGGraphics_getSVG","svgElement","convertOpList","SVGGraphics_convertOpList","REVOPS","op","fnId","SVGGraphics_executeOpTree","opTreeLen","SVGGraphics_setWordSpacing","SVGGraphics_setCharSpacing","SVGGraphics_nextLine","SVGGraphics_setTextMatrix","lineMatrix","xcoords","tspan","txtElement","SVGGraphics_beginText","txtgrp","SVGGraphics_moveText","SVGGraphics_showText","glyphs","glyphsLength","vertical","widthAdvanceScale","glyph","character","fontChar","spacing","charWidth","map","_ensureTransformGroup","SVGGraphics_setLeadingMoveText","addFontStyle","SVGGraphics_addFontStyle","fontObj","defs","mimetype","SVGGraphics_setFont","SVGGraphics_endText","SVGGraphics_setLineWidth","SVGGraphics_setLineCap","SVGGraphics_setLineJoin","SVGGraphics_setMiterLimit","limit","SVGGraphics_setStrokeRGBColor","SVGGraphics_setFillRGBColor","SVGGraphics_setDash","SVGGraphics_constructPath","ops","path","opLength","xw","yh","SVGGraphics_endPath","SVGGraphics_clip","clipId","clipPath","clipElement","cloneNode","prev","SVGGraphics_closePath","getAttributeNS","SVGGraphics_setLeading","SVGGraphics_setTextRise","SVGGraphics_setHScale","SVGGraphics_setGState","states","state","SVGGraphics_fill","SVGGraphics_stroke","SVGGraphics_eoFill","SVGGraphics_fillStroke","SVGGraphics_eoFillStroke","SVGGraphics_closeStroke","SVGGraphics_closeFillStroke","SVGGraphics_paintSolidColorImageMask","SVGGraphics_paintJpegXObject","w","imgObj","imgEl","SVGGraphics_paintImageXObject","SVGGraphics_paintInlineImageXObject","mask","imgSrc","cliprect","SVGGraphics_paintImageMaskXObject","SVGGraphics_paintFormXObjectBegin","matrix","bbox","SVGGraphics_paintFormXObjectEnd","SVGGraphics_initialize","definitions","rootGroup","_ensureClipGroup","SVGGraphics_ensureClipGroup","SVGGraphics_ensureTransformGroup","renderTextLayer","renderTextLayerClosure","MAX_TEXT_DIVS_TO_RENDER","NonWhitespaceRegexp","isAllWhitespace","test","styleBuf","appendText","geom","styles","textDiv","textDivProperties","angle","canvasWidth","isWhitespace","originalTransform","paddingBottom","paddingLeft","paddingRight","paddingTop","_textDivs","_textDivProperties","tx","_viewport","atan2","fontName","fontHeight","fontAscent","ascent","descent","sin","cos","_enhanceTextSelection","angleCos","angleSin","divWidth","divHeight","_bounds","right","bottom","_canceled","textLayerFrag","_container","textDivs","textDivsLength","_renderingDone","mozOpaque","ctx","alpha","lastFontSize","lastFontFamily","measureText","expand","bounds","expanded","expandBounds","divProperties","points","ts","Float64Array","t","findPositiveMin","count","boxScale","boxes","box","x1","y1","x2","y2","index","x1New","x2New","expandBoundsLTR","fakeBoundary","Infinity","horizon","boundary","horizonPart","affectedBoundary","q","k","maxXNew","xNew","changedHorizon","lastBoundary","useBoundary","used","concat","TextLayerRenderTask","enhanceTextSelection","_textContent","_renderTimer","TextLayer_cancel","clearTimeout","_render","TextLayer_render","timeout","textItems","textStyles","setTimeout","expandTextDivs","TextLayer_expandTextDivs","expandDivs","padding","renderParameters","eval","fixMetadata","meta","codes","chars","Metadata","parser","DOMParser","parseFromString","Document","metaDocument","parse","Metadata_parse","doc","rdf","nodeName","firstChild","nextSibling","hasChildNodes","children","childNodes","entry","iLength","trim","Metadata_get","Metadata_has","WebGLUtils","WebGLUtilsClosure","loadShader","gl","shaderType","shader","createShader","shaderSource","compileShader","compiled","getShaderParameter","COMPILE_STATUS","errorMsg","getShaderInfoLog","createVertexShader","VERTEX_SHADER","createFragmentShader","FRAGMENT_SHADER","createProgram","shaders","program","attachShader","linkProgram","linked","getProgramParameter","LINK_STATUS","getProgramInfoLog","createTexture","textureId","activeTexture","texture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","UNSIGNED_BYTE","currentGL","currentCanvas","generateGL","premultipliedalpha","smaskVertexShaderCode","smaskFragmentShaderCode","smaskCache","initSmaskGL","vertexShader","fragmentShader","useProgram","cache","resolutionLocation","getUniformLocation","positionLocation","getAttribLocation","backdropLocation","subtypeLocation","texCoordLocation","texLayerLocation","texMaskLocation","texCoordBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","enableVertexAttribArray","vertexAttribPointer","FLOAT","uniform1i","composeSMask","properties","drawingBufferWidth","drawingBufferHeight","uniform2f","backdrop","uniform4f","TEXTURE0","maskTexture","TEXTURE1","clearColor","enable","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","COLOR_BUFFER_BIT","drawArrays","TRIANGLES","flush","deleteTexture","deleteBuffer","figuresVertexShaderCode","figuresFragmentShaderCode","figuresCache","initFiguresGL","scaleLocation","offsetLocation","colorLocation","drawFigures","figures","rows","coords","verticesPerRow","colors","coordsMap","colorsMap","pIndex","cIndex","figure","ps","cs","cols","row","col","jj","coordsBuffer","colorsBuffer","scaleX","scaleY","isEnabled","isWorker","PDFJS_createObjectURL","PDFJS_isLittleEndian","savedOpenExternalLinksInNewWindow","openExternalLinksInNewWindow","_api","hasCanvasTypedArrays","_annotation_layer","_text_layer","_metadata","_svg","UnsupportedManager","MIN_FONT_SIZE","MAX_FONT_SIZE","MAX_GROUP_SIZE","MIN_WIDTH_FACTOR","COMPILE_TYPE3_GLYPHS","MAX_SIZE_TO_COMPILE","FULL_CHUNK_HEIGHT","IsLittleEndianCached","addContextCurrentTransform","mozCurrentTransform","_originalSave","_originalRestore","_originalRotate","_originalScale","_originalTranslate","translate","_originalTransform","_originalSetTransform","setTransform","_transformMatrix","_transformStack","getCurrentTransform","getCurrentTransformInverse","ad_bc","bc_ad","ctxSave","ctxRestore","ctxTranslate","ctxScale","ctxTransform","ctxSetTransform","ctxRotate","cosValue","sinValue","CachedCanvases","CachedCanvasesClosure","getCanvas","CachedCanvases_getCanvas","trackTransform","canvasEntry","reset","compileType3Glyph","POINT_TO_PROCESS_LIMIT","j0","width1","POINT_TYPES","data0","elem","sum","steps","outlines","p0","pp","step","drawOutline","beginPath","o","CanvasExtraState","CanvasExtraStateClosure","alphaIsShape","textMatrixScale","textRenderingMode","patternFill","activeSMask","resumeSMaskCtx","CanvasExtraState_clone","CanvasExtraState_setCurrentPoint","CanvasGraphics","CanvasGraphicsClosure","EXECUTION_TIME","EXECUTION_STEPS","canvasCtx","stateStack","pendingClip","res","xobjs","groupStack","processingType3","baseTransform","baseTransformStack","groupLevel","smaskStack","smaskCounter","tempSMask","cachedCanvases","cachedGetSinglePixelWidth","putBinaryImageData","ImageData","putImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","createImageData","srcPos","destPos","thisChunkHeight","elemsInThisChunk","srcLength","dest32","dest32DataLength","fullSrcDiff","white","srcDiff","kEnd","kEndUnrolled","srcByte","putBinaryImageMask","copyCtxState","sourceCtx","destCtx","property","setLineDash","getLineDash","lineDashOffset","composeSMaskBackdrop","r0","g0","b0","alpha_","composeSMaskAlpha","maskData","layerData","transferMap","composeSMaskLuminosity","genericComposeSMask","maskCtx","layerCtx","hasBackdrop","composeFn","PIXELS_TO_PROCESS","chunkSize","chunkHeight","_webgl","composed","NORMAL_CLIP","EO_CLIP","CanvasGraphics_beginDrawing","fillStyle","fillRect","transparentCanvas","compositeCtx","beginLayout","CanvasGraphics_executeOperatorList","executionStartIdx","argsArrayLen","chunkOperations","endTime","breakIt","depObjId","objsPool","CanvasGraphics_endDrawing","endSMaskGroup","endLayout","CanvasGraphics_setLineWidth","CanvasGraphics_setLineCap","CanvasGraphics_setLineJoin","CanvasGraphics_setMiterLimit","CanvasGraphics_setDash","CanvasGraphics_setRenderingIntent","CanvasGraphics_setFlatness","flatness","CanvasGraphics_setGState","globalAlpha","globalCompositeOperation","suspendSMaskGroup","beginSMaskGroup","CanvasGraphics_beginSMaskGroup","drawnWidth","drawnHeight","cacheId","scratchCanvas","currentCtx","currentTransform","groupCtx","startTransformInverse","mozCurrentTransformInverse","CanvasGraphics_endSMaskGroup","deltaTransform","clearRect","resumeSMaskGroup","CanvasGraphics_save","CanvasGraphics_restore","CanvasGraphics_transform","CanvasGraphics_constructPath","getSinglePixelWidth","bezierCurveTo","CanvasGraphics_closePath","CanvasGraphics_stroke","consumePath","hasOwnProperty","strokeStyle","getPattern","CanvasGraphics_closeStroke","CanvasGraphics_fill","isPatternFill","needRestore","CanvasGraphics_eoFill","CanvasGraphics_fillStroke","CanvasGraphics_eoFillStroke","CanvasGraphics_closeFillStroke","CanvasGraphics_closeEOFillStroke","CanvasGraphics_endPath","CanvasGraphics_clip","CanvasGraphics_eoClip","CanvasGraphics_beginText","CanvasGraphics_endText","paths","pendingTextPaths","addToPath","CanvasGraphics_setCharSpacing","CanvasGraphics_setWordSpacing","CanvasGraphics_setHScale","CanvasGraphics_setLeading","CanvasGraphics_setFont","isType3Font","typeface","browserFontSize","rule","CanvasGraphics_setTextRenderingMode","mode","CanvasGraphics_setTextRise","rise","CanvasGraphics_moveText","CanvasGraphics_setLeadingMoveText","CanvasGraphics_setTextMatrix","CanvasGraphics_nextLine","paintChar","CanvasGraphics_paintChar","fillStrokeMode","isAddToPathSet","getPathGenerator","fillText","strokeText","isFontSubpixelAAEnabled","CanvasGraphics_showText","showType3Text","spacingDir","defaultVMetrics","simpleFillText","restoreNeeded","accent","scaledX","scaledY","scaledAccentX","scaledAccentY","vmetric","vx","vy","remeasure","measuredWidth","characterScaleX","isInFont","missingFile","CanvasGraphics_showType3Text","isTextInvisible","spacingLength","charProcOperatorList","operatorListId","transformed","CanvasGraphics_setCharWidth","xWidth","yWidth","CanvasGraphics_setCharWidthAndBounds","llx","lly","urx","ury","getColorN_Pattern","CanvasGraphics_getColorN_Pattern","IR","pattern","canvasGraphicsFactory","createCanvasGraphics","CanvasGraphics_setStrokeColorN","CanvasGraphics_setFillColorN","CanvasGraphics_setStrokeRGBColor","CanvasGraphics_setFillRGBColor","CanvasGraphics_shadingFill","patternIR","inv","bl","ul","ur","x0","y0","CanvasGraphics_beginInlineImage","CanvasGraphics_beginImageData","CanvasGraphics_paintFormXObjectBegin","CanvasGraphics_paintFormXObjectEnd","CanvasGraphics_beginGroup","isolated","knockout","canvasBounds","floor","CanvasGraphics_endGroup","imageSmoothingEnabled","mozImageSmoothingEnabled","CanvasGraphics_beginAnnotations","CanvasGraphics_endAnnotations","CanvasGraphics_beginAnnotation","CanvasGraphics_endAnnotation","CanvasGraphics_paintJpegXObject","domImage","position","getCanvasPosition","appendImage","CanvasGraphics_paintImageMaskXObject","maskCanvas","CanvasGraphics_paintImageMaskXObjectRepeat","positions","CanvasGraphics_paintImageMaskXObjectGroup","images","CanvasGraphics_paintImageXObject","CanvasGraphics_paintImageXObjectRepeat","CanvasGraphics_paintInlineImageXObject","widthScale","heightScale","imgToPaint","HTMLElement","paintWidth","paintHeight","tmpCanvasId","newWidth","newHeight","CanvasGraphics_paintInlineImageXObjectGroup","CanvasGraphics_paintSolidColorImageMask","CanvasGraphics_paintXObject","CanvasGraphics_markPoint","tag","CanvasGraphics_markPointProps","CanvasGraphics_beginMarkedContent","CanvasGraphics_beginMarkedContentProps","CanvasGraphics_endMarkedContent","CanvasGraphics_beginCompat","CanvasGraphics_endCompat","CanvasGraphics_consumePath","CanvasGraphics_getSinglePixelWidth","inverse","CanvasGraphics_getCanvasPosition","FontLoader","styleElement","nativeFontFaces","loadTestFontId","loadingContext","requests","nextRequestId","insertRule","fontLoaderInsertRule","styleSheet","sheet","cssRules","fontLoaderClear","remove","nativeFontFace","fonts","delete","getLoadTestFont","atob","addNativeFontFace","fontLoader_addNativeFontFace","fontLoaderBind","rules","fontsToLoad","fontLoadPromises","getNativeFontPromise","family","isFontLoadingAPISupported","isSyncFontLoadingSupported","attached","loading","createNativeFontFace","createFontFaceRule","queueLoadingCallback","prepareFontLoadEvent","FontLoader_queueLoadingCallback","LoadLoader_completeRequest","otherRequest","shift","requestId","fontLoaderPrepareFontLoadEvent","int32","spliceString","insert","chunk1","chunk2","called","isFontReady","loadTestFont","COMMENT_OFFSET","CFF_CHECKSUM_OFFSET","XXXX_VALUE","checksum","btoa","names","removeChild","navigator","supported","exec","userAgent","IsEvalSupportedCached","FontFaceObject","FontFaceObjectClosure","translatedData","compiledGlyphs","FontFaceObject_createNativeFontFace","FontFace","FontFaceObject_createFontFaceRule","FontFaceObject_getPathGenerator","cmds","js","cmd","ShadingIRs","RadialAxial","fromIR","RadialAxial_fromIR","raw","colorStops","r1","RadialAxial_getPattern","grad","createLinearGradient","createRadialGradient","addColorStop","createMeshCanvas","createMeshCanvasClosure","drawTriangle","c1","c2","c3","rowSize","x3","y3","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","round","maxY","xa","car","cag","cab","xb","cbr","cbg","cbb","x1_","x2_","drawFigure","combinesScale","EXPECTED_SCALE","MAX_PATTERN_SIZE","BORDER_SIZE","boundsWidth","boundsHeight","paddedWidth","paddedHeight","Mesh","Mesh_fromIR","background","Mesh_getPattern","owner","matrixScale","temporaryPatternCanvas","createPattern","Dummy","Dummy_fromIR","Dummy_fromIR_getPattern","getShadingPatternFromIR","shadingIR","TilingPattern","TilingPatternClosure","PaintType","COLORED","UNCOLORED","xstep","ystep","paintType","tilingType","createPatternCanvas","TilinPattern_createPatternCanvas","topLeft","botRight","curMatrixScale","combinedScale","graphics","setFillAndStrokeStyleToContext","setScale","transformToScale","tmpTranslate","clipBbox","TilingPattern_setScale","TilingPattern_transformToScale","tmpScale","scaleToContext","TilingPattern_scaleToContext","bboxWidth","bboxHeight","cssColor","TilingPattern_getPattern","pdfjsVersion","pdfjsBuild","pdfjsSharedUtil","pdfjsDisplayGlobal","pdfjsDisplayAPI","pdfjsDisplayTextLayer","pdfjsDisplayAnnotationLayer","pdfjsDisplayDOMUtils","pdfjsDisplaySVG","compatibilityChecked","isAndroid","isAndroidPre3","isAndroidPre5","isChrome","isChromeWithRangeBug","isIOSChrome","isIE","isIOS","isOpera","isSafari","hasDOM","checkTypedArrayCompatibility","TypedArray","setArrayOffset","array","Uint32ArrayView","ensureUint32ArrayViewProps","uint32ArrayViewSetters","createUint32ArrayProp","arg1","Int8Array","Uint16Array","canvasPixelArrayBuffer","CanvasPixelArray","cpaProto","normalizeURLObject","webkitURL","checkObjectDefinePropertyCompatibility","definePropertyPossible","Test","objectDefineProperty","def","__defineGetter__","__defineSetter__","objectDefinePropertySetter","objectDefinePropertyGetter","checkXMLHttpRequestResponseCompatibility","xhrPrototype","xhr","xmlHttpRequestOverrideMimeType","mimeType","xmlHttpRequestGetResponseType","_responseType","xmlHttpRequestSetResponseType","overrideMimeType","VBArray","xmlHttpRequestResponseGet","responseBody","toArray","text","checkWindowBtoaCompatibility","checkWindowAtobCompatibility","input","bc","bs","idx","output","checkFunctionPrototypeBindCompatibility","functionPrototypeBind","headArgs","bound","functionPrototypeBindBound","checkDatasetProperty","_dataset","attributes","attribute","checkClassListProperty","changeList","itemName","list","classListPrototype","contains","toggle","_classList","checkWorkerConsoleCompatibility","importScripts","consoleTimer","workerConsole","checkConsoleCompatibility","checkOnClickCompatibility","ignoreIfTargetDisabled","isDisabled","stopPropagation","node","parentNode","checkOnBlobSupport","checkNavigatorLanguage","locale","userLanguage","checkRangeRequests","checkHistoryManipulation","history","pushState","disableHistory","checkSetPresenceInImageData","polyfill","versionMatch","match","parseInt","contextPrototype","CanvasRenderingContext2D","checkRequestAnimationFrame","installFakeAnimationFrameFunctions","cancelAnimationFrame","timeoutID","mozRequestAnimationFrame","webkitRequestAnimationFrame","checkCanvasSizeLimitation","maxCanvasPixels","checkFullscreenSupport","parent","disableFullscreen","checkCurrentScript","scripts","checkInputTypeNumberAssign","el","inputProto","typeProperty","checkDocumentReadyState","attachEvent","documentProto","readyStateProto","checkChildNodeRemove","Element","checkPromise","iterable","resolve_","reject_","onReject","STATUS_PENDING","STATUS_RESOLVED","STATUS_REJECTED","REJECTION_TIMEOUT","HandlerManager","handlers","unhandledRejections","pendingRejectionCheck","scheduleHandlers","_status","_handlers","runHandlers","RUN_TIMEOUT","timeoutAt","nextStatus","thisPromise","nextValue","_value","onResolve","_unhandledRejection","removeUnhandeledRejection","nextPromise","_updateStatus","addUnhandledRejection","scheduleRejectionCheck","unhandled","_","resolver","_resolve","_reject","Promise_all","promises","resolveAll","rejectAll","deferred","unresolved","isPromise","Promise_isPromise","Promise_resolve","Promise_reject","Promise__updateStatus","Promise_then","Promise_catch","checkWeakMap","defaultValue","checkURLConstructor","hasWorkingUrl","u","pathname","relative","relativePathDotMapping","isRelativeScheme","scheme","invalid","_isInvalid","IDNAToASCII","percentEscape","unicode","percentEscapeQuery","EOF","ALPHA","ALPHANUMERIC","stateOverride","err","cursor","seenAt","seenBracket","loop","_scheme","_isRelative","_query","_fragment","_schemeData","_host","_path","_username","_password","nextC","nextNextC","cp","tempC","temp","JURL","_url","authority","host","hostname","search","hash","OriginalURL","revokeObjectURL"],"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap bea5969a3d9158168038","webpack:///src/shared/util.js","webpack:///src/display/dom_utils.js","webpack:///src/display/annotation_layer.js","webpack:///src/display/api.js","webpack:///src/display/svg.js","webpack:///src/display/text_layer.js","webpack:///node_modules/webpack/buildin/global.js","webpack:///src/display/metadata.js","webpack:///src/display/webgl.js","webpack:///src/display/global.js","webpack:///src/display/canvas.js","webpack:///src/display/font_loader.js","webpack:///src/display/pattern_helper.js","webpack:///src/pdf.js","webpack:///src/shared/compatibility.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"pdfjs-dist/build/pdf\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pdfjs-dist/build/pdf\"] = factory();\n\telse\n\t\troot[\"pdfjs-dist/build/pdf\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __w_pdfjs_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __w_pdfjs_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__w_pdfjs_require__.m = modules;\n\n \t// expose the module cache\n \t__w_pdfjs_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__w_pdfjs_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__w_pdfjs_require__.d = function(exports, name, getter) {\n \t\tif(!__w_pdfjs_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__w_pdfjs_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__w_pdfjs_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__w_pdfjs_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__w_pdfjs_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __w_pdfjs_require__(__w_pdfjs_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bea5969a3d9158168038","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals global, process, __pdfjsdev_webpack__ */\n\nimport './compatibility';\n\nvar globalScope = (typeof window !== 'undefined') ? window :\n                  (typeof global !== 'undefined') ? global :\n                  (typeof self !== 'undefined') ? self : this;\n\nvar FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\n\nconst NativeImageDecoding = {\n  NONE: 'none',\n  DECODE: 'decode',\n  DISPLAY: 'display'\n};\n\nvar TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4\n};\n\nvar ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3\n};\n\nvar AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26\n};\n\nvar AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200\n};\n\nvar AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000,\n};\n\nvar AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5\n};\n\nvar StreamType = {\n  UNKNOWN: 0,\n  FLATE: 1,\n  LZW: 2,\n  DCT: 3,\n  JPX: 4,\n  JBIG: 5,\n  A85: 6,\n  AHX: 7,\n  CCF: 8,\n  RL: 9\n};\n\nvar FontType = {\n  UNKNOWN: 0,\n  TYPE1: 1,\n  TYPE1C: 2,\n  CIDFONTTYPE0: 3,\n  CIDFONTTYPE0C: 4,\n  TRUETYPE: 5,\n  CIDFONTTYPE2: 6,\n  TYPE3: 7,\n  OPENTYPE: 8,\n  TYPE0: 9,\n  MMTYPE1: 10\n};\n\nvar VERBOSITY_LEVELS = {\n  errors: 0,\n  warnings: 1,\n  infos: 5\n};\n\nvar CMapCompressionType = {\n  NONE: 0,\n  BINARY: 1,\n  STREAM: 2,\n};\n\n// All the possible operations for an operator list.\nvar OPS = {\n  // Intentionally start from 1 so it is easy to spot bad operators that will be\n  // 0's.\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotations: 78,\n  endAnnotations: 79,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintJpegXObject: 82,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91\n};\n\nvar verbosity = VERBOSITY_LEVELS.warnings;\n\nfunction setVerbosityLevel(level) {\n  verbosity = level;\n}\n\nfunction getVerbosityLevel() {\n  return verbosity;\n}\n\n// A notice for devs. These are good for things that are helpful to devs, such\n// as warning that Workers were disabled, which is important to devs but not\n// end users.\nfunction info(msg) {\n  if (verbosity >= VERBOSITY_LEVELS.infos) {\n    console.log('Info: ' + msg);\n  }\n}\n\n// Non-fatal warnings.\nfunction warn(msg) {\n  if (verbosity >= VERBOSITY_LEVELS.warnings) {\n    console.log('Warning: ' + msg);\n  }\n}\n\n// Deprecated API function -- display regardless of the PDFJS.verbosity setting.\nfunction deprecated(details) {\n  console.log('Deprecated API usage: ' + details);\n}\n\n// Fatal errors that should trigger the fallback UI and halt execution by\n// throwing an exception.\nfunction error(msg) {\n  if (verbosity >= VERBOSITY_LEVELS.errors) {\n    console.log('Error: ' + msg);\n    console.log(backtrace());\n  }\n  throw new Error(msg);\n}\n\nfunction backtrace() {\n  try {\n    throw new Error();\n  } catch (e) {\n    return e.stack ? e.stack.split('\\n').slice(2).join('\\n') : '';\n  }\n}\n\nfunction assert(cond, msg) {\n  if (!cond) {\n    error(msg);\n  }\n}\n\nvar UNSUPPORTED_FEATURES = {\n  unknown: 'unknown',\n  forms: 'forms',\n  javaScript: 'javaScript',\n  smask: 'smask',\n  shadingPattern: 'shadingPattern',\n  font: 'font'\n};\n\n// Checks if URLs have the same origin. For non-HTTP based URLs, returns false.\nfunction isSameOrigin(baseUrl, otherUrl) {\n  try {\n    var base = new URL(baseUrl);\n    if (!base.origin || base.origin === 'null') {\n      return false; // non-HTTP url\n    }\n  } catch (e) {\n    return false;\n  }\n\n  var other = new URL(otherUrl, base);\n  return base.origin === other.origin;\n}\n\n// Checks if URLs use one of the whitelisted protocols, e.g. to avoid XSS.\nfunction isValidProtocol(url) {\n  if (!url) {\n    return false;\n  }\n  switch (url.protocol) {\n    case 'http:':\n    case 'https:':\n    case 'ftp:':\n    case 'mailto:':\n    case 'tel:':\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Attempts to create a valid absolute URL (utilizing `isValidProtocol`).\n * @param {URL|string} url - An absolute, or relative, URL.\n * @param {URL|string} baseUrl - An absolute URL.\n * @returns Either a valid {URL}, or `null` otherwise.\n */\nfunction createValidAbsoluteUrl(url, baseUrl) {\n  if (!url) {\n    return null;\n  }\n  try {\n    var absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    if (isValidProtocol(absoluteUrl)) {\n      return absoluteUrl;\n    }\n  } catch (ex) { /* `new URL()` will throw on incorrect data. */ }\n  return null;\n}\n\nfunction shadow(obj, prop, value) {\n  Object.defineProperty(obj, prop, { value,\n                                     enumerable: true,\n                                     configurable: true,\n                                     writable: false });\n  return value;\n}\n\nfunction getLookupTableFactory(initializer) {\n  var lookup;\n  return function () {\n    if (initializer) {\n      lookup = Object.create(null);\n      initializer(lookup);\n      initializer = null;\n    }\n    return lookup;\n  };\n}\n\nvar PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2\n};\n\nvar PasswordException = (function PasswordExceptionClosure() {\n  function PasswordException(msg, code) {\n    this.name = 'PasswordException';\n    this.message = msg;\n    this.code = code;\n  }\n\n  PasswordException.prototype = new Error();\n  PasswordException.constructor = PasswordException;\n\n  return PasswordException;\n})();\n\nvar UnknownErrorException = (function UnknownErrorExceptionClosure() {\n  function UnknownErrorException(msg, details) {\n    this.name = 'UnknownErrorException';\n    this.message = msg;\n    this.details = details;\n  }\n\n  UnknownErrorException.prototype = new Error();\n  UnknownErrorException.constructor = UnknownErrorException;\n\n  return UnknownErrorException;\n})();\n\nvar InvalidPDFException = (function InvalidPDFExceptionClosure() {\n  function InvalidPDFException(msg) {\n    this.name = 'InvalidPDFException';\n    this.message = msg;\n  }\n\n  InvalidPDFException.prototype = new Error();\n  InvalidPDFException.constructor = InvalidPDFException;\n\n  return InvalidPDFException;\n})();\n\nvar MissingPDFException = (function MissingPDFExceptionClosure() {\n  function MissingPDFException(msg) {\n    this.name = 'MissingPDFException';\n    this.message = msg;\n  }\n\n  MissingPDFException.prototype = new Error();\n  MissingPDFException.constructor = MissingPDFException;\n\n  return MissingPDFException;\n})();\n\nvar UnexpectedResponseException =\n    (function UnexpectedResponseExceptionClosure() {\n  function UnexpectedResponseException(msg, status) {\n    this.name = 'UnexpectedResponseException';\n    this.message = msg;\n    this.status = status;\n  }\n\n  UnexpectedResponseException.prototype = new Error();\n  UnexpectedResponseException.constructor = UnexpectedResponseException;\n\n  return UnexpectedResponseException;\n})();\n\nvar NotImplementedException = (function NotImplementedExceptionClosure() {\n  function NotImplementedException(msg) {\n    this.message = msg;\n  }\n\n  NotImplementedException.prototype = new Error();\n  NotImplementedException.prototype.name = 'NotImplementedException';\n  NotImplementedException.constructor = NotImplementedException;\n\n  return NotImplementedException;\n})();\n\nvar MissingDataException = (function MissingDataExceptionClosure() {\n  function MissingDataException(begin, end) {\n    this.begin = begin;\n    this.end = end;\n    this.message = 'Missing data [' + begin + ', ' + end + ')';\n  }\n\n  MissingDataException.prototype = new Error();\n  MissingDataException.prototype.name = 'MissingDataException';\n  MissingDataException.constructor = MissingDataException;\n\n  return MissingDataException;\n})();\n\nvar XRefParseException = (function XRefParseExceptionClosure() {\n  function XRefParseException(msg) {\n    this.message = msg;\n  }\n\n  XRefParseException.prototype = new Error();\n  XRefParseException.prototype.name = 'XRefParseException';\n  XRefParseException.constructor = XRefParseException;\n\n  return XRefParseException;\n})();\n\nvar NullCharactersRegExp = /\\x00/g;\n\nfunction removeNullCharacters(str) {\n  if (typeof str !== 'string') {\n    warn('The argument for removeNullCharacters must be a string.');\n    return str;\n  }\n  return str.replace(NullCharactersRegExp, '');\n}\n\nfunction bytesToString(bytes) {\n  assert(bytes !== null && typeof bytes === 'object' &&\n         bytes.length !== undefined, 'Invalid argument for bytesToString');\n  var length = bytes.length;\n  var MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  var strBuf = [];\n  for (var i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    var chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    var chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join('');\n}\n\nfunction stringToBytes(str) {\n  assert(typeof str === 'string', 'Invalid argument for stringToBytes');\n  var length = str.length;\n  var bytes = new Uint8Array(length);\n  for (var i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xFF;\n  }\n  return bytes;\n}\n\n/**\n * Gets length of the array (Array, Uint8Array, or string) in bytes.\n * @param {Array|Uint8Array|string} arr\n * @returns {number}\n */\nfunction arrayByteLength(arr) {\n  if (arr.length !== undefined) {\n    return arr.length;\n  }\n  assert(arr.byteLength !== undefined);\n  return arr.byteLength;\n}\n\n/**\n * Combines array items (arrays) into single Uint8Array object.\n * @param {Array} arr - the array of the arrays (Array, Uint8Array, or string).\n * @returns {Uint8Array}\n */\nfunction arraysToBytes(arr) {\n  // Shortcut: if first and only item is Uint8Array, return it.\n  if (arr.length === 1 && (arr[0] instanceof Uint8Array)) {\n    return arr[0];\n  }\n  var resultLength = 0;\n  var i, ii = arr.length;\n  var item, itemLength;\n  for (i = 0; i < ii; i++) {\n    item = arr[i];\n    itemLength = arrayByteLength(item);\n    resultLength += itemLength;\n  }\n  var pos = 0;\n  var data = new Uint8Array(resultLength);\n  for (i = 0; i < ii; i++) {\n    item = arr[i];\n    if (!(item instanceof Uint8Array)) {\n      if (typeof item === 'string') {\n        item = stringToBytes(item);\n      } else {\n        item = new Uint8Array(item);\n      }\n    }\n    itemLength = item.byteLength;\n    data.set(item, pos);\n    pos += itemLength;\n  }\n  return data;\n}\n\nfunction string32(value) {\n  return String.fromCharCode((value >> 24) & 0xff, (value >> 16) & 0xff,\n                             (value >> 8) & 0xff, value & 0xff);\n}\n\nfunction log2(x) {\n  var n = 1, i = 0;\n  while (x > n) {\n    n <<= 1;\n    i++;\n  }\n  return i;\n}\n\nfunction readInt8(data, start) {\n  return (data[start] << 24) >> 24;\n}\n\nfunction readUint16(data, offset) {\n  return (data[offset] << 8) | data[offset + 1];\n}\n\nfunction readUint32(data, offset) {\n  return ((data[offset] << 24) | (data[offset + 1] << 16) |\n         (data[offset + 2] << 8) | data[offset + 3]) >>> 0;\n}\n\n// Lazy test the endianness of the platform\n// NOTE: This will be 'true' for simulated TypedArrays\nfunction isLittleEndian() {\n  var buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  var view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return (view32[0] === 1);\n}\n\n// Checks if it's possible to eval JS expressions.\nfunction isEvalSupported() {\n  try {\n    new Function(''); // eslint-disable-line no-new, no-new-func\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\n\nvar Util = (function UtilClosure() {\n  function Util() {}\n\n  var rgbBuf = ['rgb(', 0, ',', 0, ',', 0, ')'];\n\n  // makeCssRgb() can be called thousands of times. Using |rgbBuf| avoids\n  // creating many intermediate strings.\n  Util.makeCssRgb = function Util_makeCssRgb(r, g, b) {\n    rgbBuf[1] = r;\n    rgbBuf[3] = g;\n    rgbBuf[5] = b;\n    return rgbBuf.join('');\n  };\n\n  // Concatenates two transformation matrices together and returns the result.\n  Util.transform = function Util_transform(m1, m2) {\n    return [\n      m1[0] * m2[0] + m1[2] * m2[1],\n      m1[1] * m2[0] + m1[3] * m2[1],\n      m1[0] * m2[2] + m1[2] * m2[3],\n      m1[1] * m2[2] + m1[3] * m2[3],\n      m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\n      m1[1] * m2[4] + m1[3] * m2[5] + m1[5]\n    ];\n  };\n\n  // For 2d affine transforms\n  Util.applyTransform = function Util_applyTransform(p, m) {\n    var xt = p[0] * m[0] + p[1] * m[2] + m[4];\n    var yt = p[0] * m[1] + p[1] * m[3] + m[5];\n    return [xt, yt];\n  };\n\n  Util.applyInverseTransform = function Util_applyInverseTransform(p, m) {\n    var d = m[0] * m[3] - m[1] * m[2];\n    var xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    var yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n    return [xt, yt];\n  };\n\n  // Applies the transform to the rectangle and finds the minimum axially\n  // aligned bounding box.\n  Util.getAxialAlignedBoundingBox =\n    function Util_getAxialAlignedBoundingBox(r, m) {\n\n    var p1 = Util.applyTransform(r, m);\n    var p2 = Util.applyTransform(r.slice(2, 4), m);\n    var p3 = Util.applyTransform([r[0], r[3]], m);\n    var p4 = Util.applyTransform([r[2], r[1]], m);\n    return [\n      Math.min(p1[0], p2[0], p3[0], p4[0]),\n      Math.min(p1[1], p2[1], p3[1], p4[1]),\n      Math.max(p1[0], p2[0], p3[0], p4[0]),\n      Math.max(p1[1], p2[1], p3[1], p4[1])\n    ];\n  };\n\n  Util.inverseTransform = function Util_inverseTransform(m) {\n    var d = m[0] * m[3] - m[1] * m[2];\n    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d,\n      (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n  };\n\n  // Apply a generic 3d matrix M on a 3-vector v:\n  //   | a b c |   | X |\n  //   | d e f | x | Y |\n  //   | g h i |   | Z |\n  // M is assumed to be serialized as [a,b,c,d,e,f,g,h,i],\n  // with v as [X,Y,Z]\n  Util.apply3dTransform = function Util_apply3dTransform(m, v) {\n    return [\n      m[0] * v[0] + m[1] * v[1] + m[2] * v[2],\n      m[3] * v[0] + m[4] * v[1] + m[5] * v[2],\n      m[6] * v[0] + m[7] * v[1] + m[8] * v[2]\n    ];\n  };\n\n  // This calculation uses Singular Value Decomposition.\n  // The SVD can be represented with formula A = USV. We are interested in the\n  // matrix S here because it represents the scale values.\n  Util.singularValueDecompose2dScale =\n    function Util_singularValueDecompose2dScale(m) {\n\n    var transpose = [m[0], m[2], m[1], m[3]];\n\n    // Multiply matrix m with its transpose.\n    var a = m[0] * transpose[0] + m[1] * transpose[2];\n    var b = m[0] * transpose[1] + m[1] * transpose[3];\n    var c = m[2] * transpose[0] + m[3] * transpose[2];\n    var d = m[2] * transpose[1] + m[3] * transpose[3];\n\n    // Solve the second degree polynomial to get roots.\n    var first = (a + d) / 2;\n    var second = Math.sqrt((a + d) * (a + d) - 4 * (a * d - c * b)) / 2;\n    var sx = first + second || 1;\n    var sy = first - second || 1;\n\n    // Scale values are the square roots of the eigenvalues.\n    return [Math.sqrt(sx), Math.sqrt(sy)];\n  };\n\n  // Normalize rectangle rect=[x1, y1, x2, y2] so that (x1,y1) < (x2,y2)\n  // For coordinate systems whose origin lies in the bottom-left, this\n  // means normalization to (BL,TR) ordering. For systems with origin in the\n  // top-left, this means (TL,BR) ordering.\n  Util.normalizeRect = function Util_normalizeRect(rect) {\n    var r = rect.slice(0); // clone rect\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  };\n\n  // Returns a rectangle [x1, y1, x2, y2] corresponding to the\n  // intersection of rect1 and rect2. If no intersection, returns 'false'\n  // The rectangle coordinates of rect1, rect2 should be [x1, y1, x2, y2]\n  Util.intersect = function Util_intersect(rect1, rect2) {\n    function compare(a, b) {\n      return a - b;\n    }\n\n    // Order points along the axes\n    var orderedX = [rect1[0], rect1[2], rect2[0], rect2[2]].sort(compare),\n        orderedY = [rect1[1], rect1[3], rect2[1], rect2[3]].sort(compare),\n        result = [];\n\n    rect1 = Util.normalizeRect(rect1);\n    rect2 = Util.normalizeRect(rect2);\n\n    // X: first and second points belong to different rectangles?\n    if ((orderedX[0] === rect1[0] && orderedX[1] === rect2[0]) ||\n        (orderedX[0] === rect2[0] && orderedX[1] === rect1[0])) {\n      // Intersection must be between second and third points\n      result[0] = orderedX[1];\n      result[2] = orderedX[2];\n    } else {\n      return false;\n    }\n\n    // Y: first and second points belong to different rectangles?\n    if ((orderedY[0] === rect1[1] && orderedY[1] === rect2[1]) ||\n        (orderedY[0] === rect2[1] && orderedY[1] === rect1[1])) {\n      // Intersection must be between second and third points\n      result[1] = orderedY[1];\n      result[3] = orderedY[2];\n    } else {\n      return false;\n    }\n\n    return result;\n  };\n\n  Util.sign = function Util_sign(num) {\n    return num < 0 ? -1 : 1;\n  };\n\n  var ROMAN_NUMBER_MAP = [\n    '', 'C', 'CC', 'CCC', 'CD', 'D', 'DC', 'DCC', 'DCCC', 'CM',\n    '', 'X', 'XX', 'XXX', 'XL', 'L', 'LX', 'LXX', 'LXXX', 'XC',\n    '', 'I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX'\n  ];\n  /**\n   * Converts positive integers to (upper case) Roman numerals.\n   * @param {integer} number - The number that should be converted.\n   * @param {boolean} lowerCase - Indicates if the result should be converted\n   *   to lower case letters. The default is false.\n   * @return {string} The resulting Roman number.\n   */\n  Util.toRoman = function Util_toRoman(number, lowerCase) {\n    assert(isInt(number) && number > 0,\n           'The number should be a positive integer.');\n    var pos, romanBuf = [];\n    // Thousands\n    while (number >= 1000) {\n      number -= 1000;\n      romanBuf.push('M');\n    }\n    // Hundreds\n    pos = (number / 100) | 0;\n    number %= 100;\n    romanBuf.push(ROMAN_NUMBER_MAP[pos]);\n    // Tens\n    pos = (number / 10) | 0;\n    number %= 10;\n    romanBuf.push(ROMAN_NUMBER_MAP[10 + pos]);\n    // Ones\n    romanBuf.push(ROMAN_NUMBER_MAP[20 + number]);\n\n    var romanStr = romanBuf.join('');\n    return (lowerCase ? romanStr.toLowerCase() : romanStr);\n  };\n\n  Util.appendToArray = function Util_appendToArray(arr1, arr2) {\n    Array.prototype.push.apply(arr1, arr2);\n  };\n\n  Util.prependToArray = function Util_prependToArray(arr1, arr2) {\n    Array.prototype.unshift.apply(arr1, arr2);\n  };\n\n  Util.extendObj = function extendObj(obj1, obj2) {\n    for (var key in obj2) {\n      obj1[key] = obj2[key];\n    }\n  };\n\n  Util.getInheritableProperty =\n      function Util_getInheritableProperty(dict, name, getArray) {\n    while (dict && !dict.has(name)) {\n      dict = dict.get('Parent');\n    }\n    if (!dict) {\n      return null;\n    }\n    return getArray ? dict.getArray(name) : dict.get(name);\n  };\n\n  Util.inherit = function Util_inherit(sub, base, prototype) {\n    sub.prototype = Object.create(base.prototype);\n    sub.prototype.constructor = sub;\n    for (var prop in prototype) {\n      sub.prototype[prop] = prototype[prop];\n    }\n  };\n\n  Util.loadScript = function Util_loadScript(src, callback) {\n    var script = document.createElement('script');\n    var loaded = false;\n    script.setAttribute('src', src);\n    if (callback) {\n      script.onload = function() {\n        if (!loaded) {\n          callback();\n        }\n        loaded = true;\n      };\n    }\n    document.getElementsByTagName('head')[0].appendChild(script);\n  };\n\n  return Util;\n})();\n\n/**\n * PDF page viewport created based on scale, rotation and offset.\n * @class\n * @alias PageViewport\n */\nvar PageViewport = (function PageViewportClosure() {\n  /**\n   * @constructor\n   * @private\n   * @param viewBox {Array} xMin, yMin, xMax and yMax coordinates.\n   * @param scale {number} scale of the viewport.\n   * @param rotation {number} rotations of the viewport in degrees.\n   * @param offsetX {number} offset X\n   * @param offsetY {number} offset Y\n   * @param dontFlip {boolean} if true, axis Y will not be flipped.\n   */\n  function PageViewport(viewBox, scale, rotation, offsetX, offsetY, dontFlip) {\n    this.viewBox = viewBox;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n\n    // creating transform to convert pdf coordinate system to the normal\n    // canvas like coordinates taking in account scale and rotation\n    var centerX = (viewBox[2] + viewBox[0]) / 2;\n    var centerY = (viewBox[3] + viewBox[1]) / 2;\n    var rotateA, rotateB, rotateC, rotateD;\n    rotation = rotation % 360;\n    rotation = rotation < 0 ? rotation + 360 : rotation;\n    switch (rotation) {\n      case 180:\n        rotateA = -1; rotateB = 0; rotateC = 0; rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0; rotateB = 1; rotateC = 1; rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0; rotateB = -1; rotateC = -1; rotateD = 0;\n        break;\n      // case 0:\n      default:\n        rotateA = 1; rotateB = 0; rotateC = 0; rotateD = -1;\n        break;\n    }\n\n    if (dontFlip) {\n      rotateC = -rotateC; rotateD = -rotateD;\n    }\n\n    var offsetCanvasX, offsetCanvasY;\n    var width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = Math.abs(viewBox[3] - viewBox[1]) * scale;\n      height = Math.abs(viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = Math.abs(viewBox[2] - viewBox[0]) * scale;\n      height = Math.abs(viewBox[3] - viewBox[1]) * scale;\n    }\n    // creating transform for the following operations:\n    // translate(-centerX, -centerY), rotate and flip vertically,\n    // scale, and translate(offsetCanvasX, offsetCanvasY)\n    this.transform = [\n      rotateA * scale,\n      rotateB * scale,\n      rotateC * scale,\n      rotateD * scale,\n      offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY,\n      offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY\n    ];\n\n    this.width = width;\n    this.height = height;\n    this.fontScale = scale;\n  }\n  PageViewport.prototype = /** @lends PageViewport.prototype */ {\n    /**\n     * Clones viewport with additional properties.\n     * @param args {Object} (optional) If specified, may contain the 'scale' or\n     * 'rotation' properties to override the corresponding properties in\n     * the cloned viewport.\n     * @returns {PageViewport} Cloned viewport.\n     */\n    clone: function PageViewPort_clone(args) {\n      args = args || {};\n      var scale = 'scale' in args ? args.scale : this.scale;\n      var rotation = 'rotation' in args ? args.rotation : this.rotation;\n      return new PageViewport(this.viewBox.slice(), scale, rotation,\n                              this.offsetX, this.offsetY, args.dontFlip);\n    },\n    /**\n     * Converts PDF point to the viewport coordinates. For examples, useful for\n     * converting PDF location into canvas pixel coordinates.\n     * @param x {number} X coordinate.\n     * @param y {number} Y coordinate.\n     * @returns {Object} Object that contains 'x' and 'y' properties of the\n     * point in the viewport coordinate space.\n     * @see {@link convertToPdfPoint}\n     * @see {@link convertToViewportRectangle}\n     */\n    convertToViewportPoint: function PageViewport_convertToViewportPoint(x, y) {\n      return Util.applyTransform([x, y], this.transform);\n    },\n    /**\n     * Converts PDF rectangle to the viewport coordinates.\n     * @param rect {Array} xMin, yMin, xMax and yMax coordinates.\n     * @returns {Array} Contains corresponding coordinates of the rectangle\n     * in the viewport coordinate space.\n     * @see {@link convertToViewportPoint}\n     */\n    convertToViewportRectangle:\n      function PageViewport_convertToViewportRectangle(rect) {\n      var tl = Util.applyTransform([rect[0], rect[1]], this.transform);\n      var br = Util.applyTransform([rect[2], rect[3]], this.transform);\n      return [tl[0], tl[1], br[0], br[1]];\n    },\n    /**\n     * Converts viewport coordinates to the PDF location. For examples, useful\n     * for converting canvas pixel location into PDF one.\n     * @param x {number} X coordinate.\n     * @param y {number} Y coordinate.\n     * @returns {Object} Object that contains 'x' and 'y' properties of the\n     * point in the PDF coordinate space.\n     * @see {@link convertToViewportPoint}\n     */\n    convertToPdfPoint: function PageViewport_convertToPdfPoint(x, y) {\n      return Util.applyInverseTransform([x, y], this.transform);\n    }\n  };\n  return PageViewport;\n})();\n\nvar PDFStringTranslateTable = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0x2D8, 0x2C7, 0x2C6, 0x2D9, 0x2DD, 0x2DB, 0x2DA, 0x2DC, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014,\n  0x2013, 0x192, 0x2044, 0x2039, 0x203A, 0x2212, 0x2030, 0x201E, 0x201C,\n  0x201D, 0x2018, 0x2019, 0x201A, 0x2122, 0xFB01, 0xFB02, 0x141, 0x152, 0x160,\n  0x178, 0x17D, 0x131, 0x142, 0x153, 0x161, 0x17E, 0, 0x20AC\n];\n\nfunction stringToPDFString(str) {\n  var i, n = str.length, strBuf = [];\n  if (str[0] === '\\xFE' && str[1] === '\\xFF') {\n    // UTF16BE BOM\n    for (i = 2; i < n; i += 2) {\n      strBuf.push(String.fromCharCode(\n        (str.charCodeAt(i) << 8) | str.charCodeAt(i + 1)));\n    }\n  } else {\n    for (i = 0; i < n; ++i) {\n      var code = PDFStringTranslateTable[str.charCodeAt(i)];\n      strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n    }\n  }\n  return strBuf.join('');\n}\n\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\n\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\n\nfunction isEmptyObj(obj) {\n  for (var key in obj) {\n    return false;\n  }\n  return true;\n}\n\nfunction isBool(v) {\n  return typeof v === 'boolean';\n}\n\nfunction isInt(v) {\n  return typeof v === 'number' && ((v | 0) === v);\n}\n\nfunction isNum(v) {\n  return typeof v === 'number';\n}\n\nfunction isString(v) {\n  return typeof v === 'string';\n}\n\nfunction isArray(v) {\n  return v instanceof Array;\n}\n\nfunction isArrayBuffer(v) {\n  return typeof v === 'object' && v !== null && v.byteLength !== undefined;\n}\n\n// Checks if ch is one of the following characters: SPACE, TAB, CR or LF.\nfunction isSpace(ch) {\n  return (ch === 0x20 || ch === 0x09 || ch === 0x0D || ch === 0x0A);\n}\n\nfunction isNodeJS() {\n  // The if below protected by __pdfjsdev_webpack__ check from webpack parsing.\n  if (typeof __pdfjsdev_webpack__ === 'undefined') {\n    return typeof process === 'object' && process + '' === '[object process]';\n  }\n  return false;\n}\n\n/**\n * Promise Capability object.\n *\n * @typedef {Object} PromiseCapability\n * @property {Promise} promise - A promise object.\n * @property {function} resolve - Fulfills the promise.\n * @property {function} reject - Rejects the promise.\n */\n\n/**\n * Creates a promise capability object.\n * @alias createPromiseCapability\n *\n * @return {PromiseCapability} A capability object contains:\n * - a Promise, resolve and reject methods.\n */\nfunction createPromiseCapability() {\n  var capability = {};\n  capability.promise = new Promise(function (resolve, reject) {\n    capability.resolve = resolve;\n    capability.reject = reject;\n  });\n  return capability;\n}\n\nvar StatTimer = (function StatTimerClosure() {\n  function rpad(str, pad, length) {\n    while (str.length < length) {\n      str += pad;\n    }\n    return str;\n  }\n  function StatTimer() {\n    this.started = Object.create(null);\n    this.times = [];\n    this.enabled = true;\n  }\n  StatTimer.prototype = {\n    time: function StatTimer_time(name) {\n      if (!this.enabled) {\n        return;\n      }\n      if (name in this.started) {\n        warn('Timer is already running for ' + name);\n      }\n      this.started[name] = Date.now();\n    },\n    timeEnd: function StatTimer_timeEnd(name) {\n      if (!this.enabled) {\n        return;\n      }\n      if (!(name in this.started)) {\n        warn('Timer has not been started for ' + name);\n      }\n      this.times.push({\n        'name': name,\n        'start': this.started[name],\n        'end': Date.now()\n      });\n      // Remove timer from started so it can be called again.\n      delete this.started[name];\n    },\n    toString: function StatTimer_toString() {\n      var i, ii;\n      var times = this.times;\n      var out = '';\n      // Find the longest name for padding purposes.\n      var longest = 0;\n      for (i = 0, ii = times.length; i < ii; ++i) {\n        var name = times[i]['name'];\n        if (name.length > longest) {\n          longest = name.length;\n        }\n      }\n      for (i = 0, ii = times.length; i < ii; ++i) {\n        var span = times[i];\n        var duration = span.end - span.start;\n        out += rpad(span['name'], ' ', longest) + ' ' + duration + 'ms\\n';\n      }\n      return out;\n    }\n  };\n  return StatTimer;\n})();\n\nvar createBlob = function createBlob(data, contentType) {\n  if (typeof Blob !== 'undefined') {\n    return new Blob([data], { type: contentType });\n  }\n  throw new Error('The \"Blob\" constructor is not supported.');\n};\n\nvar createObjectURL = (function createObjectURLClosure() {\n  // Blob/createObjectURL is not available, falling back to data schema.\n  var digits =\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n  return function createObjectURL(data, contentType, forceDataSchema = false) {\n    if (!forceDataSchema && URL.createObjectURL) {\n      var blob = createBlob(data, contentType);\n      return URL.createObjectURL(blob);\n    }\n\n    var buffer = 'data:' + contentType + ';base64,';\n    for (var i = 0, ii = data.length; i < ii; i += 3) {\n      var b1 = data[i] & 0xFF;\n      var b2 = data[i + 1] & 0xFF;\n      var b3 = data[i + 2] & 0xFF;\n      var d1 = b1 >> 2, d2 = ((b1 & 3) << 4) | (b2 >> 4);\n      var d3 = i + 1 < ii ? ((b2 & 0xF) << 2) | (b3 >> 6) : 64;\n      var d4 = i + 2 < ii ? (b3 & 0x3F) : 64;\n      buffer += digits[d1] + digits[d2] + digits[d3] + digits[d4];\n    }\n    return buffer;\n  };\n})();\n\nfunction MessageHandler(sourceName, targetName, comObj) {\n  this.sourceName = sourceName;\n  this.targetName = targetName;\n  this.comObj = comObj;\n  this.callbackIndex = 1;\n  this.postMessageTransfers = true;\n  var callbacksCapabilities = this.callbacksCapabilities = Object.create(null);\n  var ah = this.actionHandler = Object.create(null);\n\n  this._onComObjOnMessage = (event) => {\n    var data = event.data;\n    if (data.targetName !== this.sourceName) {\n      return;\n    }\n    if (data.isReply) {\n      var callbackId = data.callbackId;\n      if (data.callbackId in callbacksCapabilities) {\n        var callback = callbacksCapabilities[callbackId];\n        delete callbacksCapabilities[callbackId];\n        if ('error' in data) {\n          callback.reject(data.error);\n        } else {\n          callback.resolve(data.data);\n        }\n      } else {\n        error('Cannot resolve callback ' + callbackId);\n      }\n    } else if (data.action in ah) {\n      var action = ah[data.action];\n      if (data.callbackId) {\n        var sourceName = this.sourceName;\n        var targetName = data.sourceName;\n        Promise.resolve().then(function () {\n          return action[0].call(action[1], data.data);\n        }).then(function (result) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            isReply: true,\n            callbackId: data.callbackId,\n            data: result\n          });\n        }, function (reason) {\n          if (reason instanceof Error) {\n            // Serialize error to avoid \"DataCloneError\"\n            reason = reason + '';\n          }\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            isReply: true,\n            callbackId: data.callbackId,\n            error: reason\n          });\n        });\n      } else {\n        action[0].call(action[1], data.data);\n      }\n    } else {\n      error('Unknown action from worker: ' + data.action);\n    }\n  };\n  comObj.addEventListener('message', this._onComObjOnMessage);\n}\n\nMessageHandler.prototype = {\n  on(actionName, handler, scope) {\n    var ah = this.actionHandler;\n    if (ah[actionName]) {\n      error('There is already an actionName called \"' + actionName + '\"');\n    }\n    ah[actionName] = [handler, scope];\n  },\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * @param {String} actionName Action to call.\n   * @param {JSON} data JSON data to send.\n   * @param {Array} [transfers] Optional list of transfers/ArrayBuffers\n   */\n  send(actionName, data, transfers) {\n    var message = {\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data,\n    };\n    this.postMessage(message, transfers);\n  },\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expects that other side will callback with the response.\n   * @param {String} actionName Action to call.\n   * @param {JSON} data JSON data to send.\n   * @param {Array} [transfers] Optional list of transfers/ArrayBuffers.\n   * @returns {Promise} Promise to be resolved with response data.\n   */\n  sendWithPromise(actionName, data, transfers) {\n    var callbackId = this.callbackIndex++;\n    var message = {\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data,\n      callbackId,\n    };\n    var capability = createPromiseCapability();\n    this.callbacksCapabilities[callbackId] = capability;\n    try {\n      this.postMessage(message, transfers);\n    } catch (e) {\n      capability.reject(e);\n    }\n    return capability.promise;\n  },\n  /**\n   * Sends raw message to the comObj.\n   * @private\n   * @param message {Object} Raw message.\n   * @param transfers List of transfers/ArrayBuffers, or undefined.\n   */\n  postMessage(message, transfers) {\n    if (transfers && this.postMessageTransfers) {\n      this.comObj.postMessage(message, transfers);\n    } else {\n      this.comObj.postMessage(message);\n    }\n  },\n\n  destroy() {\n    this.comObj.removeEventListener('message', this._onComObjOnMessage);\n  }\n};\n\nfunction loadJpegStream(id, imageUrl, objs) {\n  var img = new Image();\n  img.onload = (function loadJpegStream_onloadClosure() {\n    objs.resolve(id, img);\n  });\n  img.onerror = (function loadJpegStream_onerrorClosure() {\n    objs.resolve(id, null);\n    warn('Error during JPEG image loading');\n  });\n  img.src = imageUrl;\n}\n\nexport {\n  FONT_IDENTITY_MATRIX,\n  IDENTITY_MATRIX,\n  OPS,\n  VERBOSITY_LEVELS,\n  UNSUPPORTED_FEATURES,\n  AnnotationBorderStyleType,\n  AnnotationFieldFlag,\n  AnnotationFlag,\n  AnnotationType,\n  FontType,\n  ImageKind,\n  CMapCompressionType,\n  InvalidPDFException,\n  MessageHandler,\n  MissingDataException,\n  MissingPDFException,\n  NativeImageDecoding,\n  NotImplementedException,\n  PageViewport,\n  PasswordException,\n  PasswordResponses,\n  StatTimer,\n  StreamType,\n  TextRenderingMode,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  Util,\n  XRefParseException,\n  arrayByteLength,\n  arraysToBytes,\n  assert,\n  bytesToString,\n  createBlob,\n  createPromiseCapability,\n  createObjectURL,\n  deprecated,\n  error,\n  getLookupTableFactory,\n  getVerbosityLevel,\n  globalScope,\n  info,\n  isArray,\n  isArrayBuffer,\n  isBool,\n  isEmptyObj,\n  isInt,\n  isNum,\n  isString,\n  isSpace,\n  isNodeJS,\n  isSameOrigin,\n  createValidAbsoluteUrl,\n  isLittleEndian,\n  isEvalSupported,\n  loadJpegStream,\n  log2,\n  readInt8,\n  readUint16,\n  readUint32,\n  removeNullCharacters,\n  setVerbosityLevel,\n  shadow,\n  string32,\n  stringToBytes,\n  stringToPDFString,\n  stringToUTF8String,\n  utf8StringToString,\n  warn,\n};\n\n\n\n// WEBPACK FOOTER //\n// src/shared/util.js","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert, CMapCompressionType, createValidAbsoluteUrl, deprecated, globalScope,\n  removeNullCharacters, stringToBytes, warn\n} from '../shared/util';\n\nvar DEFAULT_LINK_REL = 'noopener noreferrer nofollow';\n\nclass DOMCanvasFactory {\n  create(width, height) {\n    assert(width > 0 && height > 0, 'invalid canvas size');\n    let canvas = document.createElement('canvas');\n    let context = canvas.getContext('2d');\n    canvas.width = width;\n    canvas.height = height;\n    return {\n      canvas,\n      context,\n    };\n  }\n\n  reset(canvasAndContext, width, height) {\n    assert(canvasAndContext.canvas, 'canvas is not specified');\n    assert(width > 0 && height > 0, 'invalid canvas size');\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n\n  destroy(canvasAndContext) {\n    assert(canvasAndContext.canvas, 'canvas is not specified');\n    // Zeroing the width and height cause Firefox to release graphics\n    // resources immediately, which can greatly reduce memory consumption.\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n}\n\nclass DOMCMapReaderFactory {\n  constructor({ baseUrl = null, isCompressed = false, }) {\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n\n  fetch({ name, }) {\n    if (!name) {\n      return Promise.reject(new Error('CMap name must be specified.'));\n    }\n    return new Promise((resolve, reject) => {\n      let url = this.baseUrl + name + (this.isCompressed ? '.bcmap' : '');\n\n      let request = new XMLHttpRequest();\n      request.open('GET', url, true);\n\n      if (this.isCompressed) {\n        request.responseType = 'arraybuffer';\n      }\n      request.onreadystatechange = () => {\n        if (request.readyState !== XMLHttpRequest.DONE) {\n          return;\n        }\n        if (request.status === 200 || request.status === 0) {\n          let data;\n          if (this.isCompressed && request.response) {\n            data = new Uint8Array(request.response);\n          } else if (!this.isCompressed && request.responseText) {\n            data = stringToBytes(request.responseText);\n          }\n          if (data) {\n            resolve({\n              cMapData: data,\n              compressionType: this.isCompressed ?\n                CMapCompressionType.BINARY : CMapCompressionType.NONE,\n            });\n            return;\n          }\n        }\n        reject(new Error('Unable to load ' +\n                         (this.isCompressed ? 'binary ' : '') +\n                         'CMap at: ' + url));\n      };\n\n      request.send(null);\n    });\n  }\n}\n\n/**\n * Optimised CSS custom property getter/setter.\n * @class\n */\nvar CustomStyle = (function CustomStyleClosure() {\n\n  // As noted on: http://www.zachstronaut.com/posts/2009/02/17/\n  //              animate-css-transforms-firefox-webkit.html\n  // in some versions of IE9 it is critical that ms appear in this list\n  // before Moz\n  var prefixes = ['ms', 'Moz', 'Webkit', 'O'];\n  var _cache = Object.create(null);\n\n  function CustomStyle() {}\n\n  CustomStyle.getProp = function get(propName, element) {\n    // check cache only when no element is given\n    if (arguments.length === 1 && typeof _cache[propName] === 'string') {\n      return _cache[propName];\n    }\n\n    element = element || document.documentElement;\n    var style = element.style, prefixed, uPropName;\n\n    // test standard property first\n    if (typeof style[propName] === 'string') {\n      return (_cache[propName] = propName);\n    }\n\n    // capitalize\n    uPropName = propName.charAt(0).toUpperCase() + propName.slice(1);\n\n    // test vendor specific properties\n    for (var i = 0, l = prefixes.length; i < l; i++) {\n      prefixed = prefixes[i] + uPropName;\n      if (typeof style[prefixed] === 'string') {\n        return (_cache[propName] = prefixed);\n      }\n    }\n\n    // If all fails then set to undefined.\n    return (_cache[propName] = 'undefined');\n  };\n\n  CustomStyle.setProp = function set(propName, element, str) {\n    var prop = this.getProp(propName);\n    if (prop !== 'undefined') {\n      element.style[prop] = str;\n    }\n  };\n\n  return CustomStyle;\n})();\n\nvar RenderingCancelledException = (function RenderingCancelledException() {\n  function RenderingCancelledException(msg, type) {\n    this.message = msg;\n    this.type = type;\n  }\n\n  RenderingCancelledException.prototype = new Error();\n  RenderingCancelledException.prototype.name = 'RenderingCancelledException';\n  RenderingCancelledException.constructor = RenderingCancelledException;\n\n  return RenderingCancelledException;\n})();\n\nvar LinkTarget = {\n  NONE: 0, // Default value.\n  SELF: 1,\n  BLANK: 2,\n  PARENT: 3,\n  TOP: 4,\n};\n\nvar LinkTargetStringMap = [\n  '',\n  '_self',\n  '_blank',\n  '_parent',\n  '_top'\n];\n\n/**\n * @typedef ExternalLinkParameters\n * @typedef {Object} ExternalLinkParameters\n * @property {string} url - An absolute URL.\n * @property {LinkTarget} target - The link target.\n * @property {string} rel - The link relationship.\n */\n\n/**\n * Adds various attributes (href, title, target, rel) to hyperlinks.\n * @param {HTMLLinkElement} link - The link element.\n * @param {ExternalLinkParameters} params\n */\nfunction addLinkAttributes(link, params) {\n  var url = params && params.url;\n  link.href = link.title = (url ? removeNullCharacters(url) : '');\n\n  if (url) {\n    var target = params.target;\n    if (typeof target === 'undefined') {\n      target = getDefaultSetting('externalLinkTarget');\n    }\n    link.target = LinkTargetStringMap[target];\n\n    var rel = params.rel;\n    if (typeof rel === 'undefined') {\n      rel = getDefaultSetting('externalLinkRel');\n    }\n    link.rel = rel;\n  }\n}\n\n// Gets the file name from a given URL.\nfunction getFilenameFromUrl(url) {\n  var anchor = url.indexOf('#');\n  var query = url.indexOf('?');\n  var end = Math.min(\n    anchor > 0 ? anchor : url.length,\n    query > 0 ? query : url.length);\n  return url.substring(url.lastIndexOf('/', end) + 1, end);\n}\n\nfunction getDefaultSetting(id) {\n  // The list of the settings and their default is maintained for backward\n  // compatibility and shall not be extended or modified. See also global.js.\n  var globalSettings = globalScope.PDFJS;\n  switch (id) {\n    case 'pdfBug':\n      return globalSettings ? globalSettings.pdfBug : false;\n    case 'disableAutoFetch':\n      return globalSettings ? globalSettings.disableAutoFetch : false;\n    case 'disableStream':\n      return globalSettings ? globalSettings.disableStream : false;\n    case 'disableRange':\n      return globalSettings ? globalSettings.disableRange : false;\n    case 'disableFontFace':\n      return globalSettings ? globalSettings.disableFontFace : false;\n    case 'disableCreateObjectURL':\n      return globalSettings ? globalSettings.disableCreateObjectURL : false;\n    case 'disableWebGL':\n      return globalSettings ? globalSettings.disableWebGL : true;\n    case 'cMapUrl':\n      return globalSettings ? globalSettings.cMapUrl : null;\n    case 'cMapPacked':\n      return globalSettings ? globalSettings.cMapPacked : false;\n    case 'postMessageTransfers':\n      return globalSettings ? globalSettings.postMessageTransfers : true;\n    case 'workerPort':\n      return globalSettings ? globalSettings.workerPort : null;\n    case 'workerSrc':\n      return globalSettings ? globalSettings.workerSrc : null;\n    case 'disableWorker':\n      return globalSettings ? globalSettings.disableWorker : false;\n    case 'maxImageSize':\n      return globalSettings ? globalSettings.maxImageSize : -1;\n    case 'imageResourcesPath':\n      return globalSettings ? globalSettings.imageResourcesPath : '';\n    case 'isEvalSupported':\n      return globalSettings ? globalSettings.isEvalSupported : true;\n    case 'externalLinkTarget':\n      if (!globalSettings) {\n        return LinkTarget.NONE;\n      }\n      switch (globalSettings.externalLinkTarget) {\n        case LinkTarget.NONE:\n        case LinkTarget.SELF:\n        case LinkTarget.BLANK:\n        case LinkTarget.PARENT:\n        case LinkTarget.TOP:\n          return globalSettings.externalLinkTarget;\n      }\n      warn('PDFJS.externalLinkTarget is invalid: ' +\n           globalSettings.externalLinkTarget);\n      // Reset the external link target, to suppress further warnings.\n      globalSettings.externalLinkTarget = LinkTarget.NONE;\n      return LinkTarget.NONE;\n    case 'externalLinkRel':\n      return globalSettings ? globalSettings.externalLinkRel : DEFAULT_LINK_REL;\n    case 'enableStats':\n      return !!(globalSettings && globalSettings.enableStats);\n    case 'pdfjsNext':\n      return !!(globalSettings && globalSettings.pdfjsNext);\n    default:\n      throw new Error('Unknown default setting: ' + id);\n  }\n}\n\nfunction isExternalLinkTargetSet() {\n  var externalLinkTarget = getDefaultSetting('externalLinkTarget');\n  switch (externalLinkTarget) {\n    case LinkTarget.NONE:\n      return false;\n    case LinkTarget.SELF:\n    case LinkTarget.BLANK:\n    case LinkTarget.PARENT:\n    case LinkTarget.TOP:\n      return true;\n  }\n}\n\nfunction isValidUrl(url, allowRelative) {\n  deprecated('isValidUrl(), please use createValidAbsoluteUrl() instead.');\n  var baseUrl = allowRelative ? 'http://example.com' : null;\n  return createValidAbsoluteUrl(url, baseUrl) !== null;\n}\n\nexport {\n  CustomStyle,\n  RenderingCancelledException,\n  addLinkAttributes,\n  isExternalLinkTargetSet,\n  isValidUrl,\n  getFilenameFromUrl,\n  LinkTarget,\n  getDefaultSetting,\n  DEFAULT_LINK_REL,\n  DOMCanvasFactory,\n  DOMCMapReaderFactory,\n};\n\n\n\n// WEBPACK FOOTER //\n// src/display/dom_utils.js","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  addLinkAttributes, CustomStyle, getDefaultSetting, getFilenameFromUrl,\n  LinkTarget\n} from './dom_utils';\nimport {\n  AnnotationBorderStyleType, AnnotationType, stringToPDFString, Util, warn\n} from '../shared/util';\n\n/**\n * @typedef {Object} AnnotationElementParameters\n * @property {Object} data\n * @property {HTMLDivElement} layer\n * @property {PDFPage} page\n * @property {PageViewport} viewport\n * @property {IPDFLinkService} linkService\n * @property {DownloadManager} downloadManager\n * @property {string} imageResourcesPath\n * @property {boolean} renderInteractiveForms\n */\n\n/**\n * @class\n * @alias AnnotationElementFactory\n */\nfunction AnnotationElementFactory() {}\nAnnotationElementFactory.prototype =\n    /** @lends AnnotationElementFactory.prototype */ {\n  /**\n   * @param {AnnotationElementParameters} parameters\n   * @returns {AnnotationElement}\n   */\n  create: function AnnotationElementFactory_create(parameters) {\n    var subtype = parameters.data.annotationType;\n\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n\n      case AnnotationType.WIDGET:\n        var fieldType = parameters.data.fieldType;\n\n        switch (fieldType) {\n          case 'Tx':\n            return new TextWidgetAnnotationElement(parameters);\n          case 'Btn':\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            warn('Unimplemented button widget annotation: pushbutton');\n            break;\n          case 'Ch':\n            return new ChoiceWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n};\n\n/**\n * @class\n * @alias AnnotationElement\n */\nvar AnnotationElement = (function AnnotationElementClosure() {\n  function AnnotationElement(parameters, isRenderable, ignoreBorder) {\n    this.isRenderable = isRenderable || false;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.page = parameters.page;\n    this.viewport = parameters.viewport;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderInteractiveForms = parameters.renderInteractiveForms;\n\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n  }\n\n  AnnotationElement.prototype = /** @lends AnnotationElement.prototype */ {\n    /**\n     * Create an empty container for the annotation's HTML element.\n     *\n     * @private\n     * @param {boolean} ignoreBorder\n     * @memberof AnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    _createContainer:\n        function AnnotationElement_createContainer(ignoreBorder) {\n      var data = this.data, page = this.page, viewport = this.viewport;\n      var container = document.createElement('section');\n      var width = data.rect[2] - data.rect[0];\n      var height = data.rect[3] - data.rect[1];\n\n      container.setAttribute('data-annotation-id', data.id);\n\n      // Do *not* modify `data.rect`, since that will corrupt the annotation\n      // position on subsequent calls to `_createContainer` (see issue 6804).\n      var rect = Util.normalizeRect([\n        data.rect[0],\n        page.view[3] - data.rect[1] + page.view[1],\n        data.rect[2],\n        page.view[3] - data.rect[3] + page.view[1]\n      ]);\n\n      CustomStyle.setProp('transform', container,\n                          'matrix(' + viewport.transform.join(',') + ')');\n      CustomStyle.setProp('transformOrigin', container,\n                          -rect[0] + 'px ' + -rect[1] + 'px');\n\n      if (!ignoreBorder && data.borderStyle.width > 0) {\n        container.style.borderWidth = data.borderStyle.width + 'px';\n        if (data.borderStyle.style !== AnnotationBorderStyleType.UNDERLINE) {\n          // Underline styles only have a bottom border, so we do not need\n          // to adjust for all borders. This yields a similar result as\n          // Adobe Acrobat/Reader.\n          width = width - 2 * data.borderStyle.width;\n          height = height - 2 * data.borderStyle.width;\n        }\n\n        var horizontalRadius = data.borderStyle.horizontalCornerRadius;\n        var verticalRadius = data.borderStyle.verticalCornerRadius;\n        if (horizontalRadius > 0 || verticalRadius > 0) {\n          var radius = horizontalRadius + 'px / ' + verticalRadius + 'px';\n          CustomStyle.setProp('borderRadius', container, radius);\n        }\n\n        switch (data.borderStyle.style) {\n          case AnnotationBorderStyleType.SOLID:\n            container.style.borderStyle = 'solid';\n            break;\n\n          case AnnotationBorderStyleType.DASHED:\n            container.style.borderStyle = 'dashed';\n            break;\n\n          case AnnotationBorderStyleType.BEVELED:\n            warn('Unimplemented border style: beveled');\n            break;\n\n          case AnnotationBorderStyleType.INSET:\n            warn('Unimplemented border style: inset');\n            break;\n\n          case AnnotationBorderStyleType.UNDERLINE:\n            container.style.borderBottomStyle = 'solid';\n            break;\n\n          default:\n            break;\n        }\n\n        if (data.color) {\n          container.style.borderColor =\n            Util.makeCssRgb(data.color[0] | 0,\n                            data.color[1] | 0,\n                            data.color[2] | 0);\n        } else {\n          // Transparent (invisible) border, so do not draw it at all.\n          container.style.borderWidth = 0;\n        }\n      }\n\n      container.style.left = rect[0] + 'px';\n      container.style.top = rect[1] + 'px';\n\n      container.style.width = width + 'px';\n      container.style.height = height + 'px';\n\n      return container;\n    },\n\n    /**\n     * Create a popup for the annotation's HTML element. This is used for\n     * annotations that do not have a Popup entry in the dictionary, but\n     * are of a type that works with popups (such as Highlight annotations).\n     *\n     * @private\n     * @param {HTMLSectionElement} container\n     * @param {HTMLDivElement|HTMLImageElement|null} trigger\n     * @param {Object} data\n     * @memberof AnnotationElement\n     */\n    _createPopup:\n        function AnnotationElement_createPopup(container, trigger, data) {\n      // If no trigger element is specified, create it.\n      if (!trigger) {\n        trigger = document.createElement('div');\n        trigger.style.height = container.style.height;\n        trigger.style.width = container.style.width;\n        container.appendChild(trigger);\n      }\n\n      var popupElement = new PopupElement({\n        container,\n        trigger,\n        color: data.color,\n        title: data.title,\n        contents: data.contents,\n        hideWrapper: true\n      });\n      var popup = popupElement.render();\n\n      // Position the popup next to the annotation's container.\n      popup.style.left = container.style.width;\n\n      container.appendChild(popup);\n    },\n\n    /**\n     * Render the annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof AnnotationElement\n     */\n    render: function AnnotationElement_render() {\n      throw new Error('Abstract method AnnotationElement.render called');\n    }\n  };\n\n  return AnnotationElement;\n})();\n\n/**\n * @class\n * @alias LinkAnnotationElement\n */\nvar LinkAnnotationElement = (function LinkAnnotationElementClosure() {\n  function LinkAnnotationElement(parameters) {\n    AnnotationElement.call(this, parameters, true);\n  }\n\n  Util.inherit(LinkAnnotationElement, AnnotationElement, {\n    /**\n     * Render the link annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof LinkAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function LinkAnnotationElement_render() {\n      this.container.className = 'linkAnnotation';\n\n      var link = document.createElement('a');\n      addLinkAttributes(link, {\n        url: this.data.url,\n        target: (this.data.newWindow ? LinkTarget.BLANK : undefined),\n      });\n\n      if (!this.data.url) {\n        if (this.data.action) {\n          this._bindNamedAction(link, this.data.action);\n        } else {\n          this._bindLink(link, this.data.dest);\n        }\n      }\n\n      this.container.appendChild(link);\n      return this.container;\n    },\n\n    /**\n     * Bind internal links to the link element.\n     *\n     * @private\n     * @param {Object} link\n     * @param {Object} destination\n     * @memberof LinkAnnotationElement\n     */\n    _bindLink(link, destination) {\n      link.href = this.linkService.getDestinationHash(destination);\n      link.onclick = () => {\n        if (destination) {\n          this.linkService.navigateTo(destination);\n        }\n        return false;\n      };\n      if (destination) {\n        link.className = 'internalLink';\n      }\n    },\n\n    /**\n     * Bind named actions to the link element.\n     *\n     * @private\n     * @param {Object} link\n     * @param {Object} action\n     * @memberof LinkAnnotationElement\n     */\n    _bindNamedAction(link, action) {\n      link.href = this.linkService.getAnchorUrl('');\n      link.onclick = () => {\n        this.linkService.executeNamedAction(action);\n        return false;\n      };\n      link.className = 'internalLink';\n    }\n  });\n\n  return LinkAnnotationElement;\n})();\n\n/**\n * @class\n * @alias TextAnnotationElement\n */\nvar TextAnnotationElement = (function TextAnnotationElementClosure() {\n  function TextAnnotationElement(parameters) {\n    var isRenderable = !!(parameters.data.hasPopup ||\n                          parameters.data.title || parameters.data.contents);\n    AnnotationElement.call(this, parameters, isRenderable);\n  }\n\n  Util.inherit(TextAnnotationElement, AnnotationElement, {\n    /**\n     * Render the text annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof TextAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function TextAnnotationElement_render() {\n      this.container.className = 'textAnnotation';\n\n      var image = document.createElement('img');\n      image.style.height = this.container.style.height;\n      image.style.width = this.container.style.width;\n      image.src = this.imageResourcesPath + 'annotation-' +\n        this.data.name.toLowerCase() + '.svg';\n      image.alt = '[{{type}} Annotation]';\n      image.dataset.l10nId = 'text_annotation_type';\n      image.dataset.l10nArgs = JSON.stringify({type: this.data.name});\n\n      if (!this.data.hasPopup) {\n        this._createPopup(this.container, image, this.data);\n      }\n\n      this.container.appendChild(image);\n      return this.container;\n    }\n  });\n\n  return TextAnnotationElement;\n})();\n\n/**\n * @class\n * @alias WidgetAnnotationElement\n */\nvar WidgetAnnotationElement = (function WidgetAnnotationElementClosure() {\n  function WidgetAnnotationElement(parameters, isRenderable) {\n    AnnotationElement.call(this, parameters, isRenderable);\n  }\n\n  Util.inherit(WidgetAnnotationElement, AnnotationElement, {\n    /**\n     * Render the widget annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof WidgetAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function WidgetAnnotationElement_render() {\n      // Show only the container for unsupported field types.\n      return this.container;\n    }\n  });\n\n  return WidgetAnnotationElement;\n})();\n\n/**\n * @class\n * @alias TextWidgetAnnotationElement\n */\nvar TextWidgetAnnotationElement = (\n    function TextWidgetAnnotationElementClosure() {\n  var TEXT_ALIGNMENT = ['left', 'center', 'right'];\n\n  function TextWidgetAnnotationElement(parameters) {\n    var isRenderable = parameters.renderInteractiveForms ||\n      (!parameters.data.hasAppearance && !!parameters.data.fieldValue);\n    WidgetAnnotationElement.call(this, parameters, isRenderable);\n  }\n\n  Util.inherit(TextWidgetAnnotationElement, WidgetAnnotationElement, {\n    /**\n     * Render the text widget annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof TextWidgetAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function TextWidgetAnnotationElement_render() {\n      this.container.className = 'textWidgetAnnotation';\n\n      var element = null;\n      if (this.renderInteractiveForms) {\n        // NOTE: We cannot set the values using `element.value` below, since it\n        //       prevents the AnnotationLayer rasterizer in `test/driver.js`\n        //       from parsing the elements correctly for the reference tests.\n        if (this.data.multiLine) {\n          element = document.createElement('textarea');\n          element.textContent = this.data.fieldValue;\n        } else {\n          element = document.createElement('input');\n          element.type = 'text';\n          element.setAttribute('value', this.data.fieldValue);\n        }\n\n        element.disabled = this.data.readOnly;\n\n        if (this.data.maxLen !== null) {\n          element.maxLength = this.data.maxLen;\n        }\n\n        if (this.data.comb) {\n          var fieldWidth = this.data.rect[2] - this.data.rect[0];\n          var combWidth = fieldWidth / this.data.maxLen;\n\n          element.classList.add('comb');\n          element.style.letterSpacing = 'calc(' + combWidth + 'px - 1ch)';\n        }\n      } else {\n        element = document.createElement('div');\n        element.textContent = this.data.fieldValue;\n        element.style.verticalAlign = 'middle';\n        element.style.display = 'table-cell';\n\n        var font = null;\n        if (this.data.fontRefName) {\n          font = this.page.commonObjs.getData(this.data.fontRefName);\n        }\n        this._setTextStyle(element, font);\n      }\n\n      if (this.data.textAlignment !== null) {\n        element.style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n      }\n\n      this.container.appendChild(element);\n      return this.container;\n    },\n\n    /**\n     * Apply text styles to the text in the element.\n     *\n     * @private\n     * @param {HTMLDivElement} element\n     * @param {Object} font\n     * @memberof TextWidgetAnnotationElement\n     */\n    _setTextStyle:\n        function TextWidgetAnnotationElement_setTextStyle(element, font) {\n      // TODO: This duplicates some of the logic in CanvasGraphics.setFont().\n      var style = element.style;\n      style.fontSize = this.data.fontSize + 'px';\n      style.direction = (this.data.fontDirection < 0 ? 'rtl' : 'ltr');\n\n      if (!font) {\n        return;\n      }\n\n      style.fontWeight = (font.black ?\n        (font.bold ? '900' : 'bold') :\n        (font.bold ? 'bold' : 'normal'));\n      style.fontStyle = (font.italic ? 'italic' : 'normal');\n\n      // Use a reasonable default font if the font doesn't specify a fallback.\n      var fontFamily = font.loadedName ? '\"' + font.loadedName + '\", ' : '';\n      var fallbackName = font.fallbackName || 'Helvetica, sans-serif';\n      style.fontFamily = fontFamily + fallbackName;\n    }\n  });\n\n  return TextWidgetAnnotationElement;\n})();\n\n/**\n * @class\n * @alias CheckboxWidgetAnnotationElement\n */\nvar CheckboxWidgetAnnotationElement =\n    (function CheckboxWidgetAnnotationElementClosure() {\n  function CheckboxWidgetAnnotationElement(parameters) {\n    WidgetAnnotationElement.call(this, parameters,\n                                 parameters.renderInteractiveForms);\n  }\n\n  Util.inherit(CheckboxWidgetAnnotationElement, WidgetAnnotationElement, {\n    /**\n     * Render the checkbox widget annotation's HTML element\n     * in the empty container.\n     *\n     * @public\n     * @memberof CheckboxWidgetAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function CheckboxWidgetAnnotationElement_render() {\n      this.container.className = 'buttonWidgetAnnotation checkBox';\n\n      var element = document.createElement('input');\n      element.disabled = this.data.readOnly;\n      element.type = 'checkbox';\n      if (this.data.fieldValue && this.data.fieldValue !== 'Off') {\n        element.setAttribute('checked', true);\n      }\n\n      this.container.appendChild(element);\n      return this.container;\n    }\n  });\n\n  return CheckboxWidgetAnnotationElement;\n})();\n\n/**\n * @class\n * @alias RadioButtonWidgetAnnotationElement\n */\nvar RadioButtonWidgetAnnotationElement =\n    (function RadioButtonWidgetAnnotationElementClosure() {\n  function RadioButtonWidgetAnnotationElement(parameters) {\n    WidgetAnnotationElement.call(this, parameters,\n                                 parameters.renderInteractiveForms);\n  }\n\n  Util.inherit(RadioButtonWidgetAnnotationElement, WidgetAnnotationElement, {\n    /**\n     * Render the radio button widget annotation's HTML element\n     * in the empty container.\n     *\n     * @public\n     * @memberof RadioButtonWidgetAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function RadioButtonWidgetAnnotationElement_render() {\n      this.container.className = 'buttonWidgetAnnotation radioButton';\n\n      var element = document.createElement('input');\n      element.disabled = this.data.readOnly;\n      element.type = 'radio';\n      element.name = this.data.fieldName;\n      if (this.data.fieldValue === this.data.buttonValue) {\n        element.setAttribute('checked', true);\n      }\n\n      this.container.appendChild(element);\n      return this.container;\n    }\n  });\n\n  return RadioButtonWidgetAnnotationElement;\n})();\n\n /**\n * @class\n * @alias ChoiceWidgetAnnotationElement\n */\nvar ChoiceWidgetAnnotationElement = (\n    function ChoiceWidgetAnnotationElementClosure() {\n  function ChoiceWidgetAnnotationElement(parameters) {\n    WidgetAnnotationElement.call(this, parameters,\n                                 parameters.renderInteractiveForms);\n  }\n\n  Util.inherit(ChoiceWidgetAnnotationElement, WidgetAnnotationElement, {\n    /**\n     * Render the choice widget annotation's HTML element in the empty\n     * container.\n     *\n     * @public\n     * @memberof ChoiceWidgetAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function ChoiceWidgetAnnotationElement_render() {\n      this.container.className = 'choiceWidgetAnnotation';\n\n      var selectElement = document.createElement('select');\n      selectElement.disabled = this.data.readOnly;\n\n      if (!this.data.combo) {\n        // List boxes have a size and (optionally) multiple selection.\n        selectElement.size = this.data.options.length;\n\n        if (this.data.multiSelect) {\n          selectElement.multiple = true;\n        }\n      }\n\n      // Insert the options into the choice field.\n      for (var i = 0, ii = this.data.options.length; i < ii; i++) {\n        var option = this.data.options[i];\n\n        var optionElement = document.createElement('option');\n        optionElement.textContent = option.displayValue;\n        optionElement.value = option.exportValue;\n\n        if (this.data.fieldValue.indexOf(option.displayValue) >= 0) {\n          optionElement.setAttribute('selected', true);\n        }\n\n        selectElement.appendChild(optionElement);\n      }\n\n      this.container.appendChild(selectElement);\n      return this.container;\n    }\n  });\n\n  return ChoiceWidgetAnnotationElement;\n})();\n\n/**\n * @class\n * @alias PopupAnnotationElement\n */\nvar PopupAnnotationElement = (function PopupAnnotationElementClosure() {\n  // Do not render popup annotations for parent elements with these types as\n  // they create the popups themselves (because of custom trigger divs).\n  var IGNORE_TYPES = ['Line'];\n\n  function PopupAnnotationElement(parameters) {\n    var isRenderable = !!(parameters.data.title || parameters.data.contents);\n    AnnotationElement.call(this, parameters, isRenderable);\n  }\n\n  Util.inherit(PopupAnnotationElement, AnnotationElement, {\n    /**\n     * Render the popup annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof PopupAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function PopupAnnotationElement_render() {\n      this.container.className = 'popupAnnotation';\n\n      if (IGNORE_TYPES.indexOf(this.data.parentType) >= 0) {\n        return this.container;\n      }\n\n      var selector = '[data-annotation-id=\"' + this.data.parentId + '\"]';\n      var parentElement = this.layer.querySelector(selector);\n      if (!parentElement) {\n        return this.container;\n      }\n\n      var popup = new PopupElement({\n        container: this.container,\n        trigger: parentElement,\n        color: this.data.color,\n        title: this.data.title,\n        contents: this.data.contents\n      });\n\n      // Position the popup next to the parent annotation's container.\n      // PDF viewers ignore a popup annotation's rectangle.\n      var parentLeft = parseFloat(parentElement.style.left);\n      var parentWidth = parseFloat(parentElement.style.width);\n      CustomStyle.setProp('transformOrigin', this.container,\n                          -(parentLeft + parentWidth) + 'px -' +\n                          parentElement.style.top);\n      this.container.style.left = (parentLeft + parentWidth) + 'px';\n\n      this.container.appendChild(popup.render());\n      return this.container;\n    }\n  });\n\n  return PopupAnnotationElement;\n})();\n\n/**\n * @class\n * @alias PopupElement\n */\nvar PopupElement = (function PopupElementClosure() {\n  var BACKGROUND_ENLIGHT = 0.7;\n\n  function PopupElement(parameters) {\n    this.container = parameters.container;\n    this.trigger = parameters.trigger;\n    this.color = parameters.color;\n    this.title = parameters.title;\n    this.contents = parameters.contents;\n    this.hideWrapper = parameters.hideWrapper || false;\n\n    this.pinned = false;\n  }\n\n  PopupElement.prototype = /** @lends PopupElement.prototype */ {\n    /**\n     * Render the popup's HTML element.\n     *\n     * @public\n     * @memberof PopupElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function PopupElement_render() {\n      var wrapper = document.createElement('div');\n      wrapper.className = 'popupWrapper';\n\n      // For Popup annotations we hide the entire section because it contains\n      // only the popup. However, for Text annotations without a separate Popup\n      // annotation, we cannot hide the entire container as the image would\n      // disappear too. In that special case, hiding the wrapper suffices.\n      this.hideElement = (this.hideWrapper ? wrapper : this.container);\n      this.hideElement.setAttribute('hidden', true);\n\n      var popup = document.createElement('div');\n      popup.className = 'popup';\n\n      var color = this.color;\n      if (color) {\n        // Enlighten the color.\n        var r = BACKGROUND_ENLIGHT * (255 - color[0]) + color[0];\n        var g = BACKGROUND_ENLIGHT * (255 - color[1]) + color[1];\n        var b = BACKGROUND_ENLIGHT * (255 - color[2]) + color[2];\n        popup.style.backgroundColor = Util.makeCssRgb(r | 0, g | 0, b | 0);\n      }\n\n      var contents = this._formatContents(this.contents);\n      var title = document.createElement('h1');\n      title.textContent = this.title;\n\n      // Attach the event listeners to the trigger element.\n      this.trigger.addEventListener('click', this._toggle.bind(this));\n      this.trigger.addEventListener('mouseover', this._show.bind(this, false));\n      this.trigger.addEventListener('mouseout', this._hide.bind(this, false));\n      popup.addEventListener('click', this._hide.bind(this, true));\n\n      popup.appendChild(title);\n      popup.appendChild(contents);\n      wrapper.appendChild(popup);\n      return wrapper;\n    },\n\n    /**\n     * Format the contents of the popup by adding newlines where necessary.\n     *\n     * @private\n     * @param {string} contents\n     * @memberof PopupElement\n     * @returns {HTMLParagraphElement}\n     */\n    _formatContents: function PopupElement_formatContents(contents) {\n      var p = document.createElement('p');\n      var lines = contents.split(/(?:\\r\\n?|\\n)/);\n      for (var i = 0, ii = lines.length; i < ii; ++i) {\n        var line = lines[i];\n        p.appendChild(document.createTextNode(line));\n        if (i < (ii - 1)) {\n          p.appendChild(document.createElement('br'));\n        }\n      }\n      return p;\n    },\n\n    /**\n     * Toggle the visibility of the popup.\n     *\n     * @private\n     * @memberof PopupElement\n     */\n    _toggle: function PopupElement_toggle() {\n      if (this.pinned) {\n        this._hide(true);\n      } else {\n        this._show(true);\n      }\n    },\n\n    /**\n     * Show the popup.\n     *\n     * @private\n     * @param {boolean} pin\n     * @memberof PopupElement\n     */\n    _show: function PopupElement_show(pin) {\n      if (pin) {\n        this.pinned = true;\n      }\n      if (this.hideElement.hasAttribute('hidden')) {\n        this.hideElement.removeAttribute('hidden');\n        this.container.style.zIndex += 1;\n      }\n    },\n\n    /**\n     * Hide the popup.\n     *\n     * @private\n     * @param {boolean} unpin\n     * @memberof PopupElement\n     */\n    _hide: function PopupElement_hide(unpin) {\n      if (unpin) {\n        this.pinned = false;\n      }\n      if (!this.hideElement.hasAttribute('hidden') && !this.pinned) {\n        this.hideElement.setAttribute('hidden', true);\n        this.container.style.zIndex -= 1;\n      }\n    }\n  };\n\n  return PopupElement;\n})();\n\n/**\n * @class\n * @alias LineAnnotationElement\n */\nvar LineAnnotationElement = (function LineAnnotationElementClosure() {\n  var SVG_NS = 'http://www.w3.org/2000/svg';\n\n  function LineAnnotationElement(parameters) {\n    var isRenderable = !!(parameters.data.hasPopup ||\n                          parameters.data.title || parameters.data.contents);\n    AnnotationElement.call(this, parameters, isRenderable,\n                           /* ignoreBorder = */ true);\n  }\n\n  Util.inherit(LineAnnotationElement, AnnotationElement, {\n    /**\n     * Render the line annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof LineAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function LineAnnotationElement_render() {\n      this.container.className = 'lineAnnotation';\n\n      // Create an invisible line with the same starting and ending coordinates\n      // that acts as the trigger for the popup. Only the line itself should\n      // trigger the popup, not the entire container.\n      var data = this.data;\n      var width = data.rect[2] - data.rect[0];\n      var height = data.rect[3] - data.rect[1];\n\n      var svg = document.createElementNS(SVG_NS, 'svg:svg');\n      svg.setAttributeNS(null, 'version', '1.1');\n      svg.setAttributeNS(null, 'width', width + 'px');\n      svg.setAttributeNS(null, 'height', height + 'px');\n      svg.setAttributeNS(null, 'preserveAspectRatio', 'none');\n      svg.setAttributeNS(null, 'viewBox', '0 0 ' + width + ' ' + height);\n\n      // PDF coordinates are calculated from a bottom left origin, so transform\n      // the line coordinates to a top left origin for the SVG element.\n      var line = document.createElementNS(SVG_NS, 'svg:line');\n      line.setAttributeNS(null, 'x1', data.rect[2] - data.lineCoordinates[0]);\n      line.setAttributeNS(null, 'y1', data.rect[3] - data.lineCoordinates[1]);\n      line.setAttributeNS(null, 'x2', data.rect[2] - data.lineCoordinates[2]);\n      line.setAttributeNS(null, 'y2', data.rect[3] - data.lineCoordinates[3]);\n      line.setAttributeNS(null, 'stroke-width', data.borderStyle.width);\n      line.setAttributeNS(null, 'stroke', 'transparent');\n\n      svg.appendChild(line);\n      this.container.append(svg);\n\n      // Create the popup ourselves so that we can bind it to the line instead\n      // of to the entire container (which is the default).\n      this._createPopup(this.container, line, this.data);\n\n      return this.container;\n    }\n  });\n\n  return LineAnnotationElement;\n})();\n\n/**\n * @class\n * @alias HighlightAnnotationElement\n */\nvar HighlightAnnotationElement = (\n    function HighlightAnnotationElementClosure() {\n  function HighlightAnnotationElement(parameters) {\n    var isRenderable = !!(parameters.data.hasPopup ||\n                          parameters.data.title || parameters.data.contents);\n    AnnotationElement.call(this, parameters, isRenderable,\n                           /* ignoreBorder = */ true);\n  }\n\n  Util.inherit(HighlightAnnotationElement, AnnotationElement, {\n    /**\n     * Render the highlight annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof HighlightAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function HighlightAnnotationElement_render() {\n      this.container.className = 'highlightAnnotation';\n\n      if (!this.data.hasPopup) {\n        this._createPopup(this.container, null, this.data);\n      }\n      return this.container;\n    }\n  });\n\n  return HighlightAnnotationElement;\n})();\n\n/**\n * @class\n * @alias UnderlineAnnotationElement\n */\nvar UnderlineAnnotationElement = (\n    function UnderlineAnnotationElementClosure() {\n  function UnderlineAnnotationElement(parameters) {\n    var isRenderable = !!(parameters.data.hasPopup ||\n                          parameters.data.title || parameters.data.contents);\n    AnnotationElement.call(this, parameters, isRenderable,\n                           /* ignoreBorder = */ true);\n  }\n\n  Util.inherit(UnderlineAnnotationElement, AnnotationElement, {\n    /**\n     * Render the underline annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof UnderlineAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function UnderlineAnnotationElement_render() {\n      this.container.className = 'underlineAnnotation';\n\n      if (!this.data.hasPopup) {\n        this._createPopup(this.container, null, this.data);\n      }\n      return this.container;\n    }\n  });\n\n  return UnderlineAnnotationElement;\n})();\n\n/**\n * @class\n * @alias SquigglyAnnotationElement\n */\nvar SquigglyAnnotationElement = (function SquigglyAnnotationElementClosure() {\n  function SquigglyAnnotationElement(parameters) {\n    var isRenderable = !!(parameters.data.hasPopup ||\n                          parameters.data.title || parameters.data.contents);\n    AnnotationElement.call(this, parameters, isRenderable,\n                           /* ignoreBorder = */ true);\n  }\n\n  Util.inherit(SquigglyAnnotationElement, AnnotationElement, {\n    /**\n     * Render the squiggly annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof SquigglyAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function SquigglyAnnotationElement_render() {\n      this.container.className = 'squigglyAnnotation';\n\n      if (!this.data.hasPopup) {\n        this._createPopup(this.container, null, this.data);\n      }\n      return this.container;\n    }\n  });\n\n  return SquigglyAnnotationElement;\n})();\n\n/**\n * @class\n * @alias StrikeOutAnnotationElement\n */\nvar StrikeOutAnnotationElement = (\n    function StrikeOutAnnotationElementClosure() {\n  function StrikeOutAnnotationElement(parameters) {\n    var isRenderable = !!(parameters.data.hasPopup ||\n                          parameters.data.title || parameters.data.contents);\n    AnnotationElement.call(this, parameters, isRenderable,\n                           /* ignoreBorder = */ true);\n  }\n\n  Util.inherit(StrikeOutAnnotationElement, AnnotationElement, {\n    /**\n     * Render the strikeout annotation's HTML element in the empty container.\n     *\n     * @public\n     * @memberof StrikeOutAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function StrikeOutAnnotationElement_render() {\n      this.container.className = 'strikeoutAnnotation';\n\n      if (!this.data.hasPopup) {\n        this._createPopup(this.container, null, this.data);\n      }\n      return this.container;\n    }\n  });\n\n  return StrikeOutAnnotationElement;\n})();\n\n/**\n * @class\n * @alias FileAttachmentAnnotationElement\n */\nvar FileAttachmentAnnotationElement = (\n    function FileAttachmentAnnotationElementClosure() {\n  function FileAttachmentAnnotationElement(parameters) {\n    AnnotationElement.call(this, parameters, true);\n\n    var file = this.data.file;\n    this.filename = getFilenameFromUrl(file.filename);\n    this.content = file.content;\n\n    this.linkService.onFileAttachmentAnnotation({\n      id: stringToPDFString(file.filename),\n      filename: file.filename,\n      content: file.content,\n    });\n  }\n\n  Util.inherit(FileAttachmentAnnotationElement, AnnotationElement, {\n    /**\n     * Render the file attachment annotation's HTML element in the empty\n     * container.\n     *\n     * @public\n     * @memberof FileAttachmentAnnotationElement\n     * @returns {HTMLSectionElement}\n     */\n    render: function FileAttachmentAnnotationElement_render() {\n      this.container.className = 'fileAttachmentAnnotation';\n\n      var trigger = document.createElement('div');\n      trigger.style.height = this.container.style.height;\n      trigger.style.width = this.container.style.width;\n      trigger.addEventListener('dblclick', this._download.bind(this));\n\n      if (!this.data.hasPopup && (this.data.title || this.data.contents)) {\n        this._createPopup(this.container, trigger, this.data);\n      }\n\n      this.container.appendChild(trigger);\n      return this.container;\n    },\n\n    /**\n     * Download the file attachment associated with this annotation.\n     *\n     * @private\n     * @memberof FileAttachmentAnnotationElement\n     */\n    _download: function FileAttachmentAnnotationElement_download() {\n      if (!this.downloadManager) {\n        warn('Download cannot be started due to unavailable download manager');\n        return;\n      }\n      this.downloadManager.downloadData(this.content, this.filename, '');\n    }\n  });\n\n  return FileAttachmentAnnotationElement;\n})();\n\n/**\n * @typedef {Object} AnnotationLayerParameters\n * @property {PageViewport} viewport\n * @property {HTMLDivElement} div\n * @property {Array} annotations\n * @property {PDFPage} page\n * @property {IPDFLinkService} linkService\n * @property {string} imageResourcesPath\n * @property {boolean} renderInteractiveForms\n */\n\n/**\n * @class\n * @alias AnnotationLayer\n */\nvar AnnotationLayer = (function AnnotationLayerClosure() {\n  return {\n    /**\n     * Render a new annotation layer with all annotation elements.\n     *\n     * @public\n     * @param {AnnotationLayerParameters} parameters\n     * @memberof AnnotationLayer\n     */\n    render: function AnnotationLayer_render(parameters) {\n      var annotationElementFactory = new AnnotationElementFactory();\n\n      for (var i = 0, ii = parameters.annotations.length; i < ii; i++) {\n        var data = parameters.annotations[i];\n        if (!data) {\n          continue;\n        }\n        var element = annotationElementFactory.create({\n          data,\n          layer: parameters.div,\n          page: parameters.page,\n          viewport: parameters.viewport,\n          linkService: parameters.linkService,\n          downloadManager: parameters.downloadManager,\n          imageResourcesPath: parameters.imageResourcesPath ||\n                              getDefaultSetting('imageResourcesPath'),\n          renderInteractiveForms: parameters.renderInteractiveForms || false,\n        });\n        if (element.isRenderable) {\n          parameters.div.appendChild(element.render());\n        }\n      }\n    },\n\n    /**\n     * Update the annotation elements on existing annotation layer.\n     *\n     * @public\n     * @param {AnnotationLayerParameters} parameters\n     * @memberof AnnotationLayer\n     */\n    update: function AnnotationLayer_update(parameters) {\n      for (var i = 0, ii = parameters.annotations.length; i < ii; i++) {\n        var data = parameters.annotations[i];\n        var element = parameters.div.querySelector(\n          '[data-annotation-id=\"' + data.id + '\"]');\n        if (element) {\n          CustomStyle.setProp('transform', element,\n            'matrix(' + parameters.viewport.transform.join(',') + ')');\n        }\n      }\n      parameters.div.removeAttribute('hidden');\n    }\n  };\n})();\n\nexport {\n  AnnotationLayer,\n};\n\n\n\n// WEBPACK FOOTER //\n// src/display/annotation_layer.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals requirejs, __pdfjsdev_webpack__ */\n\nimport {\n  createPromiseCapability, deprecated, error, getVerbosityLevel, globalScope,\n  info, InvalidPDFException, isArray, isArrayBuffer, isInt, isSameOrigin,\n  loadJpegStream, MessageHandler, MissingPDFException, NativeImageDecoding,\n  PageViewport, PasswordException, StatTimer, stringToBytes,\n  UnexpectedResponseException, UnknownErrorException, Util, warn\n} from '../shared/util';\nimport {\n  DOMCanvasFactory, DOMCMapReaderFactory, getDefaultSetting,\n  RenderingCancelledException\n} from './dom_utils';\nimport { FontFaceObject, FontLoader } from './font_loader';\nimport { CanvasGraphics } from './canvas';\nimport { Metadata } from './metadata';\n\nvar DEFAULT_RANGE_CHUNK_SIZE = 65536; // 2^16 = 65536\n\nvar isWorkerDisabled = false;\nvar workerSrc;\nvar isPostMessageTransfersDisabled = false;\n\nvar pdfjsFilePath =\n  typeof PDFJSDev !== 'undefined' &&\n  PDFJSDev.test('PRODUCTION && !(MOZCENTRAL || FIREFOX)') &&\n  typeof document !== 'undefined' && document.currentScript ?\n    document.currentScript.src : null;\n\nvar fakeWorkerFilesLoader = null;\nvar useRequireEnsure = false;\n// The if below protected by __pdfjsdev_webpack__ check from webpack parsing.\nif (typeof PDFJSDev !== 'undefined' &&\n    PDFJSDev.test('GENERIC && !SINGLE_FILE') &&\n    typeof __pdfjsdev_webpack__ === 'undefined') {\n  // For GENERIC build we need add support of different fake file loaders\n  // for different  frameworks.\n  if (typeof window === 'undefined') {\n    // node.js - disable worker and set require.ensure.\n    isWorkerDisabled = true;\n    if (typeof require.ensure === 'undefined') {\n      require.ensure = require('node-ensure');\n    }\n    useRequireEnsure = true;\n  } else if (typeof require !== 'undefined' &&\n             typeof require.ensure === 'function') {\n    useRequireEnsure = true;\n  }\n  if (typeof requirejs !== 'undefined' && requirejs.toUrl) {\n    workerSrc = requirejs.toUrl('pdfjs-dist/build/pdf.worker.js');\n  }\n  var dynamicLoaderSupported =\n    typeof requirejs !== 'undefined' && requirejs.load;\n  fakeWorkerFilesLoader = useRequireEnsure ? (function (callback) {\n    require.ensure([], function () {\n      var worker;\n      if (typeof PDFJSDev !== 'undefined' && PDFJSDev.test('LIB')) {\n        worker = require('../pdf.worker.js');\n      } else {\n        worker = require('./pdf.worker.js');\n      }\n      callback(worker.WorkerMessageHandler);\n    });\n  }) : dynamicLoaderSupported ? (function (callback) {\n    requirejs(['pdfjs-dist/build/pdf.worker'], function (worker) {\n      callback(worker.WorkerMessageHandler);\n    });\n  }) : null;\n}\n\n/**\n * Document initialization / loading parameters object.\n *\n * @typedef {Object} DocumentInitParameters\n * @property {string}     url   - The URL of the PDF.\n * @property {TypedArray|Array|string} data - Binary PDF data. Use typed arrays\n *   (Uint8Array) to improve the memory usage. If PDF data is BASE64-encoded,\n *   use atob() to convert it to a binary string first.\n * @property {Object}     httpHeaders - Basic authentication headers.\n * @property {boolean}    withCredentials - Indicates whether or not cross-site\n *   Access-Control requests should be made using credentials such as cookies\n *   or authorization headers. The default is false.\n * @property {string}     password - For decrypting password-protected PDFs.\n * @property {TypedArray} initialData - A typed array with the first portion or\n *   all of the pdf data. Used by the extension since some data is already\n *   loaded before the switch to range requests.\n * @property {number}     length - The PDF file length. It's used for progress\n *   reports and range requests operations.\n * @property {PDFDataRangeTransport} range\n * @property {number}     rangeChunkSize - Optional parameter to specify\n *   maximum number of bytes fetched per range request. The default value is\n *   2^16 = 65536.\n * @property {PDFWorker}  worker - The worker that will be used for the loading\n *   and parsing of the PDF data.\n * @property {string} docBaseUrl - (optional) The base URL of the document,\n *   used when attempting to recover valid absolute URLs for annotations, and\n *   outline items, that (incorrectly) only specify relative URLs.\n * @property {boolean} disableNativeImageDecoder - (deprecated) Disable decoding\n *   of certain (simple) JPEG images in the browser. This is useful for\n *   environments without DOM image support, such as e.g. Node.js.\n *   The default value is `false`.\n * @property {string} nativeImageDecoderSupport - (optional) Strategy for\n *   decoding certain (simple) JPEG images in the browser. This is useful for\n *   environments without DOM image and canvas support, such as e.g. Node.js.\n *   Valid values are 'decode', 'display' or 'none'; where 'decode' is intended\n *   for browsers with full image/canvas support, 'display' for environments\n *   with limited image support through stubs (useful for SVG conversion),\n *   and 'none' where JPEG images will be decoded entirely by PDF.js.\n *   The default value is 'decode'.\n * @property {Object} CMapReaderFactory - (optional) The factory that will be\n *   used when reading built-in CMap files. Providing a custom factory is useful\n *   for environments without `XMLHttpRequest` support, such as e.g. Node.js.\n *   The default value is {DOMCMapReaderFactory}.\n * @property {boolean} stopAtErrors - (optional) Reject certain promises, e.g.\n *   `getOperatorList`, `getTextContent`, and `RenderTask`, when the associated\n *   PDF data cannot be successfully parsed, instead of attempting to recover\n *   whatever possible of the data. The default value is `false`.\n */\n\n/**\n * @typedef {Object} PDFDocumentStats\n * @property {Array} streamTypes - Used stream types in the document (an item\n *   is set to true if specific stream ID was used in the document).\n * @property {Array} fontTypes - Used font type in the document (an item is set\n *   to true if specific font ID was used in the document).\n */\n\n/**\n * This is the main entry point for loading a PDF and interacting with it.\n * NOTE: If a URL is used to fetch the PDF data a standard XMLHttpRequest(XHR)\n * is used, which means it must follow the same origin rules that any XHR does\n * e.g. No cross domain requests without CORS.\n *\n * @param {string|TypedArray|DocumentInitParameters|PDFDataRangeTransport} src\n * Can be a url to where a PDF is located, a typed array (Uint8Array)\n * already populated with data or parameter object.\n *\n * @param {PDFDataRangeTransport} pdfDataRangeTransport (deprecated) It is used\n * if you want to manually serve range requests for data in the PDF.\n *\n * @param {function} passwordCallback (deprecated) It is used to request a\n * password if wrong or no password was provided. The callback receives two\n * parameters: function that needs to be called with new password and reason\n * (see {PasswordResponses}).\n *\n * @param {function} progressCallback (deprecated) It is used to be able to\n * monitor the loading progress of the PDF file (necessary to implement e.g.\n * a loading bar). The callback receives an {Object} with the properties:\n * {number} loaded and {number} total.\n *\n * @return {PDFDocumentLoadingTask}\n */\nfunction getDocument(src, pdfDataRangeTransport,\n                     passwordCallback, progressCallback) {\n  var task = new PDFDocumentLoadingTask();\n\n  // Support of the obsolete arguments (for compatibility with API v1.0)\n  if (arguments.length > 1) {\n    deprecated('getDocument is called with pdfDataRangeTransport, ' +\n               'passwordCallback or progressCallback argument');\n  }\n  if (pdfDataRangeTransport) {\n    if (!(pdfDataRangeTransport instanceof PDFDataRangeTransport)) {\n      // Not a PDFDataRangeTransport instance, trying to add missing properties.\n      pdfDataRangeTransport = Object.create(pdfDataRangeTransport);\n      pdfDataRangeTransport.length = src.length;\n      pdfDataRangeTransport.initialData = src.initialData;\n      if (!pdfDataRangeTransport.abort) {\n        pdfDataRangeTransport.abort = function () {};\n      }\n    }\n    src = Object.create(src);\n    src.range = pdfDataRangeTransport;\n  }\n  task.onPassword = passwordCallback || null;\n  task.onProgress = progressCallback || null;\n\n  var source;\n  if (typeof src === 'string') {\n    source = { url: src };\n  } else if (isArrayBuffer(src)) {\n    source = { data: src };\n  } else if (src instanceof PDFDataRangeTransport) {\n    source = { range: src };\n  } else {\n    if (typeof src !== 'object') {\n      error('Invalid parameter in getDocument, need either Uint8Array, ' +\n        'string or a parameter object');\n    }\n    if (!src.url && !src.data && !src.range) {\n      error('Invalid parameter object: need either .data, .range or .url');\n    }\n\n    source = src;\n  }\n\n  var params = {};\n  var rangeTransport = null;\n  var worker = null;\n  for (var key in source) {\n    if (key === 'url' && typeof window !== 'undefined') {\n      // The full path is required in the 'url' field.\n      params[key] = new URL(source[key], window.location).href;\n      continue;\n    } else if (key === 'range') {\n      rangeTransport = source[key];\n      continue;\n    } else if (key === 'worker') {\n      worker = source[key];\n      continue;\n    } else if (key === 'data' && !(source[key] instanceof Uint8Array)) {\n      // Converting string or array-like data to Uint8Array.\n      var pdfBytes = source[key];\n      if (typeof pdfBytes === 'string') {\n        params[key] = stringToBytes(pdfBytes);\n      } else if (typeof pdfBytes === 'object' && pdfBytes !== null &&\n                 !isNaN(pdfBytes.length)) {\n        params[key] = new Uint8Array(pdfBytes);\n      } else if (isArrayBuffer(pdfBytes)) {\n        params[key] = new Uint8Array(pdfBytes);\n      } else {\n        error('Invalid PDF binary data: either typed array, string or ' +\n              'array-like object is expected in the data property.');\n      }\n      continue;\n    }\n    params[key] = source[key];\n  }\n\n  params.rangeChunkSize = params.rangeChunkSize || DEFAULT_RANGE_CHUNK_SIZE;\n  params.ignoreErrors = params.stopAtErrors !== true;\n  var CMapReaderFactory = params.CMapReaderFactory || DOMCMapReaderFactory;\n\n  if (params.disableNativeImageDecoder !== undefined) {\n    deprecated('parameter disableNativeImageDecoder, ' +\n      'use nativeImageDecoderSupport instead');\n  }\n  params.nativeImageDecoderSupport = params.nativeImageDecoderSupport ||\n    (params.disableNativeImageDecoder === true ? NativeImageDecoding.NONE :\n      NativeImageDecoding.DECODE);\n  if (params.nativeImageDecoderSupport !== NativeImageDecoding.DECODE &&\n      params.nativeImageDecoderSupport !== NativeImageDecoding.NONE &&\n      params.nativeImageDecoderSupport !== NativeImageDecoding.DISPLAY) {\n    warn('Invalid parameter nativeImageDecoderSupport: ' +\n      'need a state of enum {NativeImageDecoding}');\n    params.nativeImageDecoderSupport = NativeImageDecoding.DECODE;\n  }\n\n  if (!worker) {\n    // Worker was not provided -- creating and owning our own. If message port\n    // is specified in global settings, using it.\n    var workerPort = getDefaultSetting('workerPort');\n    worker = workerPort ? new PDFWorker(null, workerPort) : new PDFWorker();\n    task._worker = worker;\n  }\n  var docId = task.docId;\n  worker.promise.then(function () {\n    if (task.destroyed) {\n      throw new Error('Loading aborted');\n    }\n    return _fetchDocument(worker, params, rangeTransport, docId).then(\n        function (workerId) {\n      if (task.destroyed) {\n        throw new Error('Loading aborted');\n      }\n      var messageHandler = new MessageHandler(docId, workerId, worker.port);\n      var transport = new WorkerTransport(messageHandler, task, rangeTransport,\n                                          CMapReaderFactory);\n      task._transport = transport;\n      messageHandler.send('Ready', null);\n    });\n  }).catch(task._capability.reject);\n\n  return task;\n}\n\n/**\n * Starts fetching of specified PDF document/data.\n * @param {PDFWorker} worker\n * @param {Object} source\n * @param {PDFDataRangeTransport} pdfDataRangeTransport\n * @param {string} docId Unique document id, used as MessageHandler id.\n * @returns {Promise} The promise, which is resolved when worker id of\n *                    MessageHandler is known.\n * @private\n */\nfunction _fetchDocument(worker, source, pdfDataRangeTransport, docId) {\n  if (worker.destroyed) {\n    return Promise.reject(new Error('Worker was destroyed'));\n  }\n\n  source.disableAutoFetch = getDefaultSetting('disableAutoFetch');\n  source.disableStream = getDefaultSetting('disableStream');\n  source.chunkedViewerLoading = !!pdfDataRangeTransport;\n  if (pdfDataRangeTransport) {\n    source.length = pdfDataRangeTransport.length;\n    source.initialData = pdfDataRangeTransport.initialData;\n  }\n  return worker.messageHandler.sendWithPromise('GetDocRequest', {\n    docId,\n    source,\n    disableRange: getDefaultSetting('disableRange'),\n    maxImageSize: getDefaultSetting('maxImageSize'),\n    disableFontFace: getDefaultSetting('disableFontFace'),\n    disableCreateObjectURL: getDefaultSetting('disableCreateObjectURL'),\n    postMessageTransfers: getDefaultSetting('postMessageTransfers') &&\n                          !isPostMessageTransfersDisabled,\n    docBaseUrl: source.docBaseUrl,\n    nativeImageDecoderSupport: source.nativeImageDecoderSupport,\n    ignoreErrors: source.ignoreErrors,\n  }).then(function (workerId) {\n    if (worker.destroyed) {\n      throw new Error('Worker was destroyed');\n    }\n    return workerId;\n  });\n}\n\n/**\n * PDF document loading operation.\n * @class\n * @alias PDFDocumentLoadingTask\n */\nvar PDFDocumentLoadingTask = (function PDFDocumentLoadingTaskClosure() {\n  var nextDocumentId = 0;\n\n  /** @constructs PDFDocumentLoadingTask */\n  function PDFDocumentLoadingTask() {\n    this._capability = createPromiseCapability();\n    this._transport = null;\n    this._worker = null;\n\n    /**\n     * Unique document loading task id -- used in MessageHandlers.\n     * @type {string}\n     */\n    this.docId = 'd' + (nextDocumentId++);\n\n    /**\n     * Shows if loading task is destroyed.\n     * @type {boolean}\n     */\n    this.destroyed = false;\n\n    /**\n     * Callback to request a password if wrong or no password was provided.\n     * The callback receives two parameters: function that needs to be called\n     * with new password and reason (see {PasswordResponses}).\n     */\n    this.onPassword = null;\n\n    /**\n     * Callback to be able to monitor the loading progress of the PDF file\n     * (necessary to implement e.g. a loading bar). The callback receives\n     * an {Object} with the properties: {number} loaded and {number} total.\n     */\n    this.onProgress = null;\n\n    /**\n     * Callback to when unsupported feature is used. The callback receives\n     * an {UNSUPPORTED_FEATURES} argument.\n     */\n    this.onUnsupportedFeature = null;\n  }\n\n  PDFDocumentLoadingTask.prototype =\n      /** @lends PDFDocumentLoadingTask.prototype */ {\n    /**\n     * @return {Promise}\n     */\n    get promise() {\n      return this._capability.promise;\n    },\n\n    /**\n     * Aborts all network requests and destroys worker.\n     * @return {Promise} A promise that is resolved after destruction activity\n     *                   is completed.\n     */\n    destroy() {\n      this.destroyed = true;\n\n      var transportDestroyed = !this._transport ? Promise.resolve() :\n        this._transport.destroy();\n      return transportDestroyed.then(() => {\n        this._transport = null;\n        if (this._worker) {\n          this._worker.destroy();\n          this._worker = null;\n        }\n      });\n    },\n\n    /**\n     * Registers callbacks to indicate the document loading completion.\n     *\n     * @param {function} onFulfilled The callback for the loading completion.\n     * @param {function} onRejected The callback for the loading failure.\n     * @return {Promise} A promise that is resolved after the onFulfilled or\n     *                   onRejected callback.\n     */\n    then: function PDFDocumentLoadingTask_then(onFulfilled, onRejected) {\n      return this.promise.then.apply(this.promise, arguments);\n    }\n  };\n\n  return PDFDocumentLoadingTask;\n})();\n\n/**\n * Abstract class to support range requests file loading.\n * @class\n * @alias PDFDataRangeTransport\n * @param {number} length\n * @param {Uint8Array} initialData\n */\nvar PDFDataRangeTransport = (function pdfDataRangeTransportClosure() {\n  function PDFDataRangeTransport(length, initialData) {\n    this.length = length;\n    this.initialData = initialData;\n\n    this._rangeListeners = [];\n    this._progressListeners = [];\n    this._progressiveReadListeners = [];\n    this._readyCapability = createPromiseCapability();\n  }\n  PDFDataRangeTransport.prototype =\n      /** @lends PDFDataRangeTransport.prototype */ {\n    addRangeListener:\n        function PDFDataRangeTransport_addRangeListener(listener) {\n      this._rangeListeners.push(listener);\n    },\n\n    addProgressListener:\n        function PDFDataRangeTransport_addProgressListener(listener) {\n      this._progressListeners.push(listener);\n    },\n\n    addProgressiveReadListener:\n        function PDFDataRangeTransport_addProgressiveReadListener(listener) {\n      this._progressiveReadListeners.push(listener);\n    },\n\n    onDataRange: function PDFDataRangeTransport_onDataRange(begin, chunk) {\n      var listeners = this._rangeListeners;\n      for (var i = 0, n = listeners.length; i < n; ++i) {\n        listeners[i](begin, chunk);\n      }\n    },\n\n    onDataProgress: function PDFDataRangeTransport_onDataProgress(loaded) {\n      this._readyCapability.promise.then(() => {\n        var listeners = this._progressListeners;\n        for (var i = 0, n = listeners.length; i < n; ++i) {\n          listeners[i](loaded);\n        }\n      });\n    },\n\n    onDataProgressiveRead:\n        function PDFDataRangeTransport_onDataProgress(chunk) {\n      this._readyCapability.promise.then(() => {\n        var listeners = this._progressiveReadListeners;\n        for (var i = 0, n = listeners.length; i < n; ++i) {\n          listeners[i](chunk);\n        }\n      });\n    },\n\n    transportReady: function PDFDataRangeTransport_transportReady() {\n      this._readyCapability.resolve();\n    },\n\n    requestDataRange:\n        function PDFDataRangeTransport_requestDataRange(begin, end) {\n      throw new Error('Abstract method PDFDataRangeTransport.requestDataRange');\n    },\n\n    abort: function PDFDataRangeTransport_abort() {\n    }\n  };\n  return PDFDataRangeTransport;\n})();\n\n/**\n * Proxy to a PDFDocument in the worker thread. Also, contains commonly used\n * properties that can be read synchronously.\n * @class\n * @alias PDFDocumentProxy\n */\nvar PDFDocumentProxy = (function PDFDocumentProxyClosure() {\n  function PDFDocumentProxy(pdfInfo, transport, loadingTask) {\n    this.pdfInfo = pdfInfo;\n    this.transport = transport;\n    this.loadingTask = loadingTask;\n  }\n  PDFDocumentProxy.prototype = /** @lends PDFDocumentProxy.prototype */ {\n    /**\n     * @return {number} Total number of pages the PDF contains.\n     */\n    get numPages() {\n      return this.pdfInfo.numPages;\n    },\n    /**\n     * @return {string} A unique ID to identify a PDF. Not guaranteed to be\n     * unique.\n     */\n    get fingerprint() {\n      return this.pdfInfo.fingerprint;\n    },\n    /**\n     * @param {number} pageNumber The page number to get. The first page is 1.\n     * @return {Promise} A promise that is resolved with a {@link PDFPageProxy}\n     * object.\n     */\n    getPage: function PDFDocumentProxy_getPage(pageNumber) {\n      return this.transport.getPage(pageNumber);\n    },\n    /**\n     * @param {{num: number, gen: number}} ref The page reference. Must have\n     *   the 'num' and 'gen' properties.\n     * @return {Promise} A promise that is resolved with the page index that is\n     * associated with the reference.\n     */\n    getPageIndex: function PDFDocumentProxy_getPageIndex(ref) {\n      return this.transport.getPageIndex(ref);\n    },\n    /**\n     * @return {Promise} A promise that is resolved with a lookup table for\n     * mapping named destinations to reference numbers.\n     *\n     * This can be slow for large documents: use getDestination instead\n     */\n    getDestinations: function PDFDocumentProxy_getDestinations() {\n      return this.transport.getDestinations();\n    },\n    /**\n     * @param {string} id The named destination to get.\n     * @return {Promise} A promise that is resolved with all information\n     * of the given named destination.\n     */\n    getDestination: function PDFDocumentProxy_getDestination(id) {\n      return this.transport.getDestination(id);\n    },\n    /**\n     * @return {Promise} A promise that is resolved with:\n     *   an Array containing the pageLabels that correspond to the pageIndexes,\n     *   or `null` when no pageLabels are present in the PDF file.\n     */\n    getPageLabels: function PDFDocumentProxy_getPageLabels() {\n      return this.transport.getPageLabels();\n    },\n    /**\n     * @return {Promise} A promise that is resolved with a lookup table for\n     * mapping named attachments to their content.\n     */\n    getAttachments: function PDFDocumentProxy_getAttachments() {\n      return this.transport.getAttachments();\n    },\n    /**\n     * @return {Promise} A promise that is resolved with an array of all the\n     * JavaScript strings in the name tree.\n     */\n    getJavaScript: function PDFDocumentProxy_getJavaScript() {\n      return this.transport.getJavaScript();\n    },\n    /**\n     * @return {Promise} A promise that is resolved with an {Array} that is a\n     * tree outline (if it has one) of the PDF. The tree is in the format of:\n     * [\n     *  {\n     *   title: string,\n     *   bold: boolean,\n     *   italic: boolean,\n     *   color: rgb Uint8Array,\n     *   dest: dest obj,\n     *   url: string,\n     *   items: array of more items like this\n     *  },\n     *  ...\n     * ].\n     */\n    getOutline: function PDFDocumentProxy_getOutline() {\n      return this.transport.getOutline();\n    },\n    /**\n     * @return {Promise} A promise that is resolved with an {Object} that has\n     * info and metadata properties.  Info is an {Object} filled with anything\n     * available in the information dictionary and similarly metadata is a\n     * {Metadata} object with information from the metadata section of the PDF.\n     */\n    getMetadata: function PDFDocumentProxy_getMetadata() {\n      return this.transport.getMetadata();\n    },\n    /**\n     * @return {Promise} A promise that is resolved with a TypedArray that has\n     * the raw data from the PDF.\n     */\n    getData: function PDFDocumentProxy_getData() {\n      return this.transport.getData();\n    },\n    /**\n     * @return {Promise} A promise that is resolved when the document's data\n     * is loaded. It is resolved with an {Object} that contains the length\n     * property that indicates size of the PDF data in bytes.\n     */\n    getDownloadInfo: function PDFDocumentProxy_getDownloadInfo() {\n      return this.transport.downloadInfoCapability.promise;\n    },\n    /**\n     * @return {Promise} A promise this is resolved with current stats about\n     * document structures (see {@link PDFDocumentStats}).\n     */\n    getStats: function PDFDocumentProxy_getStats() {\n      return this.transport.getStats();\n    },\n    /**\n     * Cleans up resources allocated by the document, e.g. created @font-face.\n     */\n    cleanup: function PDFDocumentProxy_cleanup() {\n      this.transport.startCleanup();\n    },\n    /**\n     * Destroys current document instance and terminates worker.\n     */\n    destroy: function PDFDocumentProxy_destroy() {\n      return this.loadingTask.destroy();\n    }\n  };\n  return PDFDocumentProxy;\n})();\n\n/**\n * Page getTextContent parameters.\n *\n * @typedef {Object} getTextContentParameters\n * @property {boolean} normalizeWhitespace - replaces all occurrences of\n *   whitespace with standard spaces (0x20). The default value is `false`.\n * @property {boolean} disableCombineTextItems - do not attempt to combine\n *   same line {@link TextItem}'s. The default value is `false`.\n */\n\n/**\n * Page text content.\n *\n * @typedef {Object} TextContent\n * @property {array} items - array of {@link TextItem}\n * @property {Object} styles - {@link TextStyles} objects, indexed by font name.\n */\n\n/**\n * Page text content part.\n *\n * @typedef {Object} TextItem\n * @property {string} str - text content.\n * @property {string} dir - text direction: 'ttb', 'ltr' or 'rtl'.\n * @property {array} transform - transformation matrix.\n * @property {number} width - width in device space.\n * @property {number} height - height in device space.\n * @property {string} fontName - font name used by pdf.js for converted font.\n */\n\n/**\n * Text style.\n *\n * @typedef {Object} TextStyle\n * @property {number} ascent - font ascent.\n * @property {number} descent - font descent.\n * @property {boolean} vertical - text is in vertical mode.\n * @property {string} fontFamily - possible font family\n */\n\n/**\n * Page annotation parameters.\n *\n * @typedef {Object} GetAnnotationsParameters\n * @property {string} intent - Determines the annotations that will be fetched,\n *                    can be either 'display' (viewable annotations) or 'print'\n *                    (printable annotations).\n *                    If the parameter is omitted, all annotations are fetched.\n */\n\n/**\n * Page render parameters.\n *\n * @typedef {Object} RenderParameters\n * @property {Object} canvasContext - A 2D context of a DOM Canvas object.\n * @property {PageViewport} viewport - Rendering viewport obtained by\n *                                calling of PDFPage.getViewport method.\n * @property {string} intent - Rendering intent, can be 'display' or 'print'\n *                    (default value is 'display').\n * @property {boolean} renderInteractiveForms - (optional) Whether or not\n *                     interactive form elements are rendered in the display\n *                     layer. If so, we do not render them on canvas as well.\n * @property {Array}  transform - (optional) Additional transform, applied\n *                    just before viewport transform.\n * @property {Object} imageLayer - (optional) An object that has beginLayout,\n *                    endLayout and appendImage functions.\n * @property {function} continueCallback - (deprecated) A function that will be\n *                      called each time the rendering is paused.  To continue\n *                      rendering call the function that is the first argument\n *                      to the callback.\n * @property {Object} canvasFactory - (optional) The factory that will be used\n *                    when creating canvases. The default value is\n *                    {DOMCanvasFactory}.\n */\n\n/**\n * PDF page operator list.\n *\n * @typedef {Object} PDFOperatorList\n * @property {Array} fnArray - Array containing the operator functions.\n * @property {Array} argsArray - Array containing the arguments of the\n *                               functions.\n */\n\n/**\n * Proxy to a PDFPage in the worker thread.\n * @class\n * @alias PDFPageProxy\n */\nvar PDFPageProxy = (function PDFPageProxyClosure() {\n  function PDFPageProxy(pageIndex, pageInfo, transport) {\n    this.pageIndex = pageIndex;\n    this.pageInfo = pageInfo;\n    this.transport = transport;\n    this.stats = new StatTimer();\n    this.stats.enabled = getDefaultSetting('enableStats');\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n    this.cleanupAfterRender = false;\n    this.pendingCleanup = false;\n    this.intentStates = Object.create(null);\n    this.destroyed = false;\n  }\n  PDFPageProxy.prototype = /** @lends PDFPageProxy.prototype */ {\n    /**\n     * @return {number} Page number of the page. First page is 1.\n     */\n    get pageNumber() {\n      return this.pageIndex + 1;\n    },\n    /**\n     * @return {number} The number of degrees the page is rotated clockwise.\n     */\n    get rotate() {\n      return this.pageInfo.rotate;\n    },\n    /**\n     * @return {Object} The reference that points to this page. It has 'num' and\n     * 'gen' properties.\n     */\n    get ref() {\n      return this.pageInfo.ref;\n    },\n    /**\n     * @return {number} The default size of units in 1/72nds of an inch.\n     */\n    get userUnit() {\n      return this.pageInfo.userUnit;\n    },\n    /**\n     * @return {Array} An array of the visible portion of the PDF page in the\n     * user space units - [x1, y1, x2, y2].\n     */\n    get view() {\n      return this.pageInfo.view;\n    },\n    /**\n     * @param {number} scale The desired scale of the viewport.\n     * @param {number} rotate Degrees to rotate the viewport. If omitted this\n     * defaults to the page rotation.\n     * @return {PageViewport} Contains 'width' and 'height' properties\n     * along with transforms required for rendering.\n     */\n    getViewport: function PDFPageProxy_getViewport(scale, rotate) {\n      if (arguments.length < 2) {\n        rotate = this.rotate;\n      }\n      return new PageViewport(this.view, scale, rotate, 0, 0);\n    },\n    /**\n     * @param {GetAnnotationsParameters} params - Annotation parameters.\n     * @return {Promise} A promise that is resolved with an {Array} of the\n     * annotation objects.\n     */\n    getAnnotations: function PDFPageProxy_getAnnotations(params) {\n      var intent = (params && params.intent) || null;\n\n      if (!this.annotationsPromise || this.annotationsIntent !== intent) {\n        this.annotationsPromise = this.transport.getAnnotations(this.pageIndex,\n                                                                intent);\n        this.annotationsIntent = intent;\n      }\n      return this.annotationsPromise;\n    },\n    /**\n     * Begins the process of rendering a page to the desired context.\n     * @param {RenderParameters} params Page render parameters.\n     * @return {RenderTask} An object that contains the promise, which\n     *                      is resolved when the page finishes rendering.\n     */\n    render: function PDFPageProxy_render(params) {\n      var stats = this.stats;\n      stats.time('Overall');\n\n      // If there was a pending destroy cancel it so no cleanup happens during\n      // this call to render.\n      this.pendingCleanup = false;\n\n      var renderingIntent = (params.intent === 'print' ? 'print' : 'display');\n      var canvasFactory = params.canvasFactory || new DOMCanvasFactory();\n\n      if (!this.intentStates[renderingIntent]) {\n        this.intentStates[renderingIntent] = Object.create(null);\n      }\n      var intentState = this.intentStates[renderingIntent];\n\n      // If there's no displayReadyCapability yet, then the operatorList\n      // was never requested before. Make the request and create the promise.\n      if (!intentState.displayReadyCapability) {\n        intentState.receivingOperatorList = true;\n        intentState.displayReadyCapability = createPromiseCapability();\n        intentState.operatorList = {\n          fnArray: [],\n          argsArray: [],\n          lastChunk: false\n        };\n\n        this.stats.time('Page Request');\n        this.transport.messageHandler.send('RenderPageRequest', {\n          pageIndex: this.pageNumber - 1,\n          intent: renderingIntent,\n          renderInteractiveForms: (params.renderInteractiveForms === true),\n        });\n      }\n\n      var complete = (error) => {\n        var i = intentState.renderTasks.indexOf(internalRenderTask);\n        if (i >= 0) {\n          intentState.renderTasks.splice(i, 1);\n        }\n\n        if (this.cleanupAfterRender) {\n          this.pendingCleanup = true;\n        }\n        this._tryCleanup();\n\n        if (error) {\n          internalRenderTask.capability.reject(error);\n        } else {\n          internalRenderTask.capability.resolve();\n        }\n        stats.timeEnd('Rendering');\n        stats.timeEnd('Overall');\n      };\n\n      var internalRenderTask = new InternalRenderTask(complete, params,\n                                                      this.objs,\n                                                      this.commonObjs,\n                                                      intentState.operatorList,\n                                                      this.pageNumber,\n                                                      canvasFactory);\n      internalRenderTask.useRequestAnimationFrame = renderingIntent !== 'print';\n      if (!intentState.renderTasks) {\n        intentState.renderTasks = [];\n      }\n      intentState.renderTasks.push(internalRenderTask);\n      var renderTask = internalRenderTask.task;\n\n      // Obsolete parameter support\n      if (params.continueCallback) {\n        deprecated('render is used with continueCallback parameter');\n        renderTask.onContinue = params.continueCallback;\n      }\n\n      intentState.displayReadyCapability.promise.then((transparency) => {\n        if (this.pendingCleanup) {\n          complete();\n          return;\n        }\n        stats.time('Rendering');\n        internalRenderTask.initializeGraphics(transparency);\n        internalRenderTask.operatorListChanged();\n      }, complete);\n\n      return renderTask;\n    },\n\n    /**\n     * @return {Promise} A promise resolved with an {@link PDFOperatorList}\n     *   object that represents page's operator list.\n     */\n    getOperatorList: function PDFPageProxy_getOperatorList() {\n      function operatorListChanged() {\n        if (intentState.operatorList.lastChunk) {\n          intentState.opListReadCapability.resolve(intentState.operatorList);\n\n          var i = intentState.renderTasks.indexOf(opListTask);\n          if (i >= 0) {\n            intentState.renderTasks.splice(i, 1);\n          }\n        }\n      }\n\n      var renderingIntent = 'oplist';\n      if (!this.intentStates[renderingIntent]) {\n        this.intentStates[renderingIntent] = Object.create(null);\n      }\n      var intentState = this.intentStates[renderingIntent];\n      var opListTask;\n\n      if (!intentState.opListReadCapability) {\n        opListTask = {};\n        opListTask.operatorListChanged = operatorListChanged;\n        intentState.receivingOperatorList = true;\n        intentState.opListReadCapability = createPromiseCapability();\n        intentState.renderTasks = [];\n        intentState.renderTasks.push(opListTask);\n        intentState.operatorList = {\n          fnArray: [],\n          argsArray: [],\n          lastChunk: false\n        };\n\n        this.transport.messageHandler.send('RenderPageRequest', {\n          pageIndex: this.pageIndex,\n          intent: renderingIntent,\n        });\n      }\n      return intentState.opListReadCapability.promise;\n    },\n\n    /**\n     * @param {getTextContentParameters} params - getTextContent parameters.\n     * @return {Promise} That is resolved a {@link TextContent}\n     * object that represent the page text content.\n     */\n    getTextContent: function PDFPageProxy_getTextContent(params) {\n      params = params || {};\n      return this.transport.messageHandler.sendWithPromise('GetTextContent', {\n        pageIndex: this.pageNumber - 1,\n        normalizeWhitespace: (params.normalizeWhitespace === true),\n        combineTextItems: (params.disableCombineTextItems !== true),\n      });\n    },\n\n    /**\n     * Destroys page object.\n     */\n    _destroy: function PDFPageProxy_destroy() {\n      this.destroyed = true;\n      this.transport.pageCache[this.pageIndex] = null;\n\n      var waitOn = [];\n      Object.keys(this.intentStates).forEach(function(intent) {\n        if (intent === 'oplist') {\n          // Avoid errors below, since the renderTasks are just stubs.\n          return;\n        }\n        var intentState = this.intentStates[intent];\n        intentState.renderTasks.forEach(function(renderTask) {\n          var renderCompleted = renderTask.capability.promise.\n            catch(function () {}); // ignoring failures\n          waitOn.push(renderCompleted);\n          renderTask.cancel();\n        });\n      }, this);\n      this.objs.clear();\n      this.annotationsPromise = null;\n      this.pendingCleanup = false;\n      return Promise.all(waitOn);\n    },\n\n    /**\n     * Cleans up resources allocated by the page. (deprecated)\n     */\n    destroy() {\n      deprecated('page destroy method, use cleanup() instead');\n      this.cleanup();\n    },\n\n    /**\n     * Cleans up resources allocated by the page.\n     */\n    cleanup: function PDFPageProxy_cleanup() {\n      this.pendingCleanup = true;\n      this._tryCleanup();\n    },\n    /**\n     * For internal use only. Attempts to clean up if rendering is in a state\n     * where that's possible.\n     * @ignore\n     */\n    _tryCleanup: function PDFPageProxy_tryCleanup() {\n      if (!this.pendingCleanup ||\n          Object.keys(this.intentStates).some(function(intent) {\n            var intentState = this.intentStates[intent];\n            return (intentState.renderTasks.length !== 0 ||\n                    intentState.receivingOperatorList);\n          }, this)) {\n        return;\n      }\n\n      Object.keys(this.intentStates).forEach(function(intent) {\n        delete this.intentStates[intent];\n      }, this);\n      this.objs.clear();\n      this.annotationsPromise = null;\n      this.pendingCleanup = false;\n    },\n    /**\n     * For internal use only.\n     * @ignore\n     */\n    _startRenderPage: function PDFPageProxy_startRenderPage(transparency,\n                                                            intent) {\n      var intentState = this.intentStates[intent];\n      // TODO Refactor RenderPageRequest to separate rendering\n      // and operator list logic\n      if (intentState.displayReadyCapability) {\n        intentState.displayReadyCapability.resolve(transparency);\n      }\n    },\n    /**\n     * For internal use only.\n     * @ignore\n     */\n    _renderPageChunk: function PDFPageProxy_renderPageChunk(operatorListChunk,\n                                                            intent) {\n      var intentState = this.intentStates[intent];\n      var i, ii;\n      // Add the new chunk to the current operator list.\n      for (i = 0, ii = operatorListChunk.length; i < ii; i++) {\n        intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n        intentState.operatorList.argsArray.push(\n          operatorListChunk.argsArray[i]);\n      }\n      intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n\n      // Notify all the rendering tasks there are more operators to be consumed.\n      for (i = 0; i < intentState.renderTasks.length; i++) {\n        intentState.renderTasks[i].operatorListChanged();\n      }\n\n      if (operatorListChunk.lastChunk) {\n        intentState.receivingOperatorList = false;\n        this._tryCleanup();\n      }\n    }\n  };\n  return PDFPageProxy;\n})();\n\nclass LoopbackPort {\n  constructor(defer) {\n    this._listeners = [];\n    this._defer = defer;\n    this._deferred = Promise.resolve(undefined);\n  }\n\n  postMessage(obj, transfers) {\n    function cloneValue(value) {\n      // Trying to perform a structured clone close to the spec, including\n      // transfers.\n      if (typeof value !== 'object' || value === null) {\n        return value;\n      }\n      if (cloned.has(value)) { // already cloned the object\n        return cloned.get(value);\n      }\n      var result;\n      var buffer;\n      if ((buffer = value.buffer) && isArrayBuffer(buffer)) {\n        // We found object with ArrayBuffer (typed array).\n        var transferable = transfers && transfers.indexOf(buffer) >= 0;\n        if (value === buffer) {\n          // Special case when we are faking typed arrays in compatibility.js.\n          result = value;\n        } else if (transferable) {\n          result = new value.constructor(buffer, value.byteOffset,\n                                         value.byteLength);\n        } else {\n          result = new value.constructor(value);\n        }\n        cloned.set(value, result);\n        return result;\n      }\n      result = isArray(value) ? [] : {};\n      cloned.set(value, result); // adding to cache now for cyclic references\n      // Cloning all value and object properties, however ignoring properties\n      // defined via getter.\n      for (var i in value) {\n        var desc, p = value;\n        while (!(desc = Object.getOwnPropertyDescriptor(p, i))) {\n          p = Object.getPrototypeOf(p);\n        }\n        if (typeof desc.value === 'undefined' ||\n            typeof desc.value === 'function') {\n          continue;\n        }\n        result[i] = cloneValue(desc.value);\n      }\n      return result;\n    }\n\n    if (!this._defer) {\n      this._listeners.forEach(function (listener) {\n        listener.call(this, {data: obj});\n      }, this);\n      return;\n    }\n\n    var cloned = new WeakMap();\n    var e = {data: cloneValue(obj)};\n    this._deferred.then(() => {\n      this._listeners.forEach(function (listener) {\n        listener.call(this, e);\n      }, this);\n    });\n  }\n\n  addEventListener(name, listener) {\n    this._listeners.push(listener);\n  }\n\n  removeEventListener(name, listener) {\n    var i = this._listeners.indexOf(listener);\n    this._listeners.splice(i, 1);\n  }\n\n  terminate() {\n    this._listeners = [];\n  }\n}\n\n/**\n * PDF.js web worker abstraction, it controls instantiation of PDF documents and\n * WorkerTransport for them.  If creation of a web worker is not possible,\n * a \"fake\" worker will be used instead.\n * @class\n */\nvar PDFWorker = (function PDFWorkerClosure() {\n  var nextFakeWorkerId = 0;\n\n  function getWorkerSrc() {\n    if (typeof workerSrc !== 'undefined') {\n      return workerSrc;\n    }\n    if (getDefaultSetting('workerSrc')) {\n      return getDefaultSetting('workerSrc');\n    }\n    if (typeof PDFJSDev !== 'undefined' &&\n        PDFJSDev.test('PRODUCTION && !(MOZCENTRAL || FIREFOX)') &&\n        pdfjsFilePath) {\n      return pdfjsFilePath.replace(/(\\.(?:min\\.)?js)(\\?.*)?$/i, '.worker$1$2');\n    }\n    error('No PDFJS.workerSrc specified');\n  }\n\n  var fakeWorkerFilesLoadedCapability;\n\n  // Loads worker code into main thread.\n  function setupFakeWorkerGlobal() {\n    var WorkerMessageHandler;\n    if (fakeWorkerFilesLoadedCapability) {\n      return fakeWorkerFilesLoadedCapability.promise;\n    }\n    fakeWorkerFilesLoadedCapability = createPromiseCapability();\n    // In the developer build load worker_loader which in turn loads all the\n    // other files and resolves the promise. In production only the\n    // pdf.worker.js file is needed.\n    if (typeof PDFJSDev === 'undefined' || !PDFJSDev.test('PRODUCTION')) {\n      if (typeof SystemJS === 'object') {\n        Promise.all([SystemJS.import('pdfjs/core/network'),\n                     SystemJS.import('pdfjs/core/worker')]).then((modules) => {\n          var worker = modules[1];\n          WorkerMessageHandler = worker.WorkerMessageHandler;\n          fakeWorkerFilesLoadedCapability.resolve(WorkerMessageHandler);\n        });\n      } else if (typeof require === 'function') {\n        var worker = require('../core/worker.js');\n        WorkerMessageHandler = worker.WorkerMessageHandler;\n        fakeWorkerFilesLoadedCapability.resolve(WorkerMessageHandler);\n      } else {\n        throw new Error(\n          'SystemJS or CommonJS must be used to load fake worker.');\n      }\n    } else if (PDFJSDev.test('SINGLE_FILE')) {\n      var pdfjsCoreWorker = require('../core/worker.js');\n      require('../core/network.js');\n      WorkerMessageHandler = pdfjsCoreWorker.WorkerMessageHandler;\n      fakeWorkerFilesLoadedCapability.resolve(WorkerMessageHandler);\n    } else {\n      var loader = fakeWorkerFilesLoader || function (callback) {\n        Util.loadScript(getWorkerSrc(), function () {\n          callback(window.pdfjsDistBuildPdfWorker.WorkerMessageHandler);\n        });\n      };\n      loader(fakeWorkerFilesLoadedCapability.resolve);\n    }\n    return fakeWorkerFilesLoadedCapability.promise;\n  }\n\n  function createCDNWrapper(url) {\n    // We will rely on blob URL's property to specify origin.\n    // We want this function to fail in case if createObjectURL or Blob do not\n    // exist or fail for some reason -- our Worker creation will fail anyway.\n    var wrapper = 'importScripts(\\'' + url + '\\');';\n    return URL.createObjectURL(new Blob([wrapper]));\n  }\n\n  function PDFWorker(name, port) {\n    this.name = name;\n    this.destroyed = false;\n\n    this._readyCapability = createPromiseCapability();\n    this._port = null;\n    this._webWorker = null;\n    this._messageHandler = null;\n\n    if (port) {\n      this._initializeFromPort(port);\n      return;\n    }\n\n    this._initialize();\n  }\n\n  PDFWorker.prototype =  /** @lends PDFWorker.prototype */ {\n    get promise() {\n      return this._readyCapability.promise;\n    },\n\n    get port() {\n      return this._port;\n    },\n\n    get messageHandler() {\n      return this._messageHandler;\n    },\n\n    _initializeFromPort: function PDFWorker_initializeFromPort(port) {\n      this._port = port;\n      this._messageHandler = new MessageHandler('main', 'worker', port);\n      this._messageHandler.on('ready', function () {\n        // Ignoring 'ready' event -- MessageHandler shall be already initialized\n        // and ready to accept the messages.\n      });\n      this._readyCapability.resolve();\n    },\n\n    _initialize: function PDFWorker_initialize() {\n      // If worker support isn't disabled explicit and the browser has worker\n      // support, create a new web worker and test if it/the browser fulfills\n      // all requirements to run parts of pdf.js in a web worker.\n      // Right now, the requirement is, that an Uint8Array is still an\n      // Uint8Array as it arrives on the worker. (Chrome added this with v.15.)\n      if ((typeof PDFJSDev === 'undefined' || !PDFJSDev.test('SINGLE_FILE')) &&\n          !isWorkerDisabled && !getDefaultSetting('disableWorker') &&\n          typeof Worker !== 'undefined') {\n        var workerSrc = getWorkerSrc();\n\n        try {\n          // Wraps workerSrc path into blob URL, if the former does not belong\n          // to the same origin.\n          if (typeof PDFJSDev !== 'undefined' && PDFJSDev.test('GENERIC') &&\n              !isSameOrigin(window.location.href, workerSrc)) {\n            workerSrc = createCDNWrapper(\n              new URL(workerSrc, window.location).href);\n          }\n\n          // Some versions of FF can't create a worker on localhost, see:\n          // https://bugzilla.mozilla.org/show_bug.cgi?id=683280\n          var worker = new Worker(workerSrc);\n          var messageHandler = new MessageHandler('main', 'worker', worker);\n          var terminateEarly = () => {\n            worker.removeEventListener('error', onWorkerError);\n            messageHandler.destroy();\n            worker.terminate();\n            if (this.destroyed) {\n              this._readyCapability.reject(new Error('Worker was destroyed'));\n            } else {\n              // Fall back to fake worker if the termination is caused by an\n              // error (e.g. NetworkError / SecurityError).\n              this._setupFakeWorker();\n            }\n          };\n\n          var onWorkerError = () => {\n            if (!this._webWorker) {\n              // Worker failed to initialize due to an error. Clean up and fall\n              // back to the fake worker.\n              terminateEarly();\n            }\n          };\n          worker.addEventListener('error', onWorkerError);\n\n          messageHandler.on('test', (data) => {\n            worker.removeEventListener('error', onWorkerError);\n            if (this.destroyed) {\n              terminateEarly();\n              return; // worker was destroyed\n            }\n            var supportTypedArray = data && data.supportTypedArray;\n            if (supportTypedArray) {\n              this._messageHandler = messageHandler;\n              this._port = worker;\n              this._webWorker = worker;\n              if (!data.supportTransfers) {\n                isPostMessageTransfersDisabled = true;\n              }\n              this._readyCapability.resolve();\n              // Send global setting, e.g. verbosity level.\n              messageHandler.send('configure', {\n                verbosity: getVerbosityLevel()\n              });\n            } else {\n              this._setupFakeWorker();\n              messageHandler.destroy();\n              worker.terminate();\n            }\n          });\n\n          messageHandler.on('console_log', function (data) {\n            console.log.apply(console, data);\n          });\n          messageHandler.on('console_error', function (data) {\n            console.error.apply(console, data);\n          });\n\n          messageHandler.on('ready', (data) => {\n            worker.removeEventListener('error', onWorkerError);\n            if (this.destroyed) {\n              terminateEarly();\n              return; // worker was destroyed\n            }\n            try {\n              sendTest();\n            } catch (e) {\n              // We need fallback to a faked worker.\n              this._setupFakeWorker();\n            }\n          });\n\n          var sendTest = function () {\n            var postMessageTransfers =\n              getDefaultSetting('postMessageTransfers') &&\n              !isPostMessageTransfersDisabled;\n            var testObj = new Uint8Array([postMessageTransfers ? 255 : 0]);\n            // Some versions of Opera throw a DATA_CLONE_ERR on serializing the\n            // typed array. Also, checking if we can use transfers.\n            try {\n              messageHandler.send('test', testObj, [testObj.buffer]);\n            } catch (ex) {\n              info('Cannot use postMessage transfers');\n              testObj[0] = 0;\n              messageHandler.send('test', testObj);\n            }\n          };\n\n          // It might take time for worker to initialize (especially when AMD\n          // loader is used). We will try to send test immediately, and then\n          // when 'ready' message will arrive. The worker shall process only\n          // first received 'test'.\n          sendTest();\n          return;\n        } catch (e) {\n          info('The worker has been disabled.');\n        }\n      }\n      // Either workers are disabled, not supported or have thrown an exception.\n      // Thus, we fallback to a faked worker.\n      this._setupFakeWorker();\n    },\n\n    _setupFakeWorker: function PDFWorker_setupFakeWorker() {\n      if (!isWorkerDisabled && !getDefaultSetting('disableWorker')) {\n        warn('Setting up fake worker.');\n        isWorkerDisabled = true;\n      }\n\n      setupFakeWorkerGlobal().then((WorkerMessageHandler) => {\n        if (this.destroyed) {\n          this._readyCapability.reject(new Error('Worker was destroyed'));\n          return;\n        }\n\n        // We cannot turn on proper fake port simulation (this includes\n        // structured cloning) when typed arrays are not supported. Relying\n        // on a chance that messages will be sent in proper order.\n        var isTypedArraysPresent = Uint8Array !== Float32Array;\n        var port = new LoopbackPort(isTypedArraysPresent);\n        this._port = port;\n\n        // All fake workers use the same port, making id unique.\n        var id = 'fake' + (nextFakeWorkerId++);\n\n        // If the main thread is our worker, setup the handling for the\n        // messages -- the main thread sends to it self.\n        var workerHandler = new MessageHandler(id + '_worker', id, port);\n        WorkerMessageHandler.setup(workerHandler, port);\n\n        var messageHandler = new MessageHandler(id, id + '_worker', port);\n        this._messageHandler = messageHandler;\n        this._readyCapability.resolve();\n      });\n    },\n\n    /**\n     * Destroys the worker instance.\n     */\n    destroy: function PDFWorker_destroy() {\n      this.destroyed = true;\n      if (this._webWorker) {\n        // We need to terminate only web worker created resource.\n        this._webWorker.terminate();\n        this._webWorker = null;\n      }\n      this._port = null;\n      if (this._messageHandler) {\n        this._messageHandler.destroy();\n        this._messageHandler = null;\n      }\n    }\n  };\n\n  return PDFWorker;\n})();\n\n/**\n * For internal use only.\n * @ignore\n */\nvar WorkerTransport = (function WorkerTransportClosure() {\n  function WorkerTransport(messageHandler, loadingTask, pdfDataRangeTransport,\n                           CMapReaderFactory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.pdfDataRangeTransport = pdfDataRangeTransport;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader(loadingTask.docId);\n    this.CMapReaderFactory = new CMapReaderFactory({\n      baseUrl: getDefaultSetting('cMapUrl'),\n      isCompressed: getDefaultSetting('cMapPacked'),\n    });\n\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._passwordCapability = null;\n\n    this.pageCache = [];\n    this.pagePromises = [];\n    this.downloadInfoCapability = createPromiseCapability();\n\n    this.setupMessageHandler();\n  }\n  WorkerTransport.prototype = {\n    destroy: function WorkerTransport_destroy() {\n      if (this.destroyCapability) {\n        return this.destroyCapability.promise;\n      }\n\n      this.destroyed = true;\n      this.destroyCapability = createPromiseCapability();\n\n      if (this._passwordCapability) {\n        this._passwordCapability.reject(\n          new Error('Worker was destroyed during onPassword callback'));\n      }\n\n      var waitOn = [];\n      // We need to wait for all renderings to be completed, e.g.\n      // timeout/rAF can take a long time.\n      this.pageCache.forEach(function (page) {\n        if (page) {\n          waitOn.push(page._destroy());\n        }\n      });\n      this.pageCache = [];\n      this.pagePromises = [];\n      // We also need to wait for the worker to finish its long running tasks.\n      var terminated = this.messageHandler.sendWithPromise('Terminate', null);\n      waitOn.push(terminated);\n      Promise.all(waitOn).then(() => {\n        this.fontLoader.clear();\n        if (this.pdfDataRangeTransport) {\n          this.pdfDataRangeTransport.abort();\n          this.pdfDataRangeTransport = null;\n        }\n        if (this.messageHandler) {\n          this.messageHandler.destroy();\n          this.messageHandler = null;\n        }\n        this.destroyCapability.resolve();\n      }, this.destroyCapability.reject);\n      return this.destroyCapability.promise;\n    },\n\n    setupMessageHandler: function WorkerTransport_setupMessageHandler() {\n      var messageHandler = this.messageHandler;\n      var loadingTask = this.loadingTask;\n\n      var pdfDataRangeTransport = this.pdfDataRangeTransport;\n      if (pdfDataRangeTransport) {\n        pdfDataRangeTransport.addRangeListener(function(begin, chunk) {\n          messageHandler.send('OnDataRange', {\n            begin,\n            chunk,\n          });\n        });\n\n        pdfDataRangeTransport.addProgressListener(function(loaded) {\n          messageHandler.send('OnDataProgress', {\n            loaded,\n          });\n        });\n\n        pdfDataRangeTransport.addProgressiveReadListener(function(chunk) {\n          messageHandler.send('OnDataRange', {\n            chunk,\n          });\n        });\n\n        messageHandler.on('RequestDataRange',\n          function transportDataRange(data) {\n            pdfDataRangeTransport.requestDataRange(data.begin, data.end);\n          }, this);\n      }\n\n      messageHandler.on('GetDoc', function transportDoc(data) {\n        var pdfInfo = data.pdfInfo;\n        this.numPages = data.pdfInfo.numPages;\n        var loadingTask = this.loadingTask;\n        var pdfDocument = new PDFDocumentProxy(pdfInfo, this, loadingTask);\n        this.pdfDocument = pdfDocument;\n        loadingTask._capability.resolve(pdfDocument);\n      }, this);\n\n      messageHandler.on('PasswordRequest',\n                        function transportPasswordRequest(exception) {\n        this._passwordCapability = createPromiseCapability();\n\n        if (loadingTask.onPassword) {\n          var updatePassword = (password) => {\n            this._passwordCapability.resolve({\n              password,\n            });\n          };\n          loadingTask.onPassword(updatePassword, exception.code);\n        } else {\n          this._passwordCapability.reject(\n            new PasswordException(exception.message, exception.code));\n        }\n        return this._passwordCapability.promise;\n      }, this);\n\n      messageHandler.on('PasswordException',\n                        function transportPasswordException(exception) {\n        loadingTask._capability.reject(\n          new PasswordException(exception.message, exception.code));\n      }, this);\n\n      messageHandler.on('InvalidPDF', function transportInvalidPDF(exception) {\n        this.loadingTask._capability.reject(\n          new InvalidPDFException(exception.message));\n      }, this);\n\n      messageHandler.on('MissingPDF', function transportMissingPDF(exception) {\n        this.loadingTask._capability.reject(\n          new MissingPDFException(exception.message));\n      }, this);\n\n      messageHandler.on('UnexpectedResponse',\n                        function transportUnexpectedResponse(exception) {\n        this.loadingTask._capability.reject(\n          new UnexpectedResponseException(exception.message, exception.status));\n      }, this);\n\n      messageHandler.on('UnknownError',\n                        function transportUnknownError(exception) {\n        this.loadingTask._capability.reject(\n          new UnknownErrorException(exception.message, exception.details));\n      }, this);\n\n      messageHandler.on('DataLoaded', function transportPage(data) {\n        this.downloadInfoCapability.resolve(data);\n      }, this);\n\n      messageHandler.on('PDFManagerReady', function transportPage(data) {\n        if (this.pdfDataRangeTransport) {\n          this.pdfDataRangeTransport.transportReady();\n        }\n      }, this);\n\n      messageHandler.on('StartRenderPage', function transportRender(data) {\n        if (this.destroyed) {\n          return; // Ignore any pending requests if the worker was terminated.\n        }\n        var page = this.pageCache[data.pageIndex];\n\n        page.stats.timeEnd('Page Request');\n        page._startRenderPage(data.transparency, data.intent);\n      }, this);\n\n      messageHandler.on('RenderPageChunk', function transportRender(data) {\n        if (this.destroyed) {\n          return; // Ignore any pending requests if the worker was terminated.\n        }\n        var page = this.pageCache[data.pageIndex];\n\n        page._renderPageChunk(data.operatorList, data.intent);\n      }, this);\n\n      messageHandler.on('commonobj', function transportObj(data) {\n        if (this.destroyed) {\n          return; // Ignore any pending requests if the worker was terminated.\n        }\n\n        var id = data[0];\n        var type = data[1];\n        if (this.commonObjs.hasData(id)) {\n          return;\n        }\n\n        switch (type) {\n          case 'Font':\n            var exportedData = data[2];\n\n            if ('error' in exportedData) {\n              var exportedError = exportedData.error;\n              warn('Error during font loading: ' + exportedError);\n              this.commonObjs.resolve(id, exportedError);\n              break;\n            }\n            var fontRegistry = null;\n            if (getDefaultSetting('pdfBug') && globalScope.FontInspector &&\n                globalScope['FontInspector'].enabled) {\n              fontRegistry = {\n                registerFont(font, url) {\n                  globalScope['FontInspector'].fontAdded(font, url);\n                }\n              };\n            }\n            var font = new FontFaceObject(exportedData, {\n              isEvalSuported: getDefaultSetting('isEvalSupported'),\n              disableFontFace: getDefaultSetting('disableFontFace'),\n              fontRegistry,\n            });\n            var fontReady = (fontObjs) => {\n              this.commonObjs.resolve(id, font);\n            };\n\n            this.fontLoader.bind([font], fontReady);\n            break;\n          case 'FontPath':\n            this.commonObjs.resolve(id, data[2]);\n            break;\n          default:\n            error('Got unknown common object type ' + type);\n        }\n      }, this);\n\n      messageHandler.on('obj', function transportObj(data) {\n        if (this.destroyed) {\n          return; // Ignore any pending requests if the worker was terminated.\n        }\n\n        var id = data[0];\n        var pageIndex = data[1];\n        var type = data[2];\n        var pageProxy = this.pageCache[pageIndex];\n        var imageData;\n        if (pageProxy.objs.hasData(id)) {\n          return;\n        }\n\n        switch (type) {\n          case 'JpegStream':\n            imageData = data[3];\n            loadJpegStream(id, imageData, pageProxy.objs);\n            break;\n          case 'Image':\n            imageData = data[3];\n            pageProxy.objs.resolve(id, imageData);\n\n            // heuristics that will allow not to store large data\n            var MAX_IMAGE_SIZE_TO_STORE = 8000000;\n            if (imageData && 'data' in imageData &&\n                imageData.data.length > MAX_IMAGE_SIZE_TO_STORE) {\n              pageProxy.cleanupAfterRender = true;\n            }\n            break;\n          default:\n            error('Got unknown object type ' + type);\n        }\n      }, this);\n\n      messageHandler.on('DocProgress', function transportDocProgress(data) {\n        if (this.destroyed) {\n          return; // Ignore any pending requests if the worker was terminated.\n        }\n\n        var loadingTask = this.loadingTask;\n        if (loadingTask.onProgress) {\n          loadingTask.onProgress({\n            loaded: data.loaded,\n            total: data.total\n          });\n        }\n      }, this);\n\n      messageHandler.on('PageError', function transportError(data) {\n        if (this.destroyed) {\n          return; // Ignore any pending requests if the worker was terminated.\n        }\n\n        var page = this.pageCache[data.pageNum - 1];\n        var intentState = page.intentStates[data.intent];\n\n        if (intentState.displayReadyCapability) {\n          intentState.displayReadyCapability.reject(data.error);\n        } else {\n          error(data.error);\n        }\n\n        if (intentState.operatorList) {\n          // Mark operator list as complete.\n          intentState.operatorList.lastChunk = true;\n          for (var i = 0; i < intentState.renderTasks.length; i++) {\n            intentState.renderTasks[i].operatorListChanged();\n          }\n        }\n      }, this);\n\n      messageHandler.on('UnsupportedFeature',\n          function transportUnsupportedFeature(data) {\n        if (this.destroyed) {\n          return; // Ignore any pending requests if the worker was terminated.\n        }\n        var featureId = data.featureId;\n        var loadingTask = this.loadingTask;\n        if (loadingTask.onUnsupportedFeature) {\n          loadingTask.onUnsupportedFeature(featureId);\n        }\n        _UnsupportedManager.notify(featureId);\n      }, this);\n\n      messageHandler.on('JpegDecode', function(data) {\n        if (this.destroyed) {\n          return Promise.reject(new Error('Worker was destroyed'));\n        }\n\n        if (typeof document === 'undefined') {\n          // Make sure that this code is not executing in node.js, as\n          // it's using DOM image, and there is no library to support that.\n          return Promise.reject(new Error('\"document\" is not defined.'));\n        }\n\n        var imageUrl = data[0];\n        var components = data[1];\n        if (components !== 3 && components !== 1) {\n          return Promise.reject(\n            new Error('Only 3 components or 1 component can be returned'));\n        }\n\n        return new Promise(function (resolve, reject) {\n          var img = new Image();\n          img.onload = function () {\n            var width = img.width;\n            var height = img.height;\n            var size = width * height;\n            var rgbaLength = size * 4;\n            var buf = new Uint8Array(size * components);\n            var tmpCanvas = document.createElement('canvas');\n            tmpCanvas.width = width;\n            tmpCanvas.height = height;\n            var tmpCtx = tmpCanvas.getContext('2d');\n            tmpCtx.drawImage(img, 0, 0);\n            var data = tmpCtx.getImageData(0, 0, width, height).data;\n            var i, j;\n\n            if (components === 3) {\n              for (i = 0, j = 0; i < rgbaLength; i += 4, j += 3) {\n                buf[j] = data[i];\n                buf[j + 1] = data[i + 1];\n                buf[j + 2] = data[i + 2];\n              }\n            } else if (components === 1) {\n              for (i = 0, j = 0; i < rgbaLength; i += 4, j++) {\n                buf[j] = data[i];\n              }\n            }\n            resolve({ data: buf, width, height, });\n          };\n          img.onerror = function () {\n            reject(new Error('JpegDecode failed to load image'));\n          };\n          img.src = imageUrl;\n        });\n      }, this);\n\n      messageHandler.on('FetchBuiltInCMap', function (data) {\n        if (this.destroyed) {\n          return Promise.reject(new Error('Worker was destroyed'));\n        }\n        return this.CMapReaderFactory.fetch({\n          name: data.name,\n        });\n      }, this);\n    },\n\n    getData: function WorkerTransport_getData() {\n      return this.messageHandler.sendWithPromise('GetData', null);\n    },\n\n    getPage: function WorkerTransport_getPage(pageNumber, capability) {\n      if (!isInt(pageNumber) || pageNumber <= 0 || pageNumber > this.numPages) {\n        return Promise.reject(new Error('Invalid page request'));\n      }\n\n      var pageIndex = pageNumber - 1;\n      if (pageIndex in this.pagePromises) {\n        return this.pagePromises[pageIndex];\n      }\n      var promise = this.messageHandler.sendWithPromise('GetPage', {\n        pageIndex,\n      }).then((pageInfo) => {\n        if (this.destroyed) {\n          throw new Error('Transport destroyed');\n        }\n        var page = new PDFPageProxy(pageIndex, pageInfo, this);\n        this.pageCache[pageIndex] = page;\n        return page;\n      });\n      this.pagePromises[pageIndex] = promise;\n      return promise;\n    },\n\n    getPageIndex: function WorkerTransport_getPageIndexByRef(ref) {\n      return this.messageHandler.sendWithPromise('GetPageIndex', {\n        ref,\n      }).catch(function (reason) {\n        return Promise.reject(new Error(reason));\n      });\n    },\n\n    getAnnotations: function WorkerTransport_getAnnotations(pageIndex, intent) {\n      return this.messageHandler.sendWithPromise('GetAnnotations', {\n        pageIndex,\n        intent,\n      });\n    },\n\n    getDestinations: function WorkerTransport_getDestinations() {\n      return this.messageHandler.sendWithPromise('GetDestinations', null);\n    },\n\n    getDestination: function WorkerTransport_getDestination(id) {\n      return this.messageHandler.sendWithPromise('GetDestination', {\n        id,\n      });\n    },\n\n    getPageLabels: function WorkerTransport_getPageLabels() {\n      return this.messageHandler.sendWithPromise('GetPageLabels', null);\n    },\n\n    getAttachments: function WorkerTransport_getAttachments() {\n      return this.messageHandler.sendWithPromise('GetAttachments', null);\n    },\n\n    getJavaScript: function WorkerTransport_getJavaScript() {\n      return this.messageHandler.sendWithPromise('GetJavaScript', null);\n    },\n\n    getOutline: function WorkerTransport_getOutline() {\n      return this.messageHandler.sendWithPromise('GetOutline', null);\n    },\n\n    getMetadata: function WorkerTransport_getMetadata() {\n      return this.messageHandler.sendWithPromise('GetMetadata', null).\n        then(function transportMetadata(results) {\n        return {\n          info: results[0],\n          metadata: (results[1] ? new Metadata(results[1]) : null)\n        };\n      });\n    },\n\n    getStats: function WorkerTransport_getStats() {\n      return this.messageHandler.sendWithPromise('GetStats', null);\n    },\n\n    startCleanup: function WorkerTransport_startCleanup() {\n      this.messageHandler.sendWithPromise('Cleanup', null).then(() => {\n        for (var i = 0, ii = this.pageCache.length; i < ii; i++) {\n          var page = this.pageCache[i];\n          if (page) {\n            page.cleanup();\n          }\n        }\n        this.commonObjs.clear();\n        this.fontLoader.clear();\n      });\n    }\n  };\n  return WorkerTransport;\n\n})();\n\n/**\n * A PDF document and page is built of many objects. E.g. there are objects\n * for fonts, images, rendering code and such. These objects might get processed\n * inside of a worker. The `PDFObjects` implements some basic functions to\n * manage these objects.\n * @ignore\n */\nvar PDFObjects = (function PDFObjectsClosure() {\n  function PDFObjects() {\n    this.objs = Object.create(null);\n  }\n\n  PDFObjects.prototype = {\n    /**\n     * Internal function.\n     * Ensures there is an object defined for `objId`.\n     */\n    ensureObj: function PDFObjects_ensureObj(objId) {\n      if (this.objs[objId]) {\n        return this.objs[objId];\n      }\n\n      var obj = {\n        capability: createPromiseCapability(),\n        data: null,\n        resolved: false\n      };\n      this.objs[objId] = obj;\n\n      return obj;\n    },\n\n    /**\n     * If called *without* callback, this returns the data of `objId` but the\n     * object needs to be resolved. If it isn't, this function throws.\n     *\n     * If called *with* a callback, the callback is called with the data of the\n     * object once the object is resolved. That means, if you call this\n     * function and the object is already resolved, the callback gets called\n     * right away.\n     */\n    get: function PDFObjects_get(objId, callback) {\n      // If there is a callback, then the get can be async and the object is\n      // not required to be resolved right now\n      if (callback) {\n        this.ensureObj(objId).capability.promise.then(callback);\n        return null;\n      }\n\n      // If there isn't a callback, the user expects to get the resolved data\n      // directly.\n      var obj = this.objs[objId];\n\n      // If there isn't an object yet or the object isn't resolved, then the\n      // data isn't ready yet!\n      if (!obj || !obj.resolved) {\n        error('Requesting object that isn\\'t resolved yet ' + objId);\n      }\n\n      return obj.data;\n    },\n\n    /**\n     * Resolves the object `objId` with optional `data`.\n     */\n    resolve: function PDFObjects_resolve(objId, data) {\n      var obj = this.ensureObj(objId);\n\n      obj.resolved = true;\n      obj.data = data;\n      obj.capability.resolve(data);\n    },\n\n    isResolved: function PDFObjects_isResolved(objId) {\n      var objs = this.objs;\n\n      if (!objs[objId]) {\n        return false;\n      }\n      return objs[objId].resolved;\n    },\n\n    hasData: function PDFObjects_hasData(objId) {\n      return this.isResolved(objId);\n    },\n\n    /**\n     * Returns the data of `objId` if object exists, null otherwise.\n     */\n    getData: function PDFObjects_getData(objId) {\n      var objs = this.objs;\n      if (!objs[objId] || !objs[objId].resolved) {\n        return null;\n      }\n      return objs[objId].data;\n    },\n\n    clear: function PDFObjects_clear() {\n      this.objs = Object.create(null);\n    }\n  };\n  return PDFObjects;\n})();\n\n/**\n * Allows controlling of the rendering tasks.\n * @class\n * @alias RenderTask\n */\nvar RenderTask = (function RenderTaskClosure() {\n  function RenderTask(internalRenderTask) {\n    this._internalRenderTask = internalRenderTask;\n\n    /**\n     * Callback for incremental rendering -- a function that will be called\n     * each time the rendering is paused.  To continue rendering call the\n     * function that is the first argument to the callback.\n     * @type {function}\n     */\n    this.onContinue = null;\n  }\n\n  RenderTask.prototype = /** @lends RenderTask.prototype */ {\n    /**\n     * Promise for rendering task completion.\n     * @return {Promise}\n     */\n    get promise() {\n      return this._internalRenderTask.capability.promise;\n    },\n\n    /**\n     * Cancels the rendering task. If the task is currently rendering it will\n     * not be cancelled until graphics pauses with a timeout. The promise that\n     * this object extends will be rejected when cancelled.\n     */\n    cancel: function RenderTask_cancel() {\n      this._internalRenderTask.cancel();\n    },\n\n    /**\n     * Registers callbacks to indicate the rendering task completion.\n     *\n     * @param {function} onFulfilled The callback for the rendering completion.\n     * @param {function} onRejected The callback for the rendering failure.\n     * @return {Promise} A promise that is resolved after the onFulfilled or\n     *                   onRejected callback.\n     */\n    then: function RenderTask_then(onFulfilled, onRejected) {\n      return this.promise.then.apply(this.promise, arguments);\n    }\n  };\n\n  return RenderTask;\n})();\n\n/**\n * For internal use only.\n * @ignore\n */\nvar InternalRenderTask = (function InternalRenderTaskClosure() {\n\n  function InternalRenderTask(callback, params, objs, commonObjs, operatorList,\n                              pageNumber, canvasFactory) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this.pageNumber = pageNumber;\n    this.canvasFactory = canvasFactory;\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this.useRequestAnimationFrame = false;\n    this.cancelled = false;\n    this.capability = createPromiseCapability();\n    this.task = new RenderTask(this);\n    // caching this-bound methods\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n  }\n\n  InternalRenderTask.prototype = {\n\n    initializeGraphics:\n        function InternalRenderTask_initializeGraphics(transparency) {\n\n      if (this.cancelled) {\n        return;\n      }\n      if (getDefaultSetting('pdfBug') && globalScope.StepperManager &&\n          globalScope.StepperManager.enabled) {\n        this.stepper = globalScope.StepperManager.create(this.pageNumber - 1);\n        this.stepper.init(this.operatorList);\n        this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n      }\n\n      var params = this.params;\n      this.gfx = new CanvasGraphics(params.canvasContext, this.commonObjs,\n                                    this.objs, this.canvasFactory,\n                                    params.imageLayer);\n\n      this.gfx.beginDrawing(params.transform, params.viewport, transparency);\n      this.operatorListIdx = 0;\n      this.graphicsReady = true;\n      if (this.graphicsReadyCallback) {\n        this.graphicsReadyCallback();\n      }\n    },\n\n    cancel: function InternalRenderTask_cancel() {\n      this.running = false;\n      this.cancelled = true;\n\n      if ((typeof PDFJSDev !== 'undefined' && PDFJSDev.test('PDFJS_NEXT')) ||\n          getDefaultSetting('pdfjsNext')) {\n        this.callback(new RenderingCancelledException(\n          'Rendering cancelled, page ' + this.pageNumber, 'canvas'));\n      } else {\n        this.callback('cancelled');\n      }\n    },\n\n    operatorListChanged: function InternalRenderTask_operatorListChanged() {\n      if (!this.graphicsReady) {\n        if (!this.graphicsReadyCallback) {\n          this.graphicsReadyCallback = this._continueBound;\n        }\n        return;\n      }\n\n      if (this.stepper) {\n        this.stepper.updateOperatorList(this.operatorList);\n      }\n\n      if (this.running) {\n        return;\n      }\n      this._continue();\n    },\n\n    _continue: function InternalRenderTask__continue() {\n      this.running = true;\n      if (this.cancelled) {\n        return;\n      }\n      if (this.task.onContinue) {\n        this.task.onContinue(this._scheduleNextBound);\n      } else {\n        this._scheduleNext();\n      }\n    },\n\n    _scheduleNext: function InternalRenderTask__scheduleNext() {\n      if (this.useRequestAnimationFrame && typeof window !== 'undefined') {\n        window.requestAnimationFrame(this._nextBound);\n      } else {\n        Promise.resolve(undefined).then(this._nextBound);\n      }\n    },\n\n    _next: function InternalRenderTask__next() {\n      if (this.cancelled) {\n        return;\n      }\n      this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList,\n                                        this.operatorListIdx,\n                                        this._continueBound,\n                                        this.stepper);\n      if (this.operatorListIdx === this.operatorList.argsArray.length) {\n        this.running = false;\n        if (this.operatorList.lastChunk) {\n          this.gfx.endDrawing();\n          this.callback();\n        }\n      }\n    }\n\n  };\n\n  return InternalRenderTask;\n})();\n\n/**\n * (Deprecated) Global observer of unsupported feature usages. Use\n * onUnsupportedFeature callback of the {PDFDocumentLoadingTask} instance.\n */\nvar _UnsupportedManager = (function UnsupportedManagerClosure() {\n  var listeners = [];\n  return {\n    listen(cb) {\n      deprecated('Global UnsupportedManager.listen is used: ' +\n                 ' use PDFDocumentLoadingTask.onUnsupportedFeature instead');\n      listeners.push(cb);\n    },\n    notify(featureId) {\n      for (var i = 0, ii = listeners.length; i < ii; i++) {\n        listeners[i](featureId);\n      }\n    }\n  };\n})();\n\nvar version, build;\nif (typeof PDFJSDev !== 'undefined') {\n  version = PDFJSDev.eval('BUNDLE_VERSION');\n  build = PDFJSDev.eval('BUNDLE_BUILD');\n}\n\nexport {\n  getDocument,\n  LoopbackPort,\n  PDFDataRangeTransport,\n  PDFWorker,\n  PDFDocumentProxy,\n  PDFPageProxy,\n  _UnsupportedManager,\n  version,\n  build,\n};\n\n\n\n// WEBPACK FOOTER //\n// src/display/api.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createObjectURL, FONT_IDENTITY_MATRIX, IDENTITY_MATRIX, ImageKind, isArray,\n  isNum, OPS, Util, warn\n} from '../shared/util';\n\nvar SVGGraphics = function() {\n  throw new Error('Not implemented: SVGGraphics');\n};\n\nif (typeof PDFJSDev === 'undefined' ||\n    PDFJSDev.test('GENERIC || SINGLE_FILE')) {\n\nvar SVG_DEFAULTS = {\n  fontStyle: 'normal',\n  fontWeight: 'normal',\n  fillColor: '#000000'\n};\n\nvar convertImgDataToPng = (function convertImgDataToPngClosure() {\n  var PNG_HEADER =\n    new Uint8Array([0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a]);\n\n  var CHUNK_WRAPPER_SIZE = 12;\n\n  var crcTable = new Int32Array(256);\n  for (var i = 0; i < 256; i++) {\n    var c = i;\n    for (var h = 0; h < 8; h++) {\n      if (c & 1) {\n        c = 0xedB88320 ^ ((c >> 1) & 0x7fffffff);\n      } else {\n        c = (c >> 1) & 0x7fffffff;\n      }\n    }\n    crcTable[i] = c;\n  }\n\n  function crc32(data, start, end) {\n    var crc = -1;\n    for (var i = start; i < end; i++) {\n      var a = (crc ^ data[i]) & 0xff;\n      var b = crcTable[a];\n      crc = (crc >>> 8) ^ b;\n    }\n    return crc ^ -1;\n  }\n\n  function writePngChunk(type, body, data, offset) {\n    var p = offset;\n    var len = body.length;\n\n    data[p] = len >> 24 & 0xff;\n    data[p + 1] = len >> 16 & 0xff;\n    data[p + 2] = len >> 8 & 0xff;\n    data[p + 3] = len & 0xff;\n    p += 4;\n\n    data[p] = type.charCodeAt(0) & 0xff;\n    data[p + 1] = type.charCodeAt(1) & 0xff;\n    data[p + 2] = type.charCodeAt(2) & 0xff;\n    data[p + 3] = type.charCodeAt(3) & 0xff;\n    p += 4;\n\n    data.set(body, p);\n    p += body.length;\n\n    var crc = crc32(data, offset + 4, p);\n\n    data[p] = crc >> 24 & 0xff;\n    data[p + 1] = crc >> 16 & 0xff;\n    data[p + 2] = crc >> 8 & 0xff;\n    data[p + 3] = crc & 0xff;\n  }\n\n  function adler32(data, start, end) {\n    var a = 1;\n    var b = 0;\n    for (var i = start; i < end; ++i) {\n      a = (a + (data[i] & 0xff)) % 65521;\n      b = (b + a) % 65521;\n    }\n    return (b << 16) | a;\n  }\n\n  function encode(imgData, kind, forceDataSchema) {\n    var width = imgData.width;\n    var height = imgData.height;\n    var bitDepth, colorType, lineSize;\n    var bytes = imgData.data;\n\n    switch (kind) {\n      case ImageKind.GRAYSCALE_1BPP:\n        colorType = 0;\n        bitDepth = 1;\n        lineSize = (width + 7) >> 3;\n        break;\n      case ImageKind.RGB_24BPP:\n        colorType = 2;\n        bitDepth = 8;\n        lineSize = width * 3;\n        break;\n      case ImageKind.RGBA_32BPP:\n        colorType = 6;\n        bitDepth = 8;\n        lineSize = width * 4;\n        break;\n      default:\n        throw new Error('invalid format');\n    }\n\n    // prefix every row with predictor 0\n    var literals = new Uint8Array((1 + lineSize) * height);\n    var offsetLiterals = 0, offsetBytes = 0;\n    var y, i;\n    for (y = 0; y < height; ++y) {\n      literals[offsetLiterals++] = 0; // no prediction\n      literals.set(bytes.subarray(offsetBytes, offsetBytes + lineSize),\n                   offsetLiterals);\n      offsetBytes += lineSize;\n      offsetLiterals += lineSize;\n    }\n\n    if (kind === ImageKind.GRAYSCALE_1BPP) {\n      // inverting for B/W\n      offsetLiterals = 0;\n      for (y = 0; y < height; y++) {\n        offsetLiterals++; // skipping predictor\n        for (i = 0; i < lineSize; i++) {\n          literals[offsetLiterals++] ^= 0xFF;\n        }\n      }\n    }\n\n    var ihdr = new Uint8Array([\n      width >> 24 & 0xff,\n      width >> 16 & 0xff,\n      width >> 8 & 0xff,\n      width & 0xff,\n      height >> 24 & 0xff,\n      height >> 16 & 0xff,\n      height >> 8 & 0xff,\n      height & 0xff,\n      bitDepth, // bit depth\n      colorType, // color type\n      0x00, // compression method\n      0x00, // filter method\n      0x00 // interlace method\n    ]);\n\n    var len = literals.length;\n    var maxBlockLength = 0xFFFF;\n\n    var deflateBlocks = Math.ceil(len / maxBlockLength);\n    var idat = new Uint8Array(2 + len + deflateBlocks * 5 + 4);\n    var pi = 0;\n    idat[pi++] = 0x78; // compression method and flags\n    idat[pi++] = 0x9c; // flags\n\n    var pos = 0;\n    while (len > maxBlockLength) {\n      // writing non-final DEFLATE blocks type 0 and length of 65535\n      idat[pi++] = 0x00;\n      idat[pi++] = 0xff;\n      idat[pi++] = 0xff;\n      idat[pi++] = 0x00;\n      idat[pi++] = 0x00;\n      idat.set(literals.subarray(pos, pos + maxBlockLength), pi);\n      pi += maxBlockLength;\n      pos += maxBlockLength;\n      len -= maxBlockLength;\n    }\n\n    // writing non-final DEFLATE blocks type 0\n    idat[pi++] = 0x01;\n    idat[pi++] = len & 0xff;\n    idat[pi++] = len >> 8 & 0xff;\n    idat[pi++] = (~len & 0xffff) & 0xff;\n    idat[pi++] = (~len & 0xffff) >> 8 & 0xff;\n    idat.set(literals.subarray(pos), pi);\n    pi += literals.length - pos;\n\n    var adler = adler32(literals, 0, literals.length); // checksum\n    idat[pi++] = adler >> 24 & 0xff;\n    idat[pi++] = adler >> 16 & 0xff;\n    idat[pi++] = adler >> 8 & 0xff;\n    idat[pi++] = adler & 0xff;\n\n    // PNG will consists: header, IHDR+data, IDAT+data, and IEND.\n    var pngLength = PNG_HEADER.length + (CHUNK_WRAPPER_SIZE * 3) +\n                    ihdr.length + idat.length;\n    var data = new Uint8Array(pngLength);\n    var offset = 0;\n    data.set(PNG_HEADER, offset);\n    offset += PNG_HEADER.length;\n    writePngChunk('IHDR', ihdr, data, offset);\n    offset += CHUNK_WRAPPER_SIZE + ihdr.length;\n    writePngChunk('IDATA', idat, data, offset);\n    offset += CHUNK_WRAPPER_SIZE + idat.length;\n    writePngChunk('IEND', new Uint8Array(0), data, offset);\n\n    return createObjectURL(data, 'image/png', forceDataSchema);\n  }\n\n  return function convertImgDataToPng(imgData, forceDataSchema) {\n    var kind = (imgData.kind === undefined ?\n                ImageKind.GRAYSCALE_1BPP : imgData.kind);\n    return encode(imgData, kind, forceDataSchema);\n  };\n})();\n\nvar SVGExtraState = (function SVGExtraStateClosure() {\n  function SVGExtraState() {\n    this.fontSizeScale = 1;\n    this.fontWeight = SVG_DEFAULTS.fontWeight;\n    this.fontSize = 0;\n\n    this.textMatrix = IDENTITY_MATRIX;\n    this.fontMatrix = FONT_IDENTITY_MATRIX;\n    this.leading = 0;\n\n    // Current point (in user coordinates)\n    this.x = 0;\n    this.y = 0;\n\n    // Start of text line (in text coordinates)\n    this.lineX = 0;\n    this.lineY = 0;\n\n    // Character and word spacing\n    this.charSpacing = 0;\n    this.wordSpacing = 0;\n    this.textHScale = 1;\n    this.textRise = 0;\n\n    // Default foreground and background colors\n    this.fillColor = SVG_DEFAULTS.fillColor;\n    this.strokeColor = '#000000';\n\n    this.fillAlpha = 1;\n    this.strokeAlpha = 1;\n    this.lineWidth = 1;\n    this.lineJoin = '';\n    this.lineCap = '';\n    this.miterLimit = 0;\n\n    this.dashArray = [];\n    this.dashPhase = 0;\n\n    this.dependencies = [];\n\n    // Clipping\n    this.activeClipUrl = null;\n    this.clipGroup = null;\n\n    this.maskId = '';\n  }\n\n  SVGExtraState.prototype = {\n    clone: function SVGExtraState_clone() {\n      return Object.create(this);\n    },\n    setCurrentPoint: function SVGExtraState_setCurrentPoint(x, y) {\n      this.x = x;\n      this.y = y;\n    }\n  };\n  return SVGExtraState;\n})();\n\nSVGGraphics = (function SVGGraphicsClosure() {\n  function opListToTree(opList) {\n    var opTree = [];\n    var tmp = [];\n    var opListLen = opList.length;\n\n    for (var x = 0; x < opListLen; x++) {\n      if (opList[x].fn === 'save') {\n        opTree.push({'fnId': 92, 'fn': 'group', 'items': []});\n        tmp.push(opTree);\n        opTree = opTree[opTree.length - 1].items;\n        continue;\n      }\n\n      if (opList[x].fn === 'restore') {\n        opTree = tmp.pop();\n      } else {\n        opTree.push(opList[x]);\n      }\n    }\n    return opTree;\n  }\n\n  /**\n   * Formats float number.\n   * @param value {number} number to format.\n   * @returns {string}\n   */\n  function pf(value) {\n    if (value === (value | 0)) { // integer number\n      return value.toString();\n    }\n    var s = value.toFixed(10);\n    var i = s.length - 1;\n    if (s[i] !== '0') {\n      return s;\n    }\n    // removing trailing zeros\n    do {\n      i--;\n    } while (s[i] === '0');\n    return s.substr(0, s[i] === '.' ? i : i + 1);\n  }\n\n  /**\n   * Formats transform matrix. The standard rotation, scale and translate\n   * matrices are replaced by their shorter forms, and for identity matrix\n   * returns empty string to save the memory.\n   * @param m {Array} matrix to format.\n   * @returns {string}\n   */\n  function pm(m) {\n    if (m[4] === 0 && m[5] === 0) {\n      if (m[1] === 0 && m[2] === 0) {\n        if (m[0] === 1 && m[3] === 1) {\n          return '';\n        }\n        return 'scale(' + pf(m[0]) + ' ' + pf(m[3]) + ')';\n      }\n      if (m[0] === m[3] && m[1] === -m[2]) {\n        var a = Math.acos(m[0]) * 180 / Math.PI;\n        return 'rotate(' + pf(a) + ')';\n      }\n    } else {\n      if (m[0] === 1 && m[1] === 0 && m[2] === 0 && m[3] === 1) {\n        return 'translate(' + pf(m[4]) + ' ' + pf(m[5]) + ')';\n      }\n    }\n    return 'matrix(' + pf(m[0]) + ' ' + pf(m[1]) + ' ' + pf(m[2]) + ' ' +\n      pf(m[3]) + ' ' + pf(m[4]) + ' ' + pf(m[5]) + ')';\n  }\n\n  function SVGGraphics(commonObjs, objs, forceDataSchema) {\n    this.current = new SVGExtraState();\n    this.transformMatrix = IDENTITY_MATRIX; // Graphics state matrix\n    this.transformStack = [];\n    this.extraStack = [];\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.pendingEOFill = false;\n\n    this.embedFonts = false;\n    this.embeddedFonts = Object.create(null);\n    this.cssStyle = null;\n    this.forceDataSchema = !!forceDataSchema;\n  }\n\n  var NS = 'http://www.w3.org/2000/svg';\n  var XML_NS = 'http://www.w3.org/XML/1998/namespace';\n  var XLINK_NS = 'http://www.w3.org/1999/xlink';\n  var LINE_CAP_STYLES = ['butt', 'round', 'square'];\n  var LINE_JOIN_STYLES = ['miter', 'round', 'bevel'];\n  var clipCount = 0;\n  var maskCount = 0;\n\n  SVGGraphics.prototype = {\n    save: function SVGGraphics_save() {\n      this.transformStack.push(this.transformMatrix);\n      var old = this.current;\n      this.extraStack.push(old);\n      this.current = old.clone();\n    },\n\n    restore: function SVGGraphics_restore() {\n      this.transformMatrix = this.transformStack.pop();\n      this.current = this.extraStack.pop();\n\n      this.tgrp = null;\n    },\n\n    group: function SVGGraphics_group(items) {\n      this.save();\n      this.executeOpTree(items);\n      this.restore();\n    },\n\n    loadDependencies: function SVGGraphics_loadDependencies(operatorList) {\n      var fnArray = operatorList.fnArray;\n      var fnArrayLen = fnArray.length;\n      var argsArray = operatorList.argsArray;\n\n      for (var i = 0; i < fnArrayLen; i++) {\n        if (OPS.dependency === fnArray[i]) {\n          var deps = argsArray[i];\n          for (var n = 0, nn = deps.length; n < nn; n++) {\n            var obj = deps[n];\n            var common = obj.substring(0, 2) === 'g_';\n            var promise;\n            if (common) {\n              promise = new Promise((resolve) => {\n                this.commonObjs.get(obj, resolve);\n              });\n            } else {\n              promise = new Promise((resolve) => {\n                this.objs.get(obj, resolve);\n              });\n            }\n            this.current.dependencies.push(promise);\n          }\n        }\n      }\n      return Promise.all(this.current.dependencies);\n    },\n\n    transform: function SVGGraphics_transform(a, b, c, d, e, f) {\n      var transformMatrix = [a, b, c, d, e, f];\n      this.transformMatrix = Util.transform(this.transformMatrix,\n                                            transformMatrix);\n      this.tgrp = null;\n    },\n\n    getSVG: function SVGGraphics_getSVG(operatorList, viewport) {\n      this.viewport = viewport;\n\n      var svgElement = this._initialize(viewport);\n      return this.loadDependencies(operatorList).then(() => {\n        this.transformMatrix = IDENTITY_MATRIX;\n        var opTree = this.convertOpList(operatorList);\n        this.executeOpTree(opTree);\n        return svgElement;\n      });\n    },\n\n    convertOpList: function SVGGraphics_convertOpList(operatorList) {\n      var argsArray = operatorList.argsArray;\n      var fnArray = operatorList.fnArray;\n      var fnArrayLen = fnArray.length;\n      var REVOPS = [];\n      var opList = [];\n\n      for (var op in OPS) {\n        REVOPS[OPS[op]] = op;\n      }\n\n      for (var x = 0; x < fnArrayLen; x++) {\n        var fnId = fnArray[x];\n        opList.push({'fnId': fnId, 'fn': REVOPS[fnId], 'args': argsArray[x]});\n      }\n      return opListToTree(opList);\n    },\n\n    executeOpTree: function SVGGraphics_executeOpTree(opTree) {\n      var opTreeLen = opTree.length;\n      for (var x = 0; x < opTreeLen; x++) {\n        var fn = opTree[x].fn;\n        var fnId = opTree[x].fnId;\n        var args = opTree[x].args;\n\n        switch (fnId | 0) {\n          case OPS.beginText:\n            this.beginText();\n            break;\n          case OPS.setLeading:\n            this.setLeading(args);\n            break;\n          case OPS.setLeadingMoveText:\n            this.setLeadingMoveText(args[0], args[1]);\n            break;\n          case OPS.setFont:\n            this.setFont(args);\n            break;\n          case OPS.showText:\n            this.showText(args[0]);\n            break;\n          case OPS.showSpacedText:\n            this.showText(args[0]);\n            break;\n          case OPS.endText:\n            this.endText();\n            break;\n          case OPS.moveText:\n            this.moveText(args[0], args[1]);\n            break;\n          case OPS.setCharSpacing:\n            this.setCharSpacing(args[0]);\n            break;\n          case OPS.setWordSpacing:\n            this.setWordSpacing(args[0]);\n            break;\n          case OPS.setHScale:\n            this.setHScale(args[0]);\n            break;\n          case OPS.setTextMatrix:\n            this.setTextMatrix(args[0], args[1], args[2],\n                               args[3], args[4], args[5]);\n            break;\n          case OPS.setLineWidth:\n            this.setLineWidth(args[0]);\n            break;\n          case OPS.setLineJoin:\n            this.setLineJoin(args[0]);\n            break;\n          case OPS.setLineCap:\n            this.setLineCap(args[0]);\n            break;\n          case OPS.setMiterLimit:\n            this.setMiterLimit(args[0]);\n            break;\n          case OPS.setFillRGBColor:\n            this.setFillRGBColor(args[0], args[1], args[2]);\n            break;\n          case OPS.setStrokeRGBColor:\n            this.setStrokeRGBColor(args[0], args[1], args[2]);\n            break;\n          case OPS.setDash:\n            this.setDash(args[0], args[1]);\n            break;\n          case OPS.setGState:\n            this.setGState(args[0]);\n            break;\n          case OPS.fill:\n            this.fill();\n            break;\n          case OPS.eoFill:\n            this.eoFill();\n            break;\n          case OPS.stroke:\n            this.stroke();\n            break;\n          case OPS.fillStroke:\n            this.fillStroke();\n            break;\n          case OPS.eoFillStroke:\n            this.eoFillStroke();\n            break;\n          case OPS.clip:\n            this.clip('nonzero');\n            break;\n          case OPS.eoClip:\n            this.clip('evenodd');\n            break;\n          case OPS.paintSolidColorImageMask:\n            this.paintSolidColorImageMask();\n            break;\n          case OPS.paintJpegXObject:\n            this.paintJpegXObject(args[0], args[1], args[2]);\n            break;\n          case OPS.paintImageXObject:\n            this.paintImageXObject(args[0]);\n            break;\n          case OPS.paintInlineImageXObject:\n            this.paintInlineImageXObject(args[0]);\n            break;\n          case OPS.paintImageMaskXObject:\n            this.paintImageMaskXObject(args[0]);\n            break;\n          case OPS.paintFormXObjectBegin:\n            this.paintFormXObjectBegin(args[0], args[1]);\n            break;\n          case OPS.paintFormXObjectEnd:\n            this.paintFormXObjectEnd();\n            break;\n          case OPS.closePath:\n            this.closePath();\n            break;\n          case OPS.closeStroke:\n            this.closeStroke();\n            break;\n          case OPS.closeFillStroke:\n            this.closeFillStroke();\n            break;\n          case OPS.nextLine:\n            this.nextLine();\n            break;\n          case OPS.transform:\n            this.transform(args[0], args[1], args[2], args[3],\n                           args[4], args[5]);\n            break;\n          case OPS.constructPath:\n            this.constructPath(args[0], args[1]);\n            break;\n          case OPS.endPath:\n            this.endPath();\n            break;\n          case 92:\n            this.group(opTree[x].items);\n            break;\n          default:\n            warn('Unimplemented operator ' + fn);\n            break;\n        }\n      }\n    },\n\n    setWordSpacing: function SVGGraphics_setWordSpacing(wordSpacing) {\n      this.current.wordSpacing = wordSpacing;\n    },\n\n    setCharSpacing: function SVGGraphics_setCharSpacing(charSpacing) {\n      this.current.charSpacing = charSpacing;\n    },\n\n    nextLine: function SVGGraphics_nextLine() {\n      this.moveText(0, this.current.leading);\n    },\n\n    setTextMatrix: function SVGGraphics_setTextMatrix(a, b, c, d, e, f) {\n      var current = this.current;\n      this.current.textMatrix = this.current.lineMatrix = [a, b, c, d, e, f];\n\n      this.current.x = this.current.lineX = 0;\n      this.current.y = this.current.lineY = 0;\n\n      current.xcoords = [];\n      current.tspan = document.createElementNS(NS, 'svg:tspan');\n      current.tspan.setAttributeNS(null, 'font-family', current.fontFamily);\n      current.tspan.setAttributeNS(null, 'font-size',\n                                   pf(current.fontSize) + 'px');\n      current.tspan.setAttributeNS(null, 'y', pf(-current.y));\n\n      current.txtElement = document.createElementNS(NS, 'svg:text');\n      current.txtElement.appendChild(current.tspan);\n    },\n\n    beginText: function SVGGraphics_beginText() {\n      this.current.x = this.current.lineX = 0;\n      this.current.y = this.current.lineY = 0;\n      this.current.textMatrix = IDENTITY_MATRIX;\n      this.current.lineMatrix = IDENTITY_MATRIX;\n      this.current.tspan = document.createElementNS(NS, 'svg:tspan');\n      this.current.txtElement = document.createElementNS(NS, 'svg:text');\n      this.current.txtgrp = document.createElementNS(NS, 'svg:g');\n      this.current.xcoords = [];\n    },\n\n    moveText: function SVGGraphics_moveText(x, y) {\n      var current = this.current;\n      this.current.x = this.current.lineX += x;\n      this.current.y = this.current.lineY += y;\n\n      current.xcoords = [];\n      current.tspan = document.createElementNS(NS, 'svg:tspan');\n      current.tspan.setAttributeNS(null, 'font-family', current.fontFamily);\n      current.tspan.setAttributeNS(null, 'font-size',\n                                   pf(current.fontSize) + 'px');\n      current.tspan.setAttributeNS(null, 'y', pf(-current.y));\n    },\n\n    showText: function SVGGraphics_showText(glyphs) {\n      var current = this.current;\n      var font = current.font;\n      var fontSize = current.fontSize;\n\n      if (fontSize === 0) {\n        return;\n      }\n\n      var charSpacing = current.charSpacing;\n      var wordSpacing = current.wordSpacing;\n      var fontDirection = current.fontDirection;\n      var textHScale = current.textHScale * fontDirection;\n      var glyphsLength = glyphs.length;\n      var vertical = font.vertical;\n      var widthAdvanceScale = fontSize * current.fontMatrix[0];\n\n      var x = 0, i;\n      for (i = 0; i < glyphsLength; ++i) {\n        var glyph = glyphs[i];\n        if (glyph === null) {\n          // word break\n          x += fontDirection * wordSpacing;\n          continue;\n        } else if (isNum(glyph)) {\n          x += -glyph * fontSize * 0.001;\n          continue;\n        }\n        current.xcoords.push(current.x + x * textHScale);\n\n        var width = glyph.width;\n        var character = glyph.fontChar;\n        var spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n        var charWidth = width * widthAdvanceScale + spacing * fontDirection;\n        x += charWidth;\n\n        current.tspan.textContent += character;\n      }\n      if (vertical) {\n        current.y -= x * textHScale;\n      } else {\n        current.x += x * textHScale;\n      }\n\n      current.tspan.setAttributeNS(null, 'x',\n                                   current.xcoords.map(pf).join(' '));\n      current.tspan.setAttributeNS(null, 'y', pf(-current.y));\n      current.tspan.setAttributeNS(null, 'font-family', current.fontFamily);\n      current.tspan.setAttributeNS(null, 'font-size',\n                                   pf(current.fontSize) + 'px');\n      if (current.fontStyle !== SVG_DEFAULTS.fontStyle) {\n        current.tspan.setAttributeNS(null, 'font-style', current.fontStyle);\n      }\n      if (current.fontWeight !== SVG_DEFAULTS.fontWeight) {\n        current.tspan.setAttributeNS(null, 'font-weight', current.fontWeight);\n      }\n      if (current.fillColor !== SVG_DEFAULTS.fillColor) {\n        current.tspan.setAttributeNS(null, 'fill', current.fillColor);\n      }\n\n      current.txtElement.setAttributeNS(null, 'transform',\n                                        pm(current.textMatrix) +\n                                        ' scale(1, -1)');\n      current.txtElement.setAttributeNS(XML_NS, 'xml:space', 'preserve');\n      current.txtElement.appendChild(current.tspan);\n      current.txtgrp.appendChild(current.txtElement);\n\n      this._ensureTransformGroup().appendChild(current.txtElement);\n    },\n\n    setLeadingMoveText: function SVGGraphics_setLeadingMoveText(x, y) {\n      this.setLeading(-y);\n      this.moveText(x, y);\n    },\n\n    addFontStyle: function SVGGraphics_addFontStyle(fontObj) {\n      if (!this.cssStyle) {\n        this.cssStyle = document.createElementNS(NS, 'svg:style');\n        this.cssStyle.setAttributeNS(null, 'type', 'text/css');\n        this.defs.appendChild(this.cssStyle);\n      }\n\n      var url = createObjectURL(fontObj.data, fontObj.mimetype,\n                                this.forceDataSchema);\n      this.cssStyle.textContent +=\n        '@font-face { font-family: \"' + fontObj.loadedName + '\";' +\n        ' src: url(' + url + '); }\\n';\n    },\n\n    setFont: function SVGGraphics_setFont(details) {\n      var current = this.current;\n      var fontObj = this.commonObjs.get(details[0]);\n      var size = details[1];\n      this.current.font = fontObj;\n\n      if (this.embedFonts && fontObj.data &&\n          !this.embeddedFonts[fontObj.loadedName]) {\n        this.addFontStyle(fontObj);\n        this.embeddedFonts[fontObj.loadedName] = fontObj;\n      }\n\n      current.fontMatrix = (fontObj.fontMatrix ?\n                            fontObj.fontMatrix : FONT_IDENTITY_MATRIX);\n\n      var bold = fontObj.black ? (fontObj.bold ? 'bolder' : 'bold') :\n                                 (fontObj.bold ? 'bold' : 'normal');\n      var italic = fontObj.italic ? 'italic' : 'normal';\n\n      if (size < 0) {\n        size = -size;\n        current.fontDirection = -1;\n      } else {\n        current.fontDirection = 1;\n      }\n      current.fontSize = size;\n      current.fontFamily = fontObj.loadedName;\n      current.fontWeight = bold;\n      current.fontStyle = italic;\n\n      current.tspan = document.createElementNS(NS, 'svg:tspan');\n      current.tspan.setAttributeNS(null, 'y', pf(-current.y));\n      current.xcoords = [];\n    },\n\n    endText: function SVGGraphics_endText() {},\n\n    // Path properties\n    setLineWidth: function SVGGraphics_setLineWidth(width) {\n      this.current.lineWidth = width;\n    },\n    setLineCap: function SVGGraphics_setLineCap(style) {\n      this.current.lineCap = LINE_CAP_STYLES[style];\n    },\n    setLineJoin: function SVGGraphics_setLineJoin(style) {\n      this.current.lineJoin = LINE_JOIN_STYLES[style];\n    },\n    setMiterLimit: function SVGGraphics_setMiterLimit(limit) {\n      this.current.miterLimit = limit;\n    },\n    setStrokeRGBColor: function SVGGraphics_setStrokeRGBColor(r, g, b) {\n      var color = Util.makeCssRgb(r, g, b);\n      this.current.strokeColor = color;\n    },\n    setFillRGBColor: function SVGGraphics_setFillRGBColor(r, g, b) {\n      var color = Util.makeCssRgb(r, g, b);\n      this.current.fillColor = color;\n      this.current.tspan = document.createElementNS(NS, 'svg:tspan');\n      this.current.xcoords = [];\n    },\n    setDash: function SVGGraphics_setDash(dashArray, dashPhase) {\n      this.current.dashArray = dashArray;\n      this.current.dashPhase = dashPhase;\n    },\n\n    constructPath: function SVGGraphics_constructPath(ops, args) {\n      var current = this.current;\n      var x = current.x, y = current.y;\n      current.path = document.createElementNS(NS, 'svg:path');\n      var d = [];\n      var opLength = ops.length;\n\n      for (var i = 0, j = 0; i < opLength; i++) {\n        switch (ops[i] | 0) {\n          case OPS.rectangle:\n            x = args[j++];\n            y = args[j++];\n            var width = args[j++];\n            var height = args[j++];\n            var xw = x + width;\n            var yh = y + height;\n            d.push('M', pf(x), pf(y), 'L', pf(xw), pf(y), 'L', pf(xw), pf(yh),\n                   'L', pf(x), pf(yh), 'Z');\n            break;\n          case OPS.moveTo:\n            x = args[j++];\n            y = args[j++];\n            d.push('M', pf(x), pf(y));\n            break;\n          case OPS.lineTo:\n            x = args[j++];\n            y = args[j++];\n            d.push('L', pf(x), pf(y));\n            break;\n          case OPS.curveTo:\n            x = args[j + 4];\n            y = args[j + 5];\n            d.push('C', pf(args[j]), pf(args[j + 1]), pf(args[j + 2]),\n                   pf(args[j + 3]), pf(x), pf(y));\n            j += 6;\n            break;\n          case OPS.curveTo2:\n            x = args[j + 2];\n            y = args[j + 3];\n            d.push('C', pf(x), pf(y), pf(args[j]), pf(args[j + 1]),\n                   pf(args[j + 2]), pf(args[j + 3]));\n            j += 4;\n            break;\n          case OPS.curveTo3:\n            x = args[j + 2];\n            y = args[j + 3];\n            d.push('C', pf(args[j]), pf(args[j + 1]), pf(x), pf(y),\n                   pf(x), pf(y));\n            j += 4;\n            break;\n          case OPS.closePath:\n            d.push('Z');\n            break;\n        }\n      }\n      current.path.setAttributeNS(null, 'd', d.join(' '));\n      current.path.setAttributeNS(null, 'stroke-miterlimit',\n                                  pf(current.miterLimit));\n      current.path.setAttributeNS(null, 'stroke-linecap', current.lineCap);\n      current.path.setAttributeNS(null, 'stroke-linejoin', current.lineJoin);\n      current.path.setAttributeNS(null, 'stroke-width',\n                                  pf(current.lineWidth) + 'px');\n      current.path.setAttributeNS(null, 'stroke-dasharray',\n                                  current.dashArray.map(pf).join(' '));\n      current.path.setAttributeNS(null, 'stroke-dashoffset',\n                                  pf(current.dashPhase) + 'px');\n      current.path.setAttributeNS(null, 'fill', 'none');\n\n      this._ensureTransformGroup().appendChild(current.path);\n\n      // Saving a reference in current.element so that it can be addressed\n      // in 'fill' and 'stroke'\n      current.element = current.path;\n      current.setCurrentPoint(x, y);\n    },\n\n    endPath: function SVGGraphics_endPath() {},\n\n    clip: function SVGGraphics_clip(type) {\n      var current = this.current;\n      // Add current path to clipping path\n      var clipId = 'clippath' + clipCount;\n      clipCount++;\n      var clipPath = document.createElementNS(NS, 'svg:clipPath');\n      clipPath.setAttributeNS(null, 'id', clipId);\n      clipPath.setAttributeNS(null, 'transform', pm(this.transformMatrix));\n      var clipElement = current.element.cloneNode();\n      if (type === 'evenodd') {\n        clipElement.setAttributeNS(null, 'clip-rule', 'evenodd');\n      } else {\n        clipElement.setAttributeNS(null, 'clip-rule', 'nonzero');\n      }\n      clipPath.appendChild(clipElement);\n      this.defs.appendChild(clipPath);\n\n      if (current.activeClipUrl) {\n        // The previous clipping group content can go out of order -- resetting\n        // cached clipGroup's.\n        current.clipGroup = null;\n        this.extraStack.forEach(function (prev) {\n          prev.clipGroup = null;\n        });\n      }\n      current.activeClipUrl = 'url(#' + clipId + ')';\n\n      this.tgrp = null;\n    },\n\n    closePath: function SVGGraphics_closePath() {\n      var current = this.current;\n      var d = current.path.getAttributeNS(null, 'd');\n      d += 'Z';\n      current.path.setAttributeNS(null, 'd', d);\n    },\n\n    setLeading: function SVGGraphics_setLeading(leading) {\n      this.current.leading = -leading;\n    },\n\n    setTextRise: function SVGGraphics_setTextRise(textRise) {\n      this.current.textRise = textRise;\n    },\n\n    setHScale: function SVGGraphics_setHScale(scale) {\n      this.current.textHScale = scale / 100;\n    },\n\n    setGState: function SVGGraphics_setGState(states) {\n      for (var i = 0, ii = states.length; i < ii; i++) {\n        var state = states[i];\n        var key = state[0];\n        var value = state[1];\n\n        switch (key) {\n          case 'LW':\n            this.setLineWidth(value);\n            break;\n          case 'LC':\n            this.setLineCap(value);\n            break;\n          case 'LJ':\n            this.setLineJoin(value);\n            break;\n          case 'ML':\n            this.setMiterLimit(value);\n            break;\n          case 'D':\n            this.setDash(value[0], value[1]);\n            break;\n          case 'Font':\n            this.setFont(value);\n            break;\n          default:\n            warn('Unimplemented graphic state ' + key);\n            break;\n        }\n      }\n    },\n\n    fill: function SVGGraphics_fill() {\n      var current = this.current;\n      current.element.setAttributeNS(null, 'fill', current.fillColor);\n    },\n\n    stroke: function SVGGraphics_stroke() {\n      var current = this.current;\n      current.element.setAttributeNS(null, 'stroke', current.strokeColor);\n      current.element.setAttributeNS(null, 'fill', 'none');\n    },\n\n    eoFill: function SVGGraphics_eoFill() {\n      var current = this.current;\n      current.element.setAttributeNS(null, 'fill', current.fillColor);\n      current.element.setAttributeNS(null, 'fill-rule', 'evenodd');\n    },\n\n    fillStroke: function SVGGraphics_fillStroke() {\n      // Order is important since stroke wants fill to be none.\n      // First stroke, then if fill needed, it will be overwritten.\n      this.stroke();\n      this.fill();\n    },\n\n    eoFillStroke: function SVGGraphics_eoFillStroke() {\n      this.current.element.setAttributeNS(null, 'fill-rule', 'evenodd');\n      this.fillStroke();\n    },\n\n    closeStroke: function SVGGraphics_closeStroke() {\n      this.closePath();\n      this.stroke();\n    },\n\n    closeFillStroke: function SVGGraphics_closeFillStroke() {\n      this.closePath();\n      this.fillStroke();\n    },\n\n    paintSolidColorImageMask:\n        function SVGGraphics_paintSolidColorImageMask() {\n      var current = this.current;\n      var rect = document.createElementNS(NS, 'svg:rect');\n      rect.setAttributeNS(null, 'x', '0');\n      rect.setAttributeNS(null, 'y', '0');\n      rect.setAttributeNS(null, 'width', '1px');\n      rect.setAttributeNS(null, 'height', '1px');\n      rect.setAttributeNS(null, 'fill', current.fillColor);\n\n      this._ensureTransformGroup().appendChild(rect);\n    },\n\n    paintJpegXObject: function SVGGraphics_paintJpegXObject(objId, w, h) {\n      var imgObj = this.objs.get(objId);\n      var imgEl = document.createElementNS(NS, 'svg:image');\n      imgEl.setAttributeNS(XLINK_NS, 'xlink:href', imgObj.src);\n      imgEl.setAttributeNS(null, 'width', pf(w));\n      imgEl.setAttributeNS(null, 'height', pf(h));\n      imgEl.setAttributeNS(null, 'x', '0');\n      imgEl.setAttributeNS(null, 'y', pf(-h));\n      imgEl.setAttributeNS(null, 'transform',\n                           'scale(' + pf(1 / w) + ' ' + pf(-1 / h) + ')');\n\n      this._ensureTransformGroup().appendChild(imgEl);\n    },\n\n    paintImageXObject: function SVGGraphics_paintImageXObject(objId) {\n      var imgData = this.objs.get(objId);\n      if (!imgData) {\n        warn('Dependent image isn\\'t ready yet');\n        return;\n      }\n      this.paintInlineImageXObject(imgData);\n    },\n\n    paintInlineImageXObject:\n        function SVGGraphics_paintInlineImageXObject(imgData, mask) {\n      var width = imgData.width;\n      var height = imgData.height;\n\n      var imgSrc = convertImgDataToPng(imgData, this.forceDataSchema);\n      var cliprect = document.createElementNS(NS, 'svg:rect');\n      cliprect.setAttributeNS(null, 'x', '0');\n      cliprect.setAttributeNS(null, 'y', '0');\n      cliprect.setAttributeNS(null, 'width', pf(width));\n      cliprect.setAttributeNS(null, 'height', pf(height));\n      this.current.element = cliprect;\n      this.clip('nonzero');\n      var imgEl = document.createElementNS(NS, 'svg:image');\n      imgEl.setAttributeNS(XLINK_NS, 'xlink:href', imgSrc);\n      imgEl.setAttributeNS(null, 'x', '0');\n      imgEl.setAttributeNS(null, 'y', pf(-height));\n      imgEl.setAttributeNS(null, 'width', pf(width) + 'px');\n      imgEl.setAttributeNS(null, 'height', pf(height) + 'px');\n      imgEl.setAttributeNS(null, 'transform',\n                           'scale(' + pf(1 / width) + ' ' +\n                           pf(-1 / height) + ')');\n      if (mask) {\n        mask.appendChild(imgEl);\n      } else {\n        this._ensureTransformGroup().appendChild(imgEl);\n      }\n    },\n\n    paintImageMaskXObject:\n        function SVGGraphics_paintImageMaskXObject(imgData) {\n      var current = this.current;\n      var width = imgData.width;\n      var height = imgData.height;\n      var fillColor = current.fillColor;\n\n      current.maskId = 'mask' + maskCount++;\n      var mask = document.createElementNS(NS, 'svg:mask');\n      mask.setAttributeNS(null, 'id', current.maskId);\n\n      var rect = document.createElementNS(NS, 'svg:rect');\n      rect.setAttributeNS(null, 'x', '0');\n      rect.setAttributeNS(null, 'y', '0');\n      rect.setAttributeNS(null, 'width', pf(width));\n      rect.setAttributeNS(null, 'height', pf(height));\n      rect.setAttributeNS(null, 'fill', fillColor);\n      rect.setAttributeNS(null, 'mask', 'url(#' + current.maskId + ')');\n      this.defs.appendChild(mask);\n\n      this._ensureTransformGroup().appendChild(rect);\n\n      this.paintInlineImageXObject(imgData, mask);\n    },\n\n    paintFormXObjectBegin:\n        function SVGGraphics_paintFormXObjectBegin(matrix, bbox) {\n      if (isArray(matrix) && matrix.length === 6) {\n        this.transform(matrix[0], matrix[1], matrix[2],\n                       matrix[3], matrix[4], matrix[5]);\n      }\n\n      if (isArray(bbox) && bbox.length === 4) {\n        var width = bbox[2] - bbox[0];\n        var height = bbox[3] - bbox[1];\n\n        var cliprect = document.createElementNS(NS, 'svg:rect');\n        cliprect.setAttributeNS(null, 'x', bbox[0]);\n        cliprect.setAttributeNS(null, 'y', bbox[1]);\n        cliprect.setAttributeNS(null, 'width', pf(width));\n        cliprect.setAttributeNS(null, 'height', pf(height));\n        this.current.element = cliprect;\n        this.clip('nonzero');\n        this.endPath();\n      }\n    },\n\n    paintFormXObjectEnd:\n        function SVGGraphics_paintFormXObjectEnd() {},\n\n    /**\n     * @private\n     */\n    _initialize: function SVGGraphics_initialize(viewport) {\n      // Create the SVG element.\n      var svg = document.createElementNS(NS, 'svg:svg');\n      svg.setAttributeNS(null, 'version', '1.1');\n      svg.setAttributeNS(null, 'width', viewport.width + 'px');\n      svg.setAttributeNS(null, 'height', viewport.height + 'px');\n      svg.setAttributeNS(null, 'preserveAspectRatio', 'none');\n      svg.setAttributeNS(null, 'viewBox', '0 0 ' + viewport.width +\n                                          ' ' + viewport.height);\n\n      // Create the definitions element.\n      var definitions = document.createElementNS(NS, 'svg:defs');\n      svg.appendChild(definitions);\n      this.defs = definitions;\n\n      // Create the root group element, which acts a container for all other\n      // groups and applies the viewport transform.\n      var rootGroup = document.createElementNS(NS, 'svg:g');\n      rootGroup.setAttributeNS(null, 'transform', pm(viewport.transform));\n      svg.appendChild(rootGroup);\n\n      // For the construction of the SVG image we are only interested in the\n      // root group, so we expose it as the entry point of the SVG image for\n      // the other code in this class.\n      this.svg = rootGroup;\n\n      return svg;\n    },\n\n    /**\n     * @private\n     */\n    _ensureClipGroup: function SVGGraphics_ensureClipGroup() {\n      if (!this.current.clipGroup) {\n        var clipGroup = document.createElementNS(NS, 'svg:g');\n        clipGroup.setAttributeNS(null, 'clip-path',\n                                 this.current.activeClipUrl);\n        this.svg.appendChild(clipGroup);\n        this.current.clipGroup = clipGroup;\n      }\n      return this.current.clipGroup;\n    },\n\n    /**\n     * @private\n     */\n    _ensureTransformGroup: function SVGGraphics_ensureTransformGroup() {\n      if (!this.tgrp) {\n        this.tgrp = document.createElementNS(NS, 'svg:g');\n        this.tgrp.setAttributeNS(null, 'transform', pm(this.transformMatrix));\n        if (this.current.activeClipUrl) {\n          this._ensureClipGroup().appendChild(this.tgrp);\n        } else {\n          this.svg.appendChild(this.tgrp);\n        }\n      }\n      return this.tgrp;\n    }\n  };\n  return SVGGraphics;\n})();\n\n}\n\nexport {\n  SVGGraphics,\n};\n\n\n\n// WEBPACK FOOTER //\n// src/display/svg.js","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createPromiseCapability, Util } from '../shared/util';\nimport { CustomStyle, getDefaultSetting } from './dom_utils';\n\n/**\n * Text layer render parameters.\n *\n * @typedef {Object} TextLayerRenderParameters\n * @property {TextContent} textContent - Text content to render (the object is\n *   returned by the page's getTextContent() method).\n * @property {HTMLElement} container - HTML element that will contain text runs.\n * @property {PageViewport} viewport - The target viewport to properly\n *   layout the text runs.\n * @property {Array} textDivs - (optional) HTML elements that are correspond\n *   the text items of the textContent input. This is output and shall be\n *   initially be set to empty array.\n * @property {number} timeout - (optional) Delay in milliseconds before\n *   rendering of the text  runs occurs.\n * @property {boolean} enhanceTextSelection - (optional) Whether to turn on the\n *   text selection enhancement.\n */\nvar renderTextLayer = (function renderTextLayerClosure() {\n  var MAX_TEXT_DIVS_TO_RENDER = 100000;\n\n  var NonWhitespaceRegexp = /\\S/;\n\n  function isAllWhitespace(str) {\n    return !NonWhitespaceRegexp.test(str);\n  }\n\n  // Text layers may contain many thousand div's, and using `styleBuf` avoids\n  // creating many intermediate strings when building their 'style' properties.\n  var styleBuf = ['left: ', 0, 'px; top: ', 0, 'px; font-size: ', 0,\n                  'px; font-family: ', '', ';'];\n\n  function appendText(task, geom, styles) {\n    // Initialize all used properties to keep the caches monomorphic.\n    var textDiv = document.createElement('div');\n    var textDivProperties = {\n      style: null,\n      angle: 0,\n      canvasWidth: 0,\n      isWhitespace: false,\n      originalTransform: null,\n      paddingBottom: 0,\n      paddingLeft: 0,\n      paddingRight: 0,\n      paddingTop: 0,\n      scale: 1,\n    };\n\n    task._textDivs.push(textDiv);\n    if (isAllWhitespace(geom.str)) {\n      textDivProperties.isWhitespace = true;\n      task._textDivProperties.set(textDiv, textDivProperties);\n      return;\n    }\n\n    var tx = Util.transform(task._viewport.transform, geom.transform);\n    var angle = Math.atan2(tx[1], tx[0]);\n    var style = styles[geom.fontName];\n    if (style.vertical) {\n      angle += Math.PI / 2;\n    }\n    var fontHeight = Math.sqrt((tx[2] * tx[2]) + (tx[3] * tx[3]));\n    var fontAscent = fontHeight;\n    if (style.ascent) {\n      fontAscent = style.ascent * fontAscent;\n    } else if (style.descent) {\n      fontAscent = (1 + style.descent) * fontAscent;\n    }\n\n    var left;\n    var top;\n    if (angle === 0) {\n      left = tx[4];\n      top = tx[5] - fontAscent;\n    } else {\n      left = tx[4] + (fontAscent * Math.sin(angle));\n      top = tx[5] - (fontAscent * Math.cos(angle));\n    }\n    styleBuf[1] = left;\n    styleBuf[3] = top;\n    styleBuf[5] = fontHeight;\n    styleBuf[7] = style.fontFamily;\n    textDivProperties.style = styleBuf.join('');\n    textDiv.setAttribute('style', textDivProperties.style);\n\n    textDiv.textContent = geom.str;\n    // |fontName| is only used by the Font Inspector. This test will succeed\n    // when e.g. the Font Inspector is off but the Stepper is on, but it's\n    // not worth the effort to do a more accurate test. We only use `dataset`\n    // here to make the font name available for the debugger.\n    if (getDefaultSetting('pdfBug')) {\n      textDiv.dataset.fontName = geom.fontName;\n    }\n    if (angle !== 0) {\n      textDivProperties.angle = angle * (180 / Math.PI);\n    }\n    // We don't bother scaling single-char text divs, because it has very\n    // little effect on text highlighting. This makes scrolling on docs with\n    // lots of such divs a lot faster.\n    if (geom.str.length > 1) {\n      if (style.vertical) {\n        textDivProperties.canvasWidth = geom.height * task._viewport.scale;\n      } else {\n        textDivProperties.canvasWidth = geom.width * task._viewport.scale;\n      }\n    }\n    task._textDivProperties.set(textDiv, textDivProperties);\n\n    if (task._enhanceTextSelection) {\n      var angleCos = 1, angleSin = 0;\n      if (angle !== 0) {\n        angleCos = Math.cos(angle);\n        angleSin = Math.sin(angle);\n      }\n      var divWidth = (style.vertical ? geom.height : geom.width) *\n                     task._viewport.scale;\n      var divHeight = fontHeight;\n\n      var m, b;\n      if (angle !== 0) {\n        m = [angleCos, angleSin, -angleSin, angleCos, left, top];\n        b = Util.getAxialAlignedBoundingBox([0, 0, divWidth, divHeight], m);\n      } else {\n        b = [left, top, left + divWidth, top + divHeight];\n      }\n\n      task._bounds.push({\n        left: b[0],\n        top: b[1],\n        right: b[2],\n        bottom: b[3],\n        div: textDiv,\n        size: [divWidth, divHeight],\n        m,\n      });\n    }\n  }\n\n  function render(task) {\n    if (task._canceled) {\n      return;\n    }\n    var textLayerFrag = task._container;\n    var textDivs = task._textDivs;\n    var capability = task._capability;\n    var textDivsLength = textDivs.length;\n\n    // No point in rendering many divs as it would make the browser\n    // unusable even after the divs are rendered.\n    if (textDivsLength > MAX_TEXT_DIVS_TO_RENDER) {\n      task._renderingDone = true;\n      capability.resolve();\n      return;\n    }\n\n    // The temporary canvas is used to measure text length in the DOM.\n    var canvas = document.createElement('canvas');\n    if (typeof PDFJSDev === 'undefined' ||\n        PDFJSDev.test('FIREFOX || MOZCENTRAL || GENERIC')) {\n       canvas.mozOpaque = true;\n    }\n    var ctx = canvas.getContext('2d', {alpha: false});\n\n    var lastFontSize;\n    var lastFontFamily;\n    for (var i = 0; i < textDivsLength; i++) {\n      var textDiv = textDivs[i];\n      var textDivProperties = task._textDivProperties.get(textDiv);\n      if (textDivProperties.isWhitespace) {\n        continue;\n      }\n\n      var fontSize = textDiv.style.fontSize;\n      var fontFamily = textDiv.style.fontFamily;\n\n      // Only build font string and set to context if different from last.\n      if (fontSize !== lastFontSize || fontFamily !== lastFontFamily) {\n        ctx.font = fontSize + ' ' + fontFamily;\n        lastFontSize = fontSize;\n        lastFontFamily = fontFamily;\n      }\n\n      var width = ctx.measureText(textDiv.textContent).width;\n      textLayerFrag.appendChild(textDiv);\n\n      var transform = '';\n      if (textDivProperties.canvasWidth !== 0 && width > 0) {\n        textDivProperties.scale = textDivProperties.canvasWidth / width;\n        transform = 'scaleX(' + textDivProperties.scale + ')';\n      }\n      if (textDivProperties.angle !== 0) {\n        transform = 'rotate(' + textDivProperties.angle + 'deg) ' + transform;\n      }\n      if (transform !== '') {\n        textDivProperties.originalTransform = transform;\n        CustomStyle.setProp('transform', textDiv, transform);\n      }\n      task._textDivProperties.set(textDiv, textDivProperties);\n    }\n    task._renderingDone = true;\n    capability.resolve();\n  }\n\n  function expand(task) {\n    var bounds = task._bounds;\n    var viewport = task._viewport;\n\n    var expanded = expandBounds(viewport.width, viewport.height, bounds);\n    for (var i = 0; i < expanded.length; i++) {\n      var div = bounds[i].div;\n      var divProperties = task._textDivProperties.get(div);\n      if (divProperties.angle === 0) {\n        divProperties.paddingLeft = bounds[i].left - expanded[i].left;\n        divProperties.paddingTop = bounds[i].top - expanded[i].top;\n        divProperties.paddingRight = expanded[i].right - bounds[i].right;\n        divProperties.paddingBottom = expanded[i].bottom - bounds[i].bottom;\n        task._textDivProperties.set(div, divProperties);\n        continue;\n      }\n      // Box is rotated -- trying to find padding so rotated div will not\n      // exceed its expanded bounds.\n      var e = expanded[i], b = bounds[i];\n      var m = b.m, c = m[0], s = m[1];\n      // Finding intersections with expanded box.\n      var points = [[0, 0], [0, b.size[1]], [b.size[0], 0], b.size];\n      var ts = new Float64Array(64);\n      points.forEach(function (p, i) {\n        var t = Util.applyTransform(p, m);\n        ts[i + 0] = c && (e.left - t[0]) / c;\n        ts[i + 4] = s && (e.top - t[1]) / s;\n        ts[i + 8] = c && (e.right - t[0]) / c;\n        ts[i + 12] = s && (e.bottom - t[1]) / s;\n\n        ts[i + 16] = s && (e.left - t[0]) / -s;\n        ts[i + 20] = c && (e.top - t[1]) / c;\n        ts[i + 24] = s && (e.right - t[0]) / -s;\n        ts[i + 28] = c && (e.bottom - t[1]) / c;\n\n        ts[i + 32] = c && (e.left - t[0]) / -c;\n        ts[i + 36] = s && (e.top - t[1]) / -s;\n        ts[i + 40] = c && (e.right - t[0]) / -c;\n        ts[i + 44] = s && (e.bottom - t[1]) / -s;\n\n        ts[i + 48] = s && (e.left - t[0]) / s;\n        ts[i + 52] = c && (e.top - t[1]) / -c;\n        ts[i + 56] = s && (e.right - t[0]) / s;\n        ts[i + 60] = c && (e.bottom - t[1]) / -c;\n      });\n      var findPositiveMin = function (ts, offset, count) {\n        var result = 0;\n        for (var i = 0; i < count; i++) {\n          var t = ts[offset++];\n          if (t > 0) {\n            result = result ? Math.min(t, result) : t;\n          }\n        }\n        return result;\n      };\n      // Not based on math, but to simplify calculations, using cos and sin\n      // absolute values to not exceed the box (it can but insignificantly).\n      var boxScale = 1 + Math.min(Math.abs(c), Math.abs(s));\n      divProperties.paddingLeft = findPositiveMin(ts, 32, 16) / boxScale;\n      divProperties.paddingTop = findPositiveMin(ts, 48, 16) / boxScale;\n      divProperties.paddingRight = findPositiveMin(ts, 0, 16) / boxScale;\n      divProperties.paddingBottom = findPositiveMin(ts, 16, 16) / boxScale;\n      task._textDivProperties.set(div, divProperties);\n    }\n  }\n\n  function expandBounds(width, height, boxes) {\n    var bounds = boxes.map(function (box, i) {\n      return {\n        x1: box.left,\n        y1: box.top,\n        x2: box.right,\n        y2: box.bottom,\n        index: i,\n        x1New: undefined,\n        x2New: undefined\n      };\n    });\n    expandBoundsLTR(width, bounds);\n    var expanded = new Array(boxes.length);\n    bounds.forEach(function (b) {\n      var i = b.index;\n      expanded[i] = {\n        left: b.x1New,\n        top: 0,\n        right: b.x2New,\n        bottom: 0\n      };\n    });\n\n    // Rotating on 90 degrees and extending extended boxes. Reusing the bounds\n    // array and objects.\n    boxes.map(function (box, i) {\n      var e = expanded[i], b = bounds[i];\n      b.x1 = box.top;\n      b.y1 = width - e.right;\n      b.x2 = box.bottom;\n      b.y2 = width - e.left;\n      b.index = i;\n      b.x1New = undefined;\n      b.x2New = undefined;\n    });\n    expandBoundsLTR(height, bounds);\n\n    bounds.forEach(function (b) {\n      var i = b.index;\n      expanded[i].top = b.x1New;\n      expanded[i].bottom = b.x2New;\n    });\n    return expanded;\n  }\n\n  function expandBoundsLTR(width, bounds) {\n    // Sorting by x1 coordinate and walk by the bounds in the same order.\n    bounds.sort(function (a, b) {\n      return a.x1 - b.x1 || a.index - b.index;\n    });\n\n    // First we see on the horizon is a fake boundary.\n    var fakeBoundary = {\n      x1: -Infinity,\n      y1: -Infinity,\n      x2: 0,\n      y2: Infinity,\n      index: -1,\n      x1New: 0,\n      x2New: 0\n    };\n    var horizon = [{\n      start: -Infinity,\n      end: Infinity,\n      boundary: fakeBoundary\n    }];\n\n    bounds.forEach(function (boundary) {\n      // Searching for the affected part of horizon.\n      // TODO red-black tree or simple binary search\n      var i = 0;\n      while (i < horizon.length && horizon[i].end <= boundary.y1) {\n        i++;\n      }\n      var j = horizon.length - 1;\n      while (j >= 0 && horizon[j].start >= boundary.y2) {\n        j--;\n      }\n\n      var horizonPart, affectedBoundary;\n      var q, k, maxXNew = -Infinity;\n      for (q = i; q <= j; q++) {\n        horizonPart = horizon[q];\n        affectedBoundary = horizonPart.boundary;\n        var xNew;\n        if (affectedBoundary.x2 > boundary.x1) {\n          // In the middle of the previous element, new x shall be at the\n          // boundary start. Extending if further if the affected bondary\n          // placed on top of the current one.\n          xNew = affectedBoundary.index > boundary.index ?\n            affectedBoundary.x1New : boundary.x1;\n        } else if (affectedBoundary.x2New === undefined) {\n          // We have some space in between, new x in middle will be a fair\n          // choice.\n          xNew = (affectedBoundary.x2 + boundary.x1) / 2;\n        } else {\n          // Affected boundary has x2new set, using it as new x.\n          xNew = affectedBoundary.x2New;\n        }\n        if (xNew > maxXNew) {\n          maxXNew = xNew;\n        }\n      }\n\n      // Set new x1 for current boundary.\n      boundary.x1New = maxXNew;\n\n      // Adjusts new x2 for the affected boundaries.\n      for (q = i; q <= j; q++) {\n        horizonPart = horizon[q];\n        affectedBoundary = horizonPart.boundary;\n        if (affectedBoundary.x2New === undefined) {\n          // Was not set yet, choosing new x if possible.\n          if (affectedBoundary.x2 > boundary.x1) {\n            // Current and affected boundaries intersect. If affected boundary\n            // is placed on top of the current, shrinking the affected.\n            if (affectedBoundary.index > boundary.index) {\n              affectedBoundary.x2New = affectedBoundary.x2;\n            }\n          } else {\n            affectedBoundary.x2New = maxXNew;\n          }\n        } else if (affectedBoundary.x2New > maxXNew) {\n          // Affected boundary is touching new x, pushing it back.\n          affectedBoundary.x2New = Math.max(maxXNew, affectedBoundary.x2);\n        }\n      }\n\n      // Fixing the horizon.\n      var changedHorizon = [], lastBoundary = null;\n      for (q = i; q <= j; q++) {\n        horizonPart = horizon[q];\n        affectedBoundary = horizonPart.boundary;\n        // Checking which boundary will be visible.\n        var useBoundary = affectedBoundary.x2 > boundary.x2 ?\n          affectedBoundary : boundary;\n        if (lastBoundary === useBoundary) {\n          // Merging with previous.\n          changedHorizon[changedHorizon.length - 1].end = horizonPart.end;\n        } else {\n          changedHorizon.push({\n            start: horizonPart.start,\n            end: horizonPart.end,\n            boundary: useBoundary\n          });\n          lastBoundary = useBoundary;\n        }\n      }\n      if (horizon[i].start < boundary.y1) {\n        changedHorizon[0].start = boundary.y1;\n        changedHorizon.unshift({\n          start: horizon[i].start,\n          end: boundary.y1,\n          boundary: horizon[i].boundary\n        });\n      }\n      if (boundary.y2 < horizon[j].end) {\n        changedHorizon[changedHorizon.length - 1].end = boundary.y2;\n        changedHorizon.push({\n          start: boundary.y2,\n          end: horizon[j].end,\n          boundary: horizon[j].boundary\n        });\n      }\n\n      // Set x2 new of boundary that is no longer visible (see overlapping case\n      // above).\n      // TODO more efficient, e.g. via reference counting.\n      for (q = i; q <= j; q++) {\n        horizonPart = horizon[q];\n        affectedBoundary = horizonPart.boundary;\n        if (affectedBoundary.x2New !== undefined) {\n          continue;\n        }\n        var used = false;\n        for (k = i - 1; !used && k >= 0 &&\n        horizon[k].start >= affectedBoundary.y1; k--) {\n          used = horizon[k].boundary === affectedBoundary;\n        }\n        for (k = j + 1; !used && k < horizon.length &&\n        horizon[k].end <= affectedBoundary.y2; k++) {\n          used = horizon[k].boundary === affectedBoundary;\n        }\n        for (k = 0; !used && k < changedHorizon.length; k++) {\n          used = changedHorizon[k].boundary === affectedBoundary;\n        }\n        if (!used) {\n          affectedBoundary.x2New = maxXNew;\n        }\n      }\n\n      Array.prototype.splice.apply(horizon,\n        [i, j - i + 1].concat(changedHorizon));\n    });\n\n    // Set new x2 for all unset boundaries.\n    horizon.forEach(function (horizonPart) {\n      var affectedBoundary = horizonPart.boundary;\n      if (affectedBoundary.x2New === undefined) {\n        affectedBoundary.x2New = Math.max(width, affectedBoundary.x2);\n      }\n    });\n  }\n\n  /**\n   * Text layer rendering task.\n   *\n   * @param {TextContent} textContent\n   * @param {HTMLElement} container\n   * @param {PageViewport} viewport\n   * @param {Array} textDivs\n   * @param {boolean} enhanceTextSelection\n   * @private\n   */\n  function TextLayerRenderTask(textContent, container, viewport, textDivs,\n                               enhanceTextSelection) {\n    this._textContent = textContent;\n    this._container = container;\n    this._viewport = viewport;\n    this._textDivs = textDivs || [];\n    this._textDivProperties = new WeakMap();\n    this._renderingDone = false;\n    this._canceled = false;\n    this._capability = createPromiseCapability();\n    this._renderTimer = null;\n    this._bounds = [];\n    this._enhanceTextSelection = !!enhanceTextSelection;\n  }\n  TextLayerRenderTask.prototype = {\n    get promise() {\n      return this._capability.promise;\n    },\n\n    cancel: function TextLayer_cancel() {\n      this._canceled = true;\n      if (this._renderTimer !== null) {\n        clearTimeout(this._renderTimer);\n        this._renderTimer = null;\n      }\n      this._capability.reject('canceled');\n    },\n\n    _render: function TextLayer_render(timeout) {\n      var textItems = this._textContent.items;\n      var textStyles = this._textContent.styles;\n      for (var i = 0, len = textItems.length; i < len; i++) {\n        appendText(this, textItems[i], textStyles);\n      }\n\n      if (!timeout) { // Render right away\n        render(this);\n      } else { // Schedule\n        this._renderTimer = setTimeout(() => {\n          render(this);\n          this._renderTimer = null;\n        }, timeout);\n      }\n    },\n\n    expandTextDivs: function TextLayer_expandTextDivs(expandDivs) {\n      if (!this._enhanceTextSelection || !this._renderingDone) {\n        return;\n      }\n      if (this._bounds !== null) {\n        expand(this);\n        this._bounds = null;\n      }\n\n      for (var i = 0, ii = this._textDivs.length; i < ii; i++) {\n        var div = this._textDivs[i];\n        var divProperties = this._textDivProperties.get(div);\n\n        if (divProperties.isWhitespace) {\n          continue;\n        }\n        if (expandDivs) {\n          var transform = '', padding = '';\n\n          if (divProperties.scale !== 1) {\n            transform = 'scaleX(' + divProperties.scale + ')';\n          }\n          if (divProperties.angle !== 0) {\n            transform = 'rotate(' + divProperties.angle + 'deg) ' + transform;\n          }\n          if (divProperties.paddingLeft !== 0) {\n            padding += ' padding-left: ' +\n              (divProperties.paddingLeft / divProperties.scale) + 'px;';\n            transform += ' translateX(' +\n              (-divProperties.paddingLeft / divProperties.scale) + 'px)';\n          }\n          if (divProperties.paddingTop !== 0) {\n            padding += ' padding-top: ' + divProperties.paddingTop + 'px;';\n            transform += ' translateY(' + (-divProperties.paddingTop) + 'px)';\n          }\n          if (divProperties.paddingRight !== 0) {\n            padding += ' padding-right: ' +\n              (divProperties.paddingRight / divProperties.scale) + 'px;';\n          }\n          if (divProperties.paddingBottom !== 0) {\n            padding += ' padding-bottom: ' +\n              divProperties.paddingBottom + 'px;';\n          }\n\n          if (padding !== '') {\n            div.setAttribute('style', divProperties.style + padding);\n          }\n          if (transform !== '') {\n            CustomStyle.setProp('transform', div, transform);\n          }\n        } else {\n          div.style.padding = 0;\n          CustomStyle.setProp('transform', div,\n                              divProperties.originalTransform || '');\n        }\n      }\n    },\n  };\n\n  /**\n   * Starts rendering of the text layer.\n   *\n   * @param {TextLayerRenderParameters} renderParameters\n   * @returns {TextLayerRenderTask}\n   */\n  function renderTextLayer(renderParameters) {\n    var task = new TextLayerRenderTask(renderParameters.textContent,\n                                       renderParameters.container,\n                                       renderParameters.viewport,\n                                       renderParameters.textDivs,\n                                       renderParameters.enhanceTextSelection);\n    task._render(renderParameters.timeout);\n    return task;\n  }\n\n  return renderTextLayer;\n})();\n\nexport {\n  renderTextLayer,\n};\n\n\n\n// WEBPACK FOOTER //\n// src/display/text_layer.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// node_modules/webpack/buildin/global.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { error } from '../shared/util';\n\nfunction fixMetadata(meta) {\n  return meta.replace(/>\\\\376\\\\377([^<]+)/g, function(all, codes) {\n    var bytes = codes.replace(/\\\\([0-3])([0-7])([0-7])/g,\n                              function(code, d1, d2, d3) {\n      return String.fromCharCode(d1 * 64 + d2 * 8 + d3 * 1);\n    });\n    var chars = '';\n    for (var i = 0; i < bytes.length; i += 2) {\n      var code = bytes.charCodeAt(i) * 256 + bytes.charCodeAt(i + 1);\n      chars += (code >= 32 && code < 127 && code !== 60 && code !== 62 &&\n        code !== 38) ? String.fromCharCode(code) :\n        '&#x' + (0x10000 + code).toString(16).substring(1) + ';';\n    }\n    return '>' + chars;\n  });\n}\n\nfunction Metadata(meta) {\n  if (typeof meta === 'string') {\n    // Ghostscript produces invalid metadata\n    meta = fixMetadata(meta);\n\n    var parser = new DOMParser();\n    meta = parser.parseFromString(meta, 'application/xml');\n  } else if (!(meta instanceof Document)) {\n    error('Metadata: Invalid metadata object');\n  }\n\n  this.metaDocument = meta;\n  this.metadata = Object.create(null);\n  this.parse();\n}\n\nMetadata.prototype = {\n  parse: function Metadata_parse() {\n    var doc = this.metaDocument;\n    var rdf = doc.documentElement;\n\n    if (rdf.nodeName.toLowerCase() !== 'rdf:rdf') { // Wrapped in <xmpmeta>\n      rdf = rdf.firstChild;\n      while (rdf && rdf.nodeName.toLowerCase() !== 'rdf:rdf') {\n        rdf = rdf.nextSibling;\n      }\n    }\n\n    var nodeName = (rdf) ? rdf.nodeName.toLowerCase() : null;\n    if (!rdf || nodeName !== 'rdf:rdf' || !rdf.hasChildNodes()) {\n      return;\n    }\n\n    var children = rdf.childNodes, desc, entry, name, i, ii, length, iLength;\n    for (i = 0, length = children.length; i < length; i++) {\n      desc = children[i];\n      if (desc.nodeName.toLowerCase() !== 'rdf:description') {\n        continue;\n      }\n\n      for (ii = 0, iLength = desc.childNodes.length; ii < iLength; ii++) {\n        if (desc.childNodes[ii].nodeName.toLowerCase() !== '#text') {\n          entry = desc.childNodes[ii];\n          name = entry.nodeName.toLowerCase();\n          this.metadata[name] = entry.textContent.trim();\n        }\n      }\n    }\n  },\n\n  get: function Metadata_get(name) {\n    return this.metadata[name] || null;\n  },\n\n  has: function Metadata_has(name) {\n    return typeof this.metadata[name] !== 'undefined';\n  }\n};\n\nexport {\n  Metadata,\n};\n\n\n\n// WEBPACK FOOTER //\n// src/display/metadata.js","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable no-multi-str */\n\nimport { getDefaultSetting } from './dom_utils';\nimport { shadow } from '../shared/util';\n\nvar WebGLUtils = (function WebGLUtilsClosure() {\n  function loadShader(gl, code, shaderType) {\n    var shader = gl.createShader(shaderType);\n    gl.shaderSource(shader, code);\n    gl.compileShader(shader);\n    var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    if (!compiled) {\n      var errorMsg = gl.getShaderInfoLog(shader);\n      throw new Error('Error during shader compilation: ' + errorMsg);\n    }\n    return shader;\n  }\n  function createVertexShader(gl, code) {\n    return loadShader(gl, code, gl.VERTEX_SHADER);\n  }\n  function createFragmentShader(gl, code) {\n    return loadShader(gl, code, gl.FRAGMENT_SHADER);\n  }\n  function createProgram(gl, shaders) {\n    var program = gl.createProgram();\n    for (var i = 0, ii = shaders.length; i < ii; ++i) {\n      gl.attachShader(program, shaders[i]);\n    }\n    gl.linkProgram(program);\n    var linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!linked) {\n      var errorMsg = gl.getProgramInfoLog(program);\n      throw new Error('Error during program linking: ' + errorMsg);\n    }\n    return program;\n  }\n  function createTexture(gl, image, textureId) {\n    gl.activeTexture(textureId);\n    var texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n\n    // Set the parameters so we can render any size image.\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n    // Upload the image into the texture.\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n    return texture;\n  }\n\n  var currentGL, currentCanvas;\n  function generateGL() {\n    if (currentGL) {\n      return;\n    }\n\n    // The temporary canvas is used in the WebGL context.\n    currentCanvas = document.createElement('canvas');\n    currentGL = currentCanvas.getContext('webgl',\n      { premultipliedalpha: false });\n  }\n\n  var smaskVertexShaderCode = '\\\n  attribute vec2 a_position;                                    \\\n  attribute vec2 a_texCoord;                                    \\\n                                                                \\\n  uniform vec2 u_resolution;                                    \\\n                                                                \\\n  varying vec2 v_texCoord;                                      \\\n                                                                \\\n  void main() {                                                 \\\n    vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;   \\\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);          \\\n                                                                \\\n    v_texCoord = a_texCoord;                                    \\\n  }                                                             ';\n\n  var smaskFragmentShaderCode = '\\\n  precision mediump float;                                      \\\n                                                                \\\n  uniform vec4 u_backdrop;                                      \\\n  uniform int u_subtype;                                        \\\n  uniform sampler2D u_image;                                    \\\n  uniform sampler2D u_mask;                                     \\\n                                                                \\\n  varying vec2 v_texCoord;                                      \\\n                                                                \\\n  void main() {                                                 \\\n    vec4 imageColor = texture2D(u_image, v_texCoord);           \\\n    vec4 maskColor = texture2D(u_mask, v_texCoord);             \\\n    if (u_backdrop.a > 0.0) {                                   \\\n      maskColor.rgb = maskColor.rgb * maskColor.a +             \\\n                      u_backdrop.rgb * (1.0 - maskColor.a);     \\\n    }                                                           \\\n    float lum;                                                  \\\n    if (u_subtype == 0) {                                       \\\n      lum = maskColor.a;                                        \\\n    } else {                                                    \\\n      lum = maskColor.r * 0.3 + maskColor.g * 0.59 +            \\\n            maskColor.b * 0.11;                                 \\\n    }                                                           \\\n    imageColor.a *= lum;                                        \\\n    imageColor.rgb *= imageColor.a;                             \\\n    gl_FragColor = imageColor;                                  \\\n  }                                                             ';\n\n  var smaskCache = null;\n\n  function initSmaskGL() {\n    var canvas, gl;\n\n    generateGL();\n    canvas = currentCanvas;\n    currentCanvas = null;\n    gl = currentGL;\n    currentGL = null;\n\n    // setup a GLSL program\n    var vertexShader = createVertexShader(gl, smaskVertexShaderCode);\n    var fragmentShader = createFragmentShader(gl, smaskFragmentShaderCode);\n    var program = createProgram(gl, [vertexShader, fragmentShader]);\n    gl.useProgram(program);\n\n    var cache = {};\n    cache.gl = gl;\n    cache.canvas = canvas;\n    cache.resolutionLocation = gl.getUniformLocation(program, 'u_resolution');\n    cache.positionLocation = gl.getAttribLocation(program, 'a_position');\n    cache.backdropLocation = gl.getUniformLocation(program, 'u_backdrop');\n    cache.subtypeLocation = gl.getUniformLocation(program, 'u_subtype');\n\n    var texCoordLocation = gl.getAttribLocation(program, 'a_texCoord');\n    var texLayerLocation = gl.getUniformLocation(program, 'u_image');\n    var texMaskLocation = gl.getUniformLocation(program, 'u_mask');\n\n    // provide texture coordinates for the rectangle.\n    var texCoordBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n      0.0, 0.0,\n      1.0, 0.0,\n      0.0, 1.0,\n      0.0, 1.0,\n      1.0, 0.0,\n      1.0, 1.0]), gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(texCoordLocation);\n    gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);\n\n    gl.uniform1i(texLayerLocation, 0);\n    gl.uniform1i(texMaskLocation, 1);\n\n    smaskCache = cache;\n  }\n\n  function composeSMask(layer, mask, properties) {\n    var width = layer.width, height = layer.height;\n\n    if (!smaskCache) {\n      initSmaskGL();\n    }\n    var cache = smaskCache, canvas = cache.canvas, gl = cache.gl;\n    canvas.width = width;\n    canvas.height = height;\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    gl.uniform2f(cache.resolutionLocation, width, height);\n\n    if (properties.backdrop) {\n      gl.uniform4f(cache.resolutionLocation, properties.backdrop[0],\n                   properties.backdrop[1], properties.backdrop[2], 1);\n    } else {\n      gl.uniform4f(cache.resolutionLocation, 0, 0, 0, 0);\n    }\n    gl.uniform1i(cache.subtypeLocation,\n                 properties.subtype === 'Luminosity' ? 1 : 0);\n\n    // Create a textures\n    var texture = createTexture(gl, layer, gl.TEXTURE0);\n    var maskTexture = createTexture(gl, mask, gl.TEXTURE1);\n\n\n    // Create a buffer and put a single clipspace rectangle in\n    // it (2 triangles)\n    var buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n      0, 0,\n      width, 0,\n      0, height,\n      0, height,\n      width, 0,\n      width, height]), gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(cache.positionLocation);\n    gl.vertexAttribPointer(cache.positionLocation, 2, gl.FLOAT, false, 0, 0);\n\n    // draw\n    gl.clearColor(0, 0, 0, 0);\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\n\n    gl.flush();\n\n    gl.deleteTexture(texture);\n    gl.deleteTexture(maskTexture);\n    gl.deleteBuffer(buffer);\n\n    return canvas;\n  }\n\n  var figuresVertexShaderCode = '\\\n  attribute vec2 a_position;                                    \\\n  attribute vec3 a_color;                                       \\\n                                                                \\\n  uniform vec2 u_resolution;                                    \\\n  uniform vec2 u_scale;                                         \\\n  uniform vec2 u_offset;                                        \\\n                                                                \\\n  varying vec4 v_color;                                         \\\n                                                                \\\n  void main() {                                                 \\\n    vec2 position = (a_position + u_offset) * u_scale;          \\\n    vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;     \\\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);          \\\n                                                                \\\n    v_color = vec4(a_color / 255.0, 1.0);                       \\\n  }                                                             ';\n\n  var figuresFragmentShaderCode = '\\\n  precision mediump float;                                      \\\n                                                                \\\n  varying vec4 v_color;                                         \\\n                                                                \\\n  void main() {                                                 \\\n    gl_FragColor = v_color;                                     \\\n  }                                                             ';\n\n  var figuresCache = null;\n\n  function initFiguresGL() {\n    var canvas, gl;\n\n    generateGL();\n    canvas = currentCanvas;\n    currentCanvas = null;\n    gl = currentGL;\n    currentGL = null;\n\n    // setup a GLSL program\n    var vertexShader = createVertexShader(gl, figuresVertexShaderCode);\n    var fragmentShader = createFragmentShader(gl, figuresFragmentShaderCode);\n    var program = createProgram(gl, [vertexShader, fragmentShader]);\n    gl.useProgram(program);\n\n    var cache = {};\n    cache.gl = gl;\n    cache.canvas = canvas;\n    cache.resolutionLocation = gl.getUniformLocation(program, 'u_resolution');\n    cache.scaleLocation = gl.getUniformLocation(program, 'u_scale');\n    cache.offsetLocation = gl.getUniformLocation(program, 'u_offset');\n    cache.positionLocation = gl.getAttribLocation(program, 'a_position');\n    cache.colorLocation = gl.getAttribLocation(program, 'a_color');\n\n    figuresCache = cache;\n  }\n\n  function drawFigures(width, height, backgroundColor, figures, context) {\n    if (!figuresCache) {\n      initFiguresGL();\n    }\n    var cache = figuresCache, canvas = cache.canvas, gl = cache.gl;\n\n    canvas.width = width;\n    canvas.height = height;\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    gl.uniform2f(cache.resolutionLocation, width, height);\n\n    // count triangle points\n    var count = 0;\n    var i, ii, rows;\n    for (i = 0, ii = figures.length; i < ii; i++) {\n      switch (figures[i].type) {\n        case 'lattice':\n          rows = (figures[i].coords.length / figures[i].verticesPerRow) | 0;\n          count += (rows - 1) * (figures[i].verticesPerRow - 1) * 6;\n          break;\n        case 'triangles':\n          count += figures[i].coords.length;\n          break;\n      }\n    }\n    // transfer data\n    var coords = new Float32Array(count * 2);\n    var colors = new Uint8Array(count * 3);\n    var coordsMap = context.coords, colorsMap = context.colors;\n    var pIndex = 0, cIndex = 0;\n    for (i = 0, ii = figures.length; i < ii; i++) {\n      var figure = figures[i], ps = figure.coords, cs = figure.colors;\n      switch (figure.type) {\n        case 'lattice':\n          var cols = figure.verticesPerRow;\n          rows = (ps.length / cols) | 0;\n          for (var row = 1; row < rows; row++) {\n            var offset = row * cols + 1;\n            for (var col = 1; col < cols; col++, offset++) {\n              coords[pIndex] = coordsMap[ps[offset - cols - 1]];\n              coords[pIndex + 1] = coordsMap[ps[offset - cols - 1] + 1];\n              coords[pIndex + 2] = coordsMap[ps[offset - cols]];\n              coords[pIndex + 3] = coordsMap[ps[offset - cols] + 1];\n              coords[pIndex + 4] = coordsMap[ps[offset - 1]];\n              coords[pIndex + 5] = coordsMap[ps[offset - 1] + 1];\n              colors[cIndex] = colorsMap[cs[offset - cols - 1]];\n              colors[cIndex + 1] = colorsMap[cs[offset - cols - 1] + 1];\n              colors[cIndex + 2] = colorsMap[cs[offset - cols - 1] + 2];\n              colors[cIndex + 3] = colorsMap[cs[offset - cols]];\n              colors[cIndex + 4] = colorsMap[cs[offset - cols] + 1];\n              colors[cIndex + 5] = colorsMap[cs[offset - cols] + 2];\n              colors[cIndex + 6] = colorsMap[cs[offset - 1]];\n              colors[cIndex + 7] = colorsMap[cs[offset - 1] + 1];\n              colors[cIndex + 8] = colorsMap[cs[offset - 1] + 2];\n\n              coords[pIndex + 6] = coords[pIndex + 2];\n              coords[pIndex + 7] = coords[pIndex + 3];\n              coords[pIndex + 8] = coords[pIndex + 4];\n              coords[pIndex + 9] = coords[pIndex + 5];\n              coords[pIndex + 10] = coordsMap[ps[offset]];\n              coords[pIndex + 11] = coordsMap[ps[offset] + 1];\n              colors[cIndex + 9] = colors[cIndex + 3];\n              colors[cIndex + 10] = colors[cIndex + 4];\n              colors[cIndex + 11] = colors[cIndex + 5];\n              colors[cIndex + 12] = colors[cIndex + 6];\n              colors[cIndex + 13] = colors[cIndex + 7];\n              colors[cIndex + 14] = colors[cIndex + 8];\n              colors[cIndex + 15] = colorsMap[cs[offset]];\n              colors[cIndex + 16] = colorsMap[cs[offset] + 1];\n              colors[cIndex + 17] = colorsMap[cs[offset] + 2];\n              pIndex += 12;\n              cIndex += 18;\n            }\n          }\n          break;\n        case 'triangles':\n          for (var j = 0, jj = ps.length; j < jj; j++) {\n            coords[pIndex] = coordsMap[ps[j]];\n            coords[pIndex + 1] = coordsMap[ps[j] + 1];\n            colors[cIndex] = colorsMap[cs[j]];\n            colors[cIndex + 1] = colorsMap[cs[j] + 1];\n            colors[cIndex + 2] = colorsMap[cs[j] + 2];\n            pIndex += 2;\n            cIndex += 3;\n          }\n          break;\n      }\n    }\n\n    // draw\n    if (backgroundColor) {\n      gl.clearColor(backgroundColor[0] / 255, backgroundColor[1] / 255,\n                    backgroundColor[2] / 255, 1.0);\n    } else {\n      gl.clearColor(0, 0, 0, 0);\n    }\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    var coordsBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, coordsBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, coords, gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(cache.positionLocation);\n    gl.vertexAttribPointer(cache.positionLocation, 2, gl.FLOAT, false, 0, 0);\n\n    var colorsBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, colorsBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, colors, gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(cache.colorLocation);\n    gl.vertexAttribPointer(cache.colorLocation, 3, gl.UNSIGNED_BYTE, false,\n                           0, 0);\n\n    gl.uniform2f(cache.scaleLocation, context.scaleX, context.scaleY);\n    gl.uniform2f(cache.offsetLocation, context.offsetX, context.offsetY);\n\n    gl.drawArrays(gl.TRIANGLES, 0, count);\n\n    gl.flush();\n\n    gl.deleteBuffer(coordsBuffer);\n    gl.deleteBuffer(colorsBuffer);\n\n    return canvas;\n  }\n\n  function cleanup() {\n    if (smaskCache && smaskCache.canvas) {\n      smaskCache.canvas.width = 0;\n      smaskCache.canvas.height = 0;\n    }\n    if (figuresCache && figuresCache.canvas) {\n      figuresCache.canvas.width = 0;\n      figuresCache.canvas.height = 0;\n    }\n    smaskCache = null;\n    figuresCache = null;\n  }\n\n  return {\n    get isEnabled() {\n      if (getDefaultSetting('disableWebGL')) {\n        return false;\n      }\n      var enabled = false;\n      try {\n        generateGL();\n        enabled = !!currentGL;\n      } catch (e) { }\n      return shadow(this, 'isEnabled', enabled);\n    },\n    composeSMask,\n    drawFigures,\n    clear: cleanup\n  };\n})();\n\nexport {\n  WebGLUtils,\n};\n\n\n\n// WEBPACK FOOTER //\n// src/display/webgl.js","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  _UnsupportedManager, getDocument, LoopbackPort, PDFDataRangeTransport,\n  PDFWorker\n} from './api';\nimport {\n  addLinkAttributes, CustomStyle, DEFAULT_LINK_REL, getFilenameFromUrl,\n  isExternalLinkTargetSet, isValidUrl, LinkTarget\n} from './dom_utils';\nimport {\n  createBlob, createObjectURL, createPromiseCapability, deprecated,\n  getVerbosityLevel, globalScope, InvalidPDFException, isLittleEndian,\n  MissingPDFException, OPS, PageViewport, PasswordException, PasswordResponses,\n  removeNullCharacters, setVerbosityLevel, shadow, UnexpectedResponseException,\n  UnknownErrorException, UNSUPPORTED_FEATURES, Util, VERBOSITY_LEVELS, warn\n} from '../shared/util';\nimport { AnnotationLayer } from './annotation_layer';\nimport { Metadata } from './metadata';\nimport { renderTextLayer } from './text_layer';\nimport { SVGGraphics } from './svg';\n\nvar isWorker = (typeof window === 'undefined');\n\n// The global PDFJS object is now deprecated and will not be supported in\n// the future. The members below are maintained for backward  compatibility\n// and shall not be extended or modified. If the global.js is included as\n// a module, we will create a global PDFJS object instance or use existing.\nif (!globalScope.PDFJS) {\n  globalScope.PDFJS = {};\n}\nvar PDFJS = globalScope.PDFJS;\n\nif (typeof PDFJSDev !== 'undefined') {\n  PDFJS.version = PDFJSDev.eval('BUNDLE_VERSION');\n  PDFJS.build = PDFJSDev.eval('BUNDLE_BUILD');\n}\n\nPDFJS.pdfBug = false;\n\nif (PDFJS.verbosity !== undefined) {\n  setVerbosityLevel(PDFJS.verbosity);\n}\ndelete PDFJS.verbosity;\nObject.defineProperty(PDFJS, 'verbosity', {\n  get() {\n    return getVerbosityLevel();\n  },\n  set(level) {\n    setVerbosityLevel(level);\n  },\n  enumerable: true,\n  configurable: true\n});\n\nPDFJS.VERBOSITY_LEVELS = VERBOSITY_LEVELS;\nPDFJS.OPS = OPS;\nPDFJS.UNSUPPORTED_FEATURES = UNSUPPORTED_FEATURES;\nPDFJS.isValidUrl = isValidUrl;\nPDFJS.shadow = shadow;\nPDFJS.createBlob = createBlob;\nPDFJS.createObjectURL = function PDFJS_createObjectURL(data, contentType) {\n  return createObjectURL(data, contentType, PDFJS.disableCreateObjectURL);\n};\nObject.defineProperty(PDFJS, 'isLittleEndian', {\n  configurable: true,\n  get: function PDFJS_isLittleEndian() {\n    return shadow(PDFJS, 'isLittleEndian', isLittleEndian());\n  }\n});\nPDFJS.removeNullCharacters = removeNullCharacters;\nPDFJS.PasswordResponses = PasswordResponses;\nPDFJS.PasswordException = PasswordException;\nPDFJS.UnknownErrorException = UnknownErrorException;\nPDFJS.InvalidPDFException = InvalidPDFException;\nPDFJS.MissingPDFException = MissingPDFException;\nPDFJS.UnexpectedResponseException = UnexpectedResponseException;\nPDFJS.Util = Util;\nPDFJS.PageViewport = PageViewport;\nPDFJS.createPromiseCapability = createPromiseCapability;\n\n/**\n * The maximum allowed image size in total pixels e.g. width * height. Images\n * above this value will not be drawn. Use -1 for no limit.\n * @var {number}\n */\nPDFJS.maxImageSize = (PDFJS.maxImageSize === undefined ?\n                      -1 : PDFJS.maxImageSize);\n\n/**\n * The url of where the predefined Adobe CMaps are located. Include trailing\n * slash.\n * @var {string}\n */\nPDFJS.cMapUrl = (PDFJS.cMapUrl === undefined ? null : PDFJS.cMapUrl);\n\n/**\n * Specifies if CMaps are binary packed.\n * @var {boolean}\n */\nPDFJS.cMapPacked = PDFJS.cMapPacked === undefined ? false : PDFJS.cMapPacked;\n\n/**\n * By default fonts are converted to OpenType fonts and loaded via font face\n * rules. If disabled, the font will be rendered using a built in font\n * renderer that constructs the glyphs with primitive path commands.\n * @var {boolean}\n */\nPDFJS.disableFontFace = (PDFJS.disableFontFace === undefined ?\n                         false : PDFJS.disableFontFace);\n\n/**\n * Path for image resources, mainly for annotation icons. Include trailing\n * slash.\n * @var {string}\n */\nPDFJS.imageResourcesPath = (PDFJS.imageResourcesPath === undefined ?\n                            '' : PDFJS.imageResourcesPath);\n\n/**\n * Disable the web worker and run all code on the main thread. This will\n * happen automatically if the browser doesn't support workers or sending\n * typed arrays to workers.\n * @var {boolean}\n */\nPDFJS.disableWorker = (PDFJS.disableWorker === undefined ?\n                       false : PDFJS.disableWorker);\n\n/**\n * Path and filename of the worker file. Required when the worker is enabled\n * in development mode. If unspecified in the production build, the worker\n * will be loaded based on the location of the pdf.js file. It is recommended\n * that the workerSrc is set in a custom application to prevent issues caused\n * by third-party frameworks and libraries.\n * @var {string}\n */\nPDFJS.workerSrc = (PDFJS.workerSrc === undefined ? null : PDFJS.workerSrc);\n\n/**\n * Defines global port for worker process. Overrides workerSrc and\n * disableWorker setting.\n */\nPDFJS.workerPort = (PDFJS.workerPort === undefined ? null : PDFJS.workerPort);\n\n/**\n * Disable range request loading of PDF files. When enabled and if the server\n * supports partial content requests then the PDF will be fetched in chunks.\n * Enabled (false) by default.\n * @var {boolean}\n */\nPDFJS.disableRange = (PDFJS.disableRange === undefined ?\n                      false : PDFJS.disableRange);\n\n/**\n * Disable streaming of PDF file data. By default PDF.js attempts to load PDF\n * in chunks. This default behavior can be disabled.\n * @var {boolean}\n */\nPDFJS.disableStream = (PDFJS.disableStream === undefined ?\n                       false : PDFJS.disableStream);\n\n/**\n * Disable pre-fetching of PDF file data. When range requests are enabled\n * PDF.js will automatically keep fetching more data even if it isn't needed\n * to display the current page. This default behavior can be disabled.\n *\n * NOTE: It is also necessary to disable streaming, see above,\n *       in order for disabling of pre-fetching to work correctly.\n * @var {boolean}\n */\nPDFJS.disableAutoFetch = (PDFJS.disableAutoFetch === undefined ?\n                          false : PDFJS.disableAutoFetch);\n\n/**\n * Enables special hooks for debugging PDF.js.\n * @var {boolean}\n */\nPDFJS.pdfBug = (PDFJS.pdfBug === undefined ? false : PDFJS.pdfBug);\n\n/**\n * Enables transfer usage in postMessage for ArrayBuffers.\n * @var {boolean}\n */\nPDFJS.postMessageTransfers = (PDFJS.postMessageTransfers === undefined ?\n                              true : PDFJS.postMessageTransfers);\n\n/**\n * Disables URL.createObjectURL usage.\n * @var {boolean}\n */\nPDFJS.disableCreateObjectURL = (PDFJS.disableCreateObjectURL === undefined ?\n                                false : PDFJS.disableCreateObjectURL);\n\n/**\n * Disables WebGL usage.\n * @var {boolean}\n */\nPDFJS.disableWebGL = (PDFJS.disableWebGL === undefined ?\n                      true : PDFJS.disableWebGL);\n\n/**\n * Specifies the |target| attribute for external links.\n * The constants from PDFJS.LinkTarget should be used:\n *  - NONE [default]\n *  - SELF\n *  - BLANK\n *  - PARENT\n *  - TOP\n * @var {number}\n */\nPDFJS.externalLinkTarget = (PDFJS.externalLinkTarget === undefined ?\n                            LinkTarget.NONE : PDFJS.externalLinkTarget);\n\n/**\n * Specifies the |rel| attribute for external links. Defaults to stripping\n * the referrer.\n * @var {string}\n */\nPDFJS.externalLinkRel = (PDFJS.externalLinkRel === undefined ?\n                         DEFAULT_LINK_REL : PDFJS.externalLinkRel);\n\n/**\n  * Determines if we can eval strings as JS. Primarily used to improve\n  * performance for font rendering.\n  * @var {boolean}\n  */\nPDFJS.isEvalSupported = (PDFJS.isEvalSupported === undefined ?\n                         true : PDFJS.isEvalSupported);\n\n/**\n * Opt-in to backwards incompatible API changes. NOTE:\n * If the `PDFJS_NEXT` build flag is set, it will override this setting.\n * @var {boolean}\n */\nPDFJS.pdfjsNext = (PDFJS.pdfjsNext === undefined) ? false : PDFJS.pdfjsNext;\n\nif (typeof PDFJSDev === 'undefined' || !PDFJSDev.test('MOZCENTRAL')) {\n  var savedOpenExternalLinksInNewWindow = PDFJS.openExternalLinksInNewWindow;\n  delete PDFJS.openExternalLinksInNewWindow;\n  Object.defineProperty(PDFJS, 'openExternalLinksInNewWindow', {\n    get() {\n      return PDFJS.externalLinkTarget === LinkTarget.BLANK;\n    },\n    set(value) {\n      if (value) {\n        deprecated('PDFJS.openExternalLinksInNewWindow, please use ' +\n          '\"PDFJS.externalLinkTarget = PDFJS.LinkTarget.BLANK\" instead.');\n      }\n      if (PDFJS.externalLinkTarget !== LinkTarget.NONE) {\n        warn('PDFJS.externalLinkTarget is already initialized');\n        return;\n      }\n      PDFJS.externalLinkTarget = value ? LinkTarget.BLANK : LinkTarget.NONE;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  if (savedOpenExternalLinksInNewWindow) {\n    /**\n     * (Deprecated) Opens external links in a new window if enabled.\n     * The default behavior opens external links in the PDF.js window.\n     *\n     * NOTE: This property has been deprecated, please use\n     *       `PDFJS.externalLinkTarget = PDFJS.LinkTarget.BLANK` instead.\n     * @var {boolean}\n     */\n    PDFJS.openExternalLinksInNewWindow = savedOpenExternalLinksInNewWindow;\n  }\n}\n\nPDFJS.getDocument = getDocument;\nPDFJS.LoopbackPort = LoopbackPort;\nPDFJS.PDFDataRangeTransport = PDFDataRangeTransport;\nPDFJS.PDFWorker = PDFWorker;\n\nPDFJS.hasCanvasTypedArrays = true; // compatibility.js ensures this invariant\nPDFJS.CustomStyle = CustomStyle;\nPDFJS.LinkTarget = LinkTarget;\nPDFJS.addLinkAttributes = addLinkAttributes;\nPDFJS.getFilenameFromUrl = getFilenameFromUrl;\nPDFJS.isExternalLinkTargetSet = isExternalLinkTargetSet;\n\nPDFJS.AnnotationLayer = AnnotationLayer;\n\nPDFJS.renderTextLayer = renderTextLayer;\n\nPDFJS.Metadata = Metadata;\n\nPDFJS.SVGGraphics = SVGGraphics;\n\nPDFJS.UnsupportedManager = _UnsupportedManager;\n\nexport {\n  globalScope,\n  isWorker,\n  PDFJS,\n};\n\n\n\n// WEBPACK FOOTER //\n// src/display/global.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert, error, FONT_IDENTITY_MATRIX, IDENTITY_MATRIX, ImageKind, info,\n  isArray, isLittleEndian, isNum, OPS, shadow, TextRenderingMode, Util, warn\n} from '../shared/util';\nimport { getShadingPatternFromIR, TilingPattern } from './pattern_helper';\nimport { WebGLUtils } from './webgl';\n\n// <canvas> contexts store most of the state we need natively.\n// However, PDF needs a bit more state, which we store here.\n\n// Minimal font size that would be used during canvas fillText operations.\nvar MIN_FONT_SIZE = 16;\n// Maximum font size that would be used during canvas fillText operations.\nvar MAX_FONT_SIZE = 100;\nvar MAX_GROUP_SIZE = 4096;\n\n// Heuristic value used when enforcing minimum line widths.\nvar MIN_WIDTH_FACTOR = 0.65;\n\nvar COMPILE_TYPE3_GLYPHS = true;\nvar MAX_SIZE_TO_COMPILE = 1000;\n\nvar FULL_CHUNK_HEIGHT = 16;\n\nvar IsLittleEndianCached = {\n  get value() {\n    return shadow(IsLittleEndianCached, 'value', isLittleEndian());\n  }\n};\n\nfunction addContextCurrentTransform(ctx) {\n  // If the context doesn't expose a `mozCurrentTransform`, add a JS based one.\n  if (!ctx.mozCurrentTransform) {\n    ctx._originalSave = ctx.save;\n    ctx._originalRestore = ctx.restore;\n    ctx._originalRotate = ctx.rotate;\n    ctx._originalScale = ctx.scale;\n    ctx._originalTranslate = ctx.translate;\n    ctx._originalTransform = ctx.transform;\n    ctx._originalSetTransform = ctx.setTransform;\n\n    ctx._transformMatrix = ctx._transformMatrix || [1, 0, 0, 1, 0, 0];\n    ctx._transformStack = [];\n\n    Object.defineProperty(ctx, 'mozCurrentTransform', {\n      get: function getCurrentTransform() {\n        return this._transformMatrix;\n      }\n    });\n\n    Object.defineProperty(ctx, 'mozCurrentTransformInverse', {\n      get: function getCurrentTransformInverse() {\n        // Calculation done using WolframAlpha:\n        // http://www.wolframalpha.com/input/?\n        //   i=Inverse+{{a%2C+c%2C+e}%2C+{b%2C+d%2C+f}%2C+{0%2C+0%2C+1}}\n\n        var m = this._transformMatrix;\n        var a = m[0], b = m[1], c = m[2], d = m[3], e = m[4], f = m[5];\n\n        var ad_bc = a * d - b * c;\n        var bc_ad = b * c - a * d;\n\n        return [\n          d / ad_bc,\n          b / bc_ad,\n          c / bc_ad,\n          a / ad_bc,\n          (d * e - c * f) / bc_ad,\n          (b * e - a * f) / ad_bc\n        ];\n      }\n    });\n\n    ctx.save = function ctxSave() {\n      var old = this._transformMatrix;\n      this._transformStack.push(old);\n      this._transformMatrix = old.slice(0, 6);\n\n      this._originalSave();\n    };\n\n    ctx.restore = function ctxRestore() {\n      var prev = this._transformStack.pop();\n      if (prev) {\n        this._transformMatrix = prev;\n        this._originalRestore();\n      }\n    };\n\n    ctx.translate = function ctxTranslate(x, y) {\n      var m = this._transformMatrix;\n      m[4] = m[0] * x + m[2] * y + m[4];\n      m[5] = m[1] * x + m[3] * y + m[5];\n\n      this._originalTranslate(x, y);\n    };\n\n    ctx.scale = function ctxScale(x, y) {\n      var m = this._transformMatrix;\n      m[0] = m[0] * x;\n      m[1] = m[1] * x;\n      m[2] = m[2] * y;\n      m[3] = m[3] * y;\n\n      this._originalScale(x, y);\n    };\n\n    ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n      var m = this._transformMatrix;\n      this._transformMatrix = [\n        m[0] * a + m[2] * b,\n        m[1] * a + m[3] * b,\n        m[0] * c + m[2] * d,\n        m[1] * c + m[3] * d,\n        m[0] * e + m[2] * f + m[4],\n        m[1] * e + m[3] * f + m[5]\n      ];\n\n      ctx._originalTransform(a, b, c, d, e, f);\n    };\n\n    ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n      this._transformMatrix = [a, b, c, d, e, f];\n\n      ctx._originalSetTransform(a, b, c, d, e, f);\n    };\n\n    ctx.rotate = function ctxRotate(angle) {\n      var cosValue = Math.cos(angle);\n      var sinValue = Math.sin(angle);\n\n      var m = this._transformMatrix;\n      this._transformMatrix = [\n        m[0] * cosValue + m[2] * sinValue,\n        m[1] * cosValue + m[3] * sinValue,\n        m[0] * (-sinValue) + m[2] * cosValue,\n        m[1] * (-sinValue) + m[3] * cosValue,\n        m[4],\n        m[5]\n      ];\n\n      this._originalRotate(angle);\n    };\n  }\n}\n\nvar CachedCanvases = (function CachedCanvasesClosure() {\n  function CachedCanvases(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n  CachedCanvases.prototype = {\n    getCanvas: function CachedCanvases_getCanvas(id, width, height,\n                                                 trackTransform) {\n      var canvasEntry;\n      if (this.cache[id] !== undefined) {\n        canvasEntry = this.cache[id];\n        this.canvasFactory.reset(canvasEntry, width, height);\n        // reset canvas transform for emulated mozCurrentTransform, if needed\n        canvasEntry.context.setTransform(1, 0, 0, 1, 0, 0);\n      } else {\n        canvasEntry = this.canvasFactory.create(width, height);\n        this.cache[id] = canvasEntry;\n      }\n      if (trackTransform) {\n        addContextCurrentTransform(canvasEntry.context);\n      }\n      return canvasEntry;\n    },\n    clear() {\n      for (var id in this.cache) {\n        var canvasEntry = this.cache[id];\n        this.canvasFactory.destroy(canvasEntry);\n        delete this.cache[id];\n      }\n    }\n  };\n  return CachedCanvases;\n})();\n\nfunction compileType3Glyph(imgData) {\n  var POINT_TO_PROCESS_LIMIT = 1000;\n\n  var width = imgData.width, height = imgData.height;\n  var i, j, j0, width1 = width + 1;\n  var points = new Uint8Array(width1 * (height + 1));\n  var POINT_TYPES =\n      new Uint8Array([0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0]);\n\n  // decodes bit-packed mask data\n  var lineSize = (width + 7) & ~7, data0 = imgData.data;\n  var data = new Uint8Array(lineSize * height), pos = 0, ii;\n  for (i = 0, ii = data0.length; i < ii; i++) {\n    var mask = 128, elem = data0[i];\n    while (mask > 0) {\n      data[pos++] = (elem & mask) ? 0 : 255;\n      mask >>= 1;\n    }\n  }\n\n  // finding iteresting points: every point is located between mask pixels,\n  // so there will be points of the (width + 1)x(height + 1) grid. Every point\n  // will have flags assigned based on neighboring mask pixels:\n  //   4 | 8\n  //   --P--\n  //   2 | 1\n  // We are interested only in points with the flags:\n  //   - outside corners: 1, 2, 4, 8;\n  //   - inside corners: 7, 11, 13, 14;\n  //   - and, intersections: 5, 10.\n  var count = 0;\n  pos = 0;\n  if (data[pos] !== 0) {\n    points[0] = 1;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j] = data[pos] ? 2 : 1;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j] = 2;\n    ++count;\n  }\n  for (i = 1; i < height; i++) {\n    pos = i * lineSize;\n    j0 = i * width1;\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0] = data[pos] ? 1 : 8;\n      ++count;\n    }\n    // 'sum' is the position of the current pixel configuration in the 'TYPES'\n    // array (in order 8-1-2-4, so we can use '>>2' to shift the column).\n    var sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);\n    for (j = 1; j < width; j++) {\n      sum = (sum >> 2) + (data[pos + 1] ? 4 : 0) +\n            (data[pos - lineSize + 1] ? 8 : 0);\n      if (POINT_TYPES[sum]) {\n        points[j0 + j] = POINT_TYPES[sum];\n        ++count;\n      }\n      pos++;\n    }\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0 + j] = data[pos] ? 2 : 4;\n      ++count;\n    }\n\n    if (count > POINT_TO_PROCESS_LIMIT) {\n      return null;\n    }\n  }\n\n  pos = lineSize * (height - 1);\n  j0 = i * width1;\n  if (data[pos] !== 0) {\n    points[j0] = 8;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j0 + j] = data[pos] ? 4 : 8;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j0 + j] = 4;\n    ++count;\n  }\n  if (count > POINT_TO_PROCESS_LIMIT) {\n    return null;\n  }\n\n  // building outlines\n  var steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);\n  var outlines = [];\n  for (i = 0; count && i <= height; i++) {\n    var p = i * width1;\n    var end = p + width;\n    while (p < end && !points[p]) {\n      p++;\n    }\n    if (p === end) {\n      continue;\n    }\n    var coords = [p % width1, i];\n\n    var type = points[p], p0 = p, pp;\n    do {\n      var step = steps[type];\n      do {\n        p += step;\n      } while (!points[p]);\n\n      pp = points[p];\n      if (pp !== 5 && pp !== 10) {\n        // set new direction\n        type = pp;\n        // delete mark\n        points[p] = 0;\n      } else { // type is 5 or 10, ie, a crossing\n        // set new direction\n        type = pp & ((0x33 * type) >> 4);\n        // set new type for \"future hit\"\n        points[p] &= (type >> 2 | type << 2);\n      }\n\n      coords.push(p % width1);\n      coords.push((p / width1) | 0);\n      --count;\n    } while (p0 !== p);\n    outlines.push(coords);\n    --i;\n  }\n\n  var drawOutline = function(c) {\n    c.save();\n    // the path shall be painted in [0..1]x[0..1] space\n    c.scale(1 / width, -1 / height);\n    c.translate(0, -height);\n    c.beginPath();\n    for (var i = 0, ii = outlines.length; i < ii; i++) {\n      var o = outlines[i];\n      c.moveTo(o[0], o[1]);\n      for (var j = 2, jj = o.length; j < jj; j += 2) {\n        c.lineTo(o[j], o[j + 1]);\n      }\n    }\n    c.fill();\n    c.beginPath();\n    c.restore();\n  };\n\n  return drawOutline;\n}\n\nvar CanvasExtraState = (function CanvasExtraStateClosure() {\n  function CanvasExtraState(old) {\n    // Are soft masks and alpha values shapes or opacities?\n    this.alphaIsShape = false;\n    this.fontSize = 0;\n    this.fontSizeScale = 1;\n    this.textMatrix = IDENTITY_MATRIX;\n    this.textMatrixScale = 1;\n    this.fontMatrix = FONT_IDENTITY_MATRIX;\n    this.leading = 0;\n    // Current point (in user coordinates)\n    this.x = 0;\n    this.y = 0;\n    // Start of text line (in text coordinates)\n    this.lineX = 0;\n    this.lineY = 0;\n    // Character and word spacing\n    this.charSpacing = 0;\n    this.wordSpacing = 0;\n    this.textHScale = 1;\n    this.textRenderingMode = TextRenderingMode.FILL;\n    this.textRise = 0;\n    // Default fore and background colors\n    this.fillColor = '#000000';\n    this.strokeColor = '#000000';\n    this.patternFill = false;\n    // Note: fill alpha applies to all non-stroking operations\n    this.fillAlpha = 1;\n    this.strokeAlpha = 1;\n    this.lineWidth = 1;\n    this.activeSMask = null;\n    this.resumeSMaskCtx = null; // nonclonable field (see the save method below)\n\n    this.old = old;\n  }\n\n  CanvasExtraState.prototype = {\n    clone: function CanvasExtraState_clone() {\n      return Object.create(this);\n    },\n    setCurrentPoint: function CanvasExtraState_setCurrentPoint(x, y) {\n      this.x = x;\n      this.y = y;\n    }\n  };\n  return CanvasExtraState;\n})();\n\nvar CanvasGraphics = (function CanvasGraphicsClosure() {\n  // Defines the time the executeOperatorList is going to be executing\n  // before it stops and shedules a continue of execution.\n  var EXECUTION_TIME = 15;\n  // Defines the number of steps before checking the execution time\n  var EXECUTION_STEPS = 10;\n\n  function CanvasGraphics(canvasCtx, commonObjs, objs, canvasFactory,\n                          imageLayer) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState();\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.imageLayer = imageLayer;\n    this.groupStack = [];\n    this.processingType3 = null;\n    // Patterns are painted relative to the initial page/form transform, see pdf\n    // spec 8.7.2 NOTE 1.\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    if (canvasCtx) {\n      // NOTE: if mozCurrentTransform is polyfilled, then the current state of\n      // the transformation must already be set in canvasCtx._transformMatrix.\n      addContextCurrentTransform(canvasCtx);\n    }\n    this.cachedGetSinglePixelWidth = null;\n  }\n\n  function putBinaryImageData(ctx, imgData) {\n    if (typeof ImageData !== 'undefined' && imgData instanceof ImageData) {\n      ctx.putImageData(imgData, 0, 0);\n      return;\n    }\n\n    // Put the image data to the canvas in chunks, rather than putting the\n    // whole image at once.  This saves JS memory, because the ImageData object\n    // is smaller. It also possibly saves C++ memory within the implementation\n    // of putImageData(). (E.g. in Firefox we make two short-lived copies of\n    // the data passed to putImageData()). |n| shouldn't be too small, however,\n    // because too many putImageData() calls will slow things down.\n    //\n    // Note: as written, if the last chunk is partial, the putImageData() call\n    // will (conceptually) put pixels past the bounds of the canvas.  But\n    // that's ok; any such pixels are ignored.\n\n    var height = imgData.height, width = imgData.width;\n    var partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n    var fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n    var totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n    var chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n    var srcPos = 0, destPos;\n    var src = imgData.data;\n    var dest = chunkImgData.data;\n    var i, j, thisChunkHeight, elemsInThisChunk;\n\n    // There are multiple forms in which the pixel data can be passed, and\n    // imgData.kind tells us which one this is.\n    if (imgData.kind === ImageKind.GRAYSCALE_1BPP) {\n      // Grayscale, 1 bit per pixel (i.e. black-and-white).\n      var srcLength = src.byteLength;\n      var dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n      var dest32DataLength = dest32.length;\n      var fullSrcDiff = (width + 7) >> 3;\n      var white = 0xFFFFFFFF;\n      var black = IsLittleEndianCached.value ? 0xFF000000 : 0x000000FF;\n      for (i = 0; i < totalChunks; i++) {\n        thisChunkHeight =\n          (i < fullChunks) ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n        destPos = 0;\n        for (j = 0; j < thisChunkHeight; j++) {\n          var srcDiff = srcLength - srcPos;\n          var k = 0;\n          var kEnd = (srcDiff > fullSrcDiff) ? width : srcDiff * 8 - 7;\n          var kEndUnrolled = kEnd & ~7;\n          var mask = 0;\n          var srcByte = 0;\n          for (; k < kEndUnrolled; k += 8) {\n            srcByte = src[srcPos++];\n            dest32[destPos++] = (srcByte & 128) ? white : black;\n            dest32[destPos++] = (srcByte & 64) ? white : black;\n            dest32[destPos++] = (srcByte & 32) ? white : black;\n            dest32[destPos++] = (srcByte & 16) ? white : black;\n            dest32[destPos++] = (srcByte & 8) ? white : black;\n            dest32[destPos++] = (srcByte & 4) ? white : black;\n            dest32[destPos++] = (srcByte & 2) ? white : black;\n            dest32[destPos++] = (srcByte & 1) ? white : black;\n          }\n          for (; k < kEnd; k++) {\n             if (mask === 0) {\n               srcByte = src[srcPos++];\n               mask = 128;\n             }\n\n            dest32[destPos++] = (srcByte & mask) ? white : black;\n            mask >>= 1;\n          }\n        }\n        // We ran out of input. Make all remaining pixels transparent.\n        while (destPos < dest32DataLength) {\n          dest32[destPos++] = 0;\n        }\n\n        ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n      }\n    } else if (imgData.kind === ImageKind.RGBA_32BPP) {\n      // RGBA, 32-bits per pixel.\n\n      j = 0;\n      elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n      for (i = 0; i < fullChunks; i++) {\n        dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n        srcPos += elemsInThisChunk;\n\n        ctx.putImageData(chunkImgData, 0, j);\n        j += FULL_CHUNK_HEIGHT;\n      }\n      if (i < totalChunks) {\n        elemsInThisChunk = width * partialChunkHeight * 4;\n        dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n        ctx.putImageData(chunkImgData, 0, j);\n      }\n\n    } else if (imgData.kind === ImageKind.RGB_24BPP) {\n      // RGB, 24-bits per pixel.\n      thisChunkHeight = FULL_CHUNK_HEIGHT;\n      elemsInThisChunk = width * thisChunkHeight;\n      for (i = 0; i < totalChunks; i++) {\n        if (i >= fullChunks) {\n          thisChunkHeight = partialChunkHeight;\n          elemsInThisChunk = width * thisChunkHeight;\n        }\n\n        destPos = 0;\n        for (j = elemsInThisChunk; j--;) {\n          dest[destPos++] = src[srcPos++];\n          dest[destPos++] = src[srcPos++];\n          dest[destPos++] = src[srcPos++];\n          dest[destPos++] = 255;\n        }\n        ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n      }\n    } else {\n      error('bad image kind: ' + imgData.kind);\n    }\n  }\n\n  function putBinaryImageMask(ctx, imgData) {\n    var height = imgData.height, width = imgData.width;\n    var partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n    var fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n    var totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n    var chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n    var srcPos = 0;\n    var src = imgData.data;\n    var dest = chunkImgData.data;\n\n    for (var i = 0; i < totalChunks; i++) {\n      var thisChunkHeight =\n        (i < fullChunks) ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n\n      // Expand the mask so it can be used by the canvas.  Any required\n      // inversion has already been handled.\n      var destPos = 3; // alpha component offset\n      for (var j = 0; j < thisChunkHeight; j++) {\n        var mask = 0;\n        for (var k = 0; k < width; k++) {\n          if (!mask) {\n            var elem = src[srcPos++];\n            mask = 128;\n          }\n          dest[destPos] = (elem & mask) ? 0 : 255;\n          destPos += 4;\n          mask >>= 1;\n        }\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  }\n\n  function copyCtxState(sourceCtx, destCtx) {\n    var properties = ['strokeStyle', 'fillStyle', 'fillRule', 'globalAlpha',\n                      'lineWidth', 'lineCap', 'lineJoin', 'miterLimit',\n                      'globalCompositeOperation', 'font'];\n    for (var i = 0, ii = properties.length; i < ii; i++) {\n      var property = properties[i];\n      if (sourceCtx[property] !== undefined) {\n        destCtx[property] = sourceCtx[property];\n      }\n    }\n    if (sourceCtx.setLineDash !== undefined) {\n      destCtx.setLineDash(sourceCtx.getLineDash());\n      destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n    }\n  }\n\n  function composeSMaskBackdrop(bytes, r0, g0, b0) {\n    var length = bytes.length;\n    for (var i = 3; i < length; i += 4) {\n      var alpha = bytes[i];\n      if (alpha === 0) {\n        bytes[i - 3] = r0;\n        bytes[i - 2] = g0;\n        bytes[i - 1] = b0;\n      } else if (alpha < 255) {\n        var alpha_ = 255 - alpha;\n        bytes[i - 3] = (bytes[i - 3] * alpha + r0 * alpha_) >> 8;\n        bytes[i - 2] = (bytes[i - 2] * alpha + g0 * alpha_) >> 8;\n        bytes[i - 1] = (bytes[i - 1] * alpha + b0 * alpha_) >> 8;\n      }\n    }\n  }\n\n  function composeSMaskAlpha(maskData, layerData, transferMap) {\n    var length = maskData.length;\n    var scale = 1 / 255;\n    for (var i = 3; i < length; i += 4) {\n      var alpha = transferMap ? transferMap[maskData[i]] : maskData[i];\n      layerData[i] = (layerData[i] * alpha * scale) | 0;\n    }\n  }\n\n  function composeSMaskLuminosity(maskData, layerData, transferMap) {\n    var length = maskData.length;\n    for (var i = 3; i < length; i += 4) {\n      var y = (maskData[i - 3] * 77) +  // * 0.3 / 255 * 0x10000\n              (maskData[i - 2] * 152) + // * 0.59 ....\n              (maskData[i - 1] * 28);   // * 0.11 ....\n      layerData[i] = transferMap ?\n        (layerData[i] * transferMap[y >> 8]) >> 8 :\n        (layerData[i] * y) >> 16;\n    }\n  }\n\n  function genericComposeSMask(maskCtx, layerCtx, width, height,\n                               subtype, backdrop, transferMap) {\n    var hasBackdrop = !!backdrop;\n    var r0 = hasBackdrop ? backdrop[0] : 0;\n    var g0 = hasBackdrop ? backdrop[1] : 0;\n    var b0 = hasBackdrop ? backdrop[2] : 0;\n\n    var composeFn;\n    if (subtype === 'Luminosity') {\n      composeFn = composeSMaskLuminosity;\n    } else {\n      composeFn = composeSMaskAlpha;\n    }\n\n    // processing image in chunks to save memory\n    var PIXELS_TO_PROCESS = 1048576;\n    var chunkSize = Math.min(height, Math.ceil(PIXELS_TO_PROCESS / width));\n    for (var row = 0; row < height; row += chunkSize) {\n      var chunkHeight = Math.min(chunkSize, height - row);\n      var maskData = maskCtx.getImageData(0, row, width, chunkHeight);\n      var layerData = layerCtx.getImageData(0, row, width, chunkHeight);\n\n      if (hasBackdrop) {\n        composeSMaskBackdrop(maskData.data, r0, g0, b0);\n      }\n      composeFn(maskData.data, layerData.data, transferMap);\n\n      maskCtx.putImageData(layerData, 0, row);\n    }\n  }\n\n  function composeSMask(ctx, smask, layerCtx) {\n    var mask = smask.canvas;\n    var maskCtx = smask.context;\n\n    ctx.setTransform(smask.scaleX, 0, 0, smask.scaleY,\n                     smask.offsetX, smask.offsetY);\n\n    var backdrop = smask.backdrop || null;\n    if (!smask.transferMap && WebGLUtils.isEnabled) {\n      var composed = WebGLUtils.composeSMask(layerCtx.canvas, mask,\n        { subtype: smask.subtype, backdrop, });\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n      ctx.drawImage(composed, smask.offsetX, smask.offsetY);\n      return;\n    }\n    genericComposeSMask(maskCtx, layerCtx, mask.width, mask.height,\n                        smask.subtype, backdrop, smask.transferMap);\n    ctx.drawImage(mask, 0, 0);\n  }\n\n  var LINE_CAP_STYLES = ['butt', 'round', 'square'];\n  var LINE_JOIN_STYLES = ['miter', 'round', 'bevel'];\n  var NORMAL_CLIP = {};\n  var EO_CLIP = {};\n\n  CanvasGraphics.prototype = {\n\n    beginDrawing: function CanvasGraphics_beginDrawing(transform, viewport,\n                                                       transparency) {\n      // For pdfs that use blend modes we have to clear the canvas else certain\n      // blend modes can look wrong since we'd be blending with a white\n      // backdrop. The problem with a transparent backdrop though is we then\n      // don't get sub pixel anti aliasing on text, creating temporary\n      // transparent canvas when we have blend modes.\n      var width = this.ctx.canvas.width;\n      var height = this.ctx.canvas.height;\n\n      this.ctx.save();\n      this.ctx.fillStyle = 'rgb(255, 255, 255)';\n      this.ctx.fillRect(0, 0, width, height);\n      this.ctx.restore();\n\n      if (transparency) {\n        var transparentCanvas = this.cachedCanvases.getCanvas(\n          'transparent', width, height, true);\n        this.compositeCtx = this.ctx;\n        this.transparentCanvas = transparentCanvas.canvas;\n        this.ctx = transparentCanvas.context;\n        this.ctx.save();\n        // The transform can be applied before rendering, transferring it to\n        // the new canvas.\n        this.ctx.transform.apply(this.ctx,\n                                 this.compositeCtx.mozCurrentTransform);\n      }\n\n      this.ctx.save();\n      if (transform) {\n        this.ctx.transform.apply(this.ctx, transform);\n      }\n      this.ctx.transform.apply(this.ctx, viewport.transform);\n\n      this.baseTransform = this.ctx.mozCurrentTransform.slice();\n\n      if (this.imageLayer) {\n        this.imageLayer.beginLayout();\n      }\n    },\n\n    executeOperatorList: function CanvasGraphics_executeOperatorList(\n                                    operatorList,\n                                    executionStartIdx, continueCallback,\n                                    stepper) {\n      var argsArray = operatorList.argsArray;\n      var fnArray = operatorList.fnArray;\n      var i = executionStartIdx || 0;\n      var argsArrayLen = argsArray.length;\n\n      // Sometimes the OperatorList to execute is empty.\n      if (argsArrayLen === i) {\n        return i;\n      }\n\n      var chunkOperations = (argsArrayLen - i > EXECUTION_STEPS &&\n                             typeof continueCallback === 'function');\n      var endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n      var steps = 0;\n\n      var commonObjs = this.commonObjs;\n      var objs = this.objs;\n      var fnId;\n\n      while (true) {\n        if (stepper !== undefined && i === stepper.nextBreakPoint) {\n          stepper.breakIt(i, continueCallback);\n          return i;\n        }\n\n        fnId = fnArray[i];\n\n        if (fnId !== OPS.dependency) {\n          this[fnId].apply(this, argsArray[i]);\n        } else {\n          var deps = argsArray[i];\n          for (var n = 0, nn = deps.length; n < nn; n++) {\n            var depObjId = deps[n];\n            var common = depObjId[0] === 'g' && depObjId[1] === '_';\n            var objsPool = common ? commonObjs : objs;\n\n            // If the promise isn't resolved yet, add the continueCallback\n            // to the promise and bail out.\n            if (!objsPool.isResolved(depObjId)) {\n              objsPool.get(depObjId, continueCallback);\n              return i;\n            }\n          }\n        }\n\n        i++;\n\n        // If the entire operatorList was executed, stop as were done.\n        if (i === argsArrayLen) {\n          return i;\n        }\n\n        // If the execution took longer then a certain amount of time and\n        // `continueCallback` is specified, interrupt the execution.\n        if (chunkOperations && ++steps > EXECUTION_STEPS) {\n          if (Date.now() > endTime) {\n            continueCallback();\n            return i;\n          }\n          steps = 0;\n        }\n\n        // If the operatorList isn't executed completely yet OR the execution\n        // time was short enough, do another execution round.\n      }\n    },\n\n    endDrawing: function CanvasGraphics_endDrawing() {\n      // Finishing all opened operations such as SMask group painting.\n      if (this.current.activeSMask !== null) {\n        this.endSMaskGroup();\n      }\n\n      this.ctx.restore();\n\n      if (this.transparentCanvas) {\n        this.ctx = this.compositeCtx;\n        this.ctx.save();\n        this.ctx.setTransform(1, 0, 0, 1, 0, 0); // Avoid apply transform twice\n        this.ctx.drawImage(this.transparentCanvas, 0, 0);\n        this.ctx.restore();\n        this.transparentCanvas = null;\n      }\n\n      this.cachedCanvases.clear();\n      WebGLUtils.clear();\n\n      if (this.imageLayer) {\n        this.imageLayer.endLayout();\n      }\n    },\n\n    // Graphics state\n    setLineWidth: function CanvasGraphics_setLineWidth(width) {\n      this.current.lineWidth = width;\n      this.ctx.lineWidth = width;\n    },\n    setLineCap: function CanvasGraphics_setLineCap(style) {\n      this.ctx.lineCap = LINE_CAP_STYLES[style];\n    },\n    setLineJoin: function CanvasGraphics_setLineJoin(style) {\n      this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n    },\n    setMiterLimit: function CanvasGraphics_setMiterLimit(limit) {\n      this.ctx.miterLimit = limit;\n    },\n    setDash: function CanvasGraphics_setDash(dashArray, dashPhase) {\n      var ctx = this.ctx;\n      if (ctx.setLineDash !== undefined) {\n        ctx.setLineDash(dashArray);\n        ctx.lineDashOffset = dashPhase;\n      }\n    },\n    setRenderingIntent: function CanvasGraphics_setRenderingIntent(intent) {\n      // Maybe if we one day fully support color spaces this will be important\n      // for now we can ignore.\n      // TODO set rendering intent?\n    },\n    setFlatness: function CanvasGraphics_setFlatness(flatness) {\n      // There's no way to control this with canvas, but we can safely ignore.\n      // TODO set flatness?\n    },\n    setGState: function CanvasGraphics_setGState(states) {\n      for (var i = 0, ii = states.length; i < ii; i++) {\n        var state = states[i];\n        var key = state[0];\n        var value = state[1];\n\n        switch (key) {\n          case 'LW':\n            this.setLineWidth(value);\n            break;\n          case 'LC':\n            this.setLineCap(value);\n            break;\n          case 'LJ':\n            this.setLineJoin(value);\n            break;\n          case 'ML':\n            this.setMiterLimit(value);\n            break;\n          case 'D':\n            this.setDash(value[0], value[1]);\n            break;\n          case 'RI':\n            this.setRenderingIntent(value);\n            break;\n          case 'FL':\n            this.setFlatness(value);\n            break;\n          case 'Font':\n            this.setFont(value[0], value[1]);\n            break;\n          case 'CA':\n            this.current.strokeAlpha = state[1];\n            break;\n          case 'ca':\n            this.current.fillAlpha = state[1];\n            this.ctx.globalAlpha = state[1];\n            break;\n          case 'BM':\n            this.ctx.globalCompositeOperation = value;\n            break;\n          case 'SMask':\n            if (this.current.activeSMask) {\n              // If SMask is currrenly used, it needs to be suspended or\n              // finished. Suspend only makes sense when at least one save()\n              // was performed and state needs to be reverted on restore().\n              if (this.stateStack.length > 0 &&\n                  (this.stateStack[this.stateStack.length - 1].activeSMask ===\n                   this.current.activeSMask)) {\n                this.suspendSMaskGroup();\n              } else {\n                this.endSMaskGroup();\n              }\n            }\n            this.current.activeSMask = value ? this.tempSMask : null;\n            if (this.current.activeSMask) {\n              this.beginSMaskGroup();\n            }\n            this.tempSMask = null;\n            break;\n        }\n      }\n    },\n    beginSMaskGroup: function CanvasGraphics_beginSMaskGroup() {\n\n      var activeSMask = this.current.activeSMask;\n      var drawnWidth = activeSMask.canvas.width;\n      var drawnHeight = activeSMask.canvas.height;\n      var cacheId = 'smaskGroupAt' + this.groupLevel;\n      var scratchCanvas = this.cachedCanvases.getCanvas(\n        cacheId, drawnWidth, drawnHeight, true);\n\n      var currentCtx = this.ctx;\n      var currentTransform = currentCtx.mozCurrentTransform;\n      this.ctx.save();\n\n      var groupCtx = scratchCanvas.context;\n      groupCtx.scale(1 / activeSMask.scaleX, 1 / activeSMask.scaleY);\n      groupCtx.translate(-activeSMask.offsetX, -activeSMask.offsetY);\n      groupCtx.transform.apply(groupCtx, currentTransform);\n\n      activeSMask.startTransformInverse = groupCtx.mozCurrentTransformInverse;\n\n      copyCtxState(currentCtx, groupCtx);\n      this.ctx = groupCtx;\n      this.setGState([\n        ['BM', 'source-over'],\n        ['ca', 1],\n        ['CA', 1]\n      ]);\n      this.groupStack.push(currentCtx);\n      this.groupLevel++;\n    },\n    suspendSMaskGroup: function CanvasGraphics_endSMaskGroup() {\n      // Similar to endSMaskGroup, the intermediate canvas has to be composed\n      // and future ctx state restored.\n      var groupCtx = this.ctx;\n      this.groupLevel--;\n      this.ctx = this.groupStack.pop();\n\n      composeSMask(this.ctx, this.current.activeSMask, groupCtx);\n      this.ctx.restore();\n      this.ctx.save(); // save is needed since SMask will be resumed.\n      copyCtxState(groupCtx, this.ctx);\n\n      // Saving state for resuming.\n      this.current.resumeSMaskCtx = groupCtx;\n      // Transform was changed in the SMask canvas, reflecting this change on\n      // this.ctx.\n      var deltaTransform = Util.transform(\n        this.current.activeSMask.startTransformInverse,\n        groupCtx.mozCurrentTransform);\n      this.ctx.transform.apply(this.ctx, deltaTransform);\n\n      // SMask was composed, the results at the groupCtx can be cleared.\n      groupCtx.save();\n      groupCtx.setTransform(1, 0, 0, 1, 0, 0);\n      groupCtx.clearRect(0, 0, groupCtx.canvas.width, groupCtx.canvas.height);\n      groupCtx.restore();\n    },\n    resumeSMaskGroup: function CanvasGraphics_endSMaskGroup() {\n      // Resuming state saved by suspendSMaskGroup. We don't need to restore\n      // any groupCtx state since restore() command (the only caller) will do\n      // that for us. See also beginSMaskGroup.\n      var groupCtx = this.current.resumeSMaskCtx;\n      var currentCtx = this.ctx;\n      this.ctx = groupCtx;\n      this.groupStack.push(currentCtx);\n      this.groupLevel++;\n    },\n    endSMaskGroup: function CanvasGraphics_endSMaskGroup() {\n      var groupCtx = this.ctx;\n      this.groupLevel--;\n      this.ctx = this.groupStack.pop();\n\n      composeSMask(this.ctx, this.current.activeSMask, groupCtx);\n      this.ctx.restore();\n      copyCtxState(groupCtx, this.ctx);\n      // Transform was changed in the SMask canvas, reflecting this change on\n      // this.ctx.\n      var deltaTransform = Util.transform(\n        this.current.activeSMask.startTransformInverse,\n        groupCtx.mozCurrentTransform);\n      this.ctx.transform.apply(this.ctx, deltaTransform);\n    },\n    save: function CanvasGraphics_save() {\n      this.ctx.save();\n      var old = this.current;\n      this.stateStack.push(old);\n      this.current = old.clone();\n      this.current.resumeSMaskCtx = null;\n    },\n    restore: function CanvasGraphics_restore() {\n      // SMask was suspended, we just need to resume it.\n      if (this.current.resumeSMaskCtx) {\n        this.resumeSMaskGroup();\n      }\n      // SMask has to be finished once there is no states that are using the\n      // same SMask.\n      if (this.current.activeSMask !== null && (this.stateStack.length === 0 ||\n          this.stateStack[this.stateStack.length - 1].activeSMask !==\n          this.current.activeSMask)) {\n        this.endSMaskGroup();\n      }\n\n      if (this.stateStack.length !== 0) {\n        this.current = this.stateStack.pop();\n        this.ctx.restore();\n\n        // Ensure that the clipping path is reset (fixes issue6413.pdf).\n        this.pendingClip = null;\n\n        this.cachedGetSinglePixelWidth = null;\n      }\n    },\n    transform: function CanvasGraphics_transform(a, b, c, d, e, f) {\n      this.ctx.transform(a, b, c, d, e, f);\n\n      this.cachedGetSinglePixelWidth = null;\n    },\n\n    // Path\n    constructPath: function CanvasGraphics_constructPath(ops, args) {\n      var ctx = this.ctx;\n      var current = this.current;\n      var x = current.x, y = current.y;\n      for (var i = 0, j = 0, ii = ops.length; i < ii; i++) {\n        switch (ops[i] | 0) {\n          case OPS.rectangle:\n            x = args[j++];\n            y = args[j++];\n            var width = args[j++];\n            var height = args[j++];\n            if (width === 0) {\n              width = this.getSinglePixelWidth();\n            }\n            if (height === 0) {\n              height = this.getSinglePixelWidth();\n            }\n            var xw = x + width;\n            var yh = y + height;\n            this.ctx.moveTo(x, y);\n            this.ctx.lineTo(xw, y);\n            this.ctx.lineTo(xw, yh);\n            this.ctx.lineTo(x, yh);\n            this.ctx.lineTo(x, y);\n            this.ctx.closePath();\n            break;\n          case OPS.moveTo:\n            x = args[j++];\n            y = args[j++];\n            ctx.moveTo(x, y);\n            break;\n          case OPS.lineTo:\n            x = args[j++];\n            y = args[j++];\n            ctx.lineTo(x, y);\n            break;\n          case OPS.curveTo:\n            x = args[j + 4];\n            y = args[j + 5];\n            ctx.bezierCurveTo(args[j], args[j + 1], args[j + 2], args[j + 3],\n                              x, y);\n            j += 6;\n            break;\n          case OPS.curveTo2:\n            ctx.bezierCurveTo(x, y, args[j], args[j + 1],\n                              args[j + 2], args[j + 3]);\n            x = args[j + 2];\n            y = args[j + 3];\n            j += 4;\n            break;\n          case OPS.curveTo3:\n            x = args[j + 2];\n            y = args[j + 3];\n            ctx.bezierCurveTo(args[j], args[j + 1], x, y, x, y);\n            j += 4;\n            break;\n          case OPS.closePath:\n            ctx.closePath();\n            break;\n        }\n      }\n      current.setCurrentPoint(x, y);\n    },\n    closePath: function CanvasGraphics_closePath() {\n      this.ctx.closePath();\n    },\n    stroke: function CanvasGraphics_stroke(consumePath) {\n      consumePath = typeof consumePath !== 'undefined' ? consumePath : true;\n      var ctx = this.ctx;\n      var strokeColor = this.current.strokeColor;\n      // Prevent drawing too thin lines by enforcing a minimum line width.\n      ctx.lineWidth = Math.max(this.getSinglePixelWidth() * MIN_WIDTH_FACTOR,\n                               this.current.lineWidth);\n      // For stroke we want to temporarily change the global alpha to the\n      // stroking alpha.\n      ctx.globalAlpha = this.current.strokeAlpha;\n      if (strokeColor && strokeColor.hasOwnProperty('type') &&\n          strokeColor.type === 'Pattern') {\n        // for patterns, we transform to pattern space, calculate\n        // the pattern, call stroke, and restore to user space\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(ctx, this);\n        ctx.stroke();\n        ctx.restore();\n      } else {\n        ctx.stroke();\n      }\n      if (consumePath) {\n        this.consumePath();\n      }\n      // Restore the global alpha to the fill alpha\n      ctx.globalAlpha = this.current.fillAlpha;\n    },\n    closeStroke: function CanvasGraphics_closeStroke() {\n      this.closePath();\n      this.stroke();\n    },\n    fill: function CanvasGraphics_fill(consumePath) {\n      consumePath = typeof consumePath !== 'undefined' ? consumePath : true;\n      var ctx = this.ctx;\n      var fillColor = this.current.fillColor;\n      var isPatternFill = this.current.patternFill;\n      var needRestore = false;\n\n      if (isPatternFill) {\n        ctx.save();\n        if (this.baseTransform) {\n          ctx.setTransform.apply(ctx, this.baseTransform);\n        }\n        ctx.fillStyle = fillColor.getPattern(ctx, this);\n        needRestore = true;\n      }\n\n      if (this.pendingEOFill) {\n        ctx.fill('evenodd');\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill();\n      }\n\n      if (needRestore) {\n        ctx.restore();\n      }\n      if (consumePath) {\n        this.consumePath();\n      }\n    },\n    eoFill: function CanvasGraphics_eoFill() {\n      this.pendingEOFill = true;\n      this.fill();\n    },\n    fillStroke: function CanvasGraphics_fillStroke() {\n      this.fill(false);\n      this.stroke(false);\n\n      this.consumePath();\n    },\n    eoFillStroke: function CanvasGraphics_eoFillStroke() {\n      this.pendingEOFill = true;\n      this.fillStroke();\n    },\n    closeFillStroke: function CanvasGraphics_closeFillStroke() {\n      this.closePath();\n      this.fillStroke();\n    },\n    closeEOFillStroke: function CanvasGraphics_closeEOFillStroke() {\n      this.pendingEOFill = true;\n      this.closePath();\n      this.fillStroke();\n    },\n    endPath: function CanvasGraphics_endPath() {\n      this.consumePath();\n    },\n\n    // Clipping\n    clip: function CanvasGraphics_clip() {\n      this.pendingClip = NORMAL_CLIP;\n    },\n    eoClip: function CanvasGraphics_eoClip() {\n      this.pendingClip = EO_CLIP;\n    },\n\n    // Text\n    beginText: function CanvasGraphics_beginText() {\n      this.current.textMatrix = IDENTITY_MATRIX;\n      this.current.textMatrixScale = 1;\n      this.current.x = this.current.lineX = 0;\n      this.current.y = this.current.lineY = 0;\n    },\n    endText: function CanvasGraphics_endText() {\n      var paths = this.pendingTextPaths;\n      var ctx = this.ctx;\n      if (paths === undefined) {\n        ctx.beginPath();\n        return;\n      }\n\n      ctx.save();\n      ctx.beginPath();\n      for (var i = 0; i < paths.length; i++) {\n        var path = paths[i];\n        ctx.setTransform.apply(ctx, path.transform);\n        ctx.translate(path.x, path.y);\n        path.addToPath(ctx, path.fontSize);\n      }\n      ctx.restore();\n      ctx.clip();\n      ctx.beginPath();\n      delete this.pendingTextPaths;\n    },\n    setCharSpacing: function CanvasGraphics_setCharSpacing(spacing) {\n      this.current.charSpacing = spacing;\n    },\n    setWordSpacing: function CanvasGraphics_setWordSpacing(spacing) {\n      this.current.wordSpacing = spacing;\n    },\n    setHScale: function CanvasGraphics_setHScale(scale) {\n      this.current.textHScale = scale / 100;\n    },\n    setLeading: function CanvasGraphics_setLeading(leading) {\n      this.current.leading = -leading;\n    },\n    setFont: function CanvasGraphics_setFont(fontRefName, size) {\n      var fontObj = this.commonObjs.get(fontRefName);\n      var current = this.current;\n\n      if (!fontObj) {\n        error('Can\\'t find font for ' + fontRefName);\n      }\n\n      current.fontMatrix = (fontObj.fontMatrix ?\n                            fontObj.fontMatrix : FONT_IDENTITY_MATRIX);\n\n      // A valid matrix needs all main diagonal elements to be non-zero\n      // This also ensures we bypass FF bugzilla bug #719844.\n      if (current.fontMatrix[0] === 0 ||\n          current.fontMatrix[3] === 0) {\n        warn('Invalid font matrix for font ' + fontRefName);\n      }\n\n      // The spec for Tf (setFont) says that 'size' specifies the font 'scale',\n      // and in some docs this can be negative (inverted x-y axes).\n      if (size < 0) {\n        size = -size;\n        current.fontDirection = -1;\n      } else {\n        current.fontDirection = 1;\n      }\n\n      this.current.font = fontObj;\n      this.current.fontSize = size;\n\n      if (fontObj.isType3Font) {\n        return; // we don't need ctx.font for Type3 fonts\n      }\n\n      var name = fontObj.loadedName || 'sans-serif';\n      var bold = fontObj.black ? '900' : (fontObj.bold ? 'bold' : 'normal');\n      var italic = fontObj.italic ? 'italic' : 'normal';\n      var typeface = '\"' + name + '\", ' + fontObj.fallbackName;\n\n      // Some font backends cannot handle fonts below certain size.\n      // Keeping the font at minimal size and using the fontSizeScale to change\n      // the current transformation matrix before the fillText/strokeText.\n      // See https://bugzilla.mozilla.org/show_bug.cgi?id=726227\n      var browserFontSize = size < MIN_FONT_SIZE ? MIN_FONT_SIZE :\n                            size > MAX_FONT_SIZE ? MAX_FONT_SIZE : size;\n      this.current.fontSizeScale = size / browserFontSize;\n\n      var rule = italic + ' ' + bold + ' ' + browserFontSize + 'px ' + typeface;\n      this.ctx.font = rule;\n    },\n    setTextRenderingMode: function CanvasGraphics_setTextRenderingMode(mode) {\n      this.current.textRenderingMode = mode;\n    },\n    setTextRise: function CanvasGraphics_setTextRise(rise) {\n      this.current.textRise = rise;\n    },\n    moveText: function CanvasGraphics_moveText(x, y) {\n      this.current.x = this.current.lineX += x;\n      this.current.y = this.current.lineY += y;\n    },\n    setLeadingMoveText: function CanvasGraphics_setLeadingMoveText(x, y) {\n      this.setLeading(-y);\n      this.moveText(x, y);\n    },\n    setTextMatrix: function CanvasGraphics_setTextMatrix(a, b, c, d, e, f) {\n      this.current.textMatrix = [a, b, c, d, e, f];\n      this.current.textMatrixScale = Math.sqrt(a * a + b * b);\n\n      this.current.x = this.current.lineX = 0;\n      this.current.y = this.current.lineY = 0;\n    },\n    nextLine: function CanvasGraphics_nextLine() {\n      this.moveText(0, this.current.leading);\n    },\n\n    paintChar: function CanvasGraphics_paintChar(character, x, y) {\n      var ctx = this.ctx;\n      var current = this.current;\n      var font = current.font;\n      var textRenderingMode = current.textRenderingMode;\n      var fontSize = current.fontSize / current.fontSizeScale;\n      var fillStrokeMode = textRenderingMode &\n        TextRenderingMode.FILL_STROKE_MASK;\n      var isAddToPathSet = !!(textRenderingMode &\n        TextRenderingMode.ADD_TO_PATH_FLAG);\n\n      var addToPath;\n      if (font.disableFontFace || isAddToPathSet) {\n        addToPath = font.getPathGenerator(this.commonObjs, character);\n      }\n\n      if (font.disableFontFace) {\n        ctx.save();\n        ctx.translate(x, y);\n        ctx.beginPath();\n        addToPath(ctx, fontSize);\n        if (fillStrokeMode === TextRenderingMode.FILL ||\n            fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n          ctx.fill();\n        }\n        if (fillStrokeMode === TextRenderingMode.STROKE ||\n            fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n          ctx.stroke();\n        }\n        ctx.restore();\n      } else {\n        if (fillStrokeMode === TextRenderingMode.FILL ||\n            fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n          ctx.fillText(character, x, y);\n        }\n        if (fillStrokeMode === TextRenderingMode.STROKE ||\n            fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n          ctx.strokeText(character, x, y);\n        }\n      }\n\n      if (isAddToPathSet) {\n        var paths = this.pendingTextPaths || (this.pendingTextPaths = []);\n        paths.push({\n          transform: ctx.mozCurrentTransform,\n          x,\n          y,\n          fontSize,\n          addToPath,\n        });\n      }\n    },\n\n    get isFontSubpixelAAEnabled() {\n      // Checks if anti-aliasing is enabled when scaled text is painted.\n      // On Windows GDI scaled fonts looks bad.\n      var ctx = this.canvasFactory.create(10, 10).context;\n      ctx.scale(1.5, 1);\n      ctx.fillText('I', 0, 10);\n      var data = ctx.getImageData(0, 0, 10, 10).data;\n      var enabled = false;\n      for (var i = 3; i < data.length; i += 4) {\n        if (data[i] > 0 && data[i] < 255) {\n          enabled = true;\n          break;\n        }\n      }\n      return shadow(this, 'isFontSubpixelAAEnabled', enabled);\n    },\n\n    showText: function CanvasGraphics_showText(glyphs) {\n      var current = this.current;\n      var font = current.font;\n      if (font.isType3Font) {\n        return this.showType3Text(glyphs);\n      }\n\n      var fontSize = current.fontSize;\n      if (fontSize === 0) {\n        return;\n      }\n\n      var ctx = this.ctx;\n      var fontSizeScale = current.fontSizeScale;\n      var charSpacing = current.charSpacing;\n      var wordSpacing = current.wordSpacing;\n      var fontDirection = current.fontDirection;\n      var textHScale = current.textHScale * fontDirection;\n      var glyphsLength = glyphs.length;\n      var vertical = font.vertical;\n      var spacingDir = vertical ? 1 : -1;\n      var defaultVMetrics = font.defaultVMetrics;\n      var widthAdvanceScale = fontSize * current.fontMatrix[0];\n\n      var simpleFillText =\n        current.textRenderingMode === TextRenderingMode.FILL &&\n        !font.disableFontFace;\n\n      ctx.save();\n      ctx.transform.apply(ctx, current.textMatrix);\n      ctx.translate(current.x, current.y + current.textRise);\n\n      if (current.patternFill) {\n        // TODO: Some shading patterns are not applied correctly to text,\n        //       e.g. issues 3988 and 5432, and ShowText-ShadingPattern.pdf.\n        ctx.fillStyle = current.fillColor.getPattern(ctx, this);\n      }\n\n      if (fontDirection > 0) {\n        ctx.scale(textHScale, -1);\n      } else {\n        ctx.scale(textHScale, 1);\n      }\n\n      var lineWidth = current.lineWidth;\n      var scale = current.textMatrixScale;\n      if (scale === 0 || lineWidth === 0) {\n        var fillStrokeMode = current.textRenderingMode &\n          TextRenderingMode.FILL_STROKE_MASK;\n        if (fillStrokeMode === TextRenderingMode.STROKE ||\n            fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n          this.cachedGetSinglePixelWidth = null;\n          lineWidth = this.getSinglePixelWidth() * MIN_WIDTH_FACTOR;\n        }\n      } else {\n        lineWidth /= scale;\n      }\n\n      if (fontSizeScale !== 1.0) {\n        ctx.scale(fontSizeScale, fontSizeScale);\n        lineWidth /= fontSizeScale;\n      }\n\n      ctx.lineWidth = lineWidth;\n\n      var x = 0, i;\n      for (i = 0; i < glyphsLength; ++i) {\n        var glyph = glyphs[i];\n        if (isNum(glyph)) {\n          x += spacingDir * glyph * fontSize / 1000;\n          continue;\n        }\n\n        var restoreNeeded = false;\n        var spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n        var character = glyph.fontChar;\n        var accent = glyph.accent;\n        var scaledX, scaledY, scaledAccentX, scaledAccentY;\n        var width = glyph.width;\n        if (vertical) {\n          var vmetric, vx, vy;\n          vmetric = glyph.vmetric || defaultVMetrics;\n          vx = glyph.vmetric ? vmetric[1] : width * 0.5;\n          vx = -vx * widthAdvanceScale;\n          vy = vmetric[2] * widthAdvanceScale;\n\n          width = vmetric ? -vmetric[0] : width;\n          scaledX = vx / fontSizeScale;\n          scaledY = (x + vy) / fontSizeScale;\n        } else {\n          scaledX = x / fontSizeScale;\n          scaledY = 0;\n        }\n\n        if (font.remeasure && width > 0) {\n          // Some standard fonts may not have the exact width: rescale per\n          // character if measured width is greater than expected glyph width\n          // and subpixel-aa is enabled, otherwise just center the glyph.\n          var measuredWidth = ctx.measureText(character).width * 1000 /\n            fontSize * fontSizeScale;\n          if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n            var characterScaleX = width / measuredWidth;\n            restoreNeeded = true;\n            ctx.save();\n            ctx.scale(characterScaleX, 1);\n            scaledX /= characterScaleX;\n          } else if (width !== measuredWidth) {\n            scaledX += (width - measuredWidth) / 2000 *\n              fontSize / fontSizeScale;\n          }\n        }\n\n        // Only attempt to draw the glyph if it is actually in the embedded font\n        // file or if there isn't a font file so the fallback font is shown.\n        if (glyph.isInFont || font.missingFile) {\n          if (simpleFillText && !accent) {\n            // common case\n            ctx.fillText(character, scaledX, scaledY);\n          } else {\n            this.paintChar(character, scaledX, scaledY);\n            if (accent) {\n              scaledAccentX = scaledX + accent.offset.x / fontSizeScale;\n              scaledAccentY = scaledY - accent.offset.y / fontSizeScale;\n              this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY);\n            }\n          }\n        }\n\n        var charWidth = width * widthAdvanceScale + spacing * fontDirection;\n        x += charWidth;\n\n        if (restoreNeeded) {\n          ctx.restore();\n        }\n      }\n      if (vertical) {\n        current.y -= x * textHScale;\n      } else {\n        current.x += x * textHScale;\n      }\n      ctx.restore();\n    },\n\n    showType3Text: function CanvasGraphics_showType3Text(glyphs) {\n      // Type3 fonts - each glyph is a \"mini-PDF\"\n      var ctx = this.ctx;\n      var current = this.current;\n      var font = current.font;\n      var fontSize = current.fontSize;\n      var fontDirection = current.fontDirection;\n      var spacingDir = font.vertical ? 1 : -1;\n      var charSpacing = current.charSpacing;\n      var wordSpacing = current.wordSpacing;\n      var textHScale = current.textHScale * fontDirection;\n      var fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n      var glyphsLength = glyphs.length;\n      var isTextInvisible =\n        current.textRenderingMode === TextRenderingMode.INVISIBLE;\n      var i, glyph, width, spacingLength;\n\n      if (isTextInvisible || fontSize === 0) {\n        return;\n      }\n      this.cachedGetSinglePixelWidth = null;\n\n      ctx.save();\n      ctx.transform.apply(ctx, current.textMatrix);\n      ctx.translate(current.x, current.y);\n\n      ctx.scale(textHScale, fontDirection);\n\n      for (i = 0; i < glyphsLength; ++i) {\n        glyph = glyphs[i];\n        if (isNum(glyph)) {\n          spacingLength = spacingDir * glyph * fontSize / 1000;\n          this.ctx.translate(spacingLength, 0);\n          current.x += spacingLength * textHScale;\n          continue;\n        }\n\n        var spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n        var operatorList = font.charProcOperatorList[glyph.operatorListId];\n        if (!operatorList) {\n          warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n          continue;\n        }\n        this.processingType3 = glyph;\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform.apply(ctx, fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n\n        var transformed = Util.applyTransform([glyph.width, 0], fontMatrix);\n        width = transformed[0] * fontSize + spacing;\n\n        ctx.translate(width, 0);\n        current.x += width * textHScale;\n      }\n      ctx.restore();\n      this.processingType3 = null;\n    },\n\n    // Type3 fonts\n    setCharWidth: function CanvasGraphics_setCharWidth(xWidth, yWidth) {\n      // We can safely ignore this since the width should be the same\n      // as the width in the Widths array.\n    },\n    setCharWidthAndBounds: function CanvasGraphics_setCharWidthAndBounds(xWidth,\n                                                                        yWidth,\n                                                                        llx,\n                                                                        lly,\n                                                                        urx,\n                                                                        ury) {\n      // TODO According to the spec we're also suppose to ignore any operators\n      // that set color or include images while processing this type3 font.\n      this.ctx.rect(llx, lly, urx - llx, ury - lly);\n      this.clip();\n      this.endPath();\n    },\n\n    // Color\n    getColorN_Pattern: function CanvasGraphics_getColorN_Pattern(IR) {\n      var pattern;\n      if (IR[0] === 'TilingPattern') {\n        var color = IR[1];\n        var baseTransform = this.baseTransform ||\n                            this.ctx.mozCurrentTransform.slice();\n        var canvasGraphicsFactory = {\n          createCanvasGraphics: (ctx) => {\n            return new CanvasGraphics(ctx, this.commonObjs, this.objs,\n                                      this.canvasFactory);\n          }\n        };\n        pattern = new TilingPattern(IR, color, this.ctx, canvasGraphicsFactory,\n                                    baseTransform);\n      } else {\n        pattern = getShadingPatternFromIR(IR);\n      }\n      return pattern;\n    },\n    setStrokeColorN: function CanvasGraphics_setStrokeColorN() {\n      this.current.strokeColor = this.getColorN_Pattern(arguments);\n    },\n    setFillColorN: function CanvasGraphics_setFillColorN() {\n      this.current.fillColor = this.getColorN_Pattern(arguments);\n      this.current.patternFill = true;\n    },\n    setStrokeRGBColor: function CanvasGraphics_setStrokeRGBColor(r, g, b) {\n      var color = Util.makeCssRgb(r, g, b);\n      this.ctx.strokeStyle = color;\n      this.current.strokeColor = color;\n    },\n    setFillRGBColor: function CanvasGraphics_setFillRGBColor(r, g, b) {\n      var color = Util.makeCssRgb(r, g, b);\n      this.ctx.fillStyle = color;\n      this.current.fillColor = color;\n      this.current.patternFill = false;\n    },\n\n    shadingFill: function CanvasGraphics_shadingFill(patternIR) {\n      var ctx = this.ctx;\n\n      this.save();\n      var pattern = getShadingPatternFromIR(patternIR);\n      ctx.fillStyle = pattern.getPattern(ctx, this, true);\n\n      var inv = ctx.mozCurrentTransformInverse;\n      if (inv) {\n        var canvas = ctx.canvas;\n        var width = canvas.width;\n        var height = canvas.height;\n\n        var bl = Util.applyTransform([0, 0], inv);\n        var br = Util.applyTransform([0, height], inv);\n        var ul = Util.applyTransform([width, 0], inv);\n        var ur = Util.applyTransform([width, height], inv);\n\n        var x0 = Math.min(bl[0], br[0], ul[0], ur[0]);\n        var y0 = Math.min(bl[1], br[1], ul[1], ur[1]);\n        var x1 = Math.max(bl[0], br[0], ul[0], ur[0]);\n        var y1 = Math.max(bl[1], br[1], ul[1], ur[1]);\n\n        this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n      } else {\n        // HACK to draw the gradient onto an infinite rectangle.\n        // PDF gradients are drawn across the entire image while\n        // Canvas only allows gradients to be drawn in a rectangle\n        // The following bug should allow us to remove this.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=664884\n\n        this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n      }\n\n      this.restore();\n    },\n\n    // Images\n    beginInlineImage: function CanvasGraphics_beginInlineImage() {\n      error('Should not call beginInlineImage');\n    },\n    beginImageData: function CanvasGraphics_beginImageData() {\n      error('Should not call beginImageData');\n    },\n\n    paintFormXObjectBegin: function CanvasGraphics_paintFormXObjectBegin(matrix,\n                                                                        bbox) {\n      this.save();\n      this.baseTransformStack.push(this.baseTransform);\n\n      if (isArray(matrix) && matrix.length === 6) {\n        this.transform.apply(this, matrix);\n      }\n\n      this.baseTransform = this.ctx.mozCurrentTransform;\n\n      if (isArray(bbox) && bbox.length === 4) {\n        var width = bbox[2] - bbox[0];\n        var height = bbox[3] - bbox[1];\n        this.ctx.rect(bbox[0], bbox[1], width, height);\n        this.clip();\n        this.endPath();\n      }\n    },\n\n    paintFormXObjectEnd: function CanvasGraphics_paintFormXObjectEnd() {\n      this.restore();\n      this.baseTransform = this.baseTransformStack.pop();\n    },\n\n    beginGroup: function CanvasGraphics_beginGroup(group) {\n      this.save();\n      var currentCtx = this.ctx;\n      // TODO non-isolated groups - according to Rik at adobe non-isolated\n      // group results aren't usually that different and they even have tools\n      // that ignore this setting. Notes from Rik on implementing:\n      // - When you encounter an transparency group, create a new canvas with\n      // the dimensions of the bbox\n      // - copy the content from the previous canvas to the new canvas\n      // - draw as usual\n      // - remove the backdrop alpha:\n      // alphaNew = 1 - (1 - alpha)/(1 - alphaBackdrop) with 'alpha' the alpha\n      // value of your transparency group and 'alphaBackdrop' the alpha of the\n      // backdrop\n      // - remove background color:\n      // colorNew = color - alphaNew *colorBackdrop /(1 - alphaNew)\n      if (!group.isolated) {\n        info('TODO: Support non-isolated groups.');\n      }\n\n      // TODO knockout - supposedly possible with the clever use of compositing\n      // modes.\n      if (group.knockout) {\n        warn('Knockout groups not supported.');\n      }\n\n      var currentTransform = currentCtx.mozCurrentTransform;\n      if (group.matrix) {\n        currentCtx.transform.apply(currentCtx, group.matrix);\n      }\n      assert(group.bbox, 'Bounding box is required.');\n\n      // Based on the current transform figure out how big the bounding box\n      // will actually be.\n      var bounds = Util.getAxialAlignedBoundingBox(\n                    group.bbox,\n                    currentCtx.mozCurrentTransform);\n      // Clip the bounding box to the current canvas.\n      var canvasBounds = [0,\n                          0,\n                          currentCtx.canvas.width,\n                          currentCtx.canvas.height];\n      bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n      // Use ceil in case we're between sizes so we don't create canvas that is\n      // too small and make the canvas at least 1x1 pixels.\n      var offsetX = Math.floor(bounds[0]);\n      var offsetY = Math.floor(bounds[1]);\n      var drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n      var drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n      var scaleX = 1, scaleY = 1;\n      if (drawnWidth > MAX_GROUP_SIZE) {\n        scaleX = drawnWidth / MAX_GROUP_SIZE;\n        drawnWidth = MAX_GROUP_SIZE;\n      }\n      if (drawnHeight > MAX_GROUP_SIZE) {\n        scaleY = drawnHeight / MAX_GROUP_SIZE;\n        drawnHeight = MAX_GROUP_SIZE;\n      }\n\n      var cacheId = 'groupAt' + this.groupLevel;\n      if (group.smask) {\n        // Using two cache entries is case if masks are used one after another.\n        cacheId += '_smask_' + ((this.smaskCounter++) % 2);\n      }\n      var scratchCanvas = this.cachedCanvases.getCanvas(\n        cacheId, drawnWidth, drawnHeight, true);\n      var groupCtx = scratchCanvas.context;\n\n      // Since we created a new canvas that is just the size of the bounding box\n      // we have to translate the group ctx.\n      groupCtx.scale(1 / scaleX, 1 / scaleY);\n      groupCtx.translate(-offsetX, -offsetY);\n      groupCtx.transform.apply(groupCtx, currentTransform);\n\n      if (group.smask) {\n        // Saving state and cached mask to be used in setGState.\n        this.smaskStack.push({\n          canvas: scratchCanvas.canvas,\n          context: groupCtx,\n          offsetX,\n          offsetY,\n          scaleX,\n          scaleY,\n          subtype: group.smask.subtype,\n          backdrop: group.smask.backdrop,\n          transferMap: group.smask.transferMap || null,\n          startTransformInverse: null, // used during suspend operation\n        });\n      } else {\n        // Setup the current ctx so when the group is popped we draw it at the\n        // right location.\n        currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n        currentCtx.translate(offsetX, offsetY);\n        currentCtx.scale(scaleX, scaleY);\n      }\n      // The transparency group inherits all off the current graphics state\n      // except the blend mode, soft mask, and alpha constants.\n      copyCtxState(currentCtx, groupCtx);\n      this.ctx = groupCtx;\n      this.setGState([\n        ['BM', 'source-over'],\n        ['ca', 1],\n        ['CA', 1]\n      ]);\n      this.groupStack.push(currentCtx);\n      this.groupLevel++;\n\n      // Reseting mask state, masks will be applied on restore of the group.\n      this.current.activeSMask = null;\n    },\n\n    endGroup: function CanvasGraphics_endGroup(group) {\n      this.groupLevel--;\n      var groupCtx = this.ctx;\n      this.ctx = this.groupStack.pop();\n      // Turn off image smoothing to avoid sub pixel interpolation which can\n      // look kind of blurry for some pdfs.\n      if (this.ctx.imageSmoothingEnabled !== undefined) {\n        this.ctx.imageSmoothingEnabled = false;\n      } else {\n        this.ctx.mozImageSmoothingEnabled = false;\n      }\n      if (group.smask) {\n        this.tempSMask = this.smaskStack.pop();\n      } else {\n        this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      }\n      this.restore();\n    },\n\n    beginAnnotations: function CanvasGraphics_beginAnnotations() {\n      this.save();\n      this.current = new CanvasExtraState();\n\n      if (this.baseTransform) {\n        this.ctx.setTransform.apply(this.ctx, this.baseTransform);\n      }\n    },\n\n    endAnnotations: function CanvasGraphics_endAnnotations() {\n      this.restore();\n    },\n\n    beginAnnotation: function CanvasGraphics_beginAnnotation(rect, transform,\n                                                             matrix) {\n      this.save();\n\n      if (isArray(rect) && rect.length === 4) {\n        var width = rect[2] - rect[0];\n        var height = rect[3] - rect[1];\n        this.ctx.rect(rect[0], rect[1], width, height);\n        this.clip();\n        this.endPath();\n      }\n\n      this.transform.apply(this, transform);\n      this.transform.apply(this, matrix);\n    },\n\n    endAnnotation: function CanvasGraphics_endAnnotation() {\n      this.restore();\n    },\n\n    paintJpegXObject: function CanvasGraphics_paintJpegXObject(objId, w, h) {\n      var domImage = this.objs.get(objId);\n      if (!domImage) {\n        warn('Dependent image isn\\'t ready yet');\n        return;\n      }\n\n      this.save();\n\n      var ctx = this.ctx;\n      // scale the image to the unit square\n      ctx.scale(1 / w, -1 / h);\n\n      ctx.drawImage(domImage, 0, 0, domImage.width, domImage.height,\n                    0, -h, w, h);\n      if (this.imageLayer) {\n        var currentTransform = ctx.mozCurrentTransformInverse;\n        var position = this.getCanvasPosition(0, 0);\n        this.imageLayer.appendImage({\n          objId,\n          left: position[0],\n          top: position[1],\n          width: w / currentTransform[0],\n          height: h / currentTransform[3]\n        });\n      }\n      this.restore();\n    },\n\n    paintImageMaskXObject: function CanvasGraphics_paintImageMaskXObject(img) {\n      var ctx = this.ctx;\n      var width = img.width, height = img.height;\n      var fillColor = this.current.fillColor;\n      var isPatternFill = this.current.patternFill;\n\n      var glyph = this.processingType3;\n\n      if (COMPILE_TYPE3_GLYPHS && glyph && glyph.compiled === undefined) {\n        if (width <= MAX_SIZE_TO_COMPILE && height <= MAX_SIZE_TO_COMPILE) {\n          glyph.compiled =\n            compileType3Glyph({ data: img.data, width, height, });\n        } else {\n          glyph.compiled = null;\n        }\n      }\n\n      if (glyph && glyph.compiled) {\n        glyph.compiled(ctx);\n        return;\n      }\n\n      var maskCanvas = this.cachedCanvases.getCanvas('maskCanvas',\n                                                     width, height);\n      var maskCtx = maskCanvas.context;\n      maskCtx.save();\n\n      putBinaryImageMask(maskCtx, img);\n\n      maskCtx.globalCompositeOperation = 'source-in';\n\n      maskCtx.fillStyle = isPatternFill ?\n                          fillColor.getPattern(maskCtx, this) : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n\n      maskCtx.restore();\n\n      this.paintInlineImageXObject(maskCanvas.canvas);\n    },\n\n    paintImageMaskXObjectRepeat:\n      function CanvasGraphics_paintImageMaskXObjectRepeat(imgData, scaleX,\n                                                          scaleY, positions) {\n      var width = imgData.width;\n      var height = imgData.height;\n      var fillColor = this.current.fillColor;\n      var isPatternFill = this.current.patternFill;\n\n      var maskCanvas = this.cachedCanvases.getCanvas('maskCanvas',\n                                                     width, height);\n      var maskCtx = maskCanvas.context;\n      maskCtx.save();\n\n      putBinaryImageMask(maskCtx, imgData);\n\n      maskCtx.globalCompositeOperation = 'source-in';\n\n      maskCtx.fillStyle = isPatternFill ?\n                          fillColor.getPattern(maskCtx, this) : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n\n      maskCtx.restore();\n\n      var ctx = this.ctx;\n      for (var i = 0, ii = positions.length; i < ii; i += 2) {\n        ctx.save();\n        ctx.transform(scaleX, 0, 0, scaleY, positions[i], positions[i + 1]);\n        ctx.scale(1, -1);\n        ctx.drawImage(maskCanvas.canvas, 0, 0, width, height,\n          0, -1, 1, 1);\n        ctx.restore();\n      }\n    },\n\n    paintImageMaskXObjectGroup:\n      function CanvasGraphics_paintImageMaskXObjectGroup(images) {\n      var ctx = this.ctx;\n\n      var fillColor = this.current.fillColor;\n      var isPatternFill = this.current.patternFill;\n      for (var i = 0, ii = images.length; i < ii; i++) {\n        var image = images[i];\n        var width = image.width, height = image.height;\n\n        var maskCanvas = this.cachedCanvases.getCanvas('maskCanvas',\n                                                       width, height);\n        var maskCtx = maskCanvas.context;\n        maskCtx.save();\n\n        putBinaryImageMask(maskCtx, image);\n\n        maskCtx.globalCompositeOperation = 'source-in';\n\n        maskCtx.fillStyle = isPatternFill ?\n                            fillColor.getPattern(maskCtx, this) : fillColor;\n        maskCtx.fillRect(0, 0, width, height);\n\n        maskCtx.restore();\n\n        ctx.save();\n        ctx.transform.apply(ctx, image.transform);\n        ctx.scale(1, -1);\n        ctx.drawImage(maskCanvas.canvas, 0, 0, width, height,\n                      0, -1, 1, 1);\n        ctx.restore();\n      }\n    },\n\n    paintImageXObject: function CanvasGraphics_paintImageXObject(objId) {\n      var imgData = this.objs.get(objId);\n      if (!imgData) {\n        warn('Dependent image isn\\'t ready yet');\n        return;\n      }\n\n      this.paintInlineImageXObject(imgData);\n    },\n\n    paintImageXObjectRepeat:\n      function CanvasGraphics_paintImageXObjectRepeat(objId, scaleX, scaleY,\n                                                          positions) {\n      var imgData = this.objs.get(objId);\n      if (!imgData) {\n        warn('Dependent image isn\\'t ready yet');\n        return;\n      }\n\n      var width = imgData.width;\n      var height = imgData.height;\n      var map = [];\n      for (var i = 0, ii = positions.length; i < ii; i += 2) {\n        map.push({transform: [scaleX, 0, 0, scaleY, positions[i],\n                 positions[i + 1]], x: 0, y: 0, w: width, h: height});\n      }\n      this.paintInlineImageXObjectGroup(imgData, map);\n    },\n\n    paintInlineImageXObject:\n      function CanvasGraphics_paintInlineImageXObject(imgData) {\n      var width = imgData.width;\n      var height = imgData.height;\n      var ctx = this.ctx;\n\n      this.save();\n      // scale the image to the unit square\n      ctx.scale(1 / width, -1 / height);\n\n      var currentTransform = ctx.mozCurrentTransformInverse;\n      var a = currentTransform[0], b = currentTransform[1];\n      var widthScale = Math.max(Math.sqrt(a * a + b * b), 1);\n      var c = currentTransform[2], d = currentTransform[3];\n      var heightScale = Math.max(Math.sqrt(c * c + d * d), 1);\n\n      var imgToPaint, tmpCanvas;\n      // instanceof HTMLElement does not work in jsdom node.js module\n      if (imgData instanceof HTMLElement || !imgData.data) {\n        imgToPaint = imgData;\n      } else {\n        tmpCanvas = this.cachedCanvases.getCanvas('inlineImage',\n                                                  width, height);\n        var tmpCtx = tmpCanvas.context;\n        putBinaryImageData(tmpCtx, imgData);\n        imgToPaint = tmpCanvas.canvas;\n      }\n\n      var paintWidth = width, paintHeight = height;\n      var tmpCanvasId = 'prescale1';\n      // Vertial or horizontal scaling shall not be more than 2 to not loose the\n      // pixels during drawImage operation, painting on the temporary canvas(es)\n      // that are twice smaller in size\n      while ((widthScale > 2 && paintWidth > 1) ||\n             (heightScale > 2 && paintHeight > 1)) {\n        var newWidth = paintWidth, newHeight = paintHeight;\n        if (widthScale > 2 && paintWidth > 1) {\n          newWidth = Math.ceil(paintWidth / 2);\n          widthScale /= paintWidth / newWidth;\n        }\n        if (heightScale > 2 && paintHeight > 1) {\n          newHeight = Math.ceil(paintHeight / 2);\n          heightScale /= paintHeight / newHeight;\n        }\n        tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId,\n                                                  newWidth, newHeight);\n        tmpCtx = tmpCanvas.context;\n        tmpCtx.clearRect(0, 0, newWidth, newHeight);\n        tmpCtx.drawImage(imgToPaint, 0, 0, paintWidth, paintHeight,\n                                     0, 0, newWidth, newHeight);\n        imgToPaint = tmpCanvas.canvas;\n        paintWidth = newWidth;\n        paintHeight = newHeight;\n        tmpCanvasId = tmpCanvasId === 'prescale1' ? 'prescale2' : 'prescale1';\n      }\n      ctx.drawImage(imgToPaint, 0, 0, paintWidth, paintHeight,\n                                0, -height, width, height);\n\n      if (this.imageLayer) {\n        var position = this.getCanvasPosition(0, -height);\n        this.imageLayer.appendImage({\n          imgData,\n          left: position[0],\n          top: position[1],\n          width: width / currentTransform[0],\n          height: height / currentTransform[3]\n        });\n      }\n      this.restore();\n    },\n\n    paintInlineImageXObjectGroup:\n      function CanvasGraphics_paintInlineImageXObjectGroup(imgData, map) {\n      var ctx = this.ctx;\n      var w = imgData.width;\n      var h = imgData.height;\n\n      var tmpCanvas = this.cachedCanvases.getCanvas('inlineImage', w, h);\n      var tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n\n      for (var i = 0, ii = map.length; i < ii; i++) {\n        var entry = map[i];\n        ctx.save();\n        ctx.transform.apply(ctx, entry.transform);\n        ctx.scale(1, -1);\n        ctx.drawImage(tmpCanvas.canvas, entry.x, entry.y, entry.w, entry.h,\n                      0, -1, 1, 1);\n        if (this.imageLayer) {\n          var position = this.getCanvasPosition(entry.x, entry.y);\n          this.imageLayer.appendImage({\n            imgData,\n            left: position[0],\n            top: position[1],\n            width: w,\n            height: h\n          });\n        }\n        ctx.restore();\n      }\n    },\n\n    paintSolidColorImageMask:\n      function CanvasGraphics_paintSolidColorImageMask() {\n        this.ctx.fillRect(0, 0, 1, 1);\n    },\n\n    paintXObject: function CanvasGraphics_paintXObject() {\n      warn('Unsupported \\'paintXObject\\' command.');\n    },\n\n    // Marked content\n\n    markPoint: function CanvasGraphics_markPoint(tag) {\n      // TODO Marked content.\n    },\n    markPointProps: function CanvasGraphics_markPointProps(tag, properties) {\n      // TODO Marked content.\n    },\n    beginMarkedContent: function CanvasGraphics_beginMarkedContent(tag) {\n      // TODO Marked content.\n    },\n    beginMarkedContentProps: function CanvasGraphics_beginMarkedContentProps(\n                                        tag, properties) {\n      // TODO Marked content.\n    },\n    endMarkedContent: function CanvasGraphics_endMarkedContent() {\n      // TODO Marked content.\n    },\n\n    // Compatibility\n\n    beginCompat: function CanvasGraphics_beginCompat() {\n      // TODO ignore undefined operators (should we do that anyway?)\n    },\n    endCompat: function CanvasGraphics_endCompat() {\n      // TODO stop ignoring undefined operators\n    },\n\n    // Helper functions\n\n    consumePath: function CanvasGraphics_consumePath() {\n      var ctx = this.ctx;\n      if (this.pendingClip) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip('evenodd');\n        } else {\n          ctx.clip();\n        }\n        this.pendingClip = null;\n      }\n      ctx.beginPath();\n    },\n    getSinglePixelWidth: function CanvasGraphics_getSinglePixelWidth(scale) {\n      if (this.cachedGetSinglePixelWidth === null) {\n        // NOTE: The `save` and `restore` commands used below is a workaround\n        // that is necessary in order to prevent `mozCurrentTransformInverse`\n        // from intermittently returning incorrect values in Firefox, see:\n        // https://github.com/mozilla/pdf.js/issues/7188.\n        this.ctx.save();\n        var inverse = this.ctx.mozCurrentTransformInverse;\n        this.ctx.restore();\n        // max of the current horizontal and vertical scale\n        this.cachedGetSinglePixelWidth = Math.sqrt(Math.max(\n          (inverse[0] * inverse[0] + inverse[1] * inverse[1]),\n          (inverse[2] * inverse[2] + inverse[3] * inverse[3])));\n      }\n      return this.cachedGetSinglePixelWidth;\n    },\n    getCanvasPosition: function CanvasGraphics_getCanvasPosition(x, y) {\n      var transform = this.ctx.mozCurrentTransform;\n      return [\n        transform[0] * x + transform[2] * y + transform[4],\n        transform[1] * x + transform[3] * y + transform[5]\n      ];\n    }\n  };\n\n  for (var op in OPS) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n\n  return CanvasGraphics;\n})();\n\nexport {\n  CanvasGraphics,\n};\n\n\n\n// WEBPACK FOOTER //\n// src/display/canvas.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert, bytesToString, isEvalSupported, shadow, string32, warn\n} from '../shared/util';\n\nfunction FontLoader(docId) {\n  this.docId = docId;\n  this.styleElement = null;\n  if (typeof PDFJSDev === 'undefined' || !PDFJSDev.test('MOZCENTRAL')) {\n    this.nativeFontFaces = [];\n    this.loadTestFontId = 0;\n    this.loadingContext = {\n      requests: [],\n      nextRequestId: 0\n    };\n  }\n}\nFontLoader.prototype = {\n  insertRule: function fontLoaderInsertRule(rule) {\n    var styleElement = this.styleElement;\n    if (!styleElement) {\n      styleElement = this.styleElement = document.createElement('style');\n      styleElement.id = 'PDFJS_FONT_STYLE_TAG_' + this.docId;\n      document.documentElement.getElementsByTagName('head')[0].appendChild(\n        styleElement);\n    }\n\n    var styleSheet = styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  },\n\n  clear: function fontLoaderClear() {\n    if (this.styleElement) {\n      // Note: ChildNode.remove doesn't throw if the parentNode is undefined.\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n    if (typeof PDFJSDev === 'undefined' || !PDFJSDev.test('MOZCENTRAL')) {\n      this.nativeFontFaces.forEach(function(nativeFontFace) {\n        document.fonts.delete(nativeFontFace);\n      });\n      this.nativeFontFaces.length = 0;\n    }\n  }\n};\n\nif (typeof PDFJSDev === 'undefined' || !PDFJSDev.test('MOZCENTRAL')) {\n  var getLoadTestFont = function () {\n    // This is a CFF font with 1 glyph for '.' that fills its entire width and\n    // height.\n    return atob(\n      'T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQ' +\n      'AABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwA' +\n      'AAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbm' +\n      'FtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAA' +\n      'AADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6A' +\n      'ABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAA' +\n      'MQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAA' +\n      'AAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAA' +\n      'AAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQ' +\n      'AAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMA' +\n      'AQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAA' +\n      'EAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAA' +\n      'AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAA' +\n      'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n      'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n      'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' +\n      'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAA' +\n      'AAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgc' +\n      'A/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWF' +\n      'hYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQA' +\n      'AAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAg' +\n      'ABAAAAAAAAAAAD6AAAAAAAAA==');\n  };\n  Object.defineProperty(FontLoader.prototype, 'loadTestFont', {\n    get() {\n      return shadow(this, 'loadTestFont', getLoadTestFont());\n    },\n    configurable: true\n  });\n\n  FontLoader.prototype.addNativeFontFace =\n      function fontLoader_addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.push(nativeFontFace);\n    document.fonts.add(nativeFontFace);\n  };\n\n  FontLoader.prototype.bind = function fontLoaderBind(fonts, callback) {\n    var rules = [];\n    var fontsToLoad = [];\n    var fontLoadPromises = [];\n    var getNativeFontPromise = function(nativeFontFace) {\n      // Return a promise that is always fulfilled, even when the font fails to\n      // load.\n      return nativeFontFace.loaded.catch(function(e) {\n        warn('Failed to load font \"' + nativeFontFace.family + '\": ' + e);\n      });\n    };\n    // Firefox Font Loading API does not work with mozPrintCallback --\n    // disabling it in this case.\n    var isFontLoadingAPISupported = FontLoader.isFontLoadingAPISupported &&\n                                    !FontLoader.isSyncFontLoadingSupported;\n    for (var i = 0, ii = fonts.length; i < ii; i++) {\n      var font = fonts[i];\n\n      // Add the font to the DOM only once or skip if the font\n      // is already loaded.\n      if (font.attached || font.loading === false) {\n        continue;\n      }\n      font.attached = true;\n\n      if (isFontLoadingAPISupported) {\n        var nativeFontFace = font.createNativeFontFace();\n        if (nativeFontFace) {\n          this.addNativeFontFace(nativeFontFace);\n          fontLoadPromises.push(getNativeFontPromise(nativeFontFace));\n        }\n      } else {\n        var rule = font.createFontFaceRule();\n        if (rule) {\n          this.insertRule(rule);\n          rules.push(rule);\n          fontsToLoad.push(font);\n        }\n      }\n    }\n\n    var request = this.queueLoadingCallback(callback);\n    if (isFontLoadingAPISupported) {\n      Promise.all(fontLoadPromises).then(function() {\n        request.complete();\n      });\n    } else if (rules.length > 0 && !FontLoader.isSyncFontLoadingSupported) {\n      this.prepareFontLoadEvent(rules, fontsToLoad, request);\n    } else {\n      request.complete();\n    }\n  };\n\n  FontLoader.prototype.queueLoadingCallback =\n      function FontLoader_queueLoadingCallback(callback) {\n    function LoadLoader_completeRequest() {\n      assert(!request.end, 'completeRequest() cannot be called twice');\n      request.end = Date.now();\n\n      // sending all completed requests in order how they were queued\n      while (context.requests.length > 0 && context.requests[0].end) {\n        var otherRequest = context.requests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n\n    var context = this.loadingContext;\n    var requestId = 'pdfjs-font-loading-' + (context.nextRequestId++);\n    var request = {\n      id: requestId,\n      complete: LoadLoader_completeRequest,\n      callback,\n      started: Date.now()\n    };\n    context.requests.push(request);\n    return request;\n  };\n\n  FontLoader.prototype.prepareFontLoadEvent =\n        function fontLoaderPrepareFontLoadEvent(rules, fonts, request) {\n      /** Hack begin */\n      // There's currently no event when a font has finished downloading so the\n      // following code is a dirty hack to 'guess' when a font is\n      // ready. It's assumed fonts are loaded in order, so add a known test\n      // font after the desired fonts and then test for the loading of that\n      // test font.\n\n      function int32(data, offset) {\n        return (data.charCodeAt(offset) << 24) |\n               (data.charCodeAt(offset + 1) << 16) |\n               (data.charCodeAt(offset + 2) << 8) |\n               (data.charCodeAt(offset + 3) & 0xff);\n      }\n\n      function spliceString(s, offset, remove, insert) {\n        var chunk1 = s.substr(0, offset);\n        var chunk2 = s.substr(offset + remove);\n        return chunk1 + insert + chunk2;\n      }\n\n      var i, ii;\n\n      // The temporary canvas is used to determine if fonts are loaded.\n      var canvas = document.createElement('canvas');\n      canvas.width = 1;\n      canvas.height = 1;\n      var ctx = canvas.getContext('2d');\n\n      var called = 0;\n      function isFontReady(name, callback) {\n        called++;\n        // With setTimeout clamping this gives the font ~100ms to load.\n        if (called > 30) {\n          warn('Load test font never loaded.');\n          callback();\n          return;\n        }\n        ctx.font = '30px ' + name;\n        ctx.fillText('.', 0, 20);\n        var imageData = ctx.getImageData(0, 0, 1, 1);\n        if (imageData.data[3] > 0) {\n          callback();\n          return;\n        }\n        setTimeout(isFontReady.bind(null, name, callback));\n      }\n\n      var loadTestFontId = 'lt' + Date.now() + this.loadTestFontId++;\n      // Chromium seems to cache fonts based on a hash of the actual font data,\n      // so the font must be modified for each load test else it will appear to\n      // be loaded already.\n      // TODO: This could maybe be made faster by avoiding the btoa of the full\n      // font by splitting it in chunks before hand and padding the font id.\n      var data = this.loadTestFont;\n      var COMMENT_OFFSET = 976; // has to be on 4 byte boundary (for checksum)\n      data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length,\n                          loadTestFontId);\n      // CFF checksum is important for IE, adjusting it\n      var CFF_CHECKSUM_OFFSET = 16;\n      var XXXX_VALUE = 0x58585858; // the \"comment\" filled with 'X'\n      var checksum = int32(data, CFF_CHECKSUM_OFFSET);\n      for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n        checksum = (checksum - XXXX_VALUE + int32(loadTestFontId, i)) | 0;\n      }\n      if (i < loadTestFontId.length) { // align to 4 bytes boundary\n        checksum = (checksum - XXXX_VALUE +\n                    int32(loadTestFontId + 'XXX', i)) | 0;\n      }\n      data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n\n      var url = 'url(data:font/opentype;base64,' + btoa(data) + ');';\n      var rule = '@font-face { font-family:\"' + loadTestFontId + '\";src:' +\n                 url + '}';\n      this.insertRule(rule);\n\n      var names = [];\n      for (i = 0, ii = fonts.length; i < ii; i++) {\n        names.push(fonts[i].loadedName);\n      }\n      names.push(loadTestFontId);\n\n      var div = document.createElement('div');\n      div.setAttribute('style',\n                       'visibility: hidden;' +\n                       'width: 10px; height: 10px;' +\n                       'position: absolute; top: 0px; left: 0px;');\n      for (i = 0, ii = names.length; i < ii; ++i) {\n        var span = document.createElement('span');\n        span.textContent = 'Hi';\n        span.style.fontFamily = names[i];\n        div.appendChild(span);\n      }\n      document.body.appendChild(div);\n\n      isFontReady(loadTestFontId, function() {\n        document.body.removeChild(div);\n        request.complete();\n      });\n      /** Hack end */\n  };\n} else {\n  FontLoader.prototype.bind = function fontLoaderBind(fonts, callback) {\n    for (var i = 0, ii = fonts.length; i < ii; i++) {\n      var font = fonts[i];\n      if (font.attached) {\n        continue;\n      }\n\n      font.attached = true;\n      var rule = font.createFontFaceRule();\n      if (rule) {\n        this.insertRule(rule);\n      }\n    }\n\n    setTimeout(callback);\n  };\n}\nif (typeof PDFJSDev === 'undefined' || !PDFJSDev.test('MOZCENTRAL')) {\n  FontLoader.isFontLoadingAPISupported = typeof document !== 'undefined' &&\n                                         !!document.fonts;\n}\nif (typeof PDFJSDev === 'undefined' || !PDFJSDev.test('MOZCENTRAL || CHROME')) {\n  var isSyncFontLoadingSupported = function isSyncFontLoadingSupported() {\n    if (typeof navigator === 'undefined') {\n      // node.js - we can pretend sync font loading is supported.\n      return true;\n    }\n\n    var supported = false;\n\n    // User agent string sniffing is bad, but there is no reliable way to tell\n    // if font is fully loaded and ready to be used with canvas.\n    var m = /Mozilla\\/5.0.*?rv:(\\d+).*? Gecko/.exec(navigator.userAgent);\n    if (m && m[1] >= 14) {\n      supported = true;\n    }\n    // TODO other browsers\n    return supported;\n  };\n  Object.defineProperty(FontLoader, 'isSyncFontLoadingSupported', {\n    get() {\n      return shadow(FontLoader, 'isSyncFontLoadingSupported',\n                    isSyncFontLoadingSupported());\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nvar IsEvalSupportedCached = {\n  get value() {\n    return shadow(this, 'value', isEvalSupported());\n  }\n};\n\nvar FontFaceObject = (function FontFaceObjectClosure() {\n  function FontFaceObject(translatedData, options) {\n    this.compiledGlyphs = Object.create(null);\n    // importing translated data\n    for (var i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this.options = options;\n  }\n  FontFaceObject.prototype = {\n    createNativeFontFace: function FontFaceObject_createNativeFontFace() {\n      if (typeof PDFJSDev !== 'undefined' && PDFJSDev.test('MOZCENTRAL')) {\n        throw new Error('Not implemented: createNativeFontFace');\n      }\n\n      if (!this.data) {\n        return null;\n      }\n\n      if (this.options.disableFontFace) {\n        this.disableFontFace = true;\n        return null;\n      }\n\n      var nativeFontFace = new FontFace(this.loadedName, this.data, {});\n\n      if (this.options.fontRegistry) {\n        this.options.fontRegistry.registerFont(this);\n      }\n      return nativeFontFace;\n    },\n\n    createFontFaceRule: function FontFaceObject_createFontFaceRule() {\n      if (!this.data) {\n        return null;\n      }\n\n      if (this.options.disableFontFace) {\n        this.disableFontFace = true;\n        return null;\n      }\n\n      var data = bytesToString(new Uint8Array(this.data));\n      var fontName = this.loadedName;\n\n      // Add the font-face rule to the document\n      var url = ('url(data:' + this.mimetype + ';base64,' + btoa(data) + ');');\n      var rule = '@font-face { font-family:\"' + fontName + '\";src:' + url + '}';\n\n      if (this.options.fontRegistry) {\n        this.options.fontRegistry.registerFont(this, url);\n      }\n\n      return rule;\n    },\n\n    getPathGenerator:\n        function FontFaceObject_getPathGenerator(objs, character) {\n      if (!(character in this.compiledGlyphs)) {\n        var cmds = objs.get(this.loadedName + '_path_' + character);\n        var current, i, len;\n\n        // If we can, compile cmds into JS for MAXIMUM SPEED\n        if (this.options.isEvalSupported && IsEvalSupportedCached.value) {\n          var args, js = '';\n          for (i = 0, len = cmds.length; i < len; i++) {\n            current = cmds[i];\n\n            if (current.args !== undefined) {\n              args = current.args.join(',');\n            } else {\n              args = '';\n            }\n\n            js += 'c.' + current.cmd + '(' + args + ');\\n';\n          }\n          // eslint-disable-next-line no-new-func\n          this.compiledGlyphs[character] = new Function('c', 'size', js);\n        } else {\n          // But fall back on using Function.prototype.apply() if we're\n          // blocked from using eval() for whatever reason (like CSP policies)\n          this.compiledGlyphs[character] = function(c, size) {\n            for (i = 0, len = cmds.length; i < len; i++) {\n              current = cmds[i];\n\n              if (current.cmd === 'scale') {\n                current.args = [size, -size];\n              }\n\n              c[current.cmd].apply(c, current.args);\n            }\n          };\n        }\n      }\n      return this.compiledGlyphs[character];\n    }\n  };\n\n  return FontFaceObject;\n})();\n\nexport {\n  FontFaceObject,\n  FontLoader,\n};\n\n\n\n// WEBPACK FOOTER //\n// src/display/font_loader.js","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { error, info, isArray, Util } from '../shared/util';\nimport { WebGLUtils } from './webgl';\n\nvar ShadingIRs = {};\n\nShadingIRs.RadialAxial = {\n  fromIR: function RadialAxial_fromIR(raw) {\n    var type = raw[1];\n    var colorStops = raw[2];\n    var p0 = raw[3];\n    var p1 = raw[4];\n    var r0 = raw[5];\n    var r1 = raw[6];\n    return {\n      type: 'Pattern',\n      getPattern: function RadialAxial_getPattern(ctx) {\n        var grad;\n        if (type === 'axial') {\n          grad = ctx.createLinearGradient(p0[0], p0[1], p1[0], p1[1]);\n        } else if (type === 'radial') {\n          grad = ctx.createRadialGradient(p0[0], p0[1], r0, p1[0], p1[1], r1);\n        }\n\n        for (var i = 0, ii = colorStops.length; i < ii; ++i) {\n          var c = colorStops[i];\n          grad.addColorStop(c[0], c[1]);\n        }\n        return grad;\n      }\n    };\n  }\n};\n\nvar createMeshCanvas = (function createMeshCanvasClosure() {\n  function drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n    // Very basic Gouraud-shaded triangle rasterization algorithm.\n    var coords = context.coords, colors = context.colors;\n    var bytes = data.data, rowSize = data.width * 4;\n    var tmp;\n    if (coords[p1 + 1] > coords[p2 + 1]) {\n      tmp = p1; p1 = p2; p2 = tmp; tmp = c1; c1 = c2; c2 = tmp;\n    }\n    if (coords[p2 + 1] > coords[p3 + 1]) {\n      tmp = p2; p2 = p3; p3 = tmp; tmp = c2; c2 = c3; c3 = tmp;\n    }\n    if (coords[p1 + 1] > coords[p2 + 1]) {\n      tmp = p1; p1 = p2; p2 = tmp; tmp = c1; c1 = c2; c2 = tmp;\n    }\n    var x1 = (coords[p1] + context.offsetX) * context.scaleX;\n    var y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n    var x2 = (coords[p2] + context.offsetX) * context.scaleX;\n    var y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n    var x3 = (coords[p3] + context.offsetX) * context.scaleX;\n    var y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n    if (y1 >= y3) {\n      return;\n    }\n    var c1r = colors[c1], c1g = colors[c1 + 1], c1b = colors[c1 + 2];\n    var c2r = colors[c2], c2g = colors[c2 + 1], c2b = colors[c2 + 2];\n    var c3r = colors[c3], c3g = colors[c3 + 1], c3b = colors[c3 + 2];\n\n    var minY = Math.round(y1), maxY = Math.round(y3);\n    var xa, car, cag, cab;\n    var xb, cbr, cbg, cbb;\n    var k;\n    for (var y = minY; y <= maxY; y++) {\n      if (y < y2) {\n        k = y < y1 ? 0 : y1 === y2 ? 1 : (y1 - y) / (y1 - y2);\n        xa = x1 - (x1 - x2) * k;\n        car = c1r - (c1r - c2r) * k;\n        cag = c1g - (c1g - c2g) * k;\n        cab = c1b - (c1b - c2b) * k;\n      } else {\n        k = y > y3 ? 1 : y2 === y3 ? 0 : (y2 - y) / (y2 - y3);\n        xa = x2 - (x2 - x3) * k;\n        car = c2r - (c2r - c3r) * k;\n        cag = c2g - (c2g - c3g) * k;\n        cab = c2b - (c2b - c3b) * k;\n      }\n      k = y < y1 ? 0 : y > y3 ? 1 : (y1 - y) / (y1 - y3);\n      xb = x1 - (x1 - x3) * k;\n      cbr = c1r - (c1r - c3r) * k;\n      cbg = c1g - (c1g - c3g) * k;\n      cbb = c1b - (c1b - c3b) * k;\n      var x1_ = Math.round(Math.min(xa, xb));\n      var x2_ = Math.round(Math.max(xa, xb));\n      var j = rowSize * y + x1_ * 4;\n      for (var x = x1_; x <= x2_; x++) {\n        k = (xa - x) / (xa - xb);\n        k = k < 0 ? 0 : k > 1 ? 1 : k;\n        bytes[j++] = (car - (car - cbr) * k) | 0;\n        bytes[j++] = (cag - (cag - cbg) * k) | 0;\n        bytes[j++] = (cab - (cab - cbb) * k) | 0;\n        bytes[j++] = 255;\n      }\n    }\n  }\n\n  function drawFigure(data, figure, context) {\n    var ps = figure.coords;\n    var cs = figure.colors;\n    var i, ii;\n    switch (figure.type) {\n      case 'lattice':\n        var verticesPerRow = figure.verticesPerRow;\n        var rows = Math.floor(ps.length / verticesPerRow) - 1;\n        var cols = verticesPerRow - 1;\n        for (i = 0; i < rows; i++) {\n          var q = i * verticesPerRow;\n          for (var j = 0; j < cols; j++, q++) {\n            drawTriangle(data, context,\n              ps[q], ps[q + 1], ps[q + verticesPerRow],\n              cs[q], cs[q + 1], cs[q + verticesPerRow]);\n            drawTriangle(data, context,\n              ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow],\n              cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);\n          }\n        }\n        break;\n      case 'triangles':\n        for (i = 0, ii = ps.length; i < ii; i += 3) {\n          drawTriangle(data, context,\n            ps[i], ps[i + 1], ps[i + 2],\n            cs[i], cs[i + 1], cs[i + 2]);\n        }\n        break;\n      default:\n        error('illigal figure');\n        break;\n    }\n  }\n\n  function createMeshCanvas(bounds, combinesScale, coords, colors, figures,\n                            backgroundColor, cachedCanvases) {\n    // we will increase scale on some weird factor to let antialiasing take\n    // care of \"rough\" edges\n    var EXPECTED_SCALE = 1.1;\n    // MAX_PATTERN_SIZE is used to avoid OOM situation.\n    var MAX_PATTERN_SIZE = 3000; // 10in @ 300dpi shall be enough\n    // We need to keep transparent border around our pattern for fill():\n    // createPattern with 'no-repeat' will bleed edges across entire area.\n    var BORDER_SIZE = 2;\n\n    var offsetX = Math.floor(bounds[0]);\n    var offsetY = Math.floor(bounds[1]);\n    var boundsWidth = Math.ceil(bounds[2]) - offsetX;\n    var boundsHeight = Math.ceil(bounds[3]) - offsetY;\n\n    var width = Math.min(Math.ceil(Math.abs(boundsWidth * combinesScale[0] *\n      EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    var height = Math.min(Math.ceil(Math.abs(boundsHeight * combinesScale[1] *\n      EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    var scaleX = boundsWidth / width;\n    var scaleY = boundsHeight / height;\n\n    var context = {\n      coords,\n      colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY\n    };\n\n    var paddedWidth = width + BORDER_SIZE * 2;\n    var paddedHeight = height + BORDER_SIZE * 2;\n\n    var canvas, tmpCanvas, i, ii;\n    if (WebGLUtils.isEnabled) {\n      canvas = WebGLUtils.drawFigures(width, height, backgroundColor,\n                                      figures, context);\n\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=972126\n      tmpCanvas = cachedCanvases.getCanvas('mesh', paddedWidth, paddedHeight,\n                                           false);\n      tmpCanvas.context.drawImage(canvas, BORDER_SIZE, BORDER_SIZE);\n      canvas = tmpCanvas.canvas;\n    } else {\n      tmpCanvas = cachedCanvases.getCanvas('mesh', paddedWidth, paddedHeight,\n                                           false);\n      var tmpCtx = tmpCanvas.context;\n\n      var data = tmpCtx.createImageData(width, height);\n      if (backgroundColor) {\n        var bytes = data.data;\n        for (i = 0, ii = bytes.length; i < ii; i += 4) {\n          bytes[i] = backgroundColor[0];\n          bytes[i + 1] = backgroundColor[1];\n          bytes[i + 2] = backgroundColor[2];\n          bytes[i + 3] = 255;\n        }\n      }\n      for (i = 0; i < figures.length; i++) {\n        drawFigure(data, figures[i], context);\n      }\n      tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n      canvas = tmpCanvas.canvas;\n    }\n\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY,\n    };\n  }\n  return createMeshCanvas;\n})();\n\nShadingIRs.Mesh = {\n  fromIR: function Mesh_fromIR(raw) {\n    // var type = raw[1];\n    var coords = raw[2];\n    var colors = raw[3];\n    var figures = raw[4];\n    var bounds = raw[5];\n    var matrix = raw[6];\n    // var bbox = raw[7];\n    var background = raw[8];\n    return {\n      type: 'Pattern',\n      getPattern: function Mesh_getPattern(ctx, owner, shadingFill) {\n        var scale;\n        if (shadingFill) {\n          scale = Util.singularValueDecompose2dScale(ctx.mozCurrentTransform);\n        } else {\n          // Obtain scale from matrix and current transformation matrix.\n          scale = Util.singularValueDecompose2dScale(owner.baseTransform);\n          if (matrix) {\n            var matrixScale = Util.singularValueDecompose2dScale(matrix);\n            scale = [scale[0] * matrixScale[0],\n                     scale[1] * matrixScale[1]];\n          }\n        }\n\n\n        // Rasterizing on the main thread since sending/queue large canvases\n        // might cause OOM.\n        var temporaryPatternCanvas = createMeshCanvas(bounds, scale, coords,\n          colors, figures, shadingFill ? null : background,\n          owner.cachedCanvases);\n\n        if (!shadingFill) {\n          ctx.setTransform.apply(ctx, owner.baseTransform);\n          if (matrix) {\n            ctx.transform.apply(ctx, matrix);\n          }\n        }\n\n        ctx.translate(temporaryPatternCanvas.offsetX,\n                      temporaryPatternCanvas.offsetY);\n        ctx.scale(temporaryPatternCanvas.scaleX,\n                  temporaryPatternCanvas.scaleY);\n\n        return ctx.createPattern(temporaryPatternCanvas.canvas, 'no-repeat');\n      }\n    };\n  }\n};\n\nShadingIRs.Dummy = {\n  fromIR: function Dummy_fromIR() {\n    return {\n      type: 'Pattern',\n      getPattern: function Dummy_fromIR_getPattern() {\n        return 'hotpink';\n      }\n    };\n  }\n};\n\nfunction getShadingPatternFromIR(raw) {\n  var shadingIR = ShadingIRs[raw[0]];\n  if (!shadingIR) {\n    error('Unknown IR type: ' + raw[0]);\n  }\n  return shadingIR.fromIR(raw);\n}\n\nvar TilingPattern = (function TilingPatternClosure() {\n  var PaintType = {\n    COLORED: 1,\n    UNCOLORED: 2\n  };\n\n  var MAX_PATTERN_SIZE = 3000; // 10in @ 300dpi shall be enough\n\n  function TilingPattern(IR, color, ctx, canvasGraphicsFactory, baseTransform) {\n    this.operatorList = IR[2];\n    this.matrix = IR[3] || [1, 0, 0, 1, 0, 0];\n    this.bbox = Util.normalizeRect(IR[4]);\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.color = color;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n    this.type = 'Pattern';\n    this.ctx = ctx;\n  }\n\n  TilingPattern.prototype = {\n    createPatternCanvas: function TilinPattern_createPatternCanvas(owner) {\n      var operatorList = this.operatorList;\n      var bbox = this.bbox;\n      var xstep = this.xstep;\n      var ystep = this.ystep;\n      var paintType = this.paintType;\n      var tilingType = this.tilingType;\n      var color = this.color;\n      var canvasGraphicsFactory = this.canvasGraphicsFactory;\n\n      info('TilingType: ' + tilingType);\n\n      var x0 = bbox[0], y0 = bbox[1], x1 = bbox[2], y1 = bbox[3];\n\n      var topLeft = [x0, y0];\n      // we want the canvas to be as large as the step size\n      var botRight = [x0 + xstep, y0 + ystep];\n\n      var width = botRight[0] - topLeft[0];\n      var height = botRight[1] - topLeft[1];\n\n      // Obtain scale from matrix and current transformation matrix.\n      var matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n      var curMatrixScale = Util.singularValueDecompose2dScale(\n        this.baseTransform);\n      var combinedScale = [matrixScale[0] * curMatrixScale[0],\n        matrixScale[1] * curMatrixScale[1]];\n\n      // MAX_PATTERN_SIZE is used to avoid OOM situation.\n      // Use width and height values that are as close as possible to the end\n      // result when the pattern is used. Too low value makes the pattern look\n      // blurry. Too large value makes it look too crispy.\n      width = Math.min(Math.ceil(Math.abs(width * combinedScale[0])),\n        MAX_PATTERN_SIZE);\n\n      height = Math.min(Math.ceil(Math.abs(height * combinedScale[1])),\n        MAX_PATTERN_SIZE);\n\n      var tmpCanvas = owner.cachedCanvases.getCanvas('pattern',\n        width, height, true);\n      var tmpCtx = tmpCanvas.context;\n      var graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n      graphics.groupLevel = owner.groupLevel;\n\n      this.setFillAndStrokeStyleToContext(tmpCtx, paintType, color);\n\n      this.setScale(width, height, xstep, ystep);\n      this.transformToScale(graphics);\n\n      // transform coordinates to pattern space\n      var tmpTranslate = [1, 0, 0, 1, -topLeft[0], -topLeft[1]];\n      graphics.transform.apply(graphics, tmpTranslate);\n\n      this.clipBbox(graphics, bbox, x0, y0, x1, y1);\n\n      graphics.executeOperatorList(operatorList);\n      return tmpCanvas.canvas;\n    },\n\n    setScale: function TilingPattern_setScale(width, height, xstep, ystep) {\n      this.scale = [width / xstep, height / ystep];\n    },\n\n    transformToScale: function TilingPattern_transformToScale(graphics) {\n      var scale = this.scale;\n      var tmpScale = [scale[0], 0, 0, scale[1], 0, 0];\n      graphics.transform.apply(graphics, tmpScale);\n    },\n\n    scaleToContext: function TilingPattern_scaleToContext() {\n      var scale = this.scale;\n      this.ctx.scale(1 / scale[0], 1 / scale[1]);\n    },\n\n    clipBbox: function clipBbox(graphics, bbox, x0, y0, x1, y1) {\n      if (isArray(bbox) && bbox.length === 4) {\n        var bboxWidth = x1 - x0;\n        var bboxHeight = y1 - y0;\n        graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n        graphics.clip();\n        graphics.endPath();\n      }\n    },\n\n    setFillAndStrokeStyleToContext:\n      function setFillAndStrokeStyleToContext(context, paintType, color) {\n        switch (paintType) {\n          case PaintType.COLORED:\n            var ctx = this.ctx;\n            context.fillStyle = ctx.fillStyle;\n            context.strokeStyle = ctx.strokeStyle;\n            break;\n          case PaintType.UNCOLORED:\n            var cssColor = Util.makeCssRgb(color[0], color[1], color[2]);\n            context.fillStyle = cssColor;\n            context.strokeStyle = cssColor;\n            break;\n          default:\n            error('Unsupported paint type: ' + paintType);\n        }\n      },\n\n    getPattern: function TilingPattern_getPattern(ctx, owner) {\n      var temporaryPatternCanvas = this.createPatternCanvas(owner);\n\n      ctx = this.ctx;\n      ctx.setTransform.apply(ctx, this.baseTransform);\n      ctx.transform.apply(ctx, this.matrix);\n      this.scaleToContext();\n\n      return ctx.createPattern(temporaryPatternCanvas, 'repeat');\n    }\n  };\n\n  return TilingPattern;\n})();\n\nexport {\n  getShadingPatternFromIR,\n  TilingPattern,\n};\n\n\n\n// WEBPACK FOOTER //\n// src/display/pattern_helper.js","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable no-unused-vars */\n\n'use strict';\n\nvar pdfjsVersion = PDFJSDev.eval('BUNDLE_VERSION');\nvar pdfjsBuild = PDFJSDev.eval('BUNDLE_BUILD');\n\nvar pdfjsSharedUtil = require('./shared/util.js');\nvar pdfjsDisplayGlobal = require('./display/global.js');\nvar pdfjsDisplayAPI = require('./display/api.js');\nvar pdfjsDisplayTextLayer = require('./display/text_layer.js');\nvar pdfjsDisplayAnnotationLayer = require('./display/annotation_layer.js');\nvar pdfjsDisplayDOMUtils = require('./display/dom_utils.js');\nvar pdfjsDisplaySVG = require('./display/svg.js');\n\nexports.PDFJS = pdfjsDisplayGlobal.PDFJS;\nexports.build = pdfjsDisplayAPI.build;\nexports.version = pdfjsDisplayAPI.version;\nexports.getDocument = pdfjsDisplayAPI.getDocument;\nexports.LoopbackPort = pdfjsDisplayAPI.LoopbackPort;\nexports.PDFDataRangeTransport = pdfjsDisplayAPI.PDFDataRangeTransport;\nexports.PDFWorker = pdfjsDisplayAPI.PDFWorker;\nexports.renderTextLayer = pdfjsDisplayTextLayer.renderTextLayer;\nexports.AnnotationLayer = pdfjsDisplayAnnotationLayer.AnnotationLayer;\nexports.CustomStyle = pdfjsDisplayDOMUtils.CustomStyle;\nexports.createPromiseCapability = pdfjsSharedUtil.createPromiseCapability;\nexports.PasswordResponses = pdfjsSharedUtil.PasswordResponses;\nexports.InvalidPDFException = pdfjsSharedUtil.InvalidPDFException;\nexports.MissingPDFException = pdfjsSharedUtil.MissingPDFException;\nexports.SVGGraphics = pdfjsDisplaySVG.SVGGraphics;\nexports.NativeImageDecoding = pdfjsSharedUtil.NativeImageDecoding;\nexports.UnexpectedResponseException =\n  pdfjsSharedUtil.UnexpectedResponseException;\nexports.OPS = pdfjsSharedUtil.OPS;\nexports.UNSUPPORTED_FEATURES = pdfjsSharedUtil.UNSUPPORTED_FEATURES;\nexports.isValidUrl = pdfjsDisplayDOMUtils.isValidUrl;\nexports.createValidAbsoluteUrl = pdfjsSharedUtil.createValidAbsoluteUrl;\nexports.createObjectURL = pdfjsSharedUtil.createObjectURL;\nexports.removeNullCharacters = pdfjsSharedUtil.removeNullCharacters;\nexports.shadow = pdfjsSharedUtil.shadow;\nexports.createBlob = pdfjsSharedUtil.createBlob;\nexports.RenderingCancelledException =\n  pdfjsDisplayDOMUtils.RenderingCancelledException;\nexports.getFilenameFromUrl = pdfjsDisplayDOMUtils.getFilenameFromUrl;\nexports.addLinkAttributes = pdfjsDisplayDOMUtils.addLinkAttributes;\n\n\n\n// WEBPACK FOOTER //\n// src/pdf.js","/* Copyright 2017 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable no-extend-native */\n/* globals VBArray, PDFJS, global */\n\n// Skip compatibility checks for the extensions and if we already ran\n// this module.\nif ((typeof PDFJSDev === 'undefined' ||\n     !PDFJSDev.test('FIREFOX || MOZCENTRAL || CHROME')) &&\n    (typeof PDFJS === 'undefined' || !PDFJS.compatibilityChecked)) {\n\nvar globalScope = (typeof window !== 'undefined') ? window :\n                  (typeof global !== 'undefined') ? global :\n                  (typeof self !== 'undefined') ? self : this;\n\nvar userAgent = (typeof navigator !== 'undefined' && navigator.userAgent) || '';\nvar isAndroid = /Android/.test(userAgent);\nvar isAndroidPre3 = /Android\\s[0-2][^\\d]/.test(userAgent);\nvar isAndroidPre5 = /Android\\s[0-4][^\\d]/.test(userAgent);\nvar isChrome = userAgent.indexOf('Chrom') >= 0;\nvar isChromeWithRangeBug = /Chrome\\/(39|40)\\./.test(userAgent);\nvar isIOSChrome = userAgent.indexOf('CriOS') >= 0;\nvar isIE = userAgent.indexOf('Trident') >= 0;\nvar isIOS = /\\b(iPad|iPhone|iPod)(?=;)/.test(userAgent);\nvar isOpera = userAgent.indexOf('Opera') >= 0;\nvar isSafari = /Safari\\//.test(userAgent) &&\n               !/(Chrome\\/|Android\\s)/.test(userAgent);\n\nvar hasDOM = typeof window === 'object' && typeof document === 'object';\n\n// Initializing PDFJS global object here, it case if we need to change/disable\n// some PDF.js features, e.g. range requests\nif (typeof PDFJS === 'undefined') {\n  globalScope.PDFJS = {};\n}\n\nPDFJS.compatibilityChecked = true;\n\n// Checking if the typed arrays are supported\n// Support: iOS<6.0 (subarray), IE<10, Android<4.0\n(function checkTypedArrayCompatibility() {\n  if (typeof Uint8Array !== 'undefined') {\n    // Support: iOS<6.0\n    if (typeof Uint8Array.prototype.subarray === 'undefined') {\n      Uint8Array.prototype.subarray = function subarray(start, end) {\n        return new Uint8Array(this.slice(start, end));\n      };\n      Float32Array.prototype.subarray = function subarray(start, end) {\n        return new Float32Array(this.slice(start, end));\n      };\n    }\n\n    // Support: Android<4.1\n    if (typeof Float64Array === 'undefined') {\n      globalScope.Float64Array = Float32Array;\n    }\n    return;\n  }\n\n  function subarray(start, end) {\n    return new TypedArray(this.slice(start, end));\n  }\n\n  function setArrayOffset(array, offset) {\n    if (arguments.length < 2) {\n      offset = 0;\n    }\n    for (var i = 0, n = array.length; i < n; ++i, ++offset) {\n      this[offset] = array[i] & 0xFF;\n    }\n  }\n\n  function Uint32ArrayView(buffer, length) {\n    this.buffer = buffer;\n    this.byteLength = buffer.length;\n    this.length = length;\n    ensureUint32ArrayViewProps(this.length);\n  }\n  Uint32ArrayView.prototype = Object.create(null);\n\n  var uint32ArrayViewSetters = 0;\n  function createUint32ArrayProp(index) {\n    return {\n      get() {\n        var buffer = this.buffer, offset = index << 2;\n        return (buffer[offset] | (buffer[offset + 1] << 8) |\n          (buffer[offset + 2] << 16) | (buffer[offset + 3] << 24)) >>> 0;\n      },\n      set(value) {\n        var buffer = this.buffer, offset = index << 2;\n        buffer[offset] = value & 255;\n        buffer[offset + 1] = (value >> 8) & 255;\n        buffer[offset + 2] = (value >> 16) & 255;\n        buffer[offset + 3] = (value >>> 24) & 255;\n      }\n    };\n  }\n\n  function ensureUint32ArrayViewProps(length) {\n    while (uint32ArrayViewSetters < length) {\n      Object.defineProperty(Uint32ArrayView.prototype,\n        uint32ArrayViewSetters,\n        createUint32ArrayProp(uint32ArrayViewSetters));\n      uint32ArrayViewSetters++;\n    }\n  }\n\n  function TypedArray(arg1) {\n    var result, i, n;\n    if (typeof arg1 === 'number') {\n      result = [];\n      for (i = 0; i < arg1; ++i) {\n        result[i] = 0;\n      }\n    } else if ('slice' in arg1) {\n      result = arg1.slice(0);\n    } else {\n      result = [];\n      for (i = 0, n = arg1.length; i < n; ++i) {\n        result[i] = arg1[i];\n      }\n    }\n\n    result.subarray = subarray;\n    result.buffer = result;\n    result.byteLength = result.length;\n    result.set = setArrayOffset;\n\n    if (typeof arg1 === 'object' && arg1.buffer) {\n      result.buffer = arg1.buffer;\n    }\n    return result;\n  }\n\n  globalScope.Uint8Array = TypedArray;\n  globalScope.Int8Array = TypedArray;\n\n  // we don't need support for set, byteLength for 32-bit array\n  // so we can use the TypedArray as well\n  globalScope.Int32Array = TypedArray;\n  globalScope.Uint16Array = TypedArray;\n  globalScope.Float32Array = TypedArray;\n  globalScope.Float64Array = TypedArray;\n\n  globalScope.Uint32Array = function () {\n    if (arguments.length === 3) {\n      // Building view for buffer, offset, and length\n      if (arguments[1] !== 0) {\n        throw new Error('offset !== 0 is not supported');\n      }\n      return new Uint32ArrayView(arguments[0], arguments[2]);\n    }\n    return TypedArray.apply(this, arguments);\n  };\n})();\n\n// window.CanvasPixelArray.buffer/.byteLength\n// Support: IE9\n(function canvasPixelArrayBuffer() {\n  if (!hasDOM || !window.CanvasPixelArray) {\n    return;\n  }\n  var cpaProto = window.CanvasPixelArray.prototype;\n  if ('buffer' in cpaProto) {\n    return;\n  }\n  // Trying to fake CanvasPixelArray as Uint8ClampedArray.\n  Object.defineProperty(cpaProto, 'buffer', {\n    get() {\n      return this;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(cpaProto, 'byteLength', {\n    get() {\n      return this.length;\n    },\n    enumerable: false,\n    configurable: true\n  });\n})();\n\n// URL = URL || webkitURL\n// Support: Safari<7, Android 4.2+\n(function normalizeURLObject() {\n  if (!globalScope.URL) {\n    globalScope.URL = globalScope.webkitURL;\n  }\n})();\n\n// Object.defineProperty()?\n// Support: Android<4.0, Safari<5.1\n(function checkObjectDefinePropertyCompatibility() {\n  if (typeof Object.defineProperty !== 'undefined') {\n    var definePropertyPossible = true;\n    try {\n      if (hasDOM) {\n        // some browsers (e.g. safari) cannot use defineProperty() on DOM\n        // objects and thus the native version is not sufficient\n        Object.defineProperty(new Image(), 'id', { value: 'test' });\n      }\n      // ... another test for android gb browser for non-DOM objects\n      var Test = function Test() {};\n      Test.prototype = { get id() { } };\n      Object.defineProperty(new Test(), 'id',\n        { value: '', configurable: true, enumerable: true, writable: false });\n    } catch (e) {\n      definePropertyPossible = false;\n    }\n    if (definePropertyPossible) {\n      return;\n    }\n  }\n\n  Object.defineProperty = function objectDefineProperty(obj, name, def) {\n    delete obj[name];\n    if ('get' in def) {\n      obj.__defineGetter__(name, def['get']);\n    }\n    if ('set' in def) {\n      obj.__defineSetter__(name, def['set']);\n    }\n    if ('value' in def) {\n      obj.__defineSetter__(name, function objectDefinePropertySetter(value) {\n        this.__defineGetter__(name, function objectDefinePropertyGetter() {\n          return value;\n        });\n        return value;\n      });\n      obj[name] = def.value;\n    }\n  };\n})();\n\n\n// No XMLHttpRequest#response?\n// Support: IE<11, Android <4.0\n(function checkXMLHttpRequestResponseCompatibility() {\n  if (typeof XMLHttpRequest === 'undefined') {\n    return;\n  }\n  var xhrPrototype = XMLHttpRequest.prototype;\n  var xhr = new XMLHttpRequest();\n  if (!('overrideMimeType' in xhr)) {\n    // IE10 might have response, but not overrideMimeType\n    // Support: IE10\n    Object.defineProperty(xhrPrototype, 'overrideMimeType', {\n      value: function xmlHttpRequestOverrideMimeType(mimeType) {}\n    });\n  }\n  if ('responseType' in xhr) {\n    return;\n  }\n\n  Object.defineProperty(xhrPrototype, 'responseType', {\n    get: function xmlHttpRequestGetResponseType() {\n      return this._responseType || 'text';\n    },\n    set: function xmlHttpRequestSetResponseType(value) {\n      if (value === 'text' || value === 'arraybuffer') {\n        this._responseType = value;\n        if (value === 'arraybuffer' &&\n            typeof this.overrideMimeType === 'function') {\n          this.overrideMimeType('text/plain; charset=x-user-defined');\n        }\n      }\n    }\n  });\n\n  // Support: IE9\n  if (typeof VBArray !== 'undefined') {\n    Object.defineProperty(xhrPrototype, 'response', {\n      get: function xmlHttpRequestResponseGet() {\n        if (this.responseType === 'arraybuffer') {\n          return new Uint8Array(new VBArray(this.responseBody).toArray());\n        }\n        return this.responseText;\n      }\n    });\n    return;\n  }\n\n  Object.defineProperty(xhrPrototype, 'response', {\n    get: function xmlHttpRequestResponseGet() {\n      if (this.responseType !== 'arraybuffer') {\n        return this.responseText;\n      }\n      var text = this.responseText;\n      var i, n = text.length;\n      var result = new Uint8Array(n);\n      for (i = 0; i < n; ++i) {\n        result[i] = text.charCodeAt(i) & 0xFF;\n      }\n      return result.buffer;\n    }\n  });\n})();\n\n// window.btoa (base64 encode function) ?\n// Support: IE<10\n(function checkWindowBtoaCompatibility() {\n  if ('btoa' in globalScope) {\n    return;\n  }\n\n  var digits =\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n  globalScope.btoa = function (chars) {\n    var buffer = '';\n    var i, n;\n    for (i = 0, n = chars.length; i < n; i += 3) {\n      var b1 = chars.charCodeAt(i) & 0xFF;\n      var b2 = chars.charCodeAt(i + 1) & 0xFF;\n      var b3 = chars.charCodeAt(i + 2) & 0xFF;\n      var d1 = b1 >> 2, d2 = ((b1 & 3) << 4) | (b2 >> 4);\n      var d3 = i + 1 < n ? ((b2 & 0xF) << 2) | (b3 >> 6) : 64;\n      var d4 = i + 2 < n ? (b3 & 0x3F) : 64;\n      buffer += (digits.charAt(d1) + digits.charAt(d2) +\n                 digits.charAt(d3) + digits.charAt(d4));\n    }\n    return buffer;\n  };\n})();\n\n// window.atob (base64 encode function)?\n// Support: IE<10\n(function checkWindowAtobCompatibility() {\n  if ('atob' in globalScope) {\n    return;\n  }\n\n  // https://github.com/davidchambers/Base64.js\n  var digits =\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  globalScope.atob = function (input) {\n    input = input.replace(/=+$/, '');\n    if (input.length % 4 === 1) {\n      throw new Error('bad atob input');\n    }\n    for (\n      // initialize result and counters\n      var bc = 0, bs, buffer, idx = 0, output = '';\n      // get next character\n      (buffer = input.charAt(idx++));\n      // character found in table?\n      // initialize bit storage and add its ascii value\n      ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,\n        // and if not first of each 4 characters,\n        // convert the first 8 bits to one ascii character\n        bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0\n    ) {\n      // try to find character in table (0-63, not found => -1)\n      buffer = digits.indexOf(buffer);\n    }\n    return output;\n  };\n})();\n\n// Function.prototype.bind?\n// Support: Android<4.0, iOS<6.0\n(function checkFunctionPrototypeBindCompatibility() {\n  if (typeof Function.prototype.bind !== 'undefined') {\n    return;\n  }\n\n  Function.prototype.bind = function functionPrototypeBind(obj) {\n    var fn = this, headArgs = Array.prototype.slice.call(arguments, 1);\n    var bound = function functionPrototypeBindBound() {\n      var args = headArgs.concat(Array.prototype.slice.call(arguments));\n      return fn.apply(obj, args);\n    };\n    return bound;\n  };\n})();\n\n// HTMLElement dataset property\n// Support: IE<11, Safari<5.1, Android<4.0\n(function checkDatasetProperty() {\n  if (!hasDOM) {\n    return;\n  }\n  var div = document.createElement('div');\n  if ('dataset' in div) {\n    return; // dataset property exists\n  }\n\n  Object.defineProperty(HTMLElement.prototype, 'dataset', {\n    get() {\n      if (this._dataset) {\n        return this._dataset;\n      }\n\n      var dataset = {};\n      for (var j = 0, jj = this.attributes.length; j < jj; j++) {\n        var attribute = this.attributes[j];\n        if (attribute.name.substring(0, 5) !== 'data-') {\n          continue;\n        }\n        var key = attribute.name.substring(5).replace(/\\-([a-z])/g,\n          function(all, ch) {\n            return ch.toUpperCase();\n          });\n        dataset[key] = attribute.value;\n      }\n\n      Object.defineProperty(this, '_dataset', {\n        value: dataset,\n        writable: false,\n        enumerable: false\n      });\n      return dataset;\n    },\n    enumerable: true\n  });\n})();\n\n// HTMLElement classList property\n// Support: IE<10, Android<4.0, iOS<5.0\n(function checkClassListProperty() {\n  function changeList(element, itemName, add, remove) {\n    var s = element.className || '';\n    var list = s.split(/\\s+/g);\n    if (list[0] === '') {\n      list.shift();\n    }\n    var index = list.indexOf(itemName);\n    if (index < 0 && add) {\n      list.push(itemName);\n    }\n    if (index >= 0 && remove) {\n      list.splice(index, 1);\n    }\n    element.className = list.join(' ');\n    return (index >= 0);\n  }\n\n  if (!hasDOM) {\n    return;\n  }\n\n  var div = document.createElement('div');\n  if ('classList' in div) {\n    return; // classList property exists\n  }\n\n  var classListPrototype = {\n    add(name) {\n      changeList(this.element, name, true, false);\n    },\n    contains(name) {\n      return changeList(this.element, name, false, false);\n    },\n    remove(name) {\n      changeList(this.element, name, false, true);\n    },\n    toggle(name) {\n      changeList(this.element, name, true, true);\n    }\n  };\n\n  Object.defineProperty(HTMLElement.prototype, 'classList', {\n    get() {\n      if (this._classList) {\n        return this._classList;\n      }\n\n      var classList = Object.create(classListPrototype, {\n        element: {\n          value: this,\n          writable: false,\n          enumerable: true\n        }\n      });\n      Object.defineProperty(this, '_classList', {\n        value: classList,\n        writable: false,\n        enumerable: false\n      });\n      return classList;\n    },\n    enumerable: true\n  });\n})();\n\n// Checking if worker has console support. Forwarding all messages to the main\n// thread if console object is absent.\n(function checkWorkerConsoleCompatibility() {\n  if (typeof importScripts === 'undefined' || 'console' in globalScope) {\n    return;\n  }\n\n  var consoleTimer = {};\n\n  var workerConsole = {\n    log: function log() {\n      var args = Array.prototype.slice.call(arguments);\n      globalScope.postMessage({\n        targetName: 'main',\n        action: 'console_log',\n        data: args\n      });\n    },\n\n    error: function error() {\n      var args = Array.prototype.slice.call(arguments);\n      globalScope.postMessage({\n        targetName: 'main',\n        action: 'console_error',\n        data: args\n      });\n    },\n\n    time: function time(name) {\n      consoleTimer[name] = Date.now();\n    },\n\n    timeEnd: function timeEnd(name) {\n      var time = consoleTimer[name];\n      if (!time) {\n        throw new Error('Unknown timer name ' + name);\n      }\n      this.log('Timer:', name, Date.now() - time);\n    }\n  };\n\n  globalScope.console = workerConsole;\n})();\n\n// Check console compatibility\n// In older IE versions the console object is not available\n// unless console is open.\n// Support: IE<10\n(function checkConsoleCompatibility() {\n  if (!hasDOM) {\n    return;\n  }\n  if (!('console' in window)) {\n    window.console = {\n      log() {},\n      error() {},\n      warn() {}\n    };\n    return;\n  }\n  if (!('bind' in console.log)) {\n    // native functions in IE9 might not have bind\n    console.log = (function(fn) {\n      return function(msg) {\n        return fn(msg);\n      };\n    })(console.log);\n    console.error = (function(fn) {\n      return function(msg) {\n        return fn(msg);\n      };\n    })(console.error);\n    console.warn = (function(fn) {\n      return function(msg) {\n        return fn(msg);\n      };\n    })(console.warn);\n    return;\n  }\n})();\n\n// Check onclick compatibility in Opera\n// Support: Opera<15\n(function checkOnClickCompatibility() {\n  // workaround for reported Opera bug DSK-354448:\n  // onclick fires on disabled buttons with opaque content\n  function ignoreIfTargetDisabled(event) {\n    if (isDisabled(event.target)) {\n      event.stopPropagation();\n    }\n  }\n  function isDisabled(node) {\n    return node.disabled || (node.parentNode && isDisabled(node.parentNode));\n  }\n  if (isOpera) {\n    // use browser detection since we cannot feature-check this bug\n    document.addEventListener('click', ignoreIfTargetDisabled, true);\n  }\n})();\n\n// Checks if possible to use URL.createObjectURL()\n// Support: IE, Chrome on iOS\n(function checkOnBlobSupport() {\n  // sometimes IE and Chrome on iOS loosing the data created with\n  // createObjectURL(), see #3977 and #8081\n  if (isIE || isIOSChrome) {\n    PDFJS.disableCreateObjectURL = true;\n  }\n})();\n\n// Checks if navigator.language is supported\n(function checkNavigatorLanguage() {\n  if (typeof navigator === 'undefined') {\n    return;\n  }\n  if ('language' in navigator) {\n    return;\n  }\n  PDFJS.locale = navigator.userLanguage || 'en-US';\n})();\n\n// Support: Safari 6.0+, Android<3.0, Chrome 39/40, iOS\n(function checkRangeRequests() {\n  // Safari has issues with cached range requests see:\n  // https://github.com/mozilla/pdf.js/issues/3260\n  // Last tested with version 6.0.4.\n\n  // Older versions of Android (pre 3.0) has issues with range requests, see:\n  // https://github.com/mozilla/pdf.js/issues/3381.\n  // Make sure that we only match webkit-based Android browsers,\n  // since Firefox/Fennec works as expected.\n\n  // Range requests are broken in Chrome 39 and 40, https://crbug.com/442318\n  if (isSafari || isAndroidPre3 || isChromeWithRangeBug || isIOS) {\n    PDFJS.disableRange = true;\n    PDFJS.disableStream = true;\n  }\n})();\n\n// Check if the browser supports manipulation of the history.\n// Support: IE<10, Android<4.2\n(function checkHistoryManipulation() {\n  if (!hasDOM) {\n    return;\n  }\n  // Android 2.x has so buggy pushState support that it was removed in\n  // Android 3.0 and restored as late as in Android 4.2.\n  // Support: Android 2.x\n  if (!history.pushState || isAndroidPre3) {\n    PDFJS.disableHistory = true;\n  }\n})();\n\n// Support: IE<11, Chrome<21, Android<4.4, Safari<6\n(function checkSetPresenceInImageData() {\n  if (!hasDOM) {\n    return;\n  }\n  // IE < 11 will use window.CanvasPixelArray which lacks set function.\n  if (window.CanvasPixelArray) {\n    if (typeof window.CanvasPixelArray.prototype.set !== 'function') {\n      window.CanvasPixelArray.prototype.set = function(arr) {\n        for (var i = 0, ii = this.length; i < ii; i++) {\n          this[i] = arr[i];\n        }\n      };\n    }\n  } else {\n    // Old Chrome and Android use an inaccessible CanvasPixelArray prototype.\n    // Because we cannot feature detect it, we rely on user agent parsing.\n    var polyfill = false, versionMatch;\n    if (isChrome) {\n      versionMatch = userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\n      // Chrome < 21 lacks the set function.\n      polyfill = versionMatch && parseInt(versionMatch[2]) < 21;\n    } else if (isAndroid) {\n      // Android < 4.4 lacks the set function.\n      // Android >= 4.4 will contain Chrome in the user agent,\n      // thus pass the Chrome check above and not reach this block.\n      polyfill = isAndroidPre5;\n    } else if (isSafari) {\n      versionMatch = userAgent.\n        match(/Version\\/([0-9]+)\\.([0-9]+)\\.([0-9]+) Safari\\//);\n      // Safari < 6 lacks the set function.\n      polyfill = versionMatch && parseInt(versionMatch[1]) < 6;\n    }\n\n    if (polyfill) {\n      var contextPrototype = window.CanvasRenderingContext2D.prototype;\n      var createImageData = contextPrototype.createImageData;\n      contextPrototype.createImageData = function(w, h) {\n        var imageData = createImageData.call(this, w, h);\n        imageData.data.set = function(arr) {\n          for (var i = 0, ii = this.length; i < ii; i++) {\n            this[i] = arr[i];\n          }\n        };\n        return imageData;\n      };\n      // this closure will be kept referenced, so clear its vars\n      contextPrototype = null;\n    }\n  }\n})();\n\n// Support: IE<10, Android<4.0, iOS\n(function checkRequestAnimationFrame() {\n  function installFakeAnimationFrameFunctions() {\n    window.requestAnimationFrame = function (callback) {\n      return window.setTimeout(callback, 20);\n    };\n    window.cancelAnimationFrame = function (timeoutID) {\n      window.clearTimeout(timeoutID);\n    };\n  }\n\n  if (!hasDOM) {\n    return;\n  }\n  if (isIOS) {\n    // requestAnimationFrame on iOS is broken, replacing with fake one.\n    installFakeAnimationFrameFunctions();\n    return;\n  }\n  if ('requestAnimationFrame' in window) {\n    return;\n  }\n  window.requestAnimationFrame = window.mozRequestAnimationFrame ||\n                                 window.webkitRequestAnimationFrame;\n  if (window.requestAnimationFrame) {\n    return;\n  }\n  installFakeAnimationFrameFunctions();\n})();\n\n// Support: Android, iOS\n(function checkCanvasSizeLimitation() {\n  if (isIOS || isAndroid) {\n    // 5MP\n    PDFJS.maxCanvasPixels = 5242880;\n  }\n})();\n\n// Disable fullscreen support for certain problematic configurations.\n// Support: IE11+ (when embedded).\n(function checkFullscreenSupport() {\n  if (!hasDOM) {\n    return;\n  }\n  if (isIE && window.parent !== window) {\n    PDFJS.disableFullscreen = true;\n  }\n})();\n\n// Provides document.currentScript support\n// Support: IE, Chrome<29.\n(function checkCurrentScript() {\n  if (!hasDOM) {\n    return;\n  }\n  if ('currentScript' in document) {\n    return;\n  }\n  Object.defineProperty(document, 'currentScript', {\n    get() {\n      var scripts = document.getElementsByTagName('script');\n      return scripts[scripts.length - 1];\n    },\n    enumerable: true,\n    configurable: true\n  });\n})();\n\n// Provides `input.type = 'type'` runtime failure protection.\n// Support: IE9,10.\n(function checkInputTypeNumberAssign() {\n  if (!hasDOM) {\n    return;\n  }\n  var el = document.createElement('input');\n  try {\n    el.type = 'number';\n  } catch (ex) {\n    var inputProto = el.constructor.prototype;\n    var typeProperty = Object.getOwnPropertyDescriptor(inputProto, 'type');\n    Object.defineProperty(inputProto, 'type', {\n      get() {\n        return typeProperty.get.call(this);\n      },\n      set(value) {\n        typeProperty.set.call(this, value === 'number' ? 'text' : value);\n      },\n      enumerable: true,\n      configurable: true\n    });\n  }\n})();\n\n// Provides correct document.readyState value for legacy browsers.\n// Support: IE9,10.\n(function checkDocumentReadyState() {\n  if (!hasDOM) {\n    return;\n  }\n  if (!document.attachEvent) {\n    return;\n  }\n  var documentProto = document.constructor.prototype;\n  var readyStateProto = Object.getOwnPropertyDescriptor(documentProto,\n                                                        'readyState');\n  Object.defineProperty(documentProto, 'readyState', {\n    get() {\n      var value = readyStateProto.get.call(this);\n      return value === 'interactive' ? 'loading' : value;\n    },\n    set(value) {\n      readyStateProto.set.call(this, value);\n    },\n    enumerable: true,\n    configurable: true\n  });\n})();\n\n// Provides support for ChildNode.remove in legacy browsers.\n// Support: IE.\n(function checkChildNodeRemove() {\n  if (!hasDOM) {\n    return;\n  }\n  if (typeof Element.prototype.remove !== 'undefined') {\n    return;\n  }\n  Element.prototype.remove = function () {\n    if (this.parentNode) {\n      this.parentNode.removeChild(this);\n    }\n  };\n})();\n\n/**\n * Polyfill for Promises:\n * The following promise implementation tries to generally implement the\n * Promise/A+ spec. Some notable differences from other promise libraries are:\n * - There currently isn't a separate deferred and promise object.\n * - Unhandled rejections eventually show an error if they aren't handled.\n *\n * Based off of the work in:\n * https://bugzilla.mozilla.org/show_bug.cgi?id=810490\n */\n(function checkPromise() {\n  if (globalScope.Promise) {\n    // Promises existing in the DOM/Worker, checking presence of all/resolve\n    if (typeof globalScope.Promise.all !== 'function') {\n      globalScope.Promise.all = function (iterable) {\n        var count = 0, results = [], resolve, reject;\n        var promise = new globalScope.Promise(function (resolve_, reject_) {\n          resolve = resolve_;\n          reject = reject_;\n        });\n        iterable.forEach(function (p, i) {\n          count++;\n          p.then(function (result) {\n            results[i] = result;\n            count--;\n            if (count === 0) {\n              resolve(results);\n            }\n          }, reject);\n        });\n        if (count === 0) {\n          resolve(results);\n        }\n        return promise;\n      };\n    }\n    if (typeof globalScope.Promise.resolve !== 'function') {\n      globalScope.Promise.resolve = function (value) {\n        return new globalScope.Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n    }\n    if (typeof globalScope.Promise.reject !== 'function') {\n      globalScope.Promise.reject = function (reason) {\n        return new globalScope.Promise(function (resolve, reject) {\n          reject(reason);\n        });\n      };\n    }\n    if (typeof globalScope.Promise.prototype.catch !== 'function') {\n      globalScope.Promise.prototype.catch = function (onReject) {\n        return globalScope.Promise.prototype.then(undefined, onReject);\n      };\n    }\n    return;\n  }\n\n  var STATUS_PENDING = 0;\n  var STATUS_RESOLVED = 1;\n  var STATUS_REJECTED = 2;\n\n  // In an attempt to avoid silent exceptions, unhandled rejections are\n  // tracked and if they aren't handled in a certain amount of time an\n  // error is logged.\n  var REJECTION_TIMEOUT = 500;\n\n  var HandlerManager = {\n    handlers: [],\n    running: false,\n    unhandledRejections: [],\n    pendingRejectionCheck: false,\n\n    scheduleHandlers: function scheduleHandlers(promise) {\n      if (promise._status === STATUS_PENDING) {\n        return;\n      }\n\n      this.handlers = this.handlers.concat(promise._handlers);\n      promise._handlers = [];\n\n      if (this.running) {\n        return;\n      }\n      this.running = true;\n\n      setTimeout(this.runHandlers.bind(this), 0);\n    },\n\n    runHandlers: function runHandlers() {\n      var RUN_TIMEOUT = 1; // ms\n      var timeoutAt = Date.now() + RUN_TIMEOUT;\n      while (this.handlers.length > 0) {\n        var handler = this.handlers.shift();\n\n        var nextStatus = handler.thisPromise._status;\n        var nextValue = handler.thisPromise._value;\n\n        try {\n          if (nextStatus === STATUS_RESOLVED) {\n            if (typeof handler.onResolve === 'function') {\n              nextValue = handler.onResolve(nextValue);\n            }\n          } else if (typeof handler.onReject === 'function') {\n              nextValue = handler.onReject(nextValue);\n              nextStatus = STATUS_RESOLVED;\n\n              if (handler.thisPromise._unhandledRejection) {\n                this.removeUnhandeledRejection(handler.thisPromise);\n              }\n          }\n        } catch (ex) {\n          nextStatus = STATUS_REJECTED;\n          nextValue = ex;\n        }\n\n        handler.nextPromise._updateStatus(nextStatus, nextValue);\n        if (Date.now() >= timeoutAt) {\n          break;\n        }\n      }\n\n      if (this.handlers.length > 0) {\n        setTimeout(this.runHandlers.bind(this), 0);\n        return;\n      }\n\n      this.running = false;\n    },\n\n    addUnhandledRejection: function addUnhandledRejection(promise) {\n      this.unhandledRejections.push({\n        promise,\n        time: Date.now()\n      });\n      this.scheduleRejectionCheck();\n    },\n\n    removeUnhandeledRejection: function removeUnhandeledRejection(promise) {\n      promise._unhandledRejection = false;\n      for (var i = 0; i < this.unhandledRejections.length; i++) {\n        if (this.unhandledRejections[i].promise === promise) {\n          this.unhandledRejections.splice(i);\n          i--;\n        }\n      }\n    },\n\n    scheduleRejectionCheck: function scheduleRejectionCheck() {\n      if (this.pendingRejectionCheck) {\n        return;\n      }\n      this.pendingRejectionCheck = true;\n      setTimeout(() => {\n        this.pendingRejectionCheck = false;\n        var now = Date.now();\n        for (var i = 0; i < this.unhandledRejections.length; i++) {\n          if (now - this.unhandledRejections[i].time > REJECTION_TIMEOUT) {\n            var unhandled = this.unhandledRejections[i].promise._value;\n            var msg = 'Unhandled rejection: ' + unhandled;\n            if (unhandled.stack) {\n              msg += '\\n' + unhandled.stack;\n            }\n            // Raising and catching the error, so debugger can break on it.\n            try {\n              throw new Error(msg);\n            } catch (_) {\n              console.warn(msg);\n            }\n            this.unhandledRejections.splice(i);\n            i--;\n          }\n        }\n        if (this.unhandledRejections.length) {\n          this.scheduleRejectionCheck();\n        }\n      }, REJECTION_TIMEOUT);\n    }\n  };\n\n  var Promise = function Promise(resolver) {\n    this._status = STATUS_PENDING;\n    this._handlers = [];\n    try {\n      resolver.call(this, this._resolve.bind(this), this._reject.bind(this));\n    } catch (e) {\n      this._reject(e);\n    }\n  };\n\n  /**\n   * Builds a promise that is resolved when all the passed in promises are\n   * resolved.\n   * @param {array} promises array of data and/or promises to wait for.\n   * @return {Promise} New dependent promise.\n   */\n  Promise.all = function Promise_all(promises) {\n    var resolveAll, rejectAll;\n    var deferred = new Promise(function (resolve, reject) {\n      resolveAll = resolve;\n      rejectAll = reject;\n    });\n    var unresolved = promises.length;\n    var results = [];\n    if (unresolved === 0) {\n      resolveAll(results);\n      return deferred;\n    }\n    function reject(reason) {\n      if (deferred._status === STATUS_REJECTED) {\n        return;\n      }\n      results = [];\n      rejectAll(reason);\n    }\n    for (var i = 0, ii = promises.length; i < ii; ++i) {\n      var promise = promises[i];\n      var resolve = (function(i) {\n        return function(value) {\n          if (deferred._status === STATUS_REJECTED) {\n            return;\n          }\n          results[i] = value;\n          unresolved--;\n          if (unresolved === 0) {\n            resolveAll(results);\n          }\n        };\n      })(i);\n      if (Promise.isPromise(promise)) {\n        promise.then(resolve, reject);\n      } else {\n        resolve(promise);\n      }\n    }\n    return deferred;\n  };\n\n  /**\n   * Checks if the value is likely a promise (has a 'then' function).\n   * @return {boolean} true if value is thenable\n   */\n  Promise.isPromise = function Promise_isPromise(value) {\n    return value && typeof value.then === 'function';\n  };\n\n  /**\n   * Creates resolved promise\n   * @param value resolve value\n   * @returns {Promise}\n   */\n  Promise.resolve = function Promise_resolve(value) {\n    return new Promise(function (resolve) {\n      resolve(value);\n    });\n  };\n\n  /**\n   * Creates rejected promise\n   * @param reason rejection value\n   * @returns {Promise}\n   */\n  Promise.reject = function Promise_reject(reason) {\n    return new Promise(function (resolve, reject) {\n      reject(reason);\n    });\n  };\n\n  Promise.prototype = {\n    _status: null,\n    _value: null,\n    _handlers: null,\n    _unhandledRejection: null,\n\n    _updateStatus: function Promise__updateStatus(status, value) {\n      if (this._status === STATUS_RESOLVED ||\n          this._status === STATUS_REJECTED) {\n        return;\n      }\n\n      if (status === STATUS_RESOLVED &&\n          Promise.isPromise(value)) {\n        value.then(this._updateStatus.bind(this, STATUS_RESOLVED),\n                   this._updateStatus.bind(this, STATUS_REJECTED));\n        return;\n      }\n\n      this._status = status;\n      this._value = value;\n\n      if (status === STATUS_REJECTED && this._handlers.length === 0) {\n        this._unhandledRejection = true;\n        HandlerManager.addUnhandledRejection(this);\n      }\n\n      HandlerManager.scheduleHandlers(this);\n    },\n\n    _resolve: function Promise_resolve(value) {\n      this._updateStatus(STATUS_RESOLVED, value);\n    },\n\n    _reject: function Promise_reject(reason) {\n      this._updateStatus(STATUS_REJECTED, reason);\n    },\n\n    then: function Promise_then(onResolve, onReject) {\n      var nextPromise = new Promise(function (resolve, reject) {\n        this.resolve = resolve;\n        this.reject = reject;\n      });\n      this._handlers.push({\n        thisPromise: this,\n        onResolve,\n        onReject,\n        nextPromise,\n      });\n      HandlerManager.scheduleHandlers(this);\n      return nextPromise;\n    },\n\n    catch: function Promise_catch(onReject) {\n      return this.then(undefined, onReject);\n    }\n  };\n\n  globalScope.Promise = Promise;\n})();\n\n(function checkWeakMap() {\n  if (globalScope.WeakMap) {\n    return;\n  }\n\n  var id = 0;\n  function WeakMap() {\n    this.id = '$weakmap' + (id++);\n  }\n  WeakMap.prototype = {\n    has(obj) {\n      return !!Object.getOwnPropertyDescriptor(obj, this.id);\n    },\n    get(obj, defaultValue) {\n      return this.has(obj) ? obj[this.id] : defaultValue;\n    },\n    set(obj, value) {\n      Object.defineProperty(obj, this.id, {\n        value,\n        enumerable: false,\n        configurable: true\n      });\n    },\n    delete(obj) {\n      delete obj[this.id];\n    }\n  };\n\n  globalScope.WeakMap = WeakMap;\n})();\n\n// Polyfill from https://github.com/Polymer/URL\n/* Any copyright is dedicated to the Public Domain.\n * http://creativecommons.org/publicdomain/zero/1.0/ */\n(function checkURLConstructor() {\n  // feature detect for URL constructor\n  var hasWorkingUrl = false;\n  try {\n    if (typeof URL === 'function' &&\n        typeof URL.prototype === 'object' &&\n        ('origin' in URL.prototype)) {\n      var u = new URL('b', 'http://a');\n      u.pathname = 'c%20d';\n      hasWorkingUrl = u.href === 'http://a/c%20d';\n    }\n  } catch (e) { }\n\n  if (hasWorkingUrl) {\n    return;\n  }\n\n  var relative = Object.create(null);\n  relative['ftp'] = 21;\n  relative['file'] = 0;\n  relative['gopher'] = 70;\n  relative['http'] = 80;\n  relative['https'] = 443;\n  relative['ws'] = 80;\n  relative['wss'] = 443;\n\n  var relativePathDotMapping = Object.create(null);\n  relativePathDotMapping['%2e'] = '.';\n  relativePathDotMapping['.%2e'] = '..';\n  relativePathDotMapping['%2e.'] = '..';\n  relativePathDotMapping['%2e%2e'] = '..';\n\n  function isRelativeScheme(scheme) {\n    return relative[scheme] !== undefined;\n  }\n\n  function invalid() {\n    clear.call(this);\n    this._isInvalid = true;\n  }\n\n  function IDNAToASCII(h) {\n    if (h === '') {\n      invalid.call(this);\n    }\n    // XXX\n    return h.toLowerCase();\n  }\n\n  function percentEscape(c) {\n    var unicode = c.charCodeAt(0);\n    if (unicode > 0x20 &&\n       unicode < 0x7F &&\n       // \" # < > ? `\n       [0x22, 0x23, 0x3C, 0x3E, 0x3F, 0x60].indexOf(unicode) === -1\n      ) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n\n  function percentEscapeQuery(c) {\n    // XXX This actually needs to encode c using encoding and then\n    // convert the bytes one-by-one.\n\n    var unicode = c.charCodeAt(0);\n    if (unicode > 0x20 &&\n       unicode < 0x7F &&\n       // \" # < > ` (do not escape '?')\n       [0x22, 0x23, 0x3C, 0x3E, 0x60].indexOf(unicode) === -1\n      ) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n\n  var EOF, ALPHA = /[a-zA-Z]/,\n      ALPHANUMERIC = /[a-zA-Z0-9\\+\\-\\.]/;\n\n  function parse(input, stateOverride, base) {\n    function err(message) {\n      errors.push(message);\n    }\n\n    var state = stateOverride || 'scheme start',\n        cursor = 0,\n        buffer = '',\n        seenAt = false,\n        seenBracket = false,\n        errors = [];\n\n    loop: while ((input[cursor - 1] !== EOF || cursor === 0) &&\n                 !this._isInvalid) {\n      var c = input[cursor];\n      switch (state) {\n        case 'scheme start':\n          if (c && ALPHA.test(c)) {\n            buffer += c.toLowerCase(); // ASCII-safe\n            state = 'scheme';\n          } else if (!stateOverride) {\n            buffer = '';\n            state = 'no scheme';\n            continue;\n          } else {\n            err('Invalid scheme.');\n            break loop;\n          }\n          break;\n\n        case 'scheme':\n          if (c && ALPHANUMERIC.test(c)) {\n            buffer += c.toLowerCase(); // ASCII-safe\n          } else if (c === ':') {\n            this._scheme = buffer;\n            buffer = '';\n            if (stateOverride) {\n              break loop;\n            }\n            if (isRelativeScheme(this._scheme)) {\n              this._isRelative = true;\n            }\n            if (this._scheme === 'file') {\n              state = 'relative';\n            } else if (this._isRelative && base &&\n                       base._scheme === this._scheme) {\n              state = 'relative or authority';\n            } else if (this._isRelative) {\n              state = 'authority first slash';\n            } else {\n              state = 'scheme data';\n            }\n          } else if (!stateOverride) {\n            buffer = '';\n            cursor = 0;\n            state = 'no scheme';\n            continue;\n          } else if (c === EOF) {\n            break loop;\n          } else {\n            err('Code point not allowed in scheme: ' + c);\n            break loop;\n          }\n          break;\n\n        case 'scheme data':\n          if (c === '?') {\n            this._query = '?';\n            state = 'query';\n          } else if (c === '#') {\n            this._fragment = '#';\n            state = 'fragment';\n          } else {\n            // XXX error handling\n            if (c !== EOF && c !== '\\t' && c !== '\\n' && c !== '\\r') {\n              this._schemeData += percentEscape(c);\n            }\n          }\n          break;\n\n        case 'no scheme':\n          if (!base || !(isRelativeScheme(base._scheme))) {\n            err('Missing scheme.');\n            invalid.call(this);\n          } else {\n            state = 'relative';\n            continue;\n          }\n          break;\n\n        case 'relative or authority':\n          if (c === '/' && input[cursor + 1] === '/') {\n            state = 'authority ignore slashes';\n          } else {\n            err('Expected /, got: ' + c);\n            state = 'relative';\n            continue;\n          }\n          break;\n\n        case 'relative':\n          this._isRelative = true;\n          if (this._scheme !== 'file') {\n            this._scheme = base._scheme;\n          }\n          if (c === EOF) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = base._query;\n            this._username = base._username;\n            this._password = base._password;\n            break loop;\n          } else if (c === '/' || c === '\\\\') {\n            if (c === '\\\\') {\n              err('\\\\ is an invalid code point.');\n            }\n            state = 'relative slash';\n          } else if (c === '?') {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = '?';\n            this._username = base._username;\n            this._password = base._password;\n            state = 'query';\n          } else if (c === '#') {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = base._query;\n            this._fragment = '#';\n            this._username = base._username;\n            this._password = base._password;\n            state = 'fragment';\n          } else {\n            var nextC = input[cursor + 1];\n            var nextNextC = input[cursor + 2];\n            if (this._scheme !== 'file' || !ALPHA.test(c) ||\n                (nextC !== ':' && nextC !== '|') ||\n                (nextNextC !== EOF && nextNextC !== '/' && nextNextC !== '\\\\' &&\n                 nextNextC !== '?' && nextNextC !== '#')) {\n              this._host = base._host;\n              this._port = base._port;\n              this._username = base._username;\n              this._password = base._password;\n              this._path = base._path.slice();\n              this._path.pop();\n            }\n            state = 'relative path';\n            continue;\n          }\n          break;\n\n        case 'relative slash':\n          if (c === '/' || c === '\\\\') {\n            if (c === '\\\\') {\n              err('\\\\ is an invalid code point.');\n            }\n            if (this._scheme === 'file') {\n              state = 'file host';\n            } else {\n              state = 'authority ignore slashes';\n            }\n          } else {\n            if (this._scheme !== 'file') {\n              this._host = base._host;\n              this._port = base._port;\n              this._username = base._username;\n              this._password = base._password;\n            }\n            state = 'relative path';\n            continue;\n          }\n          break;\n\n        case 'authority first slash':\n          if (c === '/') {\n            state = 'authority second slash';\n          } else {\n            err('Expected \\'/\\', got: ' + c);\n            state = 'authority ignore slashes';\n            continue;\n          }\n          break;\n\n        case 'authority second slash':\n          state = 'authority ignore slashes';\n          if (c !== '/') {\n            err('Expected \\'/\\', got: ' + c);\n            continue;\n          }\n          break;\n\n        case 'authority ignore slashes':\n          if (c !== '/' && c !== '\\\\') {\n            state = 'authority';\n            continue;\n          } else {\n            err('Expected authority, got: ' + c);\n          }\n          break;\n\n        case 'authority':\n          if (c === '@') {\n            if (seenAt) {\n              err('@ already seen.');\n              buffer += '%40';\n            }\n            seenAt = true;\n            for (var i = 0; i < buffer.length; i++) {\n              var cp = buffer[i];\n              if (cp === '\\t' || cp === '\\n' || cp === '\\r') {\n                err('Invalid whitespace in authority.');\n                continue;\n              }\n              // XXX check URL code points\n              if (cp === ':' && this._password === null) {\n                this._password = '';\n                continue;\n              }\n              var tempC = percentEscape(cp);\n              if (this._password !== null) {\n                this._password += tempC;\n              } else {\n                this._username += tempC;\n              }\n            }\n            buffer = '';\n          } else if (c === EOF || c === '/' || c === '\\\\' ||\n                     c === '?' || c === '#') {\n            cursor -= buffer.length;\n            buffer = '';\n            state = 'host';\n            continue;\n          } else {\n            buffer += c;\n          }\n          break;\n\n        case 'file host':\n          if (c === EOF || c === '/' || c === '\\\\' || c === '?' || c === '#') {\n            if (buffer.length === 2 && ALPHA.test(buffer[0]) &&\n                (buffer[1] === ':' || buffer[1] === '|')) {\n              state = 'relative path';\n            } else if (buffer.length === 0) {\n              state = 'relative path start';\n            } else {\n              this._host = IDNAToASCII.call(this, buffer);\n              buffer = '';\n              state = 'relative path start';\n            }\n            continue;\n          } else if (c === '\\t' || c === '\\n' || c === '\\r') {\n            err('Invalid whitespace in file host.');\n          } else {\n            buffer += c;\n          }\n          break;\n\n        case 'host':\n        case 'hostname':\n          if (c === ':' && !seenBracket) {\n            // XXX host parsing\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = '';\n            state = 'port';\n            if (stateOverride === 'hostname') {\n              break loop;\n            }\n          } else if (c === EOF || c === '/' ||\n                     c === '\\\\' || c === '?' || c === '#') {\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = '';\n            state = 'relative path start';\n            if (stateOverride) {\n              break loop;\n            }\n            continue;\n          } else if (c !== '\\t' && c !== '\\n' && c !== '\\r') {\n            if (c === '[') {\n              seenBracket = true;\n            } else if (c === ']') {\n              seenBracket = false;\n            }\n            buffer += c;\n          } else {\n            err('Invalid code point in host/hostname: ' + c);\n          }\n          break;\n\n        case 'port':\n          if (/[0-9]/.test(c)) {\n            buffer += c;\n          } else if (c === EOF || c === '/' || c === '\\\\' ||\n                     c === '?' || c === '#' || stateOverride) {\n            if (buffer !== '') {\n              var temp = parseInt(buffer, 10);\n              if (temp !== relative[this._scheme]) {\n                this._port = temp + '';\n              }\n              buffer = '';\n            }\n            if (stateOverride) {\n              break loop;\n            }\n            state = 'relative path start';\n            continue;\n          } else if (c === '\\t' || c === '\\n' || c === '\\r') {\n            err('Invalid code point in port: ' + c);\n          } else {\n            invalid.call(this);\n          }\n          break;\n\n        case 'relative path start':\n          if (c === '\\\\') {\n            err('\\'\\\\\\' not allowed in path.');\n          }\n          state = 'relative path';\n          if (c !== '/' && c !== '\\\\') {\n            continue;\n          }\n          break;\n\n        case 'relative path':\n          if (c === EOF || c === '/' || c === '\\\\' ||\n              (!stateOverride && (c === '?' || c === '#'))) {\n            if (c === '\\\\') {\n              err('\\\\ not allowed in relative path.');\n            }\n            var tmp;\n            if ((tmp = relativePathDotMapping[buffer.toLowerCase()])) {\n              buffer = tmp;\n            }\n            if (buffer === '..') {\n              this._path.pop();\n              if (c !== '/' && c !== '\\\\') {\n                this._path.push('');\n              }\n            } else if (buffer === '.' && c !== '/' && c !== '\\\\') {\n              this._path.push('');\n            } else if (buffer !== '.') {\n              if (this._scheme === 'file' && this._path.length === 0 &&\n                  buffer.length === 2 && ALPHA.test(buffer[0]) &&\n                  buffer[1] === '|') {\n                buffer = buffer[0] + ':';\n              }\n              this._path.push(buffer);\n            }\n            buffer = '';\n            if (c === '?') {\n              this._query = '?';\n              state = 'query';\n            } else if (c === '#') {\n              this._fragment = '#';\n              state = 'fragment';\n            }\n          } else if (c !== '\\t' && c !== '\\n' && c !== '\\r') {\n            buffer += percentEscape(c);\n          }\n          break;\n\n        case 'query':\n          if (!stateOverride && c === '#') {\n            this._fragment = '#';\n            state = 'fragment';\n          } else if (c !== EOF && c !== '\\t' && c !== '\\n' && c !== '\\r') {\n            this._query += percentEscapeQuery(c);\n          }\n          break;\n\n        case 'fragment':\n          if (c !== EOF && c !== '\\t' && c !== '\\n' && c !== '\\r') {\n            this._fragment += c;\n          }\n          break;\n      }\n\n      cursor++;\n    }\n  }\n\n  function clear() {\n    this._scheme = '';\n    this._schemeData = '';\n    this._username = '';\n    this._password = null;\n    this._host = '';\n    this._port = '';\n    this._path = [];\n    this._query = '';\n    this._fragment = '';\n    this._isInvalid = false;\n    this._isRelative = false;\n  }\n\n  // Does not process domain names or IP addresses.\n  // Does not handle encoding for the query parameter.\n  function JURL(url, base /* , encoding */) {\n    if (base !== undefined && !(base instanceof JURL)) {\n      base = new JURL(String(base));\n    }\n\n    this._url = url;\n    clear.call(this);\n\n    var input = url.replace(/^[ \\t\\r\\n\\f]+|[ \\t\\r\\n\\f]+$/g, '');\n    // encoding = encoding || 'utf-8'\n\n    parse.call(this, input, null, base);\n  }\n\n  JURL.prototype = {\n    toString() {\n      return this.href;\n    },\n    get href() {\n      if (this._isInvalid) {\n        return this._url;\n      }\n      var authority = '';\n      if (this._username !== '' || this._password !== null) {\n        authority = this._username +\n          (this._password !== null ? ':' + this._password : '') + '@';\n      }\n\n      return this.protocol +\n          (this._isRelative ? '//' + authority + this.host : '') +\n          this.pathname + this._query + this._fragment;\n    },\n    set href(href) {\n      clear.call(this);\n      parse.call(this, href);\n    },\n\n    get protocol() {\n      return this._scheme + ':';\n    },\n    set protocol(protocol) {\n      if (this._isInvalid) {\n        return;\n      }\n      parse.call(this, protocol + ':', 'scheme start');\n    },\n\n    get host() {\n      return this._isInvalid ? '' : this._port ?\n          this._host + ':' + this._port : this._host;\n    },\n    set host(host) {\n      if (this._isInvalid || !this._isRelative) {\n        return;\n      }\n      parse.call(this, host, 'host');\n    },\n\n    get hostname() {\n      return this._host;\n    },\n    set hostname(hostname) {\n      if (this._isInvalid || !this._isRelative) {\n        return;\n      }\n      parse.call(this, hostname, 'hostname');\n    },\n\n    get port() {\n      return this._port;\n    },\n    set port(port) {\n      if (this._isInvalid || !this._isRelative) {\n        return;\n      }\n      parse.call(this, port, 'port');\n    },\n\n    get pathname() {\n      return this._isInvalid ? '' : this._isRelative ?\n          '/' + this._path.join('/') : this._schemeData;\n    },\n    set pathname(pathname) {\n      if (this._isInvalid || !this._isRelative) {\n        return;\n      }\n      this._path = [];\n      parse.call(this, pathname, 'relative path start');\n    },\n\n    get search() {\n      return this._isInvalid || !this._query || this._query === '?' ?\n          '' : this._query;\n    },\n    set search(search) {\n      if (this._isInvalid || !this._isRelative) {\n        return;\n      }\n      this._query = '?';\n      if (search[0] === '?') {\n        search = search.slice(1);\n      }\n      parse.call(this, search, 'query');\n    },\n\n    get hash() {\n      return this._isInvalid || !this._fragment || this._fragment === '#' ?\n          '' : this._fragment;\n    },\n    set hash(hash) {\n      if (this._isInvalid) {\n        return;\n      }\n      this._fragment = '#';\n      if (hash[0] === '#') {\n        hash = hash.slice(1);\n      }\n      parse.call(this, hash, 'fragment');\n    },\n\n    get origin() {\n      var host;\n      if (this._isInvalid || !this._scheme) {\n        return '';\n      }\n      // javascript: Gecko returns String(\"\"), WebKit/Blink String(\"null\")\n      // Gecko throws error for \"data://\"\n      // data: Gecko returns \"\", Blink returns \"data://\", WebKit returns \"null\"\n      // Gecko returns String(\"\") for file: mailto:\n      // WebKit/Blink returns String(\"SCHEME://\") for file: mailto:\n      switch (this._scheme) {\n        case 'data':\n        case 'file':\n        case 'javascript':\n        case 'mailto':\n          return 'null';\n      }\n      host = this.host;\n      if (!host) {\n        return '';\n      }\n      return this._scheme + '://' + host;\n    }\n  };\n\n  // Copy over the static methods\n  var OriginalURL = globalScope.URL;\n  if (OriginalURL) {\n    JURL.createObjectURL = function(blob) {\n      // IE extension allows a second optional options argument.\n      // http://msdn.microsoft.com/en-us/library/ie/hh772302(v=vs.85).aspx\n      return OriginalURL.createObjectURL.apply(OriginalURL, arguments);\n    };\n    JURL.revokeObjectURL = function(url) {\n      OriginalURL.revokeObjectURL(url);\n    };\n  }\n\n  globalScope.URL = JURL;\n})();\n\n}\n\n\n\n// WEBPACK FOOTER //\n// src/shared/compatibility.js"]},"metadata":{},"sourceType":"script"}